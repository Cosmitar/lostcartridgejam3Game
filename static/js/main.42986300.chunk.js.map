{"version":3,"sources":["scenes/MenuScene.js","libs/react-phaser-fiber/PhaserProvider.js","libs/react-phaser-fiber/components/Canvas.js","scenes/IntroScene.js","utils/constants.js","components/objects/GameObject.js","components/objects/Destroyable.js","components/objects/Moveable.js","components/objects/Fallable.js","components/objects/Boulder.js","components/objects/Character.js","components/objects/Enemy.js","components/objects/Player.js","components/objects/Wall.js","components/objects/Ground.js","components/objects/Empty.js","components/objects/Interactive.js","components/objects/Barrel.js","components/objects/Explosion.js","components/objects/Jewel.js","components/Rules.js","components/UI.js","components/levels/levelBase.js","components/LevelManager.js","components/levels/level_1.js","components/levels/level_2.js","components/levels/level_3.js","components/levels/level_4.js","components/levels/level_5.js","scenes/GameScene.js","Game.js","reportWebVitals.js","index.js"],"names":["titlesMusic","context","createContext","PhaserProvider","game","children","useState","ready","setReady","useEffect","Provider","value","Canvas","forwardRef","canvasRef","args","fallbackRef","useRef","ref","setGame","callbacks","postBoot","scene","scenes","events","once","Phaser","Scenes","Events","PRE_RENDER","s","load","on","Loader","COMPLETE","Game","current","MenuScene","this","script","image","process","spritesheet","frameWidth","frameHeight","audio","instances","PROGRESS","console","log","sceneId","props","cameras","main","fade","tweens","add","targets","volume","ease","duration","onComplete","pause","start","window","WebFont","custom","families","active","fadeIn","emit","sys","config","sound","loop","play","WAKE","UPDATE","TRANSITION_WAKE","TRANSITION_START","TRANSITION_OUT","TRANSITION_INIT","TRANSITION_COMPLETE","START","SLEEP","SHUTDOWN","RESUME","RENDER","READY","PAUSE","CREATE","BOOT","currentOption","arrow","graphics","fillStyle","color","alpha","fillTriangle","setPosition","menuOptions","label","disabled","onSelect","navigateToScene","level","forEach","o","idx","text","fontFamily","fontSize","fill","setAlpha","input","keyboard","event","newOption","key","length","Scene","IntroScene","forest","fillRect","renderer","width","height","forestText","container","dark","name","player","partner","animateIntro","bind","pan","Cameras","Scene2D","PAN_COMPLETE","shake","getByName","y","delay","x","TICK_TIME","SCALE","Math","round","innerWidth","PIXEL_NAME","EMPTY","PLAYER","GROUND","BOULDER","WALL","ENEMY","JEWEL","BARREL","EXPLOSION","INTERACTION","DIRS","DOWN","UP","LEFT","RIGHT","PIXEL_TO_TILEMAP_POSITION","data","W","N","E","S","GameObject","id","isRigid","isBreakable","isFlat","isPickable","isCrushable","power","strength","force","weight","position","alien","isMoveable","coords","className","Destroyable","inactive","el","onDestroy","Moveable","Fallable","isFalling","nextPos","destinationElement","isDestinationInBounds","getObjectAt","destinationIsEmpty","isDestinationEmpty","destinationIsCrushable","destinationInBounds","pathElement","pathClear","objectIsEmpty","restingElement","canRest","canFallDown","canRollTo","Boulder","Character","pushingDirection","neighbour","emptyPlace","canBrakeNeighbour","canMove","nothingBesides","isPositionClear","isAboutToFall","canPush","moveObject","Enemy","moveIntentDir","anchorPosition","constructor","Player","destroy","onCharacterDie","removeListener","onKeyDown","addListener","onKeyUp","repeat","includes","isMoving","playerLoop","off","die","Wall","Ground","tilemap","putTileAt","Empty","isEmpty","Interactive","onInteractWith","Barrel","onExplode","explode","Explosion","layer","map","explosion","tileWidth","tileHeight","setScale","scaleX","tileToWorldX","tileToWorldY","objects","Jewel","visible","onJewelPick","music","Level","moveables","playerTimeoutId","isPaused","phaserScene","r","c","element","boulder","sprite","setOrigin","jewel","barrel","Animations","ANIMATION_COMPLETE","enemy","addToScalables","push","onAddElement","sort","a","b","canFallLeft","canFallRight","enemiesLoop","newAnchor","nextDir","backToTrackDir","nextAnchorPos","helperDirCalc","filter","clearTimeout","canMoveUp","canMoveDown","canMoveLeft","canMoveRight","setFlipX","setTimeout","pos","origin","overrunBy","runningOver","setObjectAt","move","e","row","warn","found","i","j","obj","xInBounds","yInBounds","LEVELS","LevelBase","LevelManager","currentLevel","currentIndex","generateConfig","createMap","connectToScene","resume","levelId","textures","get","getSourceImage","levelConfig","Array","pixColor","getPixel","Display","Color","ComponentToHex","g","levelData","camera","tileset","make","addTilesetImage","createBlankLayer","depth","tile","calculateWallTileWithNeighbours","setBounds","scaleY","zoom","Rules","timer","worldTickFreq","onSceneUpdate","setUpPuseResumeGame","setUpCameraFollowPlayer","stop","levels","next","cam","getPlayerPos","smoothFactor","scrollX","scrollY","time","delta","gravityLoop","UI","alert","rockHit","deathByRockHit","levelComplete","prepareHUD","TEXT","clearText","layers","tilemapLayer","writeText","line","split","ch","textObj","displayHeight","displayWidth","list","setScrollFactor","GameScene","set","scale","scaleMode","Scale","RESIZE","handleScales","createAnimations","scalables","Map","clearScalables","clear","removeFromScalables","delete","updateScale","addEventListener","rows","anims","create","frames","generateFrameNumbers","frameRate","gameConfig","type","AUTO","backgroundColor","disableContextMenu","pixelArt","roundPixels","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","style","bottom","right","version","document","getElementById"],"mappings":"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","file":"static/js/main.42986300.chunk.js","sourcesContent":["import Phaser from 'phaser'\n\nlet titlesMusic\nexport default class MenuScene extends Phaser.Scene {\n  constructor () {\n    super('MenuScene');\n  }\n\n  preload () {\n    this.load.script('webfont', 'https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js');\n    this.load.image('main-tiles', process.env.PUBLIC_URL + '/assets/tilemaps/tilemap_20x20.png');\n    this.load.image('hud-tiles', process.env.PUBLIC_URL + '/assets/tilemaps/hud_tilemap_20x20.png');\n    this.load.image('level_1', process.env.PUBLIC_URL + '/assets/maps/level_1.png');\n    this.load.image('level_2', process.env.PUBLIC_URL + '/assets/maps/level_2.png');\n    this.load.image('level_3', process.env.PUBLIC_URL + '/assets/maps/level_3.png');\n    this.load.image('level_4', process.env.PUBLIC_URL + '/assets/maps/level_4.png');\n    this.load.image('level_5', process.env.PUBLIC_URL + '/assets/maps/level_5.png');\n    this.load.spritesheet('boulder', process.env.PUBLIC_URL + '/assets/sprites/boulder_sprite.png', { frameWidth: 26, frameHeight: 26 });\n    this.load.spritesheet('brave', process.env.PUBLIC_URL + '/assets/sprites/brave_sprite.png', { frameWidth: 26, frameHeight: 26 });\n    this.load.audio('credits', process.env.PUBLIC_URL + '/assets/audio/Score/Opening Credits_.mp3');\n    this.load.audio('levels_surface', process.env.PUBLIC_URL + '/assets/audio/Score/1st 7 Levels.mp3');\n    this.load.audio('rock_hit', process.env.PUBLIC_URL + '/assets/audio/SFX/RockHit.mp3',{\n      instances: 1\n    });\n    this.load.audio('death_by_rock', process.env.PUBLIC_URL + '/assets/audio/SFX/DeathByRock.mp3')\n    this.load.audio('level_complete', process.env.PUBLIC_URL + '/assets/audio/SFX/Level Finish.mp3')\n    this.load.on(Phaser.Loader.Events.PROGRESS, console.log)\n  }\n\n  navigateToScene(sceneId, props = {}) {\n    this.cameras.main.fade(500, 0, 0, 0)\n    this.tweens.add({  \n      targets: titlesMusic,\n      volume: 0,\n      ease: 'Linear',\n      duration: 500,\n      onComplete: () => {\n        titlesMusic.pause()\n        this.scene.start(sceneId, props)\n      },\n    });\n  }\n\n  create() {\n    window.WebFont.load({\n      custom: {\n          families: [ 'GameGirl' ]\n      },\n      active: () => {\n        this.cameras.main.fadeIn(500, 0, 0, 0)\n        this.events.emit('scene_ready', this.sys.config)\n\n        titlesMusic = this.sound.add('credits', { loop: true });\n        titlesMusic.play()\n        \n        this.events.once(Phaser.Scenes.Events.WAKE, () => console.log(Phaser.Scenes.Events.WAKE))\n        this.events.once(Phaser.Scenes.Events.UPDATE, () => console.log(Phaser.Scenes.Events.UPDATE))\n        this.events.once(Phaser.Scenes.Events.TRANSITION_WAKE, () => console.log(Phaser.Scenes.Events.TRANSITION_WAKE))\n        this.events.once(Phaser.Scenes.Events.TRANSITION_START, () => console.log(Phaser.Scenes.Events.TRANSITION_START))\n        this.events.once(Phaser.Scenes.Events.TRANSITION_OUT, () => console.log(Phaser.Scenes.Events.TRANSITION_OUT))\n        this.events.once(Phaser.Scenes.Events.TRANSITION_INIT, () => console.log(Phaser.Scenes.Events.TRANSITION_INIT))\n        this.events.once(Phaser.Scenes.Events.TRANSITION_COMPLETE, () => console.log(Phaser.Scenes.Events.TRANSITION_COMPLETE))\n        this.events.once(Phaser.Scenes.Events.START, () => console.log(Phaser.Scenes.Events.START))\n        this.events.once(Phaser.Scenes.Events.SLEEP, () => console.log(Phaser.Scenes.Events.SLEEP))\n        this.events.once(Phaser.Scenes.Events.SHUTDOWN, () => console.log(Phaser.Scenes.Events.SHUTDOWN))\n        this.events.once(Phaser.Scenes.Events.RESUME, () => console.log(Phaser.Scenes.Events.RESUME))\n        this.events.once(Phaser.Scenes.Events.RENDER, () => console.log(Phaser.Scenes.Events.RENDER))\n        this.events.once(Phaser.Scenes.Events.READY, () => console.log(Phaser.Scenes.Events.READY))\n        this.events.once(Phaser.Scenes.Events.PRE_RENDER, () => console.log(Phaser.Scenes.Events.PRE_RENDER))\n        this.events.once(Phaser.Scenes.Events.PAUSE, () => console.log(Phaser.Scenes.Events.PAUSE))\n        this.events.once(Phaser.Scenes.Events.CREATE, () => console.log(Phaser.Scenes.Events.CREATE))\n        this.events.once(Phaser.Scenes.Events.BOOT, () => console.log(Phaser.Scenes.Events.BOOT))\n\n        let currentOption = 0\n\n        const arrow = this.add.graphics({ fillStyle: { color: 0xffffff, alpha: 1 } })\n        arrow.fillTriangle(0, 0, 5, 5, 0, 10).setPosition(70, 2)\n        \n        const menuOptions = [{\n          label: 'New Game',\n          disabled: false,\n          onSelect: () => this.navigateToScene('IntroScene')\n        }, {\n          label: 'Level 1',\n          disabled: false,\n          onSelect: () => this.navigateToScene('GameScene', { level: 1 })\n        }, {\n          label: 'Level 2',\n          disabled: false,\n          onSelect: () => this.navigateToScene('GameScene', { level: 2 })\n        }, {\n          label: 'Level 3',\n          disabled: false,\n          onSelect: () => this.navigateToScene('GameScene', { level: 3 })\n        }, {\n          label: 'Level 4',\n          disabled: false,\n          onSelect: () => this.navigateToScene('GameScene', { level: 4 })\n        }, {\n          label: 'Level 5',\n          disabled: false,\n          onSelect: () => this.navigateToScene('GameScene', { level: 5 })\n        }]\n\n        menuOptions.forEach((o, idx) => {\n          this.add.text(80, 12 * idx + 1, o.label,\n            {\n              fontFamily: 'GameGirl',\n              fontSize: \"10px\",\n              fill: \"#ffffff\",\n            }\n          ).setAlpha(o.disabled ? 0.5 : 1)\n        })\n\n        this.input.keyboard.on('keydown', event => {\n          let newOption = false\n          if (event.key === 'ArrowUp') {\n            newOption = currentOption > 0 ? currentOption - 1 : menuOptions.length - 1\n          }\n          if (event.key === 'ArrowDown') {\n            newOption = currentOption < menuOptions.length - 1 ? currentOption + 1 : 0\n          }\n          if(newOption !== false) {\n            arrow.setPosition(70, (12 * newOption) + 2)\n            currentOption = newOption\n          }\n          if (event.key === 'Enter') {\n            if(!menuOptions[currentOption].disabled) {\n              menuOptions[currentOption].onSelect()\n            }\n          }\n        })\n      }\n    })\n  }\n}\n","import { useState, createContext, useEffect } from 'react'\n\nexport const context = createContext()\n\nconst PhaserProvider = ({ game, children }) => {\n  const [ready, setReady] = useState()\n  \n  // delay to let the context value to propagate before rendering children.\n  // this way children can implement usePhaser confident that objects returned are not null\n  useEffect(() => {\n    setReady(!!game)\n  }, [game])\n\n  return (\n    <context.Provider value={{ game }}>\n      {\n        ready ? children : null\n      }\n    </context.Provider>\n  )\n}\n\nexport default PhaserProvider\n","import Phaser from 'phaser'\nimport { useEffect, forwardRef, useRef, useState } from 'react'\nimport PhaserProvider from '../PhaserProvider'\n\n/**\n * Creates a new Phaser.Game with given arguments.\n * triggers functions to store game into context\n */\nconst Canvas = forwardRef(({\n  args,\n  children\n}, canvasRef) => {\n  const fallbackRef = useRef()\n  const ref = canvasRef || fallbackRef\n  const [game, setGame] = useState()\n  const [ready, setReady] = useState()\n  args.callbacks = { postBoot: game => {\n    setGame(game)\n    game.scene.scenes[0].events.once(Phaser.Scenes.Events.PRE_RENDER, s => {\n      game.scene.scenes[0].load.on(Phaser.Loader.Events.COMPLETE, () => setReady(true))\n      \n    })\n  }}\n  useEffect(() => {\n\n    const game = new Phaser.Game(args)\n    ref.current = game\n    \n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n  return ready ? <PhaserProvider game={game}>{children}</PhaserProvider> : null\n})\n\nexport default Canvas\n","import Phaser from 'phaser'\n\nexport default class IntroScene extends Phaser.Scene {\n  constructor () {\n    super('IntroScene');\n  }\n\n  preload () {\n    \n  }\n\n  create() {\n    const forest = this.add.graphics({ fillStyle: { color: 0x00ff00, alpha: 1 } })\n    forest.fillRect(0, 0, this.renderer.width * 2, this.renderer.height)\n    const forestText = this.add.text(80, 10, \"forest\",\n      {\n        fontFamily: 'GameGirl',\n        fontSize: \"10px\",\n        fill: \"#ffffff\",\n      }\n    )\n    const container = this.add.container()\n    container.add(forest)\n    container.add(forestText)\n    const ground = this.add.graphics({ fillStyle: { color: 0x654321, alpha: 1 } })\n    ground.fillRect(0, this.renderer.height - this.renderer.height * 0.3, this.renderer.width * 2, this.renderer.height * 0.3)\n    this.add.text(80, this.renderer.height - this.renderer.height * 0.3 + 10, \"ground\",\n      {\n        fontFamily: 'GameGirl',\n        fontSize: \"10px\",\n        fill: \"#ffffff\",\n      }\n    )\n\n    const dark = this.add.graphics({ fillStyle: { color: 0x000000, alpha: 1 } })\n    dark.fillRect(this.renderer.width + 100, this.renderer.height, 200, this.renderer.height * 0.3)\n    dark.name = 'dark'\n\n    const player = this.add.graphics({ fillStyle: { color: 0xb75331, alpha: 1 } })\n    player.fillRect(this.renderer.width, this.renderer.height - this.renderer.height * 0.3 - 50, 50, 50)\n    player.name = 'player'\n\n    const partner = this.add.graphics({ fillStyle: { color: 0xdab263, alpha: 1 } })\n    partner.fillRect(this.renderer.width + 200, this.renderer.height - this.renderer.height * 0.3 - 50, 50, 50)\n    partner.name = 'partner'\n    \n    this.cameras.main.fadeIn(1000, 0, 0, 0)\n    this.cameras.main.once('camerafadeincomplete', this.animateIntro.bind(this))\n  }\n\n  animateIntro() {\n\n    this.cameras.main.pan(this.renderer.width, this.renderer.height/2, 2000, 'Sine.easeInOut');\n    this.cameras.main.once(Phaser.Cameras.Scene2D.Events.PAN_COMPLETE, () => {\n      this.cameras.main.shake(2000, 0.02)\n      this.tweens.add({\n        targets: this.children.getByName('dark'),\n        y: -this.renderer.height * 0.3,\n        duration: 2000\n      })\n      this.tweens.add({\n        targets: this.children.getByName('partner'),\n        y: this.renderer.height,\n        delay: 2000,\n        duration: 2000,\n        ease: 'Sine.in'\n      })\n      this.tweens.add({\n        targets: this.children.getByName('player'),\n        y: this.renderer.height,\n        x: {\n          value: this.children.getByName('player').x + 150,\n          duration: 1000,\n          ease: 'Cubic.easeOut',\n        },\n        delay: 4000,\n        duration: 2000,\n        ease: 'Back.easeInOut',\n        onComplete: () => {\n          this.cameras.main.fade(1000, 0, 0, 0)\n          this.cameras.main.once('camerafadeoutcomplete', () => void this.scene.start('GameScene', { level: 1}))\n        }\n      })\n\n    })\n  }\n}\n","export const TICK_TIME = 250\nexport const PLAYER_TICK_TIME = TICK_TIME - 25\nexport const TILE_SIZE = 20\nexport const TILES_BY_SCREEN = 20\n\nexport const SCALE = Math.round((window.innerWidth/TILES_BY_SCREEN * 100 / TILE_SIZE/100)*100)/100\n\nexport const PIXEL_NAME = {\n  EMPTY: '000000',\n  PLAYER: 'ff00ff',\n  GROUND: '663300',\n  BOULDER: '999999',\n  WALL: '0000ff',\n  ENEMY: 'ff0000',\n  JEWEL: 'ffff00',\n  BARREL: '00ffff',\n  EXPLOSION: 'ffffff',\n  INTERACTION: '00ff00'\n}\n\nexport const DIRS = {\n  DOWN: 'ArrowDown',\n  UP: 'ArrowUp',\n  LEFT: 'ArrowLeft',\n  RIGHT: 'ArrowRight',\n}\n\nexport const PIXEL_TO_TILEMAP_POSITION = {\n  [PIXEL_NAME.EMPTY]: 0,\n  [PIXEL_NAME.WALL]: 1,\n  [PIXEL_NAME.GROUND]: 2,\n  calculateWallTileWithNeighbours: (x, y, data) => {\n    const W = (data[x]||[])[y-1] === PIXEL_NAME.WALL ? 'W' : '-'\n    const N = (data[x-1]||[])[y] === PIXEL_NAME.WALL ? 'N' : '-'\n    const E = (data[x]||[])[y+1] === PIXEL_NAME.WALL ? 'E' : '-'\n    const S = (data[x+1]||[])[y] === PIXEL_NAME.WALL ? 'S' : '-'\n    switch(`${N}${E}${S}${W}`) {\n      case '----':\n        default:\n        return 11\n      case 'NESW':\n        return 12\n      case 'N---':\n        return 13\n      case '-E--':\n        return 14\n      case '--S-':\n        return 15\n      case '---W':\n        return 16\n      case 'NE--':\n        return 17\n      case '-ES-':\n        return 18\n      case '--SW':\n        return 19\n      case 'N--W':\n        return 20\n      case 'NES-':\n        return 22\n      case '-ESW':\n        return 23\n      case 'N-SW':\n        return 24\n      case 'NE-W':\n        return 25\n      case 'N-S-':\n        return 27\n      case '-E-W':\n        return 26\n    }\n  }\n}","export default class GameObject {\n  constructor({ id, isRigid, isBreakable, isFlat, isPickable, isCrushable, level }) {\n    this.id = id\n    // can't be moved nor affected by gravity\n    // wall, ground\n    this.isRigid = isRigid\n\n    // destroyable under circumstances like explosions\n    // ground, boulder, diamond\n    this.isBreakable = isBreakable\n\n    // rounded objects (like boulders and diamonds) above remain still\n    // character, ground, wall\n    this.isFlat = isFlat\n\n    // can be collected by characters\n    // diamond\n    this.isPickable = isPickable\n\n    // crush under pression\n    // character, enemies, dynamite, barrel\n    this.isCrushable = isCrushable\n\n    // energy to break things\n    this.power = 0\n\n    // how resistant to brake it is\n    this.strength = 0\n\n    // how hard can push\n    this.force = 0\n\n    // how much force can resist before move\n    this.weight = 0\n\n    this.level = level\n\n    this.position = null\n    this.alien = null\n    this.isMoveable = !this.isRigid\n  }\n\n  setPosition(coords) {\n    this.position = coords\n  }\n\n  canMove() {\n    return this.isMoveable\n  }\n  overrunBy(){}\n  runningOver(){}\n  canFallDown() { return false }\n  canFallLeft() { return false }\n  canFallRight() { return false }\n  \n}\n\nGameObject.className = 'GameObject'\n","import GameObject from './GameObject'\n\nexport default class Destroyable extends GameObject {\n  constructor(props) {\n    super(props)\n    this.inactive = false\n  }\n  overrunBy(el) {\n    if(el.power > this.strength) {\n      this.level.onDestroy(this)\n      this.inactive = true\n    }\n  }\n}\n\nDestroyable.className = 'Destroyable'\n","import Destroyable from './Destroyable'\n\nexport default class Moveable extends Destroyable {\n  move({ x, y }) {\n    super.setPosition({ x, y})\n    // this.isMoving = false\n  }\n}\n\nMoveable.className = 'Moveable'\n","import Moveable from './Moveable'\n\nexport default class Fallable extends Moveable {\n  constructor(props) {\n    super(props)\n    this.isFalling = 0 // increment on each loop that the element is falling\n  }\n\n  canFallDown() {\n    const nextPos = { x: this.position.x, y: this.position.y + 1 }\n    const destinationInBounds = this.level.isDestinationInBounds(nextPos.x, nextPos.y)\n    const destinationElement = destinationInBounds && this.level.getObjectAt(nextPos.x, nextPos.y)\n    const destinationIsEmpty = this.level.isDestinationEmpty(nextPos.x, nextPos.y)\n    const destinationIsCrushable = destinationElement.isCrushable && this.isFalling\n    const canFall = destinationIsEmpty || destinationIsCrushable\n\n    return canFall\n  }\n  canRollTo(x, y) {\n    const nextPos = { x, y }\n    const destinationInBounds = this.level.isDestinationInBounds(nextPos.x, nextPos.y)\n    const pathElement = destinationInBounds && this.level.getObjectAt(nextPos.x, this.position.y)\n    const pathClear = destinationInBounds && this.level.objectIsEmpty(pathElement)\n    const destinationElement = destinationInBounds && this.level.getObjectAt(nextPos.x, nextPos.y)\n    const destinationIsEmpty = this.level.objectIsEmpty(destinationElement)\n    const restingElement = destinationInBounds && this.level.getObjectAt(this.position.x, this.position.y + 1)\n    const canRest = !this.level.isDestinationEmpty(this.position.x, this.position.y + 1) && restingElement.isFlat\n    const canRoll = destinationInBounds && destinationIsEmpty && pathClear && !canRest && restingElement && !restingElement.isFalling\n    \n    return canRoll\n  }\n  canFallRight() {\n    return !this.canFallDown() && this.canRollTo(this.position.x + 1, this.position.y + 1)\n  }\n  canFallLeft() {\n    return !this.canFallDown() && this.canRollTo(this.position.x - 1, this.position.y + 1)\n  }\n}\n\nFallable.className = 'Fallable'\n","import Fallable from './Fallable'\n\nexport default class Boulder extends Fallable {\n  constructor(id, level) {\n    super({\n      id,\n      isRigid: false,\n      isBreakable: true,\n      isFlat: false,\n      isPickable: false,\n      isCrushable: false,\n      level\n    })\n    this.strength = 5\n  }\n}\nBoulder.className = 'Boulder'\n","import Moveable from './Moveable'\nimport { DIRS } from '../../utils/constants'\n\nexport default class Character extends Moveable {\n  constructor(id, level) {\n    super({\n      id,\n      isRigid: false,\n      isBreakable: true,\n      isFlat: true,\n      isPickable: false,\n      isCrushable: true,\n      level\n    })\n    this.pushingDirection = null\n  }\n  \n  canMove(x, y) {\n    const neighbour = this.level.getObjectAt(x, y)\n    const emptyPlace = this.level.objectIsEmpty(neighbour)\n    const canBrakeNeighbour = neighbour?.isBreakable && this.power >= neighbour.strength\n    return emptyPlace || canBrakeNeighbour || neighbour.isPickable ? neighbour : false\n  }\n\n  canMoveUp() {\n    return this.canMove(this.position.x, this.position.y - 1)\n  }\n  canMoveDown() {\n    return this.canMove(this.position.x, this.position.y + 1)\n  }\n  canMoveLeft() {\n    const neighbour = this.level.getObjectAt(this.position.x - 1, this.position.y)\n    const nothingBesides = this.level.isPositionClear(this.position.x - 2, this.position.y)\n    const isAboutToFall = this.level.isPositionClear(this.position.x - 1, this.position.y + 1)\n    const canPush = neighbour?.isMoveable && nothingBesides && !isAboutToFall\n\n    let canMove = this.canMove(this.position.x - 1, this.position.y)\n    if(!canMove && canPush) {\n      if(this.pushingDirection === DIRS.LEFT) {\n        canMove = true\n        this.level.moveObject(neighbour, { x: this.position.x - 2, y: this.position.y })\n        // clears pushing dir to let a new loop to push again\n        this.pushingDirection = ''\n      } else {\n        this.pushingDirection = DIRS.LEFT\n      }\n    }\n    return canMove\n  }\n  canMoveRight() {\n    const neighbour = this.level.getObjectAt(this.position.x + 1, this.position.y)\n    const nothingBesides = this.level.isPositionClear(this.position.x + 2, this.position.y)\n    const isAboutToFall = this.level.isPositionClear(this.position.x + 1, this.position.y + 1)\n    const canPush = neighbour?.isMoveable && nothingBesides && !isAboutToFall\n\n    let canMove = this.canMove(this.position.x + 1, this.position.y)\n    if(!canMove && canPush) {\n      if(this.pushingDirection === DIRS.RIGHT) {\n        canMove = true\n        this.level.moveObject(neighbour, { x: this.position.x + 2, y: this.position.y })\n        // clears pushing dir to let a new loop to push again\n        this.pushingDirection = ''\n      } else {\n        this.pushingDirection = DIRS.RIGHT\n      }\n    }\n    return canMove\n  }\n}\n\nCharacter.className = 'Character'\n","import Character from './Character'\nimport Player from './Player'\nimport { DIRS } from '../../utils/constants'\n\nexport default class Enemy extends  Character {\n  constructor(id, level) {\n    super(id, level)\n    this.moveIntentDir = DIRS.UP\n    this.anchorPosition = null\n  }\n  overrunBy(el) {\n    if(el.constructor.className !== Player.className) {\n      // this.alien.visible = false\n      // this.alien.alpha = 0.5\n      this.alien?.destroy()\n      this.level.onCharacterDie(this)\n    }\n  }\n}\n\nEnemy.className = 'Enemy'\n","import Character from './Character'\nimport Enemy from './Enemy'\nimport { DIRS } from '../../utils/constants'\nimport Boulder from './Boulder'\n\nexport default class Player extends Character {\n  constructor(id, level) {\n    super(id, level)\n    this.power = 0.5\n    this.moveIntentDir = ''\n\n    const scene = level.scene\n    scene.input.keyboard.removeListener('keydown', this.onKeyDown.bind(this))\n    scene.input.keyboard.addListener('keydown', this.onKeyDown.bind(this))\n\n    scene.input.keyboard.removeListener('keyup', this.onKeyUp.bind(this))\n    scene.input.keyboard.addListener('keyup', this.onKeyUp.bind(this))\n  }\n  onKeyUp(event) {\n    if (this.moveIntentDir === event.key) {\n      this.moveIntentDir = ''\n      this.pushingDirection = null\n    }\n  }\n  onKeyDown(event) {\n    if(!event.repeat && [DIRS.UP, DIRS.DOWN, DIRS.LEFT, DIRS.RIGHT].includes(event.key)) {\n      this.moveIntentDir = event.key;\n      // calls loop to avoid delay between key press and visual movement at the begining of next loop\n      if(!this.isMoving) {\n        this.level.playerLoop()\n      }\n    }\n  }\n  destroy() {\n    const scene = this.level.scene\n    // animate die\n    scene.input.keyboard.off('keydown')\n    scene.input.keyboard.off('keyup')\n  }\n\n  die() {\n    this.inactive = true\n    this.alien.alpha = 0.5\n    this.destroy()\n  }\n\n  overrunBy(el) {\n    if (el.constructor.className === Boulder.className) {\n      this.level.scene.events.emit('sounds:death_by_rock_hit')\n    }\n    this.die()\n  }\n  runningOver(el) {\n    if(el.constructor.className === Enemy.className) {\n      this.die()\n    }\n  }\n}\n\nPlayer.className = 'Player'\n","import GameObject from './GameObject'\n\nexport default class Wall extends GameObject {\n  constructor(id, level) {\n    super({\n      id,\n      isRigid: true,\n      isBreakable: false,\n      isFlat: true,\n      isPickable: false,\n      isCrushable: false,\n      level\n    })\n  }\n}\n\nWall.className = 'Wall'\n","import { PIXEL_TO_TILEMAP_POSITION, PIXEL_NAME } from '../../utils/constants'\nimport Destroyable from './Destroyable'\n\nexport default class Ground extends Destroyable {\n  constructor(id, level) {\n    super({\n      id,\n      isRigid: true,\n      isBreakable: true,\n      isFlat: true,\n      isPickable: false,\n      isCrushable: false,\n      level\n    })\n    this.strength = 1\n  }\n\n  overrunBy(el) {\n    super.overrunBy(el)\n    // assume is player who overruns ground\n    const layer = this.level.scene.children.getByName('layer_1')\n    const { tilemap: map } = layer\n    map.putTileAt(PIXEL_TO_TILEMAP_POSITION[PIXEL_NAME.EMPTY], this.position.x, this.position.y)\n  }\n}\n\nGround.className = 'Ground'\n","export default class Empty {\n  constructor(id, level) {\n    this.id = id\n    this.level = level\n    this.isEmpty = true\n  }\n  setPosition(coords) {\n    this.position = coords\n  }\n}\n\nEmpty.className = 'Empty'\n","import Empty from './Empty'\nimport Player from './Player'\n\nexport default class Interactive extends Empty {\n  overrunBy(el) {\n    console.log('Interactive overrunBy el', el)\n    if (el.constructor.className === Player.className) {\n      this.level.onInteractWith(this)\n    }\n  }\n}\n\nInteractive.className = 'Interactive'\n","import Fallable from './Fallable'\n\nexport default class Barrel extends Fallable {\n  constructor(id, level) {\n    super({\n      id,\n      isRigid: false,\n      isBreakable: true,\n      isFlat: true,\n      isPickable: false,\n      isCrushable: true,\n      level\n    })\n  }\n  explode() {\n    // this.alien.alpha = 0.5\n    this.alien.destroy()\n    this.level.onExplode(this)\n  }\n  overrunBy(el) {\n    this.explode()\n  }\n}\nBarrel.className = 'Barrel'\n\n","import GameObject from './GameObject'\nimport Empty from './Empty'\nimport { PIXEL_NAME, TICK_TIME } from '../../utils/constants'\n\nexport default class Explosion extends GameObject {\n  constructor(id, level) {\n    super({\n      id,\n      isRigid: false,\n      isBreakable: true,\n      isFlat: true,\n      isPickable: false,\n      isCrushable: true,\n      level\n    })\n    this.power = 10\n  }\n  setPosition(x, y) {\n    this.position = { x, y }\n    \n    const layer = this.level.scene.children.getByName('layer_1')\n    const { tilemap: map } = layer\n    const explosion = this.level.scene.add.graphics({ fillStyle: { color: 0xff0000, alpha: 1 } })\n    explosion.fillRect(0, 0, map.tileWidth, map.tileHeight)\n    explosion.setScale(layer.scaleX)\n\n    explosion.x = map.tileToWorldX(x)\n    explosion.y = map.tileToWorldY(y)\n\n    this.level.scene.tweens.add({\n      targets: explosion,\n      alpha: 0,\n      duration: TICK_TIME,\n      onComplete: () => {\n        explosion.destroy()\n        this.level.objects[y][x] = new Empty(PIXEL_NAME.EMPTY, this.level)\n      }\n    });\n    \n    this.alien = explosion\n    \n  }\n}\n\nExplosion.className = 'Explosion'\n","import Fallable from './Fallable'\nimport Player from './Player'\n\nexport default class Jewel extends Fallable {\n  constructor(id, level) {\n    super({\n      id,\n      isRigid: false,\n      isBreakable: true,\n      isFlat: false,\n      isPickable: true,\n      isCrushable: false,\n      level\n    })\n    this.strength = 4\n  }\n  overrunBy(el) {\n    if(el.constructor.className === Player.className) {\n      this.alien.visible = false\n      // this.alien.alpha = 0.5\n      this.level.onJewelPick(this)\n    } else {\n      super.overrunBy(el)\n    }\n  }\n}\n\nJewel.className = 'Jewel'\n","import Phaser from 'phaser'\nimport { TICK_TIME } from '../utils/constants'\n\nlet music\nexport default class Rules {\n  constructor(scene) {\n    this.scene = scene\n    console.log('NEW RULES')\n    // gravity loop\n    this.timer = 0\n    this.worldTickFreq = TICK_TIME\n    scene.events.removeListener(this.onSceneUpdate)\n    scene.events.addListener(Phaser.Scenes.Events.UPDATE, this.onSceneUpdate.bind(this))\n\n    this.setUpPuseResumeGame()\n    this.setUpCameraFollowPlayer()\n    // scene.events.off('levelcompleted')\n    scene.events.once('levelcompleted', () => {\n      scene.events.emit('sounds:level_complete')\n      scene.tweens.add({\n        targets: music,\n        volume: 1,\n        ease: 'Linear',\n        duration: 500,\n        onComplete: () => {\n          music.stop()\n        },\n      });\n      scene.cameras.main.fade(3000, 0, 0)\n      scene.cameras.main.once('camerafadeoutcomplete', () => {\n        scene.levels.next()\n        scene.cameras.main.fadeIn(1000, 0, 0)\n      })\n    })\n    scene.events.off('levelstart')\n    scene.events.on('levelstart', () => {\n      console.log('READY TO PLAY')\n      music = scene.sound.add('levels_surface')\n      music.play()\n      music.volume = 0\n      scene.tweens.add({  \n        targets: music,\n        volume: 1,\n        ease: 'Linear',\n        duration: 500,\n        // onComplete: () => {\n        //   titlesMusic.pause()\n        //   scene.start(sceneId, props)\n        // },\n      });\n    })\n  }\n\n  setUpCameraFollowPlayer() {\n    this.scene.events.addListener(Phaser.Scenes.Events.UPDATE, () => {\n      const cam = this.scene.cameras.main\n      const layer = this.scene.children.getByName('layer_1')\n      const { tilemap: map } = layer\n      const {x, y} = this.scene.levels.current.getPlayerPos()\n      if (cam && map) {\n        var smoothFactor = 0.9;\n  \n        cam.scrollX = smoothFactor * cam.scrollX + (1 - smoothFactor) * (map.tileToWorldX(x) - cam.width * 0.5);\n        cam.scrollY = smoothFactor * cam.scrollY + (1 - smoothFactor) * (map.tileToWorldY(y) - cam.height * 0.5);\n      }\n    })\n  }\n\n  setUpPuseResumeGame() {\n    this.scene.input.keyboard.removeListener('keydown', this.onKeyDown.bind(this))\n    this.scene.input.keyboard.addListener('keydown', this.onKeyDown.bind(this))\n  }\n  onKeyDown(event) {\n    const pauseGame = () => {\n      this.scene.levels.current.pause()\n      this.scene.events.emit('game_paused')\n    }\n    const resumeGame = () => {\n      this.scene.levels.current.resume()\n      this.scene.events.emit('game_resumed')\n    }\n    if(event.key === 'Escape') {\n      const action = this.scene.levels.current.isPaused ? resumeGame : pauseGame\n      action()\n    }\n  }\n\n  onSceneUpdate(time, delta) {\n    this.timer += delta\n    if (this.timer >= this.worldTickFreq) {\n      while (this.timer > this.worldTickFreq) {\n          this.timer -= this.worldTickFreq\n      }\n      this.scene.levels.current.gravityLoop()\n    }\n  }\n}\n","import { SCALE } from '../utils/constants'\n\nlet map\nexport default class UI {\n  constructor(scene) {\n    this.scene = scene\n    this.scene.events.off('game_paused')\n    this.scene.events.on('game_paused', () => alert('Game paused, press ESC to resume'))\n    this.scene.events.off('game_resumed')\n    this.scene.events.on('game_resumed', () => alert('Game resumes now'))\n\n    const rockHit = this.scene.sound.add('rock_hit')\n    this.scene.events.off('sounds:rock_hit')\n    this.scene.events.on('sounds:rock_hit', () => rockHit.play())\n\n    const deathByRockHit = this.scene.sound.add('death_by_rock')\n    // this.scene.events.off('sounds:death_by_rock_hit')\n    this.scene.events.once('sounds:death_by_rock_hit', () => deathByRockHit.play())\n\n    const levelComplete = this.scene.sound.add('level_complete')\n    // this.scene.events.off('sounds:level_complete')\n    this.scene.events.once('sounds:level_complete', () => levelComplete.play())\n    this.prepareHUD()\n\n    this.scene.events.on('dialogue:show', TEXT => {\n      this.scene.levels.current.pause()\n      this.clearText()\n      this.scene.tweens.add({\n        targets: map.layers[0].tilemapLayer,\n        y: 0,\n        duration: 500,\n        ease: 'Cubic.Out',\n        onComplete: () => {\n          this.writeText(TEXT)\n          this.scene.input.keyboard.on('keydown', (event) => {\n            if(event.key === 'Enter') {\n              this.scene.events.emit('dialogue:hide')\n            }\n          })\n        }\n      })\n    })\n    this.scene.events.on('dialogue:hide', () => {\n      this.clearText()\n      this.scene.tweens.add({\n        targets: map.layers[0].tilemapLayer,\n        y: -this.scene.renderer.height/2,\n        duration: 500,\n        ease: 'Back.In',\n        onComplete: () => {\n          this.scene.levels.current.resume()\n        }\n      })\n    })\n    \n  }\n\n  writeText(text) {\n    text.forEach((line, row) => {\n      line.split('').forEach((ch, idx) => {\n        const textObj = this.scene.add.text(\n          map.tileToWorldX(4 + idx) - (idx * 10 * SCALE),\n          map.tileToWorldY(1 + row) - (row * 8 * SCALE) - 5 * SCALE, ch,\n          {\n            fontFamily: 'GameGirl',\n            fontSize: \"90px\",\n            fill: \"#ffffff\",\n          }\n        )\n        textObj.displayHeight = 10 * SCALE\n        textObj.displayWidth = 10 * SCALE\n        textObj.name = 'text_to_remove'\n        textObj.depth = 10\n      })\n    })\n  }\n\n  clearText() {\n    this.scene.children.list.filter(el => el.name === 'text_to_remove').forEach(el => el.destroy())\n  }\n\n  prepareHUD() {\n    // Creating a blank tilemap with dimensions matching the dungeon\n    map = this.scene.make.tilemap({ tileWidth: 20, tileHeight: 20, width: 20, height: 20 });\n\n    // addTilesetImage: function (tilesetName, key, tileWidth, tileHeight, tileMargin, tileSpacing, gid)\n    let tileset = map.addTilesetImage('hud-tiles', 'hud-tiles', 20, 20, 1, 2);\n\n    let layer = map.createBlankLayer('layer_hud', tileset);\n    layer.name = 'layer_hud'\n    layer.depth = 5\n    layer.setScrollFactor(0)\n\n    layer.setScale(SCALE)\n\n    layer.y = -this.scene.renderer.height/2\n\n    // Fill with black tiles\n    // layer.fill(1)\n\n    /// TN LEFT\n    map.putTileAt(0, 0, 0)\n    map.putTileAt(1, 1, 0)\n    map.putTileAt(2, 2, 0)\n\n    map.putTileAt(11, 0, 1)\n    map.putTileAt(12, 1, 1)\n    map.putTileAt(13, 2, 1)\n    \n    map.putTileAt(22, 0, 2)\n    map.putTileAt(23, 1, 2)\n    map.putTileAt(24, 2, 2)\n\n    /// TN RIGHT\n    map.putTileAt(0, 17, 0)\n    map.putTileAt(1, 18, 0)\n    map.putTileAt(2, 19, 0)\n\n    map.putTileAt(11, 17, 1)\n    map.putTileAt(12, 18, 1)\n    map.putTileAt(13, 19, 1)\n    \n    map.putTileAt(22, 17, 2)\n    map.putTileAt(23, 18, 2)\n    map.putTileAt(24, 19, 2)\n\n    // DIALOG AREA\n    map.putTileAt(0, 3, 0)\n    map.putTileAt(1, 4, 0)\n    map.putTileAt(1, 5, 0)\n    map.putTileAt(1, 6, 0)\n    map.putTileAt(1, 7, 0)\n    map.putTileAt(1, 8, 0)\n    map.putTileAt(1, 9, 0)\n    map.putTileAt(1, 10, 0)\n    map.putTileAt(1, 11, 0)\n    map.putTileAt(1, 12, 0)\n    map.putTileAt(1, 13, 0)\n    map.putTileAt(1, 14, 0)\n    map.putTileAt(1, 15, 0)\n    map.putTileAt(2, 16, 0)\n\n    map.putTileAt(11, 3, 1)\n    map.putTileAt(12, 4, 1)\n    map.putTileAt(12, 5, 1)\n    map.putTileAt(12, 6, 1)\n    map.putTileAt(12, 7, 1)\n    map.putTileAt(12, 8, 1)\n    map.putTileAt(12, 9, 1)\n    map.putTileAt(12, 10, 1)\n    map.putTileAt(12, 11, 1)\n    map.putTileAt(12, 12, 1)\n    map.putTileAt(12, 13, 1)\n    map.putTileAt(12, 14, 1)\n    map.putTileAt(12, 15, 1)\n    map.putTileAt(13, 16, 1)\n\n    map.putTileAt(11, 3, 2)\n    map.putTileAt(12, 4, 2)\n    map.putTileAt(12, 5, 2)\n    map.putTileAt(12, 6, 2)\n    map.putTileAt(12, 7, 2)\n    map.putTileAt(12, 8, 2)\n    map.putTileAt(12, 9, 2)\n    map.putTileAt(12, 10, 2)\n    map.putTileAt(12, 11, 2)\n    map.putTileAt(12, 12, 2)\n    map.putTileAt(12, 13, 2)\n    map.putTileAt(12, 14, 2)\n    map.putTileAt(12, 15, 2)\n    map.putTileAt(13, 16, 2)\n    \n    map.putTileAt(22, 3, 3)\n    map.putTileAt(23, 4, 3)\n    map.putTileAt(23, 5, 3)\n    map.putTileAt(23, 6, 3)\n    map.putTileAt(23, 7, 3)\n    map.putTileAt(23, 8, 3)\n    map.putTileAt(23, 9, 3)\n    map.putTileAt(23, 10, 3)\n    map.putTileAt(23, 11, 3)\n    map.putTileAt(23, 12, 3)\n    map.putTileAt(23, 13, 3)\n    map.putTileAt(23, 14, 3)\n    map.putTileAt(23, 15, 3)\n    map.putTileAt(24, 16, 3)\n  }\n}","import Phaser from 'phaser'\nimport { TICK_TIME, PLAYER_TICK_TIME, PIXEL_NAME, DIRS, PIXEL_TO_TILEMAP_POSITION } from \"../../utils/constants\"\nimport {\n  Player,\n  Boulder,\n  Wall,\n  Empty,\n  Ground,\n  Barrel,\n  Enemy,\n  Interactive,\n  Jewel,\n  Explosion,\n} from '../objects'\n\nclass Level {\n  constructor(config) {\n    this.config = config\n    this.moveables = []\n    this.objects = []\n    this.scene = null\n    this.player = null\n    this.playerTimeoutId = 0\n    this.isPaused = false\n  }\n\n  connectToScene(phaserScene) {\n    this.scene = phaserScene\n    const layer = this.scene.children.getByName('layer_1')\n    const { tilemap: map } = layer\n    \n\n    this.objects = this.config.map((r, y) => r.map((c, x) => {\n      // factory\n      let element\n      switch(c) {\n        case PIXEL_NAME.WALL:\n          element = new Wall(c, this)\n          element.setPosition({ x, y })\n          break;\n        case PIXEL_NAME.GROUND:\n          element = new Ground(c, this)\n          element.setPosition({ x, y })\n          break;\n        case PIXEL_NAME.BOULDER:\n          const boulder = this.scene.add.sprite(48, 16).setOrigin(0, 0.25).play('boulder_idle')\n          boulder.setScale(layer.scaleX)\n          boulder.x = map.tileToWorldX(x)\n          boulder.y = map.tileToWorldY(y)\n          \n          element = new Boulder(c, this)\n          element.alien = boulder\n          break;\n        case PIXEL_NAME.JEWEL:\n          const jewel = this.scene.add.graphics({ fillStyle: { color: 0xffff00, alpha: 1 } })\n          jewel.setScale(layer.scaleX)\n          // jewel.fillRect(0, 0, map.tileWidth * layer.scaleX, map.tileHeight * layer.scaleY)\n          jewel.fillRect(0, 0, map.tileWidth, map.tileHeight)\n\n          jewel.x = map.tileToWorldX(x)\n          jewel.y = map.tileToWorldY(y)\n          \n          element = new Jewel(c, this)\n          element.alien = jewel\n          break;\n        case PIXEL_NAME.BARREL:\n          const barrel = this.scene.add.graphics({ fillStyle: { color: 0x663300, alpha: 1 } })\n          barrel.setScale(layer.scaleX)\n          // barrel.fillRect(0, 0, map.tileWidth * layer.scaleX, map.tileHeight * layer.scaleY)\n          barrel.fillRect(0, 0, map.tileWidth, map.tileHeight)\n\n          barrel.x = map.tileToWorldX(x)\n          barrel.y = map.tileToWorldY(y)\n          \n          element = new Barrel(c, this)\n          element.alien = barrel\n          break;\n        case PIXEL_NAME.PLAYER:\n          const player = this.scene.add.sprite(48, 16).setOrigin(0, 0.25).play('brave_idle')\n          player.setScale(layer.scaleX)\n          player.x = map.tileToWorldX(x)\n          player.y = map.tileToWorldY(y)\n\n          player.name = 'brave'\n          player.on(Phaser.Animations.Events.ANIMATION_COMPLETE, () => {\n            if(!player.isMoving) {\n              // player.play('brave_idle')\n            }\n          })\n\n          element = new Player(c, this)\n          element.alien = player\n\n          // add shortcut reference\n          this.player = element\n          break;\n        case PIXEL_NAME.ENEMY:\n          const enemy = this.scene.add.graphics({ fillStyle: { color: 0xff0000, alpha: 1 } })\n          enemy.fillRect(0, 0, map.tileWidth, map.tileHeight)\n          enemy.setScale(layer.scaleX)\n          this.scene.addToScalables(enemy, { x, y })\n          enemy.x = map.tileToWorldX(x)\n          enemy.y = map.tileToWorldY(y)\n          element = new Enemy(c, this)\n          element.alien = enemy\n          break;\n        case PIXEL_NAME.INTERACTION:\n          element = new Interactive(c, this)\n          break;\n        default:\n          element = new Empty(c, this);\n\n      }\n      element.setPosition({ x, y })\n      if (!this.objectIsEmpty(element) && !element.isRigid) {\n        // enters backward to start evaluating lower elements into gravityLoop\n        // this.moveables.unshift(element)\n        this.moveables.push(element)\n      }\n      this.onAddElement(element)\n      return element\n    }))\n  }\n\n  gravityLoop() {\n    if (this.isPaused) { return }\n    this.moveables.sort((a, b) => a.position.y - b.position.y).forEach(el => {\n      const canFallDown = el.canFallDown()\n      const canFallLeft = el.canFallLeft()\n      const canFallRight = el.canFallRight()\n      let nextPos\n      if(canFallDown) {\n        nextPos = { x: el.position.x, y: el.position.y + 1 }\n      }\n      if (!canFallDown && canFallLeft) {\n        nextPos = { x: el.position.x - 1, y: el.position.y}\n        if(el.isFalling) {\n          nextPos.y ++\n        }\n      }\n      if (!canFallDown && !canFallLeft && canFallRight) {\n        nextPos = { x: el.position.x + 1, y: el.position.y}\n        if(el.isFalling) {\n          nextPos.y ++\n        }\n      }\n\n      if (nextPos) {\n        this.moveObject(el, nextPos)\n        if (el.isFalling && (canFallLeft || canFallRight) && el.constructor.className === Boulder.className && this.player.pushingDirection !== '') {\n          this.scene.events.emit('sounds:rock_hit')\n        }\n        el.isFalling++\n      } else {\n        if (el.isFalling && el.constructor.className === Boulder.className) {\n          this.scene.events.emit('sounds:rock_hit')\n        }\n        if(el.isFalling && el.constructor.className === Barrel.className) {\n          el.explode()\n        }\n        el.isFalling = 0\n      }\n    })\n\n    this.enemiesLoop()\n  }\n  enemiesLoop() {\n\n    if(this.isPaused) { return }\n    let nextPos, neighbour, isDestinationEmpty, isPerpToAnchor, newAnchor, nextDir, backToTrackDir, nextAnchorPos\n    \n    const helperDirCalc = (enemy, nextPos, nextDir, backToTrackDir, nextAnchorPos) => {\n      neighbour = this.getObjectAt(nextPos.x, nextPos.y)\n      isDestinationEmpty = this.objectIsEmpty(neighbour) || neighbour?.constructor.className === Player.className // this.isDestinationEmpty(nextPos.x, nextPos.y)\n      if (!isDestinationEmpty && !enemy.anchorPosition) {\n        enemy.anchorPosition = neighbour.position\n        // counter clockwise\n        enemy.moveIntentDir = nextDir\n      }\n      if (isDestinationEmpty && neighbour.constructor.className === Player.className) {\n        this.moveObject(enemy, nextPos)\n      }\n      if (isDestinationEmpty) {\n        if (!enemy.anchorPosition) {\n          enemy.moveIntentDir = nextDir\n          return\n        }\n        isPerpToAnchor = enemy.position.x === enemy.anchorPosition.x || enemy.position.y === enemy.anchorPosition.y\n        // scenario 1: enemy is perpendicular to anchor\n        if (isPerpToAnchor) {\n          // updates anchor counter clockwise\n          newAnchor = this.getObjectAt(nextAnchorPos.x, nextAnchorPos.y)\n          if (!this.objectIsEmpty(newAnchor) && newAnchor?.constructor.className !== Player.className) {\n            enemy.anchorPosition = newAnchor.position\n          } else {\n            enemy.moveIntentDir = backToTrackDir\n          }\n        }\n        this.moveObject(enemy, nextPos)\n      } else {\n        enemy.anchorPosition = neighbour.position\n        enemy.moveIntentDir = nextDir\n      }\n    }\n    this.moveables\n    .filter(el => el.constructor.className === Enemy.className)\n    .forEach(enemy => {\n      // potential path finding mechanism @see https://github.com/qiao/PathFinding.js\n      // if(!enemy.path) {\n      //   const grid = new window.PF.Grid(this.objects.map(row => row.map(el => el.isEmpty ? 0 : 1)));\n      //   enemy.pathfinder = new window.PF.AStarFinder();\n      //   const path = enemy.pathfinder.findPath(enemy.position.x, enemy.position.y, thi.player.position.x, this.player.position.y, grid);\n      // }\n      switch(enemy.moveIntentDir) {\n        case DIRS.UP:\n          nextPos = { x: enemy.position.x, y: enemy.position.y - 1}\n          nextDir = DIRS.LEFT\n          backToTrackDir = DIRS.RIGHT\n          nextAnchorPos = { x: nextPos.x + 1, y: nextPos.y }\n          helperDirCalc(enemy, nextPos, nextDir, backToTrackDir, nextAnchorPos)\n          \n          break;\n        case DIRS.RIGHT:\n          nextPos = { x: enemy.position.x + 1, y: enemy.position.y}\n          nextDir = DIRS.UP\n          backToTrackDir = DIRS.DOWN\n          nextAnchorPos = { x: nextPos.x, y: nextPos.y + 1 }\n          helperDirCalc(enemy, nextPos, nextDir, backToTrackDir, nextAnchorPos)\n          \n          break;\n        case DIRS.DOWN:\n          nextPos = { x: enemy.position.x, y: enemy.position.y + 1}\n          nextDir = DIRS.RIGHT\n          backToTrackDir = DIRS.LEFT\n          nextAnchorPos = { x: nextPos.x - 1, y: nextPos.y }\n          helperDirCalc(enemy, nextPos, nextDir, backToTrackDir, nextAnchorPos)\n          \n          break;\n        case DIRS.LEFT:\n          nextPos = { x: enemy.position.x - 1, y: enemy.position.y}\n          nextDir = DIRS.DOWN\n          backToTrackDir = DIRS.UP\n          nextAnchorPos = { x: nextPos.x, y: nextPos.y - 1 }\n          helperDirCalc(enemy, nextPos, nextDir, backToTrackDir, nextAnchorPos)\n          \n          break;\n\n        default:\n          break;\n      }\n    })\n  }\n  playerLoop() {\n    if(this.isPaused || this.player.inactive) { return }\n    clearTimeout(this.playerTimeoutId)\n    const player = this.player\n    \n    const nextPos = { x: player.position.x, y: player.position.y }\n    switch(player.moveIntentDir) {\n      case DIRS.UP:\n        if(player.canMoveUp()) nextPos.y -= 1\n        break;\n      case DIRS.DOWN:\n        if(player.canMoveDown()) nextPos.y += 1\n        break;\n      case DIRS.LEFT:\n        if(player.canMoveLeft()) nextPos.x -= 1\n        break;\n      case DIRS.RIGHT:\n        if(player.canMoveRight()) nextPos.x += 1\n        break;\n      default:break;\n    }\n    if ((player.position.x !== nextPos.x || player.position.y !== nextPos.y) && !player.isMoving) {\n      player.isMoving = true\n      if (player.position.x < nextPos.x) {\n        player.alien.setOrigin(0, 0.25)\n        player.alien.setFlipX(false)\n      }\n      if (player.position.x > nextPos.x) {\n        player.alien.setFlipX(true)\n        player.alien.setOrigin(0.25, 0.25)\n      }\n      player.alien.emit('player_moves', nextPos)\n      this.moveObject(player, nextPos)\n    }\n\n    this.playerTimeoutId = setTimeout(() => {\n      player.isMoving = false\n      player.alien.play('brave_idle')\n      if(player.moveIntentDir !== '') {\n        this.playerLoop()\n      }\n    }, PLAYER_TICK_TIME);\n  }\n  // afterPlayerLoop(cb) {\n  //   this.afterPlayerLoopCallbacks.push(cb)\n  // }\n  moveObject(el, pos) {\n    const layer = this.scene.children.getByName('layer_1')\n    const { tilemap: map } = layer\n    const origin = { x: el.position.x, y: el.position.y }\n    // assume destination is occupeable\n    const destinationElement = this.getObjectAt(pos.x, pos.y)\n    if (!this.objectIsEmpty(destinationElement) || destinationElement.constructor.className === Interactive.className) {\n      destinationElement.overrunBy(el)\n      el.runningOver(destinationElement)\n    }\n\n    if(el.inactive) return\n\n    // clear origin position\n    this.setObjectAt(origin.x, origin.y, new Empty(PIXEL_NAME.EMPTY, this))\n    // fill destination position\n    this.setObjectAt(pos.x, pos.y, el)\n    \n    // updates element position\n    el.move(pos)\n    if(el.constructor.className === Player.className) {\n      // alien anim\n      this.scene.tweens.add({\n        targets: el.alien,\n        x: {\n          value: map.tileToWorldX(pos.x),\n          duration: PLAYER_TICK_TIME,\n        },\n        y: {\n          value: map.tileToWorldY(pos.y),\n          duration: PLAYER_TICK_TIME,\n        },\n      });\n      el.alien.play('brave_run')\n    }\n    if(el.constructor.className === Enemy.className) {\n      // alien anim\n      this.scene.tweens.add({\n        targets: el.alien,\n        x: {\n          value: map.tileToWorldX(pos.x),\n          duration: TICK_TIME,\n        },\n        y: {\n          value: map.tileToWorldY(pos.y),\n          duration: TICK_TIME,\n        },\n      });\n    }\n    if(el.constructor.className === Jewel.className) {\n      // alien anim\n      this.scene.tweens.add({\n        targets: el.alien,\n        x: {\n          value: map.tileToWorldX(pos.x),\n          duration: TICK_TIME * 0.5,\n        },\n        y: {\n          value: map.tileToWorldY(pos.y),\n          delay: pos.x !== origin.x ? TICK_TIME * 0.5 : 0,\n          duration: pos.x !== origin.x ? TICK_TIME * 0.5 : TICK_TIME,\n        },\n        // duration: TICK_TIME,\n      });\n    }\n    if(el.constructor.className === Barrel.className) {\n      // alien anim\n      this.scene.tweens.add({\n        targets: el.alien,\n        x: {\n          value: map.tileToWorldX(pos.x),\n          duration: TICK_TIME * 0.5,\n        },\n        y: {\n          value: map.tileToWorldY(pos.y),\n          delay: pos.x !== origin.x ? TICK_TIME * 0.5 : 0,\n          duration: pos.x !== origin.x ? TICK_TIME * 0.5 : TICK_TIME,\n        },\n        // duration: TICK_TIME,\n      });\n    }\n    if(el.constructor.className === Boulder.className) {\n      // alien anim\n      this.scene.tweens.add({\n        targets: el.alien,\n        x: {\n          value: map.tileToWorldX(pos.x),\n          duration: TICK_TIME * 0.5,\n        },\n        y: {\n          value: map.tileToWorldY(pos.y),\n          delay: pos.x !== origin.x ? TICK_TIME * 0.5 : 0,\n          duration: pos.x !== origin.x ? TICK_TIME * 0.5 : TICK_TIME,\n        },\n        // duration: TICK_TIME,\n      });\n      if (pos.x !== origin.x) {\n        el.alien.play(pos.x > origin.x ? 'boulder_roll_right' : 'boulder_roll_left')\n      }\n    }\n  }\n  pause() {\n    this.isPaused = true\n  }\n  resume() {\n    this.isPaused = false\n  }\n  onCharacterDie(el) {\n    this.setObjectAt(el.position.x, el.position.y,  new Empty(PIXEL_NAME.EMPTY, this))\n    this.moveables = this.moveables.filter(e => e !== el)\n    if (el.constructor.className === Player.className) {\n      // this.player = null\n    }\n  }\n  onJewelPick(el) {\n    this.setObjectAt(el.position.x, el.position.y,  new Empty(PIXEL_NAME.EMPTY, this))\n    this.moveables = this.moveables.filter(e => e !== el)\n  }\n  onDestroy(el) {\n    if(el.constructor.className === Boulder.className) {\n      // console.log(el);\n    }\n    this.setObjectAt(el.position.x, el.position.y,  new Empty(PIXEL_NAME.EMPTY, this))\n    this.moveables = this.moveables.filter(e => e !== el)\n  }\n  onExplode(el) {\n    this.setObjectAt(el.position.x, el.position.y,  new Empty(PIXEL_NAME.EMPTY, this))\n    this.moveables = this.moveables.filter(e => e !== el)\n    for(let x = el.position.x - 2; x <= el.position.x + 2; x++) {\n      for(let y = el.position.y - 2; y < el.position.y + 2; y++) {\n        const el = this.getObjectAt(x, y)\n        const explosion = new Explosion(PIXEL_NAME.EXPLOSION, this)\n        if(el.isBreakable || this.objectIsEmpty(el)) {\n          explosion.setPosition(x, y)\n          this.objects[y][x] = explosion\n        }\n        if (el && !this.objectIsEmpty(el)){\n          el.overrunBy(explosion)\n        }\n      }\n    }\n  }\n  onComplete() {\n    this.objects.forEach(row => row.forEach(el => {\n      if(el !== this.player && el.alien) {\n        el.alien.destroy()\n      }\n    }))\n    this.pause()\n    this.scene.events.emit('levelcompleted', this)\n    // this.moveables = []\n    // this.objects.map(el => el.alien?.destroy())\n  }\n  onInteractWith(el) {\n    console.warn(`implement interaction for ${this.id}`)\n  }\n  onAddElement(el) {\n    console.warn(`implement element added ${this.id}`)\n  }\n  getPlayerPos() { return this.player.position}\n  getConfigAt(x, y) {\n    return this.isDestinationInBounds(x, y) && this.config[y][x]\n  }\n  getCoords(id) {\n    const found = []\n    for(let i = 0; i < this.config.length; i++) {\n      for(let j = 0; j < this.config[i].length; j++) {\n        if (this.config[i][j] === id) {\n          found.push({x: j, y: i})\n        }\n      }\n    }\n    return found\n  }\n  getObjectAt(x, y) {\n    return this.isDestinationInBounds(x, y) && this.objects[y][x]\n  }\n  setObjectAt(x, y, obj) {\n    this.objects[y][x] = obj\n  }\n  isPositionClear(x, y) {\n    return this.getObjectAt(x, y).isEmpty\n  }\n  isDestinationInBounds(x, y) {\n    const xInBounds = x < this.config[0].length && x >= 0\n    const yInBounds = y < this.config.length && y >= 0\n    return xInBounds && yInBounds\n  }\n  objectIsEmpty(el) {\n    return el.isEmpty\n  }\n  isDestinationEmpty(x, y) {\n    return this.getObjectAt(x, y).isEmpty\n  }\n}\n\nexport default Level\n","import Phaser from 'phaser'\nimport { PIXEL_NAME, PIXEL_TO_TILEMAP_POSITION } from '../utils/constants'\nimport Level1 from './levels/level_1'\nimport Level2 from './levels/level_2'\nimport Level3 from './levels/level_3'\nimport Level4 from './levels/level_4'\nimport Level5 from './levels/level_5'\n\nconst LEVELS = [Level1, Level2, Level3, Level4, Level5]\n\nexport default class LevelManager {\n  constructor(scene, currentLevel = 0) {\n    this.scene = scene\n    this.currentIndex = currentLevel - 1\n    this.current = LEVELS[this.currentIndex]\n    this.start()\n  }\n  \n  start() {\n    this.current = LEVELS[this.currentIndex]\n    this.current.config = this.generateConfig()\n    this.map = this.createMap()\n    this.current.connectToScene(this.scene)\n    this.current.pause()\n    this.scene.cameras.main.once('camerafadeincomplete', () => {\n      this.current.resume()\n      this.scene.events.emit('levelstart')\n      \n    })\n  }\n\n  next() {\n    // destroy and unload\n    this.currentIndex += 1\n    if (LEVELS[this.currentIndex]) {\n      this.start()\n    } else {\n      this.scene.scene.start('MenuScene')\n    }\n\n  }\n\n  generateConfig() {\n    const scene = this.scene\n    const levelId = this.current.id\n    var texture = scene.textures.get(levelId);\n    var image = texture.getSourceImage();\n    const levelConfig = Array(image.height).fill('000000').map(r => Array(image.width).fill('000000'))\n    for(let j = 0; j < image.width; j++) {\n      for(let i = 0; i < image.height; i++) {\n        const pixColor = scene.textures.getPixel(j, i, levelId)\n        const key = `${Phaser.Display.Color.ComponentToHex(pixColor.r)}${Phaser.Display.Color.ComponentToHex(pixColor.g)}${Phaser.Display.Color.ComponentToHex(pixColor.b)}`\n        levelConfig[i][j] = key\n      }\n    }\n    return levelConfig\n  }\n\n  createMap() {\n    const scene = this.scene\n    const levelData = this.current\n    const SCALE = scene.data.get('custom_scale')\n    const camera = this.scene.cameras.main\n\n    let map = this.map\n    if(map && map.scene) {\n      map.destroy()\n    }\n\n    // Creating a blank tilemap with dimensions matching the dungeon\n    map = scene.make.tilemap({ tileWidth: 20, tileHeight: 20, width: levelData.config[0].length, height: levelData.config.length });\n\n    // addTilesetImage: function (tilesetName, key, tileWidth, tileHeight, tileMargin, tileSpacing, gid)\n    let tileset = map.addTilesetImage('tiles', 'main-tiles', 20, 20, 1, 2);\n\n    let layer = map.createBlankLayer('layer_1', tileset);\n    layer.name = 'layer_1'\n    layer.depth = 0\n\n    layer.setScale(SCALE)\n\n    // Fill with black tiles\n    layer.fill(1)\n\n    levelData.config.forEach((row, x) => {\n      row.forEach((el, y) => {\n        const tile = levelData.config[x][y]\n        if (![PIXEL_NAME.EMPTY, PIXEL_NAME.PLAYER, PIXEL_NAME.BOULDER, PIXEL_NAME.INTERACTION].includes(tile)) {\n          if (tile === PIXEL_NAME.WALL) {\n            const tile = PIXEL_TO_TILEMAP_POSITION.calculateWallTileWithNeighbours(x, y, levelData.config)\n            map.putTileAt(tile, y, x)\n          } else {\n            map.putTileAt(PIXEL_TO_TILEMAP_POSITION[tile], y, x)\n          }\n        } else {\n          map.putTileAt(PIXEL_TO_TILEMAP_POSITION[PIXEL_NAME.EMPTY], y, x)\n        }\n      })\n    })\n\n    // set up camera\n    camera.setBounds(0, 0, layer.width * layer.scaleX, layer.height * layer.scaleY);\n    camera.zoom = 1\n\n    return map\n  }\n}","import LevelBase from './levelBase'\n\nclass Level1 extends LevelBase {\n  constructor() {\n    super()\n    this.id = 'level_1'\n    this.name = 'The beginning'\n  }\n\n  connectToScene(scene) {\n    super.connectToScene(scene)\n    scene.cameras.main.once('camerafadeincomplete', () => {\n      scene.events.emit('dialogue:show', ['INTRO MESSAGE', \"Guess I can move those\", \"boulders.\"])\n    })\n  }\n\n  onInteractWith(el) {\n    if(el.position.x === 18 && el.position.y === 14) {\n      this.onComplete()\n    }\n  }\n}\n\nexport default new Level1()\n","import LevelBase from './levelBase'\nimport { Interactive } from '../objects'\n\nclass Level2 extends LevelBase {\n  constructor() {\n    super()\n    this.id = 'level_2'\n    this.name = 'The finding'\n  }\n\n  onInteractWith(el) {\n    if(el.position.x === 6 && el.position.y === 6) {\n      this.player.moveIntentDir = ''\n      this.scene.events.emit('dialogue:show', ['FIRST CLUE', \"found something weird\", \"there's something else\", \"down here.\"])\n    }\n    if(el.position.x === 5 && el.position.y === 12) {\n      const layer = this.scene.children.getByName('layer_1')\n      const { tilemap: map } = layer\n      this.player.moveIntentDir = ''\n      this.scene.events.emit('dialogue:show', ['FIRST TOOL', \"Now I can break\", \"the ground with this.\"])\n      \n      this.player.power = 1\n      map.putTileAt(19, el.position.x, el.position.y)\n    }\n    if(el.position.x === 19 && el.position.y === 1) {\n      this.onComplete()\n    }\n  }\n\n  onAddElement(el) {\n    if(el.constructor.className === Interactive.className && el?.position.x === 5 && el?.position.y === 12) {\n      const layer = this.scene.children.getByName('layer_1')\n      const { tilemap: map } = layer\n      map.putTileAt(54, el.position.x, el.position.y)\n    }\n  }\n}\n\nexport default new Level2()\n","import LevelBase from './levelBase'\nimport { Player } from '../objects'\n\nclass Level3 extends LevelBase {\n  constructor() {\n    super()\n    this.id = 'level_3'\n    this.name = 'The blocking'\n  }\n\n  onInteractWith(el) {\n    if(el.position.x === 19 && el.position.y === 6) {\n      this.onComplete()\n    }\n  }\n\n  onAddElement(el) {\n    if(el.constructor.name === Player.name) {\n      el.power = 1\n    }\n  }\n}\n\nexport default new Level3()\n","import LevelBase from './levelBase'\nimport { Player } from '../objects'\n\nclass Level4 extends LevelBase {\n  constructor() {\n    super()\n    this.id = 'level_4'\n    this.name = 'The encounter'\n  }\n\n  onInteractWith(el) {\n    if(el.position.x === 15 && el.position.y === 8) {\n      this.scene.events.emit('dialogue:show', ['FIRST TALK', \"talk to guide.\"])\n    }\n    if(el.position.x === 17 && el.position.y === 11) {\n      this.onComplete()\n    }\n  }\n  onAddElement(el) {\n    if(el.constructor.name === Player.name) {\n      el.power = 1\n    }\n  }\n}\n\nexport default new Level4()\n","import LevelBase from './levelBase'\nimport { Player } from '../objects'\n\n\nclass Level5 extends LevelBase {\n  constructor() {\n    super()\n    this.id = 'level_5'\n    this.name = 'Hard Work'\n  }\n\n  onInteractWith(el) {\n    console.log(el.position)\n  }\n  onAddElement(el) {\n    if(el.constructor.name === Player.name) {\n      el.power = 1\n    }\n  }\n}\n\nexport default new Level5()\n","import Phaser from 'phaser'\nimport { TILES_BY_SCREEN, TILE_SIZE, TICK_TIME, SCALE } from '../utils/constants';\nimport LevelManager from '../components/LevelManager'\nimport Rules from '../components/Rules'\nimport UI from '../components/UI'\n\nexport default class GameScene extends Phaser.Scene {\n  constructor () {\n    super('GameScene');\n  }\n\n  create(data = {}) {\n    this.data.set('custom_scale', SCALE)\n\n    this.game.scale.scaleMode = Phaser.Scale.RESIZE\n    this.handleScales()\n    this.createAnimations()\n    this.levels = new LevelManager(this, data.level)\n\n    this.cameras.main.fadeIn(1000, 0, 0, 0)\n    new Rules(this)\n    new UI(this)\n  }\n  \n  handleScales() {\n    const SCALE = this.data.get('custom_scale')\n    const scalables = new Map()\n    this.clearScalables = () => void scalables.clear()\n      this.removeFromScalables = el => scalables.delete(el)\n      this.addToScalables = (el, coords) => {\n        el.setScale(SCALE)\n        scalables.set(el, coords)\n      }\n      this.updateScale = scale => {\n        scalables.forEach((coords, el) => el?.setScale(scale))\n      }\n      window.addEventListener('resize', () => {\n        const scale = Math.round((window.innerWidth/TILES_BY_SCREEN * 100 / TILE_SIZE/100)*100)/100\n        const layer = this.scene.children.getByName('layer_1')\n        const { tilemap: map } = layer\n        layer.setScale(scale)\n        // this.children.list.forEach(el => {\n        //   if(el.type === 'TilemapLayer') {\n        //     el.setScale(scale)\n        //   }\n        // })\n        this.data.get('level').objects.forEach((rows, y) => {\n          rows.forEach((obj, x) => {\n            if(obj.alien) {\n              obj.alien.setScale(scale)\n              obj.alien.x = map.tileToWorldX(x)\n              obj.alien.y = map.tileToWorldY(y)\n            }\n          })\n        })\n        const camera = this.cameras.main\n        camera.setBounds(0, 0, layer.width * layer.scaleX, layer.height * layer.scaleY);\n      })\n  }\n\n  createAnimations() {\n    this.anims.create({\n        key: 'boulder_roll_right',\n        frames: this.anims.generateFrameNumbers('boulder', { frames: [ 0, 1, 2, 0 ] }),\n        frameRate: 12,\n        repeat: 0\n      })\n      this.anims.create({\n        key: 'boulder_roll_left',\n        frames: this.anims.generateFrameNumbers('boulder', { frames: [ 0, 2, 1, 0 ] }),\n        frameRate: 12,\n        repeat: 0\n      })\n      this.anims.create({\n        key: 'boulder_idle',\n        frames: this.anims.generateFrameNumbers('boulder', { frames: [ 0 ] }),\n        frameRate: 1,\n        repeat: 0\n      })\n      this.anims.create({\n        key: 'brave_idle',\n        frames: this.anims.generateFrameNumbers('brave', { frames: [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 2, 2, 2, 2, 2, 2, 2, 0 ] }),\n        frameRate: 4,\n        repeat: -1\n      })\n      this.anims.create({\n        key: 'brave_run',\n        frames: this.anims.generateFrameNumbers('brave', { frames: [ 3, 4, 5, 3 ] }),\n        frameRate: (1000/TICK_TIME) * 4,\n        repeat: 0\n      })\n  }\n}","import Phaser from 'phaser'\nimport Canvas from './libs/react-phaser-fiber/components/Canvas'\nimport MenuScene from './scenes/MenuScene'\nimport IntroScene from './scenes/IntroScene'\nimport GameScene from './scenes/GameScene'\n\nconst gameConfig = {\n  width: \"100%\",\n  height: \"100%\",\n  type: Phaser.AUTO,\n  backgroundColor: '#000000',\n  disableContextMenu: true,\n  pixelArt: true,\n  roundPixels: false,\n  scene: [MenuScene, IntroScene, GameScene]\n}\nfunction Game() {\n  return (\n    <Canvas args={gameConfig} />\n  );\n}\n\nexport default Game;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Game from './Game';\nimport reportWebVitals from './reportWebVitals';\nimport config from '../package.json'\n\nReactDOM.render(\n  <React.StrictMode>\n    <Game />\n    <div style={{\n      position: 'absolute',\n      bottom: 0,\n      right: 0,\n      fontSize: 10,\n      color: 'gray'\n    }}>v{config.version}</div>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}