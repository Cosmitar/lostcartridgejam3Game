{"version":3,"sources":["libs/react-phaser-fiber/PhaserProvider.js","libs/react-phaser-fiber/components/RPFScene.js","libs/react-phaser-fiber/components/Canvas.js","utils/constants.js","utils/localization.js","components/objects/BaseObject.js","components/objects/GameObject.js","components/objects/Empty.js","components/objects/Explosion.js","components/objects/Destroyable.js","components/objects/Moveable.js","components/objects/Fallable.js","components/objects/Boulder.js","components/objects/Character.js","components/objects/Debris.js","components/objects/Pillar.js","utils/dbManager.js","components/levels/levelBase.js","components/objects/Abushgidim/GreenExplosion.js","components/objects/Ground.js","components/objects/Abushgidim/BranchChunk.js","components/objects/Wall.js","components/objects/Abushgidim/Womb.js","components/objects/Abushgidim/index.js","components/CircularProgress/CircularProgress.js","components/BranchesEnergyBars/BranchesEnergyBars.js","components/levels/level_ki_finale.js","components/levels/level_2.js","components/levels/level_3.js","components/levels/level_4.js","components/levels/level_5.js","components/levels/levelGoalKit.js","components/levels/level_6.js","components/levels/level_7.js","components/levels/level_8.js","components/levels/level_9.js","components/levels/level_10.js","components/levels/level_11.js","components/levels/level_12.js","components/levels/level_13.js","components/levels/level_14.js","components/levels/level_15.js","components/levels/level_16.js","components/levels/levelDarkKit.js","components/levels/level_17.js","components/levels/level_18.js","components/levels/Maze_1.js","components/DialogArrow/index.js","components/levels/Maze_2.js","components/Controller/Controller.js","components/UIMenus.js","components/DialogOptions/index.js","components/Dialogs/index.js","components/UI.js","components/objects/Enemy.js","components/objects/NPCharacter.js","components/objects/Jewel.js","components/objects/Player.js","components/objects/Interactive.js","components/objects/Exit.js","components/objects/Barrel.js","components/objects/Mushroom.js","components/objects/Torch.js","components/objects/Block.js","components/levels/level_1.js","components/levels/level_finale.js","scenes/MenuScene.js","utils/CRTShaderFX.js","components/LoadingBar/LoadingBar.js","scenes/LandingScene.js","utils/globalScore.js","scenes/IntroScene.js","utils/helpers.js","components/objects/Deco.js","components/LevelManager.js","scenes/ConfirmNewGameScene.js","components/Rules.js","scenes/GameScene.js","scenes/ConnectorScene.js","scenes/CreditsScene.js","libs/react-phaser-fiber/hooks/usePhaser.js","libs/react-phaser-fiber/components/GameObject.js","libs/react-phaser-fiber/components/Text.js","libs/react-phaser-fiber/components/Container.js","libs/react-phaser-fiber/components/Sprite.js","scenes/LevelResumeScene/LevelResumeMenu.js","scenes/LevelResumeScene/config.js","scenes/KiStageCompleted/KiStageCompleted.js","scenes/KiStageCompleted/config.js","libs/react-phaser-fiber/components/Image.js","scenes/SplashScreenScene/SplashScreenScene.js","scenes/SplashScreenScene/config.js","utils/GrayScalePipeline.js","libs/react-phaser-fiber/components/Scene.js","scenes/GameOptionsScene.js","Game.js","reportWebVitals.js","index.js"],"names":["context","createContext","PhaserProvider","game","scene","sceneProps","children","useState","ready","setReady","useEffect","Provider","value","RPFScene","name","args","onCreate","config","this","preload","bind","data","create","Phaser","Scene","Canvas","forwardRef","canvasRef","fallbackRef","useRef","ref","setGame","activeScene","setActiveScene","scenes","React","Children","map","ch","props","callbacks","postBoot","forEach","sc","events","off","Scenes","Events","READY","once","RENDER","WAKE","UPDATE","TRANSITION_WAKE","TRANSITION_START","TRANSITION_OUT","TRANSITION_INIT","TRANSITION_COMPLETE","START","SLEEP","SHUTDOWN","RESUME","PRE_RENDER","PAUSE","on","CREATE","state","key","BOOT","Game","current","activeChildren","toArray","find","Object","keys","getScene","values","displayName","TICK_TIME","TILE_SIZE","SCALE","window","devicePixelRatio","document","querySelector","width","toString","TURNINGS","CLASS_NAMES","PIXEL_NAME_BG","PIXEL_NAME","EMPTY","PLAYER","GROUND","BOULDER","PILLAR","WALL","ENEMY","JEWEL","BARREL","EXPLOSION","INTERACTION","MUSHROOM","BRO","DWARF","EXIT","ART","ART2","HANGING_2","HANGING_3","HANGING_4","HANGING_5","DEBRIS","BLOCK","TORCH","DIRS","DOWN","UP","LEFT","RIGHT","BG_PIXEL_TO_TILEMAP_POSITION","PIXEL_TO_TILEMAP_POSITION","x","y","W","N","E","S","includes","getDictionary","lang","dictionary_en","dictionary_es","translationGetters","en","es","translate","memoize","i18n","t","JSON","stringify","setI18nConfig","callback","a","locale","navigator","language","substring","languageTag","dictionary","translations","BaseObject","eventListeners","classes","proto","__proto__","undefined","constructor","className","push","givenClass","length","listClasses","eventName","listener","filter","l","payload","GameObject","id","isRigid","isBreakable","isFlat","isPickable","isCrushable","level","power","strength","force","weight","position","alien","isMoveable","coords","Empty","isEmpty","Explosion","extinguished","layer","getByName","tilemap","explosion","add","sprite","setOrigin","play","setScale","scaleX","tileToWorldX","tileToWorldY","Animations","ANIMATION_COMPLETE","destroy","objects","isClass","replaceByEmpty","onNextTick","lvl","Destroyable","inactive","el","onDestroyElement","Moveable","Fallable","isFalling","freeze","nextPos","destinationElement","isDestinationInBounds","getObjectAt","destinationIsEmpty","isDestinationEmpty","destinationIsCrushable","destinationInBounds","pathElement","pathClear","objectIsEmpty","restingElement","canRest","canFallDown","canRollTo","Boulder","visible","Character","pushingDirection","neighbour","emptyPlace","canBrakeNeighbour","canWalkThrough","isBrakingGround","DIR","canMoveUp","canMoveDown","canMoveLeft","canMoveRight","canMove","nothingBesides","isPositionClear","isAboutToFall","canPush","canPushLeft","pushed","animPushLeft","moveObject","jumpIntoParallelGravity","canPushRight","animPushRight","targetPos","proximity","onlyRightAngles","topLimit","bottomLimit","leftLimit","rightLimit","retVal","isInArea","isInRightAngle","Debris","putTileAt","break_effect","depth","UI","tileToScreen","setFlipY","Pillar","db","Dexie","bootUp","version","stores","items","countDiamonds","collectedDiamonds","countEnemies","killedEnemies","countShrooms","collectedShrooms","comp","prevBest","bulkPut","alert","console","error","get","where","collection","count","first","record","parse","set","modify","put","reset","clear","getLevels","levels","startWith","log","Level","moveables","parallelMovables","interactiveElements","decorationElements","player","playerTimeoutId","timeoutIds","focusObject","isPaused","queuedActions","totalShroomsAmount","preventDisplayDiamondsGoalAmount","unfinished","tickId","toRun","cb","phaserScene","pick_effect","enemy_die_effect","dbManager","dbData","shroomAlreadyCollected","alreadyCollectedShrooms","intOrder","r","c","element","Wall","setPosition","Block","Torch","order","Ground","createBoulderAt","pillar","diamond","Jewel","move","mushroom","Mushroom","createBarrelAt","isMoving","Player","animIdle","follower","isFollowing","NPCharacter","leader","isLeading","createEnemyAt","intElement","Exit","Interactive","onAddElement","exit","addedToScene","diamondsGoal","block","exitBlock","setTimeout","emit","idx","findIndex","e","splice","inParallelGravity","barrels","objBelow","explode","parallelWorld","runScheduledActions","explodeLoop","o","sort","b","exploded","canFallLeft","canFallRight","objectBelow","hitBy","goBackToMainGravity","enemiesLoop","newAnchor","nextDir","backToTrackDir","nextAnchorPos","helperDirCalc","enemy","anchorPosition","moveIntentDir","Enemy","scanDirection","loop","clearTimeout","pushLeft","pushRight","animRunRight","animRunLeft","followerNextPos","isInteractivePosition","overrunBy","anims","currentAnim","isCloseEnough","playerLoop","pos","origin","isSwitch","runningOver","setObjectAt","tweens","targets","duration","animRun","delay","onComplete","gravityLoop","base","Barrel","shine","stop","restart","destroyBlock","row","pause","levelData","rules","calcCompletion","Math","max","newLevelData","storedData","ephemeral","warn","found","i","j","obj","xInBounds","yInBounds","range","intensity","shakeCamera","probability","destroyObjectsInRange","condition","y1","y2","x1","x2","toDestroy","strengthEnough","random","destroyableClass","destroyByCondition","camera","cameras","main","fx","sound","shake","Promise","res","mv","ticks","tickDelayToTrigger","onTick","amountOfTicks","setTickTimeout","alpha","awaitTicks","boulder","barrel","kind","destructionForce","setDepth","plugins","tintGray","tintR","tintG","tintB","Array","fill","tile","calculateGroundTileWithNeighbours","BranchChunk","boss","branchId","color","isHorizontal","elbowOrientation","isHead","lastAnimationKey","orientation","getChunkOrientation","IS_HORIZONTAL","changeOrientation","setRotation","setFlipX","PI","fromPos","toPos","evenOddKey","isElbow","chunkIsHead","keyFrameName","newKeyFrameName","replace","nextKeyFrameName","getTurning","setElbowOrientation","chunkIsNeck","setAlpha","takeBranchDamage","Womb","upperObject","object","rectangle","Abushgidim","body","leftBranch","chunks","originPos","damageReceived","energy","maxEnergy","animating","midBranch","rightBranch","leftWomb","rightWomb","easystar","EasyStar","js","alive","drawEnemy","subscribeToTicks","maintenance","branch","animGrow","womb","grid","setAcceptableTiles","midPath","lastChunk","slice","setGrid","calcPathForBranch","p","leftPath","rightPath","awaitTicksTime","gridToPixels","MAX","Number","MAX_SAFE_INTEGER","midPoint","leftPoint","rightPoint","midDistToPlayer","Distance","BetweenPoints","leftDistToPlayer","rightDistToPlayer","minDistToPlayer","min","focusCoords","panAndFollow","height","nextPosDispenser","path","shift","isSamePosition","playerKilledByBranch","all","animateGrow","getNextPos","chunk","animReduction","pop","animDetachment","start","end","calcPath","findPath","calculate","createBatLeftDown","createBatRightDown","exitPos","upperBat","createBatAt","lowerBat","dir","animateReduction","newValue","defeated","destroyObjectsByKind","playerWon","animDestroy","amount","getBranchById","destroyBranch","group","classType","GameObjects","Sprite","defaultKey","defaultFrame","active","maxSize","runChildUpdate","createCallback","removeCallback","createMultipleCallback","addMultiple","flash","repeat","brachId","posA","posB","chunkIdx","prevChunk","isBase","nextChunk","CircularProgress","ease","radius","barColor","trackColor","centerColor","thickness","startAngle","DegToRad","rexCircularProgress","anticlockwise","easeValue","valuechangeCallback","oldValue","circularProgress","setScrollFactor","BranchesEnergyBars","branch1","progressBox","progressBar","barWidth","barHeight","branch2","branch3","BAR_WIDTH","BAR_HEIGHT","GUTTER","PADDING","pixelToScreen","graphics","fillStyle","fillRect","reduceValue","timer","LevelKiFinale","worldArtOriginPos","reloadSpots","batBirthSpots","stepsToBossGrowth","stepCount","artSpot","playerKilled","ticksCountForBossLoop","ticksCount","isRestart","ui","drawKiBossScores","branchesEnergyBars","setVisible","drawProfecy","abs","battleMusic","valume","jumpToBattle","prepareDwarfForProphecy","startBattle","line","leadingPath","draw","music","volume","bossLoop","oPos","spot","bossDefeated","WORLD_ART","event","showDialog1","showDialog2","showDialog3","showDialog4","growLeft","growRight","growUp","growDown","playEarthquake","participants","participantNames","conversation","who","text","dwarfRun","onPlayerMoves","moveDwarfToExit","reconnect","options","playTheProphecy","hasPickaxe","ignite","setValue","disconnect","birthBats","repost","growBranches","die","resume","repositionDwarfToEndLevel","randomNegPosRange","n","floor","round","GreenExplosion","s","teleportObject","startFrame","navigateToScene","LevelBase","Level2","light_beam","image","particles","emitter","createEmitter","tileToPixels","setQuantity","setFrequency","setAngle","setSpeed","setGravityY","setGravityX","setLifespan","onChange","Level3","k","pickaxe","enemiesCount","Level4","countDownAfterQuakeUntilMessage","addListener","removeListener","onPlayerMove","Level5","enemiesDeadCount","dist","Snake","forEachTile","encounter","moveDwarf","levelGoalKit","goalCheckPoint","showDialogAngel","showDialogGoal","moveToExit","template","GOAL","NUM","Level6","diamondIdTriggerDwarfMove","listenPostitionForDwarfTeleport","pageId","Level7","Level8","dwarf","broSprite","grayscalePipeline","tripMusic","firstVisit","tookTheTrip","renderer","pipelines","setPipeline","showDialog1NoShroom","showDialog1Revisit","slot0","label","slot","onSelect","slot1","slot2","slot3","playTheTrip","animFadeOutLevel","moveCamera","animPlayerAndDwarf","animBroEntrance","vanishBro","animDwarfMoveCloseToPlayer","vanishDwarf","animFadeInLevel","restoreRegularGamePlay","gray","completeDelay","onUpdate","tween","target","setLevelAlpha","layer_1","layer_1z2","layer_2","layer_0","level_background_art","Level9","Level10","objectsAsKeys","clearPath","Level11","testProximity","enableDiagonals","reduce","src","prevEl","Level12","Level13","interactiveCounts","quakeTriggerIndex","trunc","playerOriginPosition","Level14","impersonateRockford","Level15","Level16","wasInSanctuary","maryTalkedToDocAboutTheSactuary","quakeTrigger","fontFamily","align","animLayRight","removeDebris","debris","removeGround","ground","goToSanctuary","playTheSighting","showDialog2_repeat","sanctuaryEntrance","layer1z2","copy","goalAchieved","goalAchievedConversation","goalMissingConversation","playerRun","moveToNextPosition","movePlayer","focusElement","mandatoryPath","reverse","moveDocToFinalExit","levelDarkKit","lights","enable","setAmbientColor","m","updateLight","staticlight","addLight","setColor","setIntensity","time","addEvent","Geom","Ellipse","Random","callbackScope","exitEye","setTintFill","torch","light","setRadius","eyeAnimation","remove","yoyo","Level17","detectDocTeleporting","ligthTorch","Level18","quakePlayed","playDropTorchIncident","displayIncidentDialog","setOffTorch","resetPipeline","displayIncidentRecoveryDialog","proximityTrigger","recoveryFromDropTorch","LevelMaze1","solvingPath","isMaze","buyLeadingWithShrooms","shouldRestart","personalSpace","showDialog1_no_shrooms","checkProgress","threePositionsBackInPath","at","setUpLeader","Arrow","make","tileWidth","tileHeight","tileset","addTilesetImage","createBlankLayer","getArrow","rotation","LevelMaze2","preExit","isUp","isDown","isLeft","isRight","isConfirm","isCancel","getDirection","UIMenus","ROW_HEIGHT","MARGIN_LEFT","MARGIN_TOP","optionsByPage","scrollIndex","isVisible","menuOptions","disabled","selectable","header","drawSelectableOptions","Level1","_","toLocaleString","minimumIntegerDigits","_gems","lKey","DB","_threats","_shrooms","_comp","perc","minimumFractionDigits","maximumFractionDigits","levelName","padEnd","LevelFinale","initOption","offsetX","offsetY","maxRows","FIRST_SELECTABLE_OPTION","currentOption","haveMorePages","isNaN","currentPage","currentIndex","INIT_POS","ARROW_WIDTH","OFFSET_X","arrow","getArrowRight","tilemapLayer","arrowUp","getArrowUp","arrowDown","getArrowDown","split","join","lines","txt","fontSize","fontWeight","displayHeight","setShadow","drawOptionsPage","input","keyboard","reducedOptions","newIndex","Controller","lastAvailableOption","prevSelectedOpt","nextSelectedOpt","from","list","textToPrint","DialogOptions","menuOptionsContainer","keyDownHandler","container","currentSlot","firstNonEmptySlotKey","drawOption","textObj","lineSpacing","displayWidth","setSize","setArrowPositionBySlot","newSlotIdx","selectedOption","ARROW_OFFSET_X","ARROW_OFFSET_Y","Dialogs","tnContainer","participantSprites","currentDialogIndex","isShowing","isFullTextDisplayed","dialogOptions","showDialog","handleKeyDown","updateCharacterName","tIDs","overlay","topWindowboxing","bottomWindowboxing","clearText","unmount","layers","prepareHUD","prepareText","mount","showMessage","onlyOnePageOption","moreThanOnePageOption","defaultPageOption","lastPageOption","show","message","hide","writeText","clearTint","setTint","tn","charName","drawWindow","w","h","setText","charPlaceholder","paragraphs","paragraphWords","prevLine","nextWord","trim","unshift","timerId","letters","fastForward","putLetter","len","char","fullTextDisplayed","TILES","TOP_LEFT","TOP_MIDDLE","TOP_RIGHT","MIDDLE","BOTTOM_LEFT","BOTTOM_MIDDLE","BOTTOM_RIGHT","noScores","inGameMenu","setUpPuseResumeGame","mushroomsIcon","diamondsIcon","showPauseMenu","hidePauseMenu","rockHit","rockSlideHard","rockSlideSoft","rockHitSoft","gemHit","shroomPick","gemPick","coinPick","clearHit","deathByRockHit","levelComplete","drawScores","dialogs","skipAmount","hideDialog","tilesByHeight","layerScores","scoresLayer","originalValues","topY","botY","lsY","dsY","diamondsScore","diY","miY","msY","mushroomsScore","dsgY","diamondsScoreGoal","pbarY","pboxY","progressBar1","progressBox1","progressBar2","progressBox2","progressBar3","progressBox3","circY","pbar1Y","pbox1Y","pbar2Y","pbox2Y","pbar3Y","pbox3Y","targetObj","shroomsAmount","localStorage","getItem","MT_MARGIN_RIGHT","D_MARGIN_LEFT","DT_MARGIN_RIGHT","test","diamondsAmount","scoreTileset","preapreScoreTilemap","msh","setWindowBoxBehaviour","String","setData","scale","howMany","getData","targetPosX","showInGameMenu","existingLayer","drawMenuOptions","onKeyDown","connected","val","line1","debug","directionLine","anchorLine","onCharacterDie","onEnemyKill","flipX","calcMoveIntentForLeader","xDist","yDist","animRunVariant","animName","onJewelPick","ligth","onKeyUp","calcMoveIntent","canMoveDir","dirVariant","pickaxeVariant","actionVariant","setupLight","isTooCloseToExit","onInteractWith","reach","objectsToDestroyByExplostion","objectsToReachByExplostion","tint","burntEl","burntWillBreak","explosionPlaceholder","onExplode","reachedEl","onMushroomPick","isLit","leftTrigger","rightTrigger","setUpLights","setIgniteTriggers","leftNeighbour","rightNeighbour","winningLoopRef","winningLoop","voidLevel","startVoid","voidLoop","autoDestroyTID","destroyMap","resetAutoVoidTimer","nextMoveDir","titlesMusic","BlurPostFX","renderTarget","fragShader","uniforms","set2f","set1f","style","marginLeft","marginTop","Renderer","WebGL","Pipelines","PostFXPipeline","LoadingBar","loadingText","percentText","updateProgress","unload","screenCenterX","worldView","screenCenterY","parseInt","font","LandingScene","setPostPipeline","CRTFilter","bar","load","WebFont","custom","families","script","process","LevelTest","spritesheet","frameWidth","frameHeight","audio","sceneId","fade","getMusic","credits_score","playGlobalScore","stopResumeScore","isPlaying","stopGlobalScore","getResumeMusic","resume_score","MenuScene","setBackgroundColor","scaleY","fadeIn","sys","showMainMenu","IntroScene","images","tiamat","sky","clouds","storm","ground_high","ground_break","comet","people_climbing","people_paying","people_paying_high","people_descending","people_falling","people_jumping","texts","line2","line3","level_title","sounds","background_music","dramatic_music","earthquake","frames","generateFrameNumbers","createTextLine","_shadow","lineNumber","LINE_HEIGHT","LINE_REF","LINE_REF_FACTOR","XPOS","YPOS","lineShadow","_setText","createFullscreenImage","hold","DELAY_TO_START","animPage","_shoadow","createAnimations","createSounds","createImages","createTextPlaceholders","playMusic","animEnterTiamat","animPage1","animEnterWorld","animPage2","animEnterPeople","animPage3","showFirstDialogs","animExitTiamat","animGroundTransition","showSecondDialogs","playDramaticMusic","animStormEnter","animEarthquake","animEnterFalling","animPage4","animPage5","animEnterJumping","exitMusic","animLevelTitle","quakesMusic","pan","Cameras","Scene2D","PAN_COMPLETE","textureToMapConfig","textures","getSourceImage","levelConfig","pixColor","getPixel","Display","Color","ComponentToHex","g","formatScore","total","formatComp","Deco","LEVELS","Maze1","getNextLevel","levelKey","nextLevel","LevelManager","currentLevelName","currentName","generateConfig","mapConfig","bgConfig","createMap","createBackground","connectToScene","levelId","mazegenerator","pow","cell","top","right","bottom","left","STARTING_ROW","rowIdx","isNotTopBufferSpace","threeEmptyInARow","every","buildWallsAroundGate","mapZ2","underlayMap","tilesetGates","tilesetZ2","underlaytileset","layer2","layerZ2","underlayer","bgTile","calculateWallTileWithNeighbours","isFlipX","POSITION_EXIT","tileKind","nextSprite","hanging","setBounds","zoom","Rules","worldTickFreq","onSceneUpdate","result","onLevelStart","setUpCameraFollow","startFollow","Easing","Cubic","InOut","progress","delta","gems","collectedGems","enemies","shrooms","colectedShrooms","GameScene","scaleMode","Scale","RESIZE","handleScales","cleanLevel","addEventListener","onResize","updatePositionsOnScale","frameRate","ConnectorScene","currentLevel","musicName","getMusicFromName","environmentMusic","getImageByName","img","showDialogLevel_cinematic_last_2","normalDayMusic","ConfirmNewGameScene","showConfirmNewGameMenu","usePhaser","useContext","setState","useLayoutEffect","scenesManager","getState","externalRef","type","addedToSceneForParent","dataParentRef","localRef","tId","applyProps","useCallback","_this","hasOwnProperty","ADDED_TO_SCENE","existing","Text","Container","onObjectAddedToScene","extractPhaserChildren","_children","cloneElement","OptionsScene","selIndex","setSelIndex","showRowScore","setShowRowScore","refScene","playResumeScore","v","formatFont","fontStyle","CONTAINER_TOP","CONTAINER_LEFT","MENU_OPTIONS_TOP","setStyle","margin","sapcing","PAGES","KiStageCompleted","setCurrentPage","page1","xOffset","yOffset","page2","animate","page","totalDelay","del","op","Image","SplashScreenScene","showInitialMenu","GrayScalePipeline","_gray","MultiPipeline","isActive","setActive","subSelIndex","setSubSelIndex","submenu","subSel","OPT_OFFSET","sm","gameConfig","parent","WEBGL","mode","clientHeight","autoCenter","CENTER_BOTH","backgroundColor","disableContextMenu","pixelArt","roundPixels","CreditsScene","pipeline","Gray","GrayAlt","global","plugin","FadePlugin","FlashPlugin","CircularProgressPlugin","TintRGBPlugin","updateAspectRatio","content","clientWidth","removeEventListener","KiStageCompletedConfig","SplashScreenConfig","LevelResumeSceneConfig","LevelResumeMenu","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.dbbae159.chunk.js","sourcesContent":["import { useState, createContext, useEffect } from 'react'\n\nexport const context = createContext()\n\nconst PhaserProvider = ({ game, scene, sceneProps, children }) => {\n  const [ready, setReady] = useState()\n  \n  // delay to let the context value to propagate before rendering children.\n  // this way children can implement usePhaser confident that objects returned are not null\n  useEffect(() => {\n    setReady(!!game && !!scene)\n  }, [game, scene])\n\n  return (\n    <context.Provider value={{ game, scene, sceneProps }}>\n      {\n        ready ? children : null\n      }\n    </context.Provider>\n  )\n}\n\nexport default PhaserProvider\n","import Phaser from \"phaser\";\n\nclass RPFScene extends Phaser.Scene {\n  constructor(name, args, onCreate) {\n    super(name);\n    this.onCreate = onCreate;\n    this.config = args\n  }\n  preload() {\n    if(this.config?.preload) {\n      this.config.preload.bind(this)()\n    }\n  }\n  create(data = {}) {\n    if(this.config?.create) {\n      this.config.create.bind(this)()\n    }\n    this.onCreate(data);\n  }\n}\n\nexport default RPFScene;\n","import Phaser from \"phaser\";\nimport React from \"react\";\nimport { useEffect, forwardRef, useRef, useState } from \"react\";\nimport PhaserProvider from \"../PhaserProvider\";\nimport RPFScene from \"./RPFScene\";\n\n/**\n * Creates a new Phaser.Game with given arguments.\n * triggers functions to store game into context\n */\nconst Canvas = forwardRef(({ args, children }, canvasRef) => {\n  const fallbackRef = useRef();\n  const ref = canvasRef || fallbackRef;\n  const [game, setGame] = useState();\n  const [ready, setReady] = useState();\n  const [activeScene, setActiveScene] = useState({});\n  // const [activeSceneProps, setActiveSceneProps] = useState(null);\n\n  useEffect(() => {\n    const scenes = React.Children.map(\n      children,\n      (ch) =>\n        new RPFScene(ch.props.name, ch.props.args, data => {\n          // setActiveSceneProps(data)\n          setActiveScene({ [ch.props.name]: data });\n        })\n    );\n    // args.scene = [...scenes, ...(args.scene || [])];\n    args.scene = [...(args.scene || []), ...scenes];\n    args.callbacks = {\n      postBoot: (game) => {\n        setGame(game);\n        setReady(true);\n        game.scene.scenes.forEach((sc) => {\n          sc.events.off(Phaser.Scenes.Events.READY);\n          sc.events.once(Phaser.Scenes.Events.READY, () => {\n            sc.events.off(Phaser.Scenes.Events.RENDER);\n            sc.events.once(Phaser.Scenes.Events.RENDER, () => {\n              // setActiveSceneKey(sc.scene.key);\n            });\n          });\n          sc.events.once(Phaser.Scenes.Events.WAKE, () => {\n            // console.log(Phaser.Scenes.Events.WAKE, sc.scene.key)\n          });\n          sc.events.once(Phaser.Scenes.Events.UPDATE, () => {\n            // console.log(Phaser.Scenes.Events.UPDATE, sc.scene.key)\n          });\n          sc.events.once(Phaser.Scenes.Events.TRANSITION_WAKE, () => {\n            // console.log(Phaser.Scenes.Events.TRANSITION_WAKE, sc.scene.key)\n          });\n          sc.events.once(Phaser.Scenes.Events.TRANSITION_START, () => {\n            // console.log(Phaser.Scenes.Events.TRANSITION_START, sc.scene.key)\n          });\n          sc.events.once(Phaser.Scenes.Events.TRANSITION_OUT, () => {\n            // console.log(Phaser.Scenes.Events.TRANSITION_OUT, sc.scene.key)\n          });\n          sc.events.once(Phaser.Scenes.Events.TRANSITION_INIT, () => {\n            // console.log(Phaser.Scenes.Events.TRANSITION_INIT, sc.scene.key)\n          });\n          sc.events.once(Phaser.Scenes.Events.TRANSITION_COMPLETE, () => {\n            // console.log(Phaser.Scenes.Events.TRANSITION_COMPLETE, sc.scene.key)\n          });\n          sc.events.once(Phaser.Scenes.Events.START, () => {\n            // console.log(Phaser.Scenes.Events.START, sc.scene.key)\n          });\n          sc.events.once(Phaser.Scenes.Events.SLEEP, () => {\n            // console.log(Phaser.Scenes.Events.SLEEP, sc.scene.key)\n          });\n          sc.events.once(Phaser.Scenes.Events.SHUTDOWN, () => {\n            // console.log(Phaser.Scenes.Events.SHUTDOWN, sc.scene.key)\n          });\n          sc.events.once(Phaser.Scenes.Events.RESUME, () => {\n            // console.log(Phaser.Scenes.Events.RESUME, sc.scene.key)\n          });\n          sc.events.once(Phaser.Scenes.Events.RENDER, () => {\n            // console.log(Phaser.Scenes.Events.RENDER, sc.scene.key)\n          });\n          sc.events.once(Phaser.Scenes.Events.READY, () => {\n            // console.log(Phaser.Scenes.Events.READY, sc.scene.key)\n          });\n          sc.events.once(Phaser.Scenes.Events.PRE_RENDER, () => {\n            // setActiveSceneKey(sc.scene.key);\n            // console.log(Phaser.Scenes.Events.PRE_RENDER, sc.scene.key);\n          });\n          sc.events.once(Phaser.Scenes.Events.PAUSE, () => {\n            // console.log(Phaser.Scenes.Events.PAUSE, sc.scene.key)\n          });\n          sc.events.on(Phaser.Scenes.Events.CREATE, () => {\n            setActiveScene(state => ({ [sc.scene.key]: state[sc.scene.key] }));\n            // setActiveSceneKey(sc.scene.key);\n          });\n          sc.events.once(Phaser.Scenes.Events.BOOT, () => {\n            // console.log(Phaser.Scenes.Events.BOOT, sc.scene.key)\n          });\n        });\n        // game.scene.scenes[0].events.once(Phaser.Scenes.Events.PRE_RENDER, (s) => {\n        //   game.scene.scenes[0].load.on(Phaser.Loader.Events.COMPLETE, () =>\n        //   setReady(true)\n        //   );\n        // });\n      },\n    };\n    const game = new Phaser.Game(args);\n    ref.current = game;\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  const activeChildren = React.Children.toArray(children).find((ch) => {\n    return ch.props.name === Object.keys(activeScene)[0];\n  });\n  \n  return ready ? (\n    <PhaserProvider scene={game.scene.getScene(Object.keys(activeScene)[0])} sceneProps={Object.values(activeScene)[0]} game={game}>{activeChildren}</PhaserProvider>\n  ) : null;\n});\n\nCanvas.displayName = \"Canvas\";\nexport default Canvas;\n","export const TICK_TIME = 250\nexport const PLAYER_TICK_TIME = TICK_TIME - 25\nexport const TILE_SIZE = 20\n// export const TILES_BY_SCREEN = 13\nexport const TILES_BY_SCREEN = 20\n\n// incorrectly, I set SCALE as a constant which is set at the moment this const is imported into modules.\n// since SCALE is dynamic based on screen size, I need to make it a functions to get called every time we need it.\n// it turns out that constant is used in 117 lines by 22 files. To avoid replacing all those occurence, I came out with this hack:\n// convert SCALE into a functions and overcharche it method toString so all the places where is used lik num + SCALE invokes\n// the calculation of scale each time.\n/* proof:\n  const SCALE = () => 25\n  SCALE() // outputs 25\n  SCALE // outputs function\n  SCALE.toString = SCALE\n  5 + SCALE // outputs 30\n*/\nexport const SCALE_RATIO = window.devicePixelRatio\n// export const SCALE = () => SCALE_RATIO\n\n// export const SCALE = () => 1\nexport const SCALE = () => document.querySelector('canvas').width/TILES_BY_SCREEN/TILE_SIZE\nexport const SCALE_V = () => document.querySelector('canvas').height/11/TILE_SIZE\n\n// export const SCALE = () => Math.round((document.querySelector('canvas').width/TILES_BY_SCREEN * 100 / TILE_SIZE/100)*100)/100\nSCALE.toString = SCALE\n\nexport const TURNINGS = {\n  CW: 'CW',\n  CCW: 'CCW',\n}\n\nexport const CLASS_NAMES = {\n  ENEMY: 'Enemy',\n  WALL: 'Wall',\n  BLOCK: 'Block',\n  WOMB: 'Womb', // Abushgidim piece\n  TORCH: 'Torch',\n  PLAYER: 'Player',\n  PILLAR: 'Pillar',\n  NPC: 'NPCharacter',\n  MUSHROOM: 'Mushroom',\n  MOVEABLE: 'Moveable',\n  JEWEL: 'Jewel',\n  INTERACTIVE: 'Interactive',\n  GROUND: 'Ground',\n  GAME_OBJECT: 'GameObject',\n  FALLABLE: 'Fallable',\n  EXPLOSION: 'Explosion',\n  EXIT: 'Exit',\n  EMPTY: 'Empty',\n  DESTROYABLE: 'Destroyable',\n  DECO: 'Deco',\n  DEBRIS: 'Debris',\n  CHARACTER: 'Character',\n  BOULDER: 'Boulder',\n  BARREL: 'Barrel',\n  BASE_OBJECT: 'BaseObject',\n}\n\nexport const PIXEL_NAME_BG = {\n  TRANSPARENT: '00ff00',\n  BACKGROUND: '000000',\n  BG_TOP: 'ffffff',\n  BG_RIGHT: '00cc00',\n  BG_BOTTOM: '999999',\n  BG_LEFT: '0000cc',\n  BG_TOP_RIGHT: '00ff00',\n  BG_BOTTOM_RIGHT: '009900',\n  BG_BOTTOM_LEFT: '000099',\n  BG_TOP_LEFT: '0000ff',\n  BG_INSET_TOP_RIGHT: 'cc0000',\n  BG_INSET_BOTTOM_RIGHT: '660000',\n  BG_INSET_BOTTOM_LEFT: '990000',\n  BG_INSET_TOP_LEFT: 'ff0000',\n}\nexport const PIXEL_NAME = {\n  EMPTY: '000000',\n  PLAYER: 'ff00ff',\n  GROUND: '663300',\n  BOULDER: '999999',\n  PILLAR: '545454',\n  WALL: '0000ff',\n  ENEMY: 'ff0000',\n  JEWEL: 'ffff00',\n  BARREL: '00ffff',\n  EXPLOSION: 'ffffff',\n  INTERACTION: '00ff00',\n  MUSHROOM: '9900ff',\n  BRO: '22a5f6',\n  DWARF: 'f29900',\n  EXIT: '00cc00',\n  ART: '1d4ee1',\n  ART2: '000099',\n  HANGING_2: 'd2fca8',\n  HANGING_3: '7ea854',\n  HANGING_4: '547e2a',\n  HANGING_5: '2a5400',\n  DEBRIS: 'a82a2a',\n  BLOCK: 'dadaff',// fake pixel to create a invisible wall, not\n  TORCH: '7e5400'\n}\n\nexport const DIRS = {\n  DOWN: 'ArrowDown',\n  UP: 'ArrowUp',\n  LEFT: 'ArrowLeft',\n  RIGHT: 'ArrowRight',\n}\nexport const BG_PIXEL_TO_TILEMAP_POSITION = {\n  [PIXEL_NAME_BG.TRANSPARENT]: 81,\n  [PIXEL_NAME_BG.BACKGROUND]: 0,\n  [PIXEL_NAME_BG.BG_TOP]: 71,\n  [PIXEL_NAME_BG.BG_RIGHT]: 82,\n  [PIXEL_NAME_BG.BG_BOTTOM]: 91,\n  [PIXEL_NAME_BG.BG_LEFT]: 80,\n  [PIXEL_NAME_BG.BG_TOP_RIGHT]: 72,\n  [PIXEL_NAME_BG.BG_BOTTOM_RIGHT]: 92,\n  [PIXEL_NAME_BG.BG_BOTTOM_LEFT]: 90,\n  [PIXEL_NAME_BG.BG_TOP_LEFT]: 70,\n  [PIXEL_NAME_BG.BG_INSET_TOP_RIGHT]: 85,\n  [PIXEL_NAME_BG.BG_INSET_BOTTOM_RIGHT]: 83,\n  [PIXEL_NAME_BG.BG_INSET_BOTTOM_LEFT]: 84,\n  [PIXEL_NAME_BG.BG_INSET_TOP_LEFT]: 86,\n}\nexport const PIXEL_TO_TILEMAP_POSITION = {\n  [PIXEL_NAME.EMPTY]: 0,\n  [PIXEL_NAME.WALL]: 3,\n  [PIXEL_NAME.GROUND]: 2,\n  [PIXEL_NAME.ART]: 0,\n  [PIXEL_NAME.ART2]: 20,\n  [PIXEL_NAME.EXIT+'_1']: 18,\n  [PIXEL_NAME.EXIT+'_2']: 48,\n  [PIXEL_NAME.EXIT+'_3']: 88,\n  [PIXEL_NAME.DEBRIS]: 1,\n  WORLD_ART: 60,\n  calculateGroundTileWithNeighbours: (x, y, data) => {\n    const W = (data[x]||[])[y-1] === PIXEL_NAME.GROUND ? 'W' : '-'\n    const N = (data[x-1]||[])[y] === PIXEL_NAME.GROUND ? 'N' : '-'\n    const E = (data[x]||[])[y+1] === PIXEL_NAME.GROUND ? 'E' : '-'\n    const S = (data[x+1]||[])[y] === PIXEL_NAME.GROUND ? 'S' : '-'\n    switch(`${N}${E}${S}${W}`) {\n      case '----':\n        default:\n        return 2\n      case 'NESW':\n        return 51\n      case 'N---':\n        return 63\n      case '-E--':\n        return 44\n      case '--S-':\n        return 43\n      case '---W':\n        return 46\n      case 'NE--':\n        return 60\n      case '-ES-':\n        return 40\n      case '--SW':\n        return 42\n      case 'N--W':\n        return 62\n      case 'NES-':\n        return 50\n      case '-ESW':\n        return 41\n      case 'N-SW':\n        return 52\n      case 'NE-W':\n        return 61\n      case 'N-S-':\n        return 53\n      case '-E-W':\n        return 45\n    }\n  },\n  calculateWallTileWithNeighbours: (x, y, data) => {\n    const W = (data[x]||[])[y-1] === PIXEL_NAME.WALL || [PIXEL_NAME.ART, PIXEL_NAME.ART2].includes((data[x]||[])[y-1]) || [PIXEL_NAME.HANGING_2, PIXEL_NAME.HANGING_3, PIXEL_NAME.HANGING_4, PIXEL_NAME.HANGING_5, PIXEL_NAME.TORCH].includes((data[x]||[])[y-1]) ? 'W' : '-'\n    const N = (data[x-1]||[])[y] === PIXEL_NAME.WALL || [PIXEL_NAME.ART, PIXEL_NAME.ART2].includes((data[x-1]||[])[y]) || [PIXEL_NAME.HANGING_2, PIXEL_NAME.HANGING_3, PIXEL_NAME.HANGING_4, PIXEL_NAME.HANGING_5, PIXEL_NAME.TORCH].includes((data[x-1]||[])[y]) ? 'N' : '-'\n    const E = (data[x]||[])[y+1] === PIXEL_NAME.WALL || [PIXEL_NAME.ART, PIXEL_NAME.ART2].includes((data[x]||[])[y+1]) || [PIXEL_NAME.HANGING_2, PIXEL_NAME.HANGING_3, PIXEL_NAME.HANGING_4, PIXEL_NAME.HANGING_5, PIXEL_NAME.TORCH].includes((data[x]||[])[y+1]) ? 'E' : '-'\n    const S = (data[x+1]||[])[y] === PIXEL_NAME.WALL || [PIXEL_NAME.ART, PIXEL_NAME.ART2].includes((data[x+1]||[])[y]) || [PIXEL_NAME.HANGING_2, PIXEL_NAME.HANGING_3, PIXEL_NAME.HANGING_4, PIXEL_NAME.HANGING_5, PIXEL_NAME.TORCH].includes((data[x+1]||[])[y]) ? 'S' : '-'\n    switch(`${N}${E}${S}${W}`) {\n      case '----':\n        default:\n        return 3\n      case 'NESW':\n        return 21\n      case 'N---':\n        return 33\n      case '-E--':\n        return 14\n      case '--S-':\n        return 13\n      case '---W':\n        return 16\n      case 'NE--':\n        return 30\n      case '-ES-':\n        return 10\n      case '--SW':\n        return 12\n      case 'N--W':\n        return 32\n      case 'NES-':\n        return 20\n      case '-ESW':\n        return 11\n      case 'N-SW':\n        return 22\n      case 'NE-W':\n        return 31\n      case 'N-S-':\n        return 23\n      case '-E-W':\n        return 15\n    }\n  },\n  // Dirt earth\n  calculateWallTileWithNeighboursDirtEarth: (x, y, data) => {\n    const W = (data[x]||[])[y-1] === PIXEL_NAME.WALL ? 'W' : '-'\n    const N = (data[x-1]||[])[y] === PIXEL_NAME.WALL ? 'N' : '-'\n    const E = (data[x]||[])[y+1] === PIXEL_NAME.WALL ? 'E' : '-'\n    const S = (data[x+1]||[])[y] === PIXEL_NAME.WALL ? 'S' : '-'\n    switch(`${N}${E}${S}${W}`) {\n      case '----':\n        default:\n        return 2\n      case 'NESW':\n        return 51\n      case 'N---':\n        return 63\n      case '-E--':\n        return 44\n      case '--S-':\n        return 43\n      case '---W':\n        return 46\n      case 'NE--':\n        return 60\n      case '-ES-':\n        return 40\n      case '--SW':\n        return 42\n      case 'N--W':\n        return 62\n      case 'NES-':\n        return 50\n      case '-ESW':\n        return 41\n      case 'N-SW':\n        return 52\n      case 'NE-W':\n        return 61\n      case 'N-S-':\n        return 53\n      case '-E-W':\n        return 45\n    }\n  }\n}","// import * as Localization from 'expo-localization'\nimport memoize from 'lodash.memoize'\nimport i18n from 'i18n-js'\nimport dictionary_en from './dictionary_en.json'\nimport dictionary_es from './dictionary_es.json'\n\nconst getDictionary = (lang) => {\n  switch(lang) {\n    case 'en':\n    default:\n      return dictionary_en\n    case 'es':\n      return dictionary_es\n  }\n}\n\nconst translationGetters = {\n  en: () => getDictionary('en'),\n  es: () => getDictionary('es'),\n}\n\nexport const translate = memoize(\n  (key, config) => i18n.t(key, config),\n  (key, config) => (config ? key + JSON.stringify(config) : key),\n)\n\nexport const getLocale = () => i18n.locale\nexport const getDayRefFormat = (locale = getLocale()) => {\n  switch (locale) {\n    case 'es':\n      return 'DD [de] MMMM'\n    default:\n      return 'MMMM Do'\n  }\n}\n\n// in Spanish verbs in past participle are pluralizable meanwhile in English they aren't.\n// currently only en is not pluralizeble.\nexport const isPastParticiplePluralizable = (locale = getLocale()) =>\n  ({\n    en: false,\n    es: true,\n  }[locale])\n\nexport const setI18nConfig = async (callback) => {\n  // fallback if no available language fits\n  const fallback = 'en'\n\n  // const { locale: localeComplete } = await Localization.getLocalizationAsync()\n  let locale = navigator.language.substring(0, 2)\n\n  if (!Object.keys(translationGetters).includes(locale)) locale = fallback\n\n  const languageTag = locale\n\n  const dictionary = await translationGetters[languageTag]()\n  // set i18n-js config\n  // clear translation cache\n  // if (translate.cache.clear) translate.cache.clear()\n  i18n.translations = { [languageTag]: dictionary }\n  i18n.locale = languageTag\n  callback(true)\n}\n","import { CLASS_NAMES } from \"../../utils/constants\"\n\nexport default class BaseObject {\n  constructor() {\n    this.eventListeners = []\n    this.classes = [] // helper fot isClass matching\n  }\n\n  listClasses() {\n    let proto = this.__proto__\n    const classes = []\n    while(proto.constructor.className !== undefined) {\n      classes.push(proto.constructor.className)\n      proto = proto.__proto__\n    }\n    return classes\n  }\n\n  isClass(givenClass) {\n    if(this.classes.length === 0) {\n      this.classes = this.listClasses()\n    }\n    const className = typeof givenClass === 'string' ? givenClass : givenClass.className\n    return this.classes.includes(className)\n    \n    // if(Class.className === 'Player') {\n    //   window.test = this\n    // }\n    // return this.constructor.className === Class.className\n  }\n  addEventListener(eventName, listener) {\n    this.eventListeners.push([eventName, listener])\n    return () => {\n      this.eventListeners = this.eventListeners.filter(l => l[1] !== listener)\n    }\n  }\n  dispatchEvent(eventName, payload) {\n    this.eventListeners.filter(l => l[0] === eventName).forEach(l => l(payload, this))\n  }\n}\n\nBaseObject.className = CLASS_NAMES.BASE_OBJECT","import { CLASS_NAMES } from \"../../utils/constants\"\nimport BaseObject from \"./BaseObject\"\n\nexport default class GameObject extends BaseObject {\n  constructor({ id, isRigid, isBreakable, isFlat, isPickable, isCrushable, level }) {\n    super()\n    this.id = id\n    // can't be moved nor affected by gravity\n    // wall, ground\n    this.isRigid = isRigid\n\n    // destroyable under circumstances like explosions\n    // ground, boulder, diamond\n    this.isBreakable = isBreakable\n\n    // rounded objects (like boulders and diamonds) above remain still\n    // character, ground, wall\n    this.isFlat = isFlat\n\n    // can be collected by characters\n    // diamond\n    this.isPickable = isPickable\n\n    // crush under pression\n    // character, enemies, dynamite, barrel\n    this.isCrushable = isCrushable\n\n    // energy to break things\n    this.power = 0\n\n    // how resistant to brake it is\n    this.strength = 0\n\n    // how hard can push\n    this.force = 0\n\n    // how much force can resist before move\n    this.weight = 0\n\n    this.level = level\n\n    this.position = null\n    this.alien = null\n    this.isMoveable = !this.isRigid\n  }\n\n  setPosition(coords) {\n    this.position = coords\n  }\n\n  canMove() {\n    return this.isMoveable\n  }\n  overrunBy(){}\n  runningOver(){}\n  canFallDown() { return false }\n  canFallLeft() { return false }\n  canFallRight() { return false }\n  addedToScene() {}\n  hitBy() {}\n  \n}\n\nGameObject.className = CLASS_NAMES.GAME_OBJECT\n","import { CLASS_NAMES } from \"../../utils/constants\"\nimport GameObject from \"./GameObject\"\n\nexport default class Empty extends GameObject {\n  constructor(id, level) {\n    super({\n      id,\n      isRigid: false,\n      isBreakable: false,\n      isFlat: true,\n      isPickable: false,\n      isCrushable: true,\n      level\n    })\n    this.id = id\n    this.level = level\n    this.isEmpty = true\n  }\n  setPosition(coords) {\n    this.position = coords\n  }\n}\n\nEmpty.className = CLASS_NAMES.EMPTY\n","import Phaser from \"phaser\";\nimport GameObject from \"./GameObject\";\nimport Empty from \"./Empty\";\nimport { CLASS_NAMES, PIXEL_NAME } from \"../../utils/constants\";\n\nexport default class Explosion extends GameObject {\n  constructor(id, level) {\n    super({\n      id,\n      isRigid: false,\n      isBreakable: false,\n      isFlat: true,\n      isPickable: false,\n      isCrushable: false,\n      level,\n    });\n    this.power = 10;\n    this.strength = 10;\n    this.extinguished = false;\n  }\n  setPosition(coords) {\n    super.setPosition(coords);\n    const { x, y } = coords;\n\n    const layer = this.level.scene.children.getByName(\"layer_1\");\n    // when player dies and level is restarting but explosions still occuring, layer is null\n    if (!layer) return false;\n\n    const { tilemap: map } = layer;\n\n    const explosion = this.level.scene.add\n      .sprite(48, 16)\n      .setOrigin(0.125, 0.125)\n      .play(\"explosion_explode\");\n    explosion.setScale(layer.scaleX);\n    explosion.x = map.tileToWorldX(x);\n    explosion.y = map.tileToWorldY(y);\n\n    // this.level.pause()\n    explosion.once(Phaser.Animations.Events.ANIMATION_COMPLETE, () => {\n      explosion.destroy();\n      this.extinguished = true;\n      // avoid to wipe out a non explosion object what provokes a ghost element\n      if(this.level.objects[y][x].isClass(CLASS_NAMES.EMPTY) || this.level.objects[y][x].isClass(CLASS_NAMES.EXPLOSION)) {\n        this.level.objects[y][x] = new Empty(PIXEL_NAME.EMPTY, this.level);\n      }\n    });\n\n    this.alien = explosion;\n\n    this.level.replaceByEmpty(this);\n    this.level.onNextTick((lvl) => {\n      // destroy explosion in the next tick or it will prevent the objects above it to wait for a 2nd tick to start falling\n      // this is bcs barrels explode with an offset of tick/2 but explosion places are reserved when barrel cruashes\n      // therefore the explosions takes 1 tick from half to half causing the object above to wait an extra tick\n      // lvl.objects[y][x] = new Empty(PIXEL_NAME.EMPTY, this.level)\n      // lvl.replaceByEmpty(this)\n    });\n  }\n}\n\nExplosion.className = CLASS_NAMES.EXPLOSION;\n","import { CLASS_NAMES } from '../../utils/constants'\nimport GameObject from './GameObject'\n\nexport default class Destroyable extends GameObject {\n  constructor(props) {\n    super(props)\n    this.inactive = false\n  }\n  overrunBy(el) {\n    if(el.power > this.strength) {\n      this.inactive = true\n      this.level.onDestroyElement(this)\n    }\n  }\n}\n\nDestroyable.className = CLASS_NAMES.DESTROYABLE\n","import { CLASS_NAMES } from '../../utils/constants'\nimport Destroyable from './Destroyable'\n\nexport default class Moveable extends Destroyable {\n  move({ x, y }) {\n    super.setPosition({ x, y})\n    // this.isMoving = false\n  }\n}\n\nMoveable.className = CLASS_NAMES.MOVEABLE\n","import { CLASS_NAMES } from '../../utils/constants'\nimport Moveable from './Moveable'\n\nexport default class Fallable extends Moveable {\n  constructor(props) {\n    super(props)\n    this.isFalling = 0 // increment on each loop that the element is falling\n    this.freeze = false // when true, prevents the object to be affected by gravity loop.\n  }\n\n  canFallDown() {\n    const nextPos = { x: this.position.x, y: this.position.y + 1 }\n    const destinationInBounds = this.level.isDestinationInBounds(nextPos.x, nextPos.y)\n    const destinationElement = destinationInBounds && this.level.getObjectAt(nextPos.x, nextPos.y)\n    const destinationIsEmpty = this.level.isDestinationEmpty(nextPos.x, nextPos.y) || destinationElement?.isClass(CLASS_NAMES.EXPLOSION)\n    const destinationIsCrushable = destinationElement.isCrushable && this.isFalling\n    const canFall = destinationIsEmpty || destinationIsCrushable\n\n    return canFall\n  }\n  canRollTo(x, y) {\n    const nextPos = { x, y }\n    const destinationInBounds = this.level.isDestinationInBounds(nextPos.x, nextPos.y)\n    const pathElement = destinationInBounds && this.level.getObjectAt(nextPos.x, this.position.y)\n    const pathClear = destinationInBounds && this.level.objectIsEmpty(pathElement)\n    const destinationElement = destinationInBounds && this.level.getObjectAt(nextPos.x, nextPos.y)\n    const destinationIsEmpty = this.level.objectIsEmpty(destinationElement)\n    const restingElement = destinationInBounds && this.level.getObjectAt(this.position.x, this.position.y + 1)\n    const canRest = !this.level.isDestinationEmpty(this.position.x, this.position.y + 1) && restingElement.isFlat\n    const canRoll = destinationInBounds && destinationIsEmpty && pathClear && !canRest && restingElement && !restingElement.isFalling\n\n    return canRoll\n  }\n  canFallRight() {\n    return !this.canFallDown() && this.canRollTo(this.position.x + 1, this.position.y + 1)\n  }\n  canFallLeft() {\n    return !this.canFallDown() && this.canRollTo(this.position.x - 1, this.position.y + 1)\n  }\n}\n\nFallable.className = CLASS_NAMES.FALLABLE\n","import { CLASS_NAMES } from '../../utils/constants'\nimport Explosion from './Explosion'\nimport Fallable from './Fallable'\n\nexport default class Boulder extends Fallable {\n  constructor(id, level) {\n    super({\n      id,\n      isRigid: false,\n      isBreakable: true,\n      isFlat: false,\n      isPickable: false,\n      isCrushable: false,\n      level\n    })\n    this.strength = 5\n  }\n\n  runningOver(el) {\n    if(el.classes.includes(\"Barrel\")) {\n      this.inactive = true\n    }\n  }\n  overrunBy(el) {\n    if(!el || el?.isClass(Explosion)) {\n      this.alien.visible = false\n      this.alien.destroy()\n      this.inactive = true\n    }\n  }\n}\nBoulder.className = CLASS_NAMES.BOULDER\n","import Moveable from './Moveable'\nimport { CLASS_NAMES, DIRS } from '../../utils/constants'\n\nexport default class Character extends Moveable {\n  constructor(id, level) {\n    super({\n      id,\n      isRigid: false,\n      isBreakable: true,\n      isFlat: true,\n      isPickable: false,\n      isCrushable: true,\n      level\n    })\n    this.pushingDirection = null\n  }\n\n  animRun() {}\n  \n  canMove(x, y) {\n    const neighbour = this.level.getObjectAt(x, y)\n    const emptyPlace = this.level.objectIsEmpty(neighbour)\n    const canBrakeNeighbour = neighbour?.isBreakable && this.power >= neighbour.strength && !neighbour.isClass(CLASS_NAMES.CHARACTER)\n    const canWalkThrough = neighbour.isClass && neighbour.isClass(CLASS_NAMES.CHARACTER) && neighbour.name !== 'dwarf'\n    \n    this.isBrakingGround = canBrakeNeighbour && neighbour.isClass(CLASS_NAMES.GROUND)\n\n    return emptyPlace || canWalkThrough || canBrakeNeighbour || neighbour.isPickable ? neighbour : false\n  }\n\n  canMoveDir(DIR) {\n    switch(DIR) {\n      case DIRS.UP: return this.canMoveUp()\n      case DIRS.DOWN: return this.canMoveDown()\n      case DIRS.LEFT: return this.canMoveLeft()\n      case DIRS.RIGHT: return this.canMoveRight()\n      default: return false\n    }\n  }\n\n  canMoveUp() {\n    return this.canMove(this.position.x, this.position.y - 1)\n  }\n  canMoveDown() {\n    return this.canMove(this.position.x, this.position.y + 1)\n  }\n  animPushRight() {\n  }\n  animPushLeft() {\n  }\n  canMoveLeft() {\n    return this.canMove(this.position.x - 1, this.position.y)\n  }\n  canPushLeft() {\n    const neighbour = this.level.getObjectAt(this.position.x - 1, this.position.y)\n    const nothingBesides = this.level.isPositionClear(this.position.x - 2, this.position.y)\n    const isAboutToFall = this.level.isPositionClear(this.position.x - 1, this.position.y + 1)\n    const canPush = neighbour?.isMoveable && nothingBesides && !isAboutToFall\n    return canPush\n  }\n  pushLeft() {\n    const neighbour = this.level.getObjectAt(this.position.x - 1, this.position.y)\n    const canMove = this.canMoveLeft()\n    const canPush = this.canPushLeft()\n    let pushed = false\n    if(!canMove && canPush) {\n      if(this.pushingDirection === DIRS.LEFT) {\n        this.animPushLeft()\n        pushed = true\n        this.level.moveObject(neighbour, { x: this.position.x - 2, y: this.position.y })\n        this.level.jumpIntoParallelGravity(neighbour)\n        // clears pushing dir to let a new loop to push again\n        this.pushingDirection = null\n      } else {\n        this.pushingDirection = DIRS.LEFT\n        this.animPushLeft()\n      }\n    }\n    return pushed\n  }\n\n  canMoveRight() {\n    return this.canMove(this.position.x + 1, this.position.y)\n  }\n  \n  canPushRight() {\n    const neighbour = this.level.getObjectAt(this.position.x + 1, this.position.y)\n    const nothingBesides = this.level.isPositionClear(this.position.x + 2, this.position.y)\n    const isAboutToFall = this.level.isPositionClear(this.position.x + 1, this.position.y + 1)\n    const canPush = neighbour?.isMoveable && nothingBesides && !isAboutToFall\n    return canPush\n  }\n  \n  pushRight() {\n    const neighbour = this.level.getObjectAt(this.position.x + 1, this.position.y)\n    const canMove = this.canMoveRight()\n    const canPush = this.canPushRight()\n    let pushed = false\n    if(!canMove && canPush) {\n      if(this.pushingDirection === DIRS.RIGHT) {\n        this.animPushRight()\n        this.level.moveObject(neighbour, { x: this.position.x + 2, y: this.position.y })\n        this.level.jumpIntoParallelGravity(neighbour)\n        // clears pushing dir to let a new loop to push again\n        this.pushingDirection = null\n        pushed = true\n      } else {\n        this.pushingDirection = DIRS.RIGHT\n        this.animPushRight()\n      }\n    }\n    return pushed\n  }\n\n  testProximity(targetPos, proximity = 1, onlyRightAngles) {\n    const topLimit = this.position.y - proximity\n    const bottomLimit = this.position.y + proximity\n    const leftLimit = this.position.x - proximity\n    const rightLimit = this.position.x + proximity\n    let retVal = false\n    const isInArea = targetPos.x >= leftLimit && targetPos.x <= rightLimit && targetPos.y >= topLimit && targetPos.y <= bottomLimit\n    const isInRightAngle = targetPos.x === this.position.x || targetPos.y === this.position.y\n    if(isInArea && (!onlyRightAngles || (onlyRightAngles && isInRightAngle))) {\n      retVal = true\n    }\n\n    return retVal\n  }\n}\n\nCharacter.className = CLASS_NAMES.CHARACTER\n","import {\n  CLASS_NAMES,\n  SCALE,\n} from \"../../utils/constants\";\nimport Explosion from \"./Explosion\";\nimport GameObject from \"./GameObject\";\nimport Phaser from \"phaser\";\nimport UI from \"../UI\";\n\nexport default class Debris extends GameObject {\n  constructor(id, level) {\n    super({\n      id,\n      isRigid: true,\n      isBreakable: true,\n      isFlat: true,\n      isPickable: false,\n      isCrushable: false,\n      level,\n    });\n    this.strength = 9; // one less than explosion\n  }\n  overrunBy(el) {\n    if (el && el.isClass(Explosion)) {\n      const layer = this.level.scene.children.getByName(\"layer_1\");\n      const { tilemap: map } = layer;\n\n      map.putTileAt(\n        -1, // leave space really empty and display tile from layer_0 (underlayer)\n        this.position.x,\n        this.position.y,\n        false,\n        \"layer_1\"\n      );\n    } else {\n      const layer = this.level.scene.children.getByName(\"layer_1\");\n      const { tilemap: map } = layer;\n\n      map.putTileAt(\n        -1, // leave space really empty and display tile from layer_0 (underlayer)\n        this.position.x,\n        this.position.y,\n        false,\n        \"layer_1\"\n      );\n      // destroyed by earthquake\n      this.break_effect = this.level.scene.add\n        .sprite(48, 16)\n        .setOrigin(0, 0.25);\n      this.break_effect.setScale(SCALE);\n      this.break_effect.depth = 4;\n      this.break_effect.x = UI.tileToScreen(this.position.x);\n      this.break_effect.y = UI.tileToScreen(this.position.y);\n      this.break_effect.play(\"ground_disolves\");\n      this.break_effect.setFlipY(true);\n      this.break_effect.on(Phaser.Animations.Events.ANIMATION_COMPLETE, () => {\n        this.break_effect.destroy();\n      });\n    }\n  }\n}\n\nDebris.className = CLASS_NAMES.DEBRIS\n","import { CLASS_NAMES } from '../../utils/constants'\nimport Explosion from './Explosion'\nimport Fallable from './Fallable'\n\nexport default class Pillar extends Fallable {\n  constructor(id, level) {\n    super({\n      id,\n      isRigid: false,\n      isBreakable: true,\n      isFlat: true,\n      isPickable: false,\n      isCrushable: false,\n      level\n    })\n    this.strength = 5\n  }\n\n  runningOver(el) {\n    if(el.classes.includes(\"Barrel\")) {\n      this.inactive = true\n    }\n  }\n\n  overrunBy(el) {\n    if(el.constructor.className === Explosion.className) {\n      this.alien.visible = false\n      this.alien.destroy()\n      // this.alien = null\n      // this.level.onDestroyElement(this)\n    }\n  }\n}\nPillar.className = CLASS_NAMES.PILLAR\n","import Dexie from \"dexie\";\nimport { translate } from \"./localization\";\nconst db = new Dexie(\"EverlongQuest\");\nconst bootUp = async () => {\n  try {\n    await db.version(1).stores({\n      items: `id,value`,\n    });\n    const value = JSON.stringify({\n      countDiamonds: 0,\n      collectedDiamonds: 0,\n      countEnemies: 0,\n      killedEnemies: 0,\n      countShrooms: 0,\n      collectedShrooms: 0,\n      comp: 1,\n      prevBest: 0,\n    })\n    await db.items.bulkPut([\n      { id: \"totalShroomsAmount\", value: JSON.stringify(0) },\n      { id: \"tripDone\", value: JSON.stringify(false) },\n      // { id: \"level_1\", value },\n      // { id: \"level_2\", value },\n      // { id: \"level_3\", value },\n      // { id: \"level_4\", value },\n      // { id: \"level_5\", value },\n      // { id: \"level_6\", value },\n      // { id: \"level_7\", value },\n      // { id: \"level_8\", value },\n      // { id: \"level_9\", value },\n      // { id: \"level_10\", value },\n      // { id: \"level_11\", value },\n      // { id: \"level_12\", value },\n      // { id: \"level_13\", value },\n      // { id: \"level_14\", value },\n      // { id: \"level_15\", value },\n      // { id: \"level_16\", value },\n      // { id: \"level_17\", value },\n      // { id: \"level_18\", value },\n      // { id: \"maze_1\", value },\n      // { id: \"maze_2\", value },\n      \n    ]);\n  } catch (e) {\n    alert(translate(\"menu.cookies.thirdparty\"));\n    console.error(e);\n  }\n};\n\n// const DB_NAME = 'data'\n// const DB_INITIAL_STATE = {\n//   totalShroomsAmount: 0,\n//   tripDone: false,\n// }\n\n// let memDB = DB_INITIAL_STATE\n// const bootUp = () => {\n//   const stored = window.localStorage.getItem(DB_NAME) || ''\n//   memDB = stored !== '' ? JSON.parse(stored) : DB_INITIAL_STATE\n//   return memDB\n// }\n// const persist = () => window.localStorage.setItem(DB_NAME, JSON.stringify(memDB))\n\nconst get = async (key) => {\n  const collection = await db.items.where({ id: key });\n  const record =\n    (await collection.count()) > 0 ? await collection.first() : null;\n  return record !== null ? JSON.parse(record.value) : null;\n};\nconst set = async (key, value) => {\n  const res = await db.items.where({ id: key }).toArray();\n  if (res.length > 0) {\n    await db.items.where({ id: key }).modify({ value: JSON.stringify(value) });\n  } else {\n    // await db.items.add({ value: JSON.stringify(value) }, key)\n    // await db.items.put(JSON.stringify(value), key)\n    await db.items.put({ id: key, value: JSON.stringify(value) });\n  }\n  return true;\n};\n// const get = key => eval(`memDB.${key}`)\n// const set = (key, value) => {\n//   switch(typeof value) {\n//     case 'string':\n//       safeSet(key, `\\`${value}\\``)\n//       break\n//     case 'number':\n//     case 'boolean':\n//       safeSet(key, value)\n//       break\n//     default:\n//     case 'object':\n//       safeSet(key, `JSON.parse(\\`${JSON.stringify(value)}\\`)`)\n//       break\n//   }\n//   persist()\n// }\nconst reset = () => {\n  db.items.clear();\n  // memDB = DB_INITIAL_STATE\n  // persist()\n};\n\n// const safeSet = (key, value) => eval(`memDB.${key} = ${value}`)\nconst getLevels = () => {\n  const levels = db.items.where(\"id\").startWith(\"level_\").toArray();\n  console.log(levels);\n  return levels.map((l) => JSON.parse(l));\n  // return Object.keys(memDB).map(k => k.includes('level_') ? memDB[k] : null).filter(Boolean)\n};\nexport default {\n  bootUp,\n  get,\n  set,\n  reset,\n  getLevels,\n};\n","import Phaser from \"phaser\";\nimport {\n  TICK_TIME,\n  PLAYER_TICK_TIME,\n  PIXEL_NAME,\n  DIRS,\n  SCALE,\n  CLASS_NAMES,\n} from \"../../utils/constants\";\nimport {\n  Player,\n  Boulder,\n  Wall,\n  Empty,\n  Ground,\n  Barrel,\n  Enemy,\n  Interactive,\n  Jewel,\n  Mushroom,\n  NPCharacter,\n  Exit,\n  Torch,\n  Explosion,\n  Block,\n} from \"../objects\";\nimport Character from \"../objects/Character\";\nimport Debris from \"../objects/Debris\";\nimport Fallable from \"../objects/Fallable\";\nimport Pillar from \"../objects/Pillar\";\nimport UI from \"../UI\";\nimport dbManager from \"../../utils/dbManager\";\n\nclass Level {\n  constructor(config) {\n    this.config = config;\n    this.moveables = [];\n    this.parallelMovables = []; // used for gravity loop on falling objects until they rest\n    this.objects = [];\n    this.interactiveElements = {};\n    this.decorationElements = {};\n    this.scene = null;\n    this.player = null;\n    this.playerTimeoutId = 0;\n    this.timeoutIds = [];\n    this.focusObject = null; // what camera focus on\n    this.isPaused = false;\n    this.queuedActions = [];\n    // stats\n    this.countDiamonds = 0;\n    this.collectedDiamonds = 0;\n    this.countEnemies = 0;\n    this.killedEnemies = 0;\n    this.countShrooms = 0;\n    this.collectedShrooms = 0;\n    this.totalShroomsAmount = 0;\n    this.prevBest = 0;\n    // flags\n    this.preventDisplayDiamondsGoalAmount = false;\n    // unfinish flag\n    this.unfinished = true;\n    // loop identifier\n    this.tickId = 0;\n  }\n\n  onNextTick(listener) {\n    this.queuedActions.push(listener);\n  }\n  runScheduledActions() {\n    const toRun = this.queuedActions;\n    this.queuedActions = [];\n    toRun.forEach((cb) => cb(this));\n  }\n\n  async connectToScene(phaserScene) {\n    this.scene = phaserScene;\n    const layer = this.scene.children.getByName(\"layer_1\");\n    const { tilemap: map } = layer;\n    if (this.objects.length) {\n      this.objects = [];\n    }\n\n    this.break_effect = this.scene.add.sprite(48, 16).setOrigin(0, 0.25);\n    this.break_effect.setScale(layer.scaleX);\n    this.break_effect.depth = 4;\n\n    this.pick_effect = this.scene.add.sprite(48, 16).setOrigin(0, 0.25);\n    this.pick_effect.setScale(layer.scaleX);\n    this.pick_effect.depth = 4;\n\n    this.enemy_die_effect = this.scene.add.sprite(48, 16).setOrigin(0, 0.25);\n    this.enemy_die_effect.setScale(layer.scaleX);\n    this.enemy_die_effect.depth = 4;\n\n    const dbData = await dbManager.get(this.constructor.key);\n    const shroomAlreadyCollected = dbData && dbData.collectedShrooms !== 0;\n    const alreadyCollectedShrooms = dbData?.collectedShrooms || 0;\n\n    let intOrder = 0;\n    this.objects = this.config.map((r, y) =>\n      r.map((c, x) => {\n        // factory\n        let element;\n        switch (c) {\n          case PIXEL_NAME.WALL:\n            element = new Wall(c, this);\n            element.setPosition({ x, y });\n            break;\n          case PIXEL_NAME.BLOCK:\n            // invisible wall used to avoid player to get positions\n            element = new Block(c, this);\n            element.setPosition({ x, y });\n            break;\n          case PIXEL_NAME.TORCH:\n            element = new Torch(c, this);\n            element.setPosition({ x, y });\n            element.order = Object.values(this.decorationElements).filter(\n              (el) => el.isClass(Torch)\n            ).length;\n            this.decorationElements[\n              `${element.position.x}-${element.position.y}`\n            ] = element;\n            break;\n          case PIXEL_NAME.DEBRIS:\n            element = new Debris(c, this);\n            element.setPosition({ x, y });\n            break;\n          case PIXEL_NAME.GROUND:\n            element = new Ground(c, this);\n            element.setPosition({ x, y });\n            break;\n          case PIXEL_NAME.BOULDER:\n            element = this.createBoulderAt({ x, y });\n\n            break;\n          case PIXEL_NAME.PILLAR:\n            const pillar = this.scene.add\n              .sprite(48, 16)\n              .setOrigin(0.05, 0.2)\n              .play(\"pillar_idle\");\n            pillar.setScale(layer.scaleX);\n            pillar.x = map.tileToWorldX(x);\n            pillar.y = map.tileToWorldY(y);\n\n            element = new Pillar(c, this);\n            element.alien = pillar;\n            break;\n          case PIXEL_NAME.JEWEL:\n            const diamond = this.scene.add\n              .sprite(48, 16)\n              .setOrigin(0.05, 0.2)\n              .play(\"diamond_idle\");\n            diamond.setScale(layer.scaleX);\n            diamond.x = map.tileToWorldX(x);\n            diamond.y = map.tileToWorldY(y);\n\n            this.countDiamonds++;\n\n            element = new Jewel(c, this);\n            element.order = this.countDiamonds;\n            element.alien = diamond;\n            element.move({ x, y });\n            break;\n          case PIXEL_NAME.MUSHROOM:\n            if (shroomAlreadyCollected) {\n              this.collectedShrooms = alreadyCollectedShrooms;\n              element = new Empty(c, this);\n            } else {\n              const mushroom = this.scene.add\n                .sprite(48, 16)\n                .setOrigin(0, 0)\n                .play(\"mushroom_idle\");\n              mushroom.setScale(layer.scaleX);\n              mushroom.x = map.tileToWorldX(x);\n              mushroom.y = map.tileToWorldY(y);\n\n              element = new Mushroom(c, this);\n              element.alien = mushroom;\n            }\n            this.countShrooms++;\n            break;\n          case PIXEL_NAME.BARREL:\n            element = this.createBarrelAt({ x, y });\n            break;\n          case PIXEL_NAME.PLAYER:\n            const player = this.scene.add.sprite(48, 16).setOrigin(0, 0.25);\n            player.setScale(layer.scaleX);\n            player.x = map.tileToWorldX(x);\n            player.y = map.tileToWorldY(y) + 5;\n\n            player.name = \"brave\";\n            player.on(Phaser.Animations.Events.ANIMATION_COMPLETE, () => {\n              if (!player.isMoving && !player.inactive) {\n                player.play(\"brave_idle\");\n              }\n            });\n\n            element = new Player(c, this);\n            element.alien = player;\n            element.animIdle();\n\n            // add shortcut reference\n            this.player = element;\n            break;\n          case PIXEL_NAME.BRO:\n            const follower = this.scene.add.sprite(48, 16).setOrigin(0, 0.25);\n            follower.setScale(layer.scaleX);\n            follower.x = map.tileToWorldX(x);\n            follower.y = map.tileToWorldY(y) + 5;\n\n            follower.name = \"bro\";\n            follower.on(Phaser.Animations.Events.ANIMATION_COMPLETE, () => {\n              if (!follower.isMoving && follower.isFollowing) {\n                follower.play(\"bro_idle\");\n              }\n            });\n\n            element = new NPCharacter(c, this, \"bro\");\n            element.alien = follower;\n            element.isFollowing = true;\n            element.animIdle();\n\n            // add shortcut reference\n            this.follower = element;\n            break;\n          case PIXEL_NAME.DWARF:\n            const leader = this.scene.add.sprite(48, 16).setOrigin(0, 0.25);\n            leader.setScale(layer.scaleX);\n            leader.x = map.tileToWorldX(x);\n            leader.y = map.tileToWorldY(y);\n\n            leader.name = \"dwarf\";\n            leader.on(Phaser.Animations.Events.ANIMATION_COMPLETE, () => {\n              if (!leader.isMoving) {\n                leader.play(\"dwarf_idle\");\n              }\n            });\n\n            element = new NPCharacter(c, this, \"dwarf\");\n            element.alien = leader;\n            // element.isFollowing = true\n            element.isLeading = true;\n            element.animIdle();\n\n            // add shortcut reference\n            this.leader = element;\n            break;\n          case PIXEL_NAME.ENEMY:\n            element = this.createEnemyAt({ x, y });\n            // const enemy = this.scene.add\n            //   .sprite(48, 16)\n            //   .setOrigin(0.125, 0.125)\n            //   .play(\"bat_move\");\n            // enemy.setScale(layer.scaleX);\n            // enemy.x = map.tileToWorldX(x);\n            // enemy.y = map.tileToWorldY(y);\n\n            this.countEnemies++;\n\n            // element = new Enemy(c, this);\n            // element.alien = enemy;\n            break;\n\n          case PIXEL_NAME.EXIT:\n          case PIXEL_NAME.INTERACTION:\n            const intElement =\n              c === PIXEL_NAME.EXIT\n                ? new Exit(c, this)\n                : new Interactive(c, this);\n            intElement.order = intOrder++;\n            this.interactiveElements[`${x}-${y}`] = intElement;\n            intElement.setPosition({ x, y });\n\n            // keep old hook when interactive element is added\n            this.onAddElement(intElement);\n            // instead of interactive element, add an empty element to the current position\n            element = new Empty(c, this);\n\n            if (intElement.isClass(Exit)) {\n              this.exit = intElement;\n            }\n            break;\n          default:\n            element = new Empty(c, this);\n        }\n        element.setPosition({ x, y });\n        if (!this.objectIsEmpty(element) && !element.isRigid) {\n          this.moveables.push(element);\n        }\n        this.onAddElement(element);\n        if (!element.isClass(Empty)) {\n          element.addedToScene();\n        }\n        return element;\n      })\n    );\n    this.focusObject = this.player.alien;\n\n    // unfinish flag\n\n    this.unfinished = !dbData || (dbData && dbData.comp === 0);\n    console.log(this.unfinished);\n\n    if (this.diamondsGoal > 0) {\n      // draw exit block only on unfinished levels\n      if (this.unfinished) {\n        const block = this.scene.add\n          .sprite(48, 16)\n          .setOrigin(0, 0.25)\n          .play(\"exit_block\");\n        block.setScale(layer.scaleX);\n        block.x = map.tileToWorldX(this.exit.position.x - 2);\n        block.y = map.tileToWorldY(this.exit.position.y);\n\n        const exitBlock = new Wall(PIXEL_NAME.WALL, this);\n        exitBlock.setPosition({\n          x: this.exit.position.x - 2,\n          y: this.exit.position.y,\n        });\n        exitBlock.alien = block;\n        this.objects[this.exit.position.y][this.exit.position.x - 2] =\n          exitBlock;\n        this.exit.block = exitBlock;\n      }\n\n      // only level 6 needs to have diamonds goal but do not display it until a dialog happens\n      if (!this.preventDisplayDiamondsGoalAmount) {\n        setTimeout(() => {\n          this.scene.events.emit(\"score:diamond_goal_set\", this.diamondsGoal);\n        }, 1500);\n      }\n    }\n\n    // awaits for child level object set goals\n    this.onNextTick(async () => {\n      if (!(await dbManager.get(this.constructor.key))) {\n        await dbManager.set(this.constructor.key, {\n          countDiamonds: this.countDiamonds,\n          collectedDiamonds: this.collectedDiamonds,\n          countEnemies: this.countEnemies,\n          killedEnemies: this.killedEnemies,\n          countShrooms: this.countShrooms,\n          collectedShrooms: this.collectedShrooms,\n          comp: 0,\n          prevBest: this.prevBest,\n        });\n      }\n    });\n\n    // this.totalShroomsAmount = dbManager.getLevels().reduce((r, l) => r + l.collectedShrooms, 0);\n    this.totalShroomsAmount = (await dbManager.get(\"totalShroomsAmount\")) || 0;\n  }\n\n  jumpIntoParallelGravity(el) {\n    const idx = this.moveables.findIndex((e) => e === el);\n    this.moveables.splice(idx, 1);\n    el.inParallelGravity = true;\n    this.parallelMovables.push(el);\n  }\n  goBackToMainGravity(el) {\n    // no way back when incative (like after explosion)\n    if (el.inactive) return false;\n\n    const idx = this.parallelMovables.findIndex((e) => e === el);\n    // nothing to move from parallel movables\n    if (idx === -1) return false;\n\n    this.parallelMovables.splice(idx, 1);\n    el.inParallelGravity = false;\n    this.moveables.push(el);\n  }\n  explodeLoop(barrels) {\n    barrels.forEach((el) => {\n      const canFallDown = el.canFallDown();\n      const objBelow = this.objects[el.position.y + 1][el.position.x];\n      const hitUncrushableWhenFalling =\n        !canFallDown &&\n        el.isFalling &&\n        !objBelow.isClass(CLASS_NAMES.EXPLOSION);\n      if (hitUncrushableWhenFalling) {\n        el.explode();\n      }\n    });\n  }\n\n  // explosionsRemove(explosions) {\n  //   explosions.forEach(el => {\n  //     this.objects[el.position.y][el.position.x] = new Empty(PIXEL_NAME.EMPTY, this);\n  //   })\n  // }\n  gravityLoop(parallelWorld) {\n    const moveables = parallelWorld || this.moveables;\n    if (this.isPaused) {\n      return;\n    }\n\n    if (!parallelWorld) {\n      this.runScheduledActions();\n    }\n\n    // this.explosionsRemove(moveables.filter((o) => o.isClass(CLASS_NAMES.EXPLOSION) && o.extinguished))\n    this.explodeLoop(moveables.filter((o) => o.isClass(CLASS_NAMES.BARREL)));\n    moveables\n      .sort((a, b) => a.position.y - b.position.y)\n      .filter((el) => !el.freeze && !el.exploded)\n      .forEach((el) => {\n        if (el.freeze) {\n          return false;\n        }\n        // if (el.beingPusehd) {\n        //   el.beingPusehd = false\n        //   return\n        // }\n        const canFallDown = el.canFallDown();\n        const canFallLeft = el.canFallLeft();\n        const canFallRight = el.canFallRight();\n        let nextPos;\n        if (canFallDown) {\n          nextPos = { x: el.position.x, y: el.position.y + 1 };\n        }\n        if (!canFallDown && canFallLeft) {\n          nextPos = { x: el.position.x - 1, y: el.position.y };\n          if (el.isFalling) {\n            nextPos.y++;\n          }\n        }\n        if (!canFallDown && !canFallLeft && canFallRight) {\n          nextPos = { x: el.position.x + 1, y: el.position.y };\n          if (el.isFalling) {\n            nextPos.y++;\n          }\n        }\n\n        if (nextPos) {\n          this.moveObject(el, nextPos);\n\n          // hit a solid\n          if (\n            el.isFalling &&\n            (canFallLeft || canFallRight) &&\n            el.isClass(Jewel)\n          ) {\n            this.scene.events.emit(\"sounds:gem_hit\");\n          }\n          if (\n            el.isFalling &&\n            (canFallLeft || canFallRight) &&\n            (el.isClass(Boulder) || el.isClass(Pillar))\n          ) {\n            this.scene.events.emit(\"sounds:rock_hit_hard\");\n          }\n\n          el.isFalling++;\n        } else {\n          // inform object bellow that something has hit it\n          const objectBelow = this.getObjectAt(\n            el.position.x,\n            el.position.y + 1\n          );\n          if (el.isFalling && objectBelow) {\n            // console.log(el, 'HIT AGAINST', objectBelow);\n            objectBelow.hitBy(el);\n          }\n\n          if (el.isFalling && (el.isClass(Boulder) || el.isClass(Pillar))) {\n            if (objectBelow && objectBelow.isClass(Ground)) {\n              this.scene.events.emit(\"sounds:rock_hit_soft\");\n            } else {\n              this.scene.events.emit(\"sounds:rock_hit_hard\");\n            }\n          }\n          if (el.isFalling && el.isClass(Jewel)) {\n            this.scene.events.emit(\"sounds:gem_hit\");\n          }\n          // if (el.isFalling && el.isClass(Barrel)) {\n          //   el.explode();\n          // }\n\n          el.isFalling = 0;\n        }\n\n        if (!el.isFalling && el.inParallelGravity) {\n          this.goBackToMainGravity(el);\n        }\n      });\n\n    if (!parallelWorld) {\n      this.enemiesLoop();\n      // this.runScheduledActions();\n    }\n  }\n  enemiesLoop() {\n    if (this.isPaused) {\n      return;\n    }\n    let nextPos,\n      neighbour,\n      isDestinationEmpty,\n      isPerpToAnchor,\n      newAnchor,\n      nextDir,\n      backToTrackDir,\n      nextAnchorPos;\n\n    const helperDirCalc = (\n      enemy,\n      nextPos,\n      nextDir,\n      backToTrackDir,\n      nextAnchorPos\n    ) => {\n      neighbour = this.getObjectAt(nextPos.x, nextPos.y);\n      isDestinationEmpty =\n        this.objectIsEmpty(neighbour) ||\n        (neighbour && neighbour.isClass(Player)); // this.isDestinationEmpty(nextPos.x, nextPos.y)\n      // if (!isDestinationEmpty && !enemy.anchorPosition) {\n      //   enemy.anchorPosition = neighbour.position\n      //   enemy.moveIntentDir = nextDir\n      // }\n      if (isDestinationEmpty && neighbour && neighbour.isClass(Player)) {\n        this.moveObject(enemy, nextPos);\n      }\n      if (isDestinationEmpty) {\n        if (!enemy.anchorPosition) {\n          enemy.moveIntentDir = nextDir;\n          return;\n        }\n        isPerpToAnchor =\n          enemy.position.x === enemy.anchorPosition.x ||\n          enemy.position.y === enemy.anchorPosition.y;\n        // scenario 1: enemy is perpendicular to anchor\n        if (isPerpToAnchor) {\n          // updates anchor counter clockwise\n          newAnchor = this.getObjectAt(nextAnchorPos.x, nextAnchorPos.y);\n          if (\n            !this.objectIsEmpty(newAnchor) &&\n            !newAnchor.isFalling &&\n            !newAnchor.isClass(Player)\n          ) {\n            enemy.anchorPosition = newAnchor.position;\n          } else {\n            enemy.moveIntentDir = backToTrackDir;\n          }\n        }\n        this.moveObject(enemy, nextPos);\n      } else {\n        enemy.anchorPosition = !neighbour.isFalling ? neighbour.position : null;\n        enemy.moveIntentDir = nextDir;\n      }\n    };\n    this.moveables\n      .filter((el) => el.isClass(Enemy))\n      .forEach((enemy) => {\n        // potential path finding mechanism @see https://github.com/qiao/PathFinding.js\n        // if(!enemy.path) {\n        //   const grid = new window.PF.Grid(this.objects.map(row => row.map(el => el.isEmpty ? 0 : 1)));\n        //   enemy.pathfinder = new window.PF.AStarFinder();\n        //   const path = enemy.pathfinder.findPath(enemy.position.x, enemy.position.y, thi.player.position.x, this.player.position.y, grid);\n        // }\n        switch (enemy.moveIntentDir) {\n          case DIRS.UP:\n            nextPos = { x: enemy.position.x, y: enemy.position.y - 1 };\n            nextDir = enemy.scanDirection === \"CW\" ? DIRS.RIGHT : DIRS.LEFT;\n            backToTrackDir =\n              enemy.scanDirection === \"CW\" ? DIRS.LEFT : DIRS.RIGHT;\n            nextAnchorPos =\n              enemy.scanDirection === \"CW\"\n                ? { x: nextPos.x - 1, y: nextPos.y }\n                : { x: nextPos.x + 1, y: nextPos.y };\n            // nextAnchorPos = { x: nextPos.x + 1, y: nextPos.y }\n            helperDirCalc(\n              enemy,\n              nextPos,\n              nextDir,\n              backToTrackDir,\n              nextAnchorPos\n            );\n\n            break;\n          case DIRS.RIGHT:\n            nextPos = { x: enemy.position.x + 1, y: enemy.position.y };\n            nextDir = enemy.scanDirection === \"CW\" ? DIRS.DOWN : DIRS.UP;\n            backToTrackDir = enemy.scanDirection === \"CW\" ? DIRS.UP : DIRS.DOWN;\n            // nextDir = DIRS.UP\n            // backToTrackDir = DIRS.DOWN\n            nextAnchorPos =\n              enemy.scanDirection === \"CW\"\n                ? { x: nextPos.x, y: nextPos.y - 1 }\n                : { x: nextPos.x, y: nextPos.y + 1 };\n            // nextAnchorPos = { x: nextPos.x, y: nextPos.y + 1 }\n            helperDirCalc(\n              enemy,\n              nextPos,\n              nextDir,\n              backToTrackDir,\n              nextAnchorPos\n            );\n\n            break;\n          case DIRS.DOWN:\n            nextPos = { x: enemy.position.x, y: enemy.position.y + 1 };\n            nextDir = enemy.scanDirection === \"CW\" ? DIRS.LEFT : DIRS.RIGHT;\n            backToTrackDir =\n              enemy.scanDirection === \"CW\" ? DIRS.RIGHT : DIRS.LEFT;\n            // nextDir = DIRS.RIGHT\n            // backToTrackDir = DIRS.LEFT\n            nextAnchorPos =\n              enemy.scanDirection === \"CW\"\n                ? { x: nextPos.x + 1, y: nextPos.y }\n                : { x: nextPos.x - 1, y: nextPos.y };\n            // nextAnchorPos = { x: nextPos.x - 1, y: nextPos.y }\n            helperDirCalc(\n              enemy,\n              nextPos,\n              nextDir,\n              backToTrackDir,\n              nextAnchorPos\n            );\n\n            break;\n          case DIRS.LEFT:\n            nextPos = { x: enemy.position.x - 1, y: enemy.position.y };\n            nextDir = enemy.scanDirection === \"CW\" ? DIRS.UP : DIRS.DOWN;\n            backToTrackDir = enemy.scanDirection === \"CW\" ? DIRS.DOWN : DIRS.UP;\n            // nextDir = DIRS.DOWN\n            // backToTrackDir = DIRS.UP\n            nextAnchorPos =\n              enemy.scanDirection === \"CW\"\n                ? { x: nextPos.x, y: nextPos.y + 1 }\n                : { x: nextPos.x, y: nextPos.y - 1 };\n            // nextAnchorPos = { x: nextPos.x, y: nextPos.y - 1 }\n            helperDirCalc(\n              enemy,\n              nextPos,\n              nextDir,\n              backToTrackDir,\n              nextAnchorPos\n            );\n\n            break;\n\n          default:\n            break;\n        }\n        enemy.loop();\n      });\n  }\n  playerLoop() {\n    if (this.isPaused || this.player.inactive) {\n      return;\n    }\n    clearTimeout(this.playerTimeoutId);\n    const player = this.player;\n    const follower = this.follower;\n    const leader = this.leader;\n\n    const nextPos = { x: player.position.x, y: player.position.y };\n    switch (player.moveIntentDir) {\n      case DIRS.UP:\n        if (player.canMoveUp()) {\n          nextPos.y -= 1;\n        }\n        break;\n      case DIRS.DOWN:\n        if (player.canMoveDown()) {\n          nextPos.y += 1;\n        }\n        break;\n      case DIRS.LEFT:\n        if (\n          player.canMoveLeft() ||\n          (player.canPushLeft() && player.pushLeft())\n        ) {\n          nextPos.x -= 1;\n        }\n        break;\n      case DIRS.RIGHT:\n        if (\n          player.canMoveRight() ||\n          (player.canPushRight() && player.pushRight())\n        ) {\n          nextPos.x += 1;\n        }\n        break;\n      default:\n        break;\n    }\n    // if ((player.position.x !== nextPos.x || player.position.y !== nextPos.y)) {\n    if (\n      (player.position.x !== nextPos.x || player.position.y !== nextPos.y) &&\n      !player.isMoving\n    ) {\n      player.isMoving = true;\n      if (player.position.x < nextPos.x) {\n        player.animRunRight();\n        // player.animRunLeft();\n      }\n      if (player.position.x > nextPos.x) {\n        player.animRunLeft();\n        // player.animRunRight();\n      }\n\n      // const isSwitch = nextPos.x === follower.position.x && nextPos.y === follower.position.y\n\n      this.scene.events.emit(\"player_moves\", nextPos);\n      // save last player position\n      const followerNextPos = player.position;\n      // move player\n      this.moveObject(player, nextPos);\n      // updates follower\n      if (follower && follower.isFollowing) {\n        follower.moveIntentDir =\n          follower.position.y < followerNextPos.y\n            ? DIRS.DOWN\n            : follower.moveIntentDir;\n        follower.moveIntentDir =\n          follower.position.y > followerNextPos.y\n            ? DIRS.UP\n            : follower.moveIntentDir;\n        if (follower.position.x < followerNextPos.x) {\n          follower.moveIntentDir = DIRS.RIGHT;\n          follower.animRunRight();\n        }\n        if (follower.position.x > followerNextPos.x) {\n          follower.moveIntentDir = DIRS.LEFT;\n          follower.animRunLeft();\n        }\n\n        this.moveObject(follower, followerNextPos);\n\n        if (follower.position.y < player.position.y) {\n          follower.alien.depth = 0;\n          player.alien.depth = 2;\n        } else {\n          player.alien.depth = 0;\n          follower.alien.depth = 2;\n        }\n      }\n    }\n\n    this.playerTimeoutId = setTimeout(() => {\n      if (!player.alien) {\n        return false;\n      }\n      player.isMoving = false;\n      player.animIdle();\n\n      // interactive detection\n      const isInteractivePosition =\n        this.interactiveElements[`${player.position.x}-${player.position.y}`];\n      if (isInteractivePosition) {\n        isInteractivePosition.overrunBy(player);\n      }\n\n      // follower animations\n      if (\n        follower &&\n        player.alien.anims.currentAnim.key.includes(\"idle\") &&\n        follower.isFollowing\n      ) {\n        // follower.animIdle();\n      }\n\n      // leader animations\n      if (\n        leader ||\n        !leader?.isCloseEnough(player.position) ||\n        (leader?.isCloseEnough(player.position) &&\n          player.alien.anims.currentAnim.key.includes(\"idle\") &&\n          leader.isLeading)\n      ) {\n        leader?.animIdle();\n      }\n\n      // next loop\n      if (player.moveIntentDir !== \"\" && player.alien) {\n        this.playerLoop();\n      }\n    }, PLAYER_TICK_TIME);\n  }\n  // afterPlayerLoop(cb) {\n  //   this.afterPlayerLoopCallbacks.push(cb)\n  // }\n  moveObject(el, pos) {\n    const layer = this.scene.children.getByName(\"layer_1\");\n    if (!layer) {\n      return false;\n    }\n    const { tilemap: map } = layer;\n    const origin = { x: el.position.x, y: el.position.y };\n    // assume destination is occupeable\n    const destinationElement = this.getObjectAt(pos.x, pos.y);\n\n    const isSwitch =\n      [Player.className, NPCharacter.className].includes(\n        el.constructor.className\n      ) &&\n      [Player.className, NPCharacter.className].includes(\n        destinationElement.constructor.className\n      );\n\n    if (\n      (!this.objectIsEmpty(destinationElement) ||\n        destinationElement.isClass(Interactive) ||\n        destinationElement.isClass(Exit)) &&\n      !isSwitch\n    ) {\n      destinationElement.overrunBy(el);\n      el.runningOver(destinationElement);\n    }\n\n    if (el.inactive) return;\n\n    // verify not overriding Player when switch with follower\n    if (!isSwitch) {\n      // clear origin position\n      this.setObjectAt(origin.x, origin.y, new Empty(PIXEL_NAME.EMPTY, this));\n    }\n    // fill destination position\n    this.setObjectAt(pos.x, pos.y, el);\n\n    // updates element position\n    el.move(pos);\n    if (el.isClass(Character) && el.alien) {\n      // alien anim\n      this.scene.tweens.add({\n        targets: el.alien,\n        x: {\n          value: map.tileToWorldX(pos.x),\n          duration: el.isClass(Enemy) ? TICK_TIME : PLAYER_TICK_TIME,\n        },\n        y: {\n          value: map.tileToWorldY(pos.y) + (el.isClass(Player) ? 5 : 0), // offset 5 pixels for player to step a little lower\n          duration: el.isClass(Enemy) ? TICK_TIME : PLAYER_TICK_TIME,\n        },\n      });\n\n      el.animRun();\n      // el.alien?.play('brave_run')\n    }\n\n    // REMOVE LEADER SO PLAYER CAN INTERACT WITH EXIT\n    if (el.isClass(NPCharacter) && el.name === \"dwarf\") {\n      if (\n        this.leader.position.x === this.exit.position.x &&\n        this.leader.position.y === this.exit.position.y\n      ) {\n        this.leader.alien?.destroy();\n        this.leader.alien = null;\n        this.replaceByEmpty(this.leader);\n      }\n    }\n\n    // if(el.isClass(Jewel) || el.isClass(Mushroom)) {\n    //   // alien anim\n    //   this.scene.tweens.add({\n    //     targets: el.alien,\n    //     x: {\n    //       value: map.tileToWorldX(pos.x),\n    //       duration: TICK_TIME * 0.5,\n    //     },\n    //     y: {\n    //       value: map.tileToWorldY(pos.y),\n    //       delay: pos.x !== origin.x ? TICK_TIME * 0.5 : 0,\n    //       duration: pos.x !== origin.x ? TICK_TIME * 0.5 : TICK_TIME,\n    //     },\n    //     // duration: TICK_TIME,\n    //   });\n    // }\n    // if(el.isClass(Barrel)) {\n    //   // alien anim\n    //   this.scene.tweens.add({\n    //     targets: el.alien,\n    //     x: {\n    //       value: map.tileToWorldX(pos.x),\n    //       duration: TICK_TIME * 0.5,\n    //     },\n    //     y: {\n    //       value: map.tileToWorldY(pos.y),\n    //       delay: pos.x !== origin.x ? TICK_TIME * 0.5 : 0,\n    //       duration: pos.x !== origin.x ? TICK_TIME * 0.5 : TICK_TIME,\n    //     },\n    //     // duration: TICK_TIME,\n    //   });\n    // }\n    if (el.isClass(Fallable)) {\n      // alien anim\n      this.scene.tweens.add({\n        targets: el.alien,\n        x: {\n          value: map.tileToWorldX(pos.x),\n          duration: pos.y !== origin.y ? TICK_TIME * 0.5 : TICK_TIME,\n        },\n        y: {\n          value: map.tileToWorldY(pos.y),\n          delay: pos.x !== origin.x ? TICK_TIME * 0.5 : 0,\n          duration: pos.x !== origin.x ? TICK_TIME * 0.5 : TICK_TIME,\n        },\n        onComplete: () => {\n          if (el.inParallelGravity) {\n            this.gravityLoop([el]);\n          }\n        },\n        // duration: TICK_TIME,\n      });\n      // Slide sound and visual for Boulder\n      if (pos.x !== origin.x && el.isClass(Boulder)) {\n        el.alien.play(\n          pos.x > origin.x ? \"boulder_roll_right\" : \"boulder_roll_left\"\n        );\n        if (this.player.pushingDirection !== null) {\n          const base = this.getObjectAt(origin.x, origin.y + 1);\n          this.scene.events.emit(\n            `sounds:rock_slide_${base.isClass(Ground) ? \"soft\" : \"hard\"}`\n          );\n        }\n      }\n      // Slide sound and visual for Barrel\n      if (el.isClass(Barrel)) {\n        // is horizontal push and goes to a place with empty bottom neighbour (which means is going to fall)\n        // or is falling to sides (falling over a non flat object) in which case x and y are differents\n        if (\n          (pos.x !== origin.x &&\n            this.isDestinationEmpty(pos.x, origin.y + 1)) ||\n          (pos.x !== origin.x && pos.y !== origin.y)\n        ) {\n          setTimeout(\n            () =>\n              el.alien?.play(\n                pos.x > origin.x ? \"barrel_roll_right\" : \"barrel_roll_left\"\n              ),\n            TICK_TIME / 2\n          );\n        }\n        if (pos.x !== origin.x) {\n          this.scene.events.emit(\"sounds:rock_slide_soft\");\n        }\n      }\n      // Slide sound and visual for Pillar\n      if (el.isClass(Pillar)) {\n        // is horizontal push and goes to a place with empty bottom neighbour (which means is going to fall)\n        // or is falling to sides (falling over a non flat object) in which case x and y are differents\n        if (\n          (pos.x !== origin.x &&\n            this.isDestinationEmpty(pos.x, origin.y + 1)) ||\n          (pos.x !== origin.x && pos.y !== origin.y)\n        ) {\n          setTimeout(\n            () =>\n              el.alien?.play(\n                pos.x > origin.x ? \"pillar_roll_right\" : \"pillar_roll_left\"\n              ),\n            TICK_TIME / 2\n          );\n        }\n        if (pos.x !== origin.x) {\n          this.scene.events.emit(\"sounds:rock_slide_hard\");\n        }\n      }\n      // roll visual for Jewel\n      if (pos.x !== origin.x && el.isClass(Jewel)) {\n        el.alien.once(Phaser.Animations.Events.ANIMATION_COMPLETE, () => {\n          el.alien.play(\"diamond_idle\");\n          el.shine.play(\"diamond_shine\");\n        });\n        el.shine.stop();\n        el.alien.play(\n          pos.x > origin.x ? \"diamond_roll_right\" : \"diamond_roll_left\"\n        );\n      }\n    }\n\n    // this.runScheduledActions()\n  }\n  pause() {\n    this.isPaused = true;\n    this.player.moveIntentDir = \"\";\n    this.player.animIdle();\n  }\n  resume() {\n    this.isPaused = false;\n    // resume parallel gravity\n    this.gravityLoop(this.parallelMovables);\n  }\n  destroy() {}\n  onCharacterDie(el) {\n    this.setObjectAt(\n      el.position.x,\n      el.position.y,\n      new Empty(PIXEL_NAME.EMPTY, this)\n    );\n    this.moveables = this.moveables.filter((e) => e !== el);\n    if (el.isClass(Player)) {\n      el.moveIntentDir = \"\";\n      // this.player = null\n      this.scene.levels.restart();\n    }\n  }\n  onJewelPick(el) {\n    this.setObjectAt(\n      el.position.x,\n      el.position.y,\n      new Empty(PIXEL_NAME.EMPTY, this)\n    );\n    this.moveables = this.moveables.filter((e) => e !== el);\n    this.collectedDiamonds++;\n    this.scene.events.emit(\"score:diamond_set\", this.collectedDiamonds);\n    if (this.diamondsGoal > 0 && this.diamondsGoal <= this.collectedDiamonds) {\n      this.destroyBlock();\n      // UI update\n      this.scene.events.emit(\"score:diamond_goal\");\n      this.scene.events.emit(\"sounds:coin\");\n    }\n  }\n  destroyBlock() {\n    // on goal reached\n    // remove exit block\n    const exit = Object.values(this.interactiveElements).find((el) =>\n      el?.isClass(Exit)\n    );\n    if (exit?.block) {\n      this.onDestroyElement(exit.block);\n      exit.block.alien.destroy();\n    }\n  }\n  onMushroomPick(el) {\n    this.setObjectAt(\n      el.position.x,\n      el.position.y,\n      new Empty(PIXEL_NAME.EMPTY, this)\n    );\n    this.moveables = this.moveables.filter((e) => e !== el);\n    this.collectedShrooms = +1;\n  }\n  onEnemyKill(el) {\n    this.killedEnemies++;\n  }\n  onDestroyElement(el) {\n    this.setObjectAt(\n      el.position.x,\n      el.position.y,\n      new Empty(PIXEL_NAME.EMPTY, this)\n    );\n    this.moveables = this.moveables.filter((e) => e !== el);\n    this.parallelMovables = this.parallelMovables.filter((e) => e !== el);\n  }\n  replaceByEmpty(el) {\n    const emptyPlace = new Empty(PIXEL_NAME.EMPTY, this);\n    emptyPlace.setPosition(el.position);\n    const objectInDestination = this.getObjectAt(el.position.x, el.position.y);\n    // validation to prevent emptying another object that take place before this method is called.\n    // happens in case of barrels exploding by fallable. Barrel has a half tick delay from overrun to explode.\n    // that half tick offset makes the place in the grid to get filled with the overruner object\n    if (objectInDestination === el) {\n      this.setObjectAt(el.position.x, el.position.y, emptyPlace);\n      // this.moveables = this.moveables.filter(e => e === el)\n    }\n  }\n  onExplode(el) {\n    // moved into Barrel class\n  }\n  cleanLevel() {\n    this.scene.events.off(\"player_moves\");\n    this.scene.events.off(\"dialogue:hidden\");\n    this.scene.events.off(\"dialogue:message_shown\");\n    this.objects.forEach((row) =>\n      row.forEach((el) => {\n        if (el.alien) {\n          el.alien.destroy();\n          el.alien = null;\n        }\n      })\n    );\n  }\n  async onComplete() {\n    this.pause();\n\n    const levelData = await dbManager.get(this.constructor.key);\n\n    if (levelData) {\n      this.prevBest = levelData?.comp;\n    }\n    const comp = this.scene.rules.calcCompletion(\n      this.countDiamonds,\n      this.collectedDiamonds,\n      this.countEnemies,\n      this.killedEnemies,\n      this.countShrooms,\n      Math.max(this.collectedShrooms, 0)\n    );\n    const newLevelData = {\n      countDiamonds: this.countDiamonds,\n      collectedDiamonds: this.collectedDiamonds,\n      countEnemies: this.countEnemies,\n      killedEnemies: this.killedEnemies,\n      countShrooms: this.countShrooms,\n      collectedShrooms: Math.max(this.collectedShrooms, 0),\n      comp,\n      prevBest: this.prevBest,\n    };\n    if (!levelData || (levelData && newLevelData.comp >= levelData.comp)) {\n      await dbManager.set(this.constructor.key, newLevelData);\n    }\n    // updates global shroom counter\n    await dbManager.set(\n      \"totalShroomsAmount\",\n      this.totalShroomsAmount + this.collectedShrooms\n    );\n    // updates level shroom counts even if is not the best completion score\n    const storedData = await dbManager.get(this.constructor.key);\n    // in case of shroom given the counter could be lower than 0\n    storedData.collectedShrooms = Math.max(0, this.collectedShrooms);\n    await dbManager.set(this.constructor.key, storedData);\n\n    this.scene.events.emit(\"levelcompleted\", newLevelData);\n  }\n  onInteractWith(el) {\n    if (el.ephemeral) {\n      this.interactiveElements[`${el.position.x}-${el.position.y}`] = null;\n    }\n  }\n  onAddElement(el) {\n    console.warn(`implement element added ${this.id}`);\n  }\n  getConfigAt(x, y) {\n    return this.isDestinationInBounds(x, y) && this.config[y][x];\n  }\n  getCoords(id) {\n    const found = [];\n    for (let i = 0; i < this.config.length; i++) {\n      for (let j = 0; j < this.config[i].length; j++) {\n        if (this.config[i][j] === id) {\n          found.push({ x: j, y: i });\n        }\n      }\n    }\n    return found;\n  }\n  getObjectAt(x, y) {\n    return this.isDestinationInBounds(x, y) && this.objects[y][x];\n  }\n  setObjectAt(x, y, obj) {\n    this.objects[y][x] = obj;\n  }\n  isPositionClear(x, y) {\n    return this.getObjectAt(x, y).isEmpty;\n  }\n  isDestinationInBounds(x, y) {\n    const xInBounds = x < this.config[0].length && x >= 0;\n    const yInBounds = y < this.config.length && y >= 0;\n    return xInBounds && yInBounds;\n  }\n  objectIsEmpty(el) {\n    return el && el.isClass(CLASS_NAMES.EMPTY);\n  }\n  isDestinationEmpty(x, y) {\n    return this.getObjectAt(x, y).isEmpty;\n  }\n\n  async playEarthquake(range, intensity = 3) {\n    await this.shakeCamera(intensity);\n    const probability =\n      intensity === 4\n        ? 1\n        : intensity === 3\n        ? 0.75\n        : intensity === 2\n        ? 0.5\n        : 0.25;\n    this.destroyObjectsInRange(range, probability);\n  }\n\n  destroyObjectsInRange(range, probability, condition) {\n    for (let y = range.y1; y < range.y2; y++) {\n      for (let x = range.x1; x <= range.x2; x++) {\n        // remove interactive in zone\n        if (this.interactiveElements[`${x}-${y}`]) {\n          this.interactiveElements[`${x}-${y}`] = null;\n        }\n        const toDestroy = this.getObjectAt(x, y);\n        const strengthEnough = Math.random() < probability;\n        const destroyableClass =\n          toDestroy.isClass(Ground) || toDestroy.isClass(Debris);\n        const destroyByCondition = condition && condition(toDestroy);\n        if (\n          (strengthEnough && toDestroy && destroyableClass) ||\n          destroyByCondition\n        ) {\n          toDestroy.overrunBy();\n          this.onDestroyElement(toDestroy);\n        }\n      }\n    }\n  }\n\n  shakeCamera(intensity) {\n    const camera = this.scene.cameras.main;\n    this.fx = this.scene.sound.add(\"earthquake\");\n    const length = 2500;\n    const strength = 0.005 * intensity;\n    camera.shake(length, strength);\n    this.fx.play();\n\n    return new Promise((res) => {\n      setTimeout(res, length);\n    });\n  }\n\n  updatePositionsOnScale() {\n    const layer = this.scene.children.getByName(\"layer_1\");\n    const { tilemap: map } = layer;\n    this.moveables.forEach((mv) => {\n      if (mv.alien) {\n        mv.alien.setPosition(\n          map.tileToWorldX(mv.position.x),\n          map.tileToWorldY(mv.position.y)\n        );\n      }\n    });\n    // fix angel position\n    const exit = Object.values(this.interactiveElements).find((el) =>\n      el?.isClass(Exit)\n    );\n    exit.block?.alien.setPosition(\n      map.tileToWorldX(exit.position.x - 2),\n      map.tileToWorldY(exit.position.y)\n    );\n\n    Object.values(this.decorationElements).forEach((el) => {\n      el.alien.x = UI.tileToScreen(el.position.x);\n      el.alien.y = UI.tileToScreen(el.position.y);\n    });\n  }\n  setTickTimeout(callback, ticks) {\n    let tickDelayToTrigger = ticks;\n    const onTick = (lvl) => {\n      if (tickDelayToTrigger-- === 0) {\n        callback(lvl);\n      } else {\n        lvl.onNextTick((level) => onTick(level));\n      }\n    };\n    onTick(this);\n  }\n  // awaits game loops equals to the given param. It depends on game loops, it wont't work with paused game.\n  awaitTicks(amountOfTicks) {\n    return new Promise((res) => this.setTickTimeout(res, amountOfTicks));\n  }\n  // awaits a time equals to the given param by TICK_TIME. It not depends on real game loops, it works with paused game.\n  awaitTicksTime(amountOfTicks) {\n    return new Promise((res) => {\n      setTimeout(res, TICK_TIME * amountOfTicks);\n    });\n  }\n  async teleportObject(el, position) {\n    el.alien.alpha = 0;\n    this.moveObject(el, position);\n    el.setPosition(position);\n    await this.awaitTicks(3);\n    el.alien.alpha = 1;\n  }\n\n  // factory\n  createBoulderAt(pos) {\n    const boulder = this.scene.add\n      .sprite(48, 16)\n      .setOrigin(0, 0.25)\n      .play(\"boulder_idle\");\n    boulder.setScale(SCALE());\n    boulder.x = UI.tileToScreen(pos.x);\n    boulder.y = UI.tileToScreen(pos.y);\n\n    const element = new Boulder(PIXEL_NAME.BOULDER, this);\n    element.alien = boulder;\n    return element;\n  }\n  createBarrelAt(pos) {\n    const barrel = this.scene.add\n      .sprite(48, 16)\n      .setOrigin(0.05, 0.2)\n      .play(\"barrel_idle\");\n    barrel.setScale(SCALE());\n\n    barrel.x = UI.tileToScreen(pos.x);\n    barrel.y = UI.tileToScreen(pos.y);\n\n    const element = new Barrel(PIXEL_NAME.BARREL, this);\n    element.alien = barrel;\n\n    return element;\n  }\n  createEnemyAt(pos) {\n    const enemy = this.scene.add\n      .sprite(48, 16)\n      .setOrigin(0.125, 0.125)\n      .play(\"bat_move\");\n    enemy.setScale(SCALE());\n    enemy.x = UI.tileToScreen(pos.x);\n    enemy.y = UI.tileToScreen(pos.y);\n\n    const element = new Enemy(PIXEL_NAME.ENEMY, this);\n    element.alien = enemy;\n    element.setPosition(pos);\n\n    return element;\n  }\n  destroyObjectsByKind(kind) {\n    const destructionForce = new Explosion(PIXEL_NAME.EXPLOSION, this);\n    this.objects.forEach((row) =>\n      row.forEach((el) => {\n        if (el.isClass(kind)) {\n          // const toDestroy = this.getObjectAt(x, y);\n          el.overrunBy(destructionForce);\n          this.onDestroyElement(el);\n        }\n      })\n    );\n  }\n  destroy() {\n    this.queuedActions = [];\n  }\n}\n\nexport default Level;\n","import Phaser from \"phaser\";\nimport { SCALE } from \"../../../utils/constants\";\nimport UI from \"../../UI\";\nimport GameObject from \"../GameObject\";\n\nexport default class Explosion extends GameObject {\n  constructor(id, level) {\n    super({\n      id,\n      isRigid: false,\n      isBreakable: false,\n      isFlat: true,\n      isPickable: false,\n      isCrushable: false,\n      level,\n    });\n    this.power = 10;\n    this.strength = 10;\n  }\n\n  setPosition(coords) {\n    super.setPosition(coords);\n\n    const explosion = this.level.scene.add\n      .sprite(UI.tileToScreen(coords.x), UI.tileToScreen(coords.y))\n      .setOrigin(0.125, 0.125)\n      .play(\"explosion_explode\")\n      .setDepth(105);\n    this.level.scene.events.emit('sounds:explosion')\n    explosion.setScale(SCALE());\n\n    this.level.scene.plugins.get(\"rexTintRGB\").add(explosion, 0xffffff);\n    explosion.tintGray = 128;\n    explosion.tintR = 15;\n    explosion.tintG = 75;\n    explosion.tintB = 70;\n\n    explosion.once(Phaser.Animations.Events.ANIMATION_COMPLETE, () => {\n      explosion.destroy();\n    });\n  }\n}\n","import Phaser from 'phaser'\nimport { PIXEL_TO_TILEMAP_POSITION, PIXEL_NAME, SCALE, CLASS_NAMES, TICK_TIME } from '../../utils/constants'\nimport UI from '../UI'\nimport Destroyable from './Destroyable'\nimport Player from './Player'\n\nexport default class Ground extends Destroyable {\n  constructor(id, level) {\n    super({\n      id,\n      isRigid: true,\n      isBreakable: true,\n      isFlat: true,\n      isPickable: false,\n      isCrushable: false,\n      level\n    })\n    this.strength = 1\n  }\n\n  overrunBy(el) {\n    // assume is player who overruns ground\n    const layer = this.level.scene.children.getByName('layer_1')\n    // when player dies and level is restarting but explosions still occuring, layer is null\n    if(!layer) return false\n    const { tilemap: map } = layer\n    \n    map.putTileAt(-1, this.position.x, this.position.y, false, 'layer_1')\n\n    this.level.scene.events.emit('sounds:clear_hit')\n    \n    if(!el) {\n      // destroyed by explosion or earthquake\n      this.break_effect = this.level.scene.add.sprite(48, 16).setOrigin(0, 0.25);\n      this.break_effect.setScale(SCALE);\n      this.break_effect.depth = 4;\n      this.break_effect.x = UI.tileToScreen(this.position.x)\n      this.break_effect.y = UI.tileToScreen(this.position.y)\n      this.break_effect.play('ground_disolves')\n      this.break_effect.setFlipY(true)\n      this.break_effect.on(Phaser.Animations.Events.ANIMATION_COMPLETE, () => {\n        this.break_effect.destroy()\n      })\n      // this.level.scene.plugins.get('rexFade').fadeOutDestroy(this.alien, 2000);\n    }\n\n    // we need to run this after level.objects updates from level.moveObject.\n      // so we queue it for the next tick\n      // this.level.onNextTick(level => {\n      setTimeout(() => {\n        const level = this.level\n        // ** calcultate tile shape for each neighbour of removed tile **\n    \n        // cross neighbours coords offset (up, right, down, left)\n        const neighboursCoords = [[0, -1], [1, 0], [0, 1], [-1, 0]]\n        neighboursCoords.forEach(coords => {\n          // create a 3x3 matrix to pass to calculateGroundTileWithNeighbours\n          const data = Array(3).fill(0).map(() => Array(3).fill(0))\n    \n          // gets object from neighbour coordinate\n          const x = this.position.x + coords[0]\n          const y = this.position.y + coords[1]\n          const neighbour = level.getObjectAt(x, y)\n          \n          // check if neighbour and it is a ground\n          if (neighbour && neighbour.constructor.className === this.constructor.className) {\n            // build data based on current neighbour, setting ground pixel or 0 accordingly.\n            data[0][1] = level.getObjectAt(x, y-1)?.constructor.className === this.constructor.className ? PIXEL_NAME.GROUND : 0\n            data[1][0] = level.getObjectAt(x-1, y)?.constructor.className === this.constructor.className ? PIXEL_NAME.GROUND : 0\n            data[2][1] = level.getObjectAt(x, y+1)?.constructor.className === this.constructor.className ? PIXEL_NAME.GROUND : 0\n            data[1][2] = level.getObjectAt(x+1, y)?.constructor.className === this.constructor.className ? PIXEL_NAME.GROUND : 0\n    \n            // gets and updates tile\n            const tile = PIXEL_TO_TILEMAP_POSITION.calculateGroundTileWithNeighbours(1, 1, data)\n            map.putTileAt(tile, x, y, false, 'layer_1')\n          }\n        })\n      }, TICK_TIME / 8)\n  }\n}\n\nGround.className = CLASS_NAMES.GROUND\n","import Phaser from \"phaser\";\nimport { DIRS, SCALE, TICK_TIME, TURNINGS } from \"../../../utils/constants\";\nimport UI from \"../../UI\";\nimport Boulder from \"../Boulder\";\nimport Explosion from \"../Explosion\";\nimport GameObject from \"../GameObject\";\nimport Ground from \"../Ground\";\n\nclass BranchChunk extends GameObject {\n  constructor(boss, branchId, color) {\n    super({\n      id: \"root\",\n      isRigid: true,\n      isBreakable: false,\n      isFlat: true,\n      isPickable: false,\n      isCrushable: false,\n      level: boss.level,\n    });\n    this.strength = 18;\n    this.color = color;\n    this.alien = null;\n    this.branchId = branchId;\n    this.boss = boss;\n    this.isHorizontal = true;\n    this.elbowOrientation = false;\n    this.isHead = true;\n    this.lastAnimationKey = \"\"\n  }\n  setPosition(coords) {\n    super.setPosition(coords);\n    // this.alien = this.level.scene.add\n    //   .rectangle(\n    //     UI.tileToScreen(coords.x),\n    //     UI.tileToScreen(coords.y),\n    //     UI.tileToScreen(1),\n    //     UI.tileToScreen(1),\n    //     this.color\n    //   )\n    //   .setOrigin(0, 0)\n    //   .setAlpha(0.5)\n    this.orientation = this.boss.getChunkOrientation(this, this.branchId);\n    const IS_HORIZONTAL = [DIRS.RIGHT, DIRS.LEFT].includes(this.orientation);\n    this.isHorizontal = IS_HORIZONTAL;\n\n    // console.log();\n    this.alien = this.level.scene.add\n      .sprite(0, 0)\n      .setOrigin(0.5, 0.5)\n      .setScale(SCALE())\n      .setPosition(\n        UI.tileToScreen(coords.x) + UI.tileToScreen(0.5),\n        UI.tileToScreen(coords.y) + UI.tileToScreen(0.5)\n      );\n    // this.alien.play(keyFrameName)\n    this.changeOrientation(this.orientation);\n\n    const toDestroy = this.level.getObjectAt(coords.x, coords.y);\n    if (toDestroy && toDestroy.isClass(Ground)) {\n      toDestroy.overrunBy(); // ignoring param works like a quake or explosion\n      this.level.onDestroyElement(toDestroy);\n    }\n    this.level.setObjectAt(coords.x, coords.y, this);\n  }\n  changeOrientation(orientation) {\n    if (orientation === DIRS.RIGHT) {\n      this.alien.setRotation(0);\n      this.alien.setFlipX(false);\n    }\n    if (orientation === DIRS.LEFT) {\n      this.alien.setRotation(0);\n      this.alien.setRotation(-Math.PI);\n      // this.alien.setFlipX(true);\n    }\n    if (orientation === DIRS.UP) {\n      this.alien.setRotation(-Math.PI / 2);\n      this.alien.setFlipX(false);\n    }\n    if (orientation === DIRS.DOWN) {\n      this.alien.setRotation((-3 * Math.PI) / 2);\n      // this.alien.setFlipX(true);\n    }\n  }\n  setElbowOrientation(orientation) {\n    // CW\n    if (orientation === DIRS.UP + DIRS.RIGHT) {\n      this.alien.setRotation(0);\n      this.alien.setFlipX(false);\n    }\n    if (orientation === DIRS.RIGHT + DIRS.DOWN) {\n      this.alien.setRotation(Math.PI / 2);\n      this.alien.setFlipX(false);\n    }\n    if (orientation === DIRS.DOWN + DIRS.LEFT) {\n      this.alien.setRotation(Math.PI);\n      this.alien.setFlipX(false);\n    }\n    if (orientation === DIRS.LEFT + DIRS.UP) {\n      this.alien.setRotation((3 * Math.PI) / 2);\n      this.alien.setFlipX(false);\n    }\n\n    // CCW\n    if (orientation === DIRS.UP + DIRS.LEFT) {\n      this.alien.setRotation(0);\n      this.alien.setFlipX(true);\n    }\n    if (orientation === DIRS.LEFT + DIRS.DOWN) {\n      this.alien.setRotation(-Math.PI / 2);\n      this.alien.setFlipX(true);\n    }\n    if (orientation === DIRS.DOWN + DIRS.RIGHT) {\n      this.alien.setRotation(-Math.PI);\n      this.alien.setFlipX(true);\n    }\n    if (orientation === DIRS.RIGHT + DIRS.UP) {\n      this.alien.setRotation((-3 * Math.PI) / 2);\n      this.alien.setFlipX(true);\n    }\n  }\n  getTurning(orientation) {\n    if (\n      [\n        DIRS.UP + DIRS.RIGHT,\n        DIRS.RIGHT + DIRS.DOWN,\n        DIRS.DOWN + DIRS.LEFT,\n        DIRS.LEFT + DIRS.UP,\n      ].includes(orientation)\n    ) {\n      return TURNINGS.CW;\n    } else {\n      return TURNINGS.CCW;\n    }\n  }\n  animHeadEntrance(fromPos) {}\n  animHeadExit(toPos) {}\n  animGrow() {\n    return new Promise(res => {\n\n      this.elbowOrientation = this.boss.isElbow(this, this.branchId);\n      let evenOddKey;\n      // horizontal mid chunk\n      if (this.isHorizontal) {\n        if (this.position.x % 2 === this.position.y % 2) {\n          evenOddKey = \"Even\";\n        } else {\n          evenOddKey = \"Odd\";\n        }\n      } else {\n        // vertical mid chunk\n        if (this.position.x % 2 !== this.position.y % 2) {\n          evenOddKey = \"Odd\";\n        } else {\n          evenOddKey = \"Even\";\n        }\n      }\n  \n      if (this.boss.chunkIsHead(this, this.branchId)) {\n        // HEAD\n        if (this.position.x % 2 === this.position.y % 2) {\n          evenOddKey = \"Odd\";\n        } else {\n          evenOddKey = \"Even\";\n        }\n        const keyFrameName = `chunkHead${evenOddKey}_grow`;\n        this.alien.play(keyFrameName);\n        this.alien.once(Phaser.Animations.Events.ANIMATION_COMPLETE, res)\n        this.lastAnimationKey = keyFrameName;\n      } else if (this.elbowOrientation === false) {\n        // MID CHUNK\n        if (this.lastAnimationKey.includes(\"Head\")) {\n          const keyFrameName = `chunkHorizontal${evenOddKey}_grow`;\n          this.alien.once(Phaser.Animations.Events.ANIMATION_COMPLETE, () => {\n            const newKeyFrameName = keyFrameName.replace(\"_grow\", \"_idle\");\n            this.alien.play(newKeyFrameName);\n            this.lastAnimationKey = newKeyFrameName;\n            res()\n          });\n          this.alien.play(keyFrameName);\n        } else {\n          res()\n        }\n      } else {\n        // ELBOW\n        if (this.lastAnimationKey.includes(\"Head\")) {\n          let nextKeyFrameName;\n          if (this.position.x % 2 !== this.position.y % 2) {\n            if (this.getTurning(this.elbowOrientation) === TURNINGS.CW) {\n              nextKeyFrameName = \"chunkCurveEven_grow\";\n              this.alien.play(nextKeyFrameName);\n              this.alien.once(Phaser.Animations.Events.ANIMATION_COMPLETE, () => {\n                this.setElbowOrientation(this.elbowOrientation);\n                this.alien.play('chunkCurveOdd_idle');\n                res()\n              })\n              this.lastAnimationKey = nextKeyFrameName;\n            } else {\n              nextKeyFrameName = \"chunkCurveOdd_grow\";\n              this.alien.setFlipY(true);\n              this.alien.play(nextKeyFrameName);\n              this.alien.once(Phaser.Animations.Events.ANIMATION_COMPLETE, () => {\n                this.alien.setFlipY(false);\n                this.setElbowOrientation(this.elbowOrientation);\n                this.alien.play('chunkCurveEven_idle');\n                res()\n              })\n              this.lastAnimationKey = nextKeyFrameName;\n            }\n          } else {\n            if (this.getTurning(this.elbowOrientation) === TURNINGS.CW) {\n              nextKeyFrameName = \"chunkCurveOdd_grow\";\n              this.alien.play(nextKeyFrameName);\n              this.alien.once(Phaser.Animations.Events.ANIMATION_COMPLETE, () => {\n                this.setElbowOrientation(this.elbowOrientation);\n                this.alien.play('chunkCurveEven_idle');\n                res()\n              })\n              this.lastAnimationKey = nextKeyFrameName;\n            } else {\n              nextKeyFrameName = \"chunkCurveEven_grow\";\n              this.alien.setFlipY(true);\n              this.alien.play(nextKeyFrameName);\n              this.alien.once(Phaser.Animations.Events.ANIMATION_COMPLETE, () => {\n                this.alien.setFlipY(false);\n                this.setElbowOrientation(this.elbowOrientation);\n                this.alien.play('chunkCurveOdd_idle');\n                res()\n              })\n              this.lastAnimationKey = nextKeyFrameName;\n            }\n          }\n        } else {\n          res()\n        }\n      }\n    })\n  }\n  animDetachment() {\n    this.alien?.destroy()\n  }\n  animReduction() {\n    return new Promise(res => {\n      let evenOddKey\n      // horizontal mid chunk\n      if (this.isHorizontal) {\n        if (this.position.x % 2 === this.position.y % 2) {\n          evenOddKey = \"Even\";\n        } else {\n          evenOddKey = \"Odd\";\n        }\n      } else {\n        // vertical mid chunk\n        if (this.position.x % 2 !== this.position.y % 2) {\n          evenOddKey = \"Odd\";\n        } else {\n          evenOddKey = \"Even\";\n        }\n      }\n      \n      let nextKeyFrameName\n      if (this.boss.chunkIsHead(this, this.branchId)) {\n        // anim reduction for head chunk\n        if (this.position.x % 2 === this.position.y % 2) {\n          evenOddKey = \"Odd\";\n        } else {\n          evenOddKey = \"Even\";\n        }\n        nextKeyFrameName = `chunkHead${evenOddKey}_shrink`\n        this.alien.play(nextKeyFrameName)\n        this.alien.once(Phaser.Animations.Events.ANIMATION_COMPLETE, res)\n        this.lastAnimationKey = nextKeyFrameName;\n        \n      } else if (this.boss.chunkIsNeck(this, this.branchId)) {\n        // neck can be straight or elbow\n        if(this.elbowOrientation) {\n          // anim reduction for elbow chunks\n          if (this.position.x % 2 !== this.position.y % 2) {\n            if (this.getTurning(this.elbowOrientation) === TURNINGS.CW) {\n              \n              this.changeOrientation(this.orientation)\n              nextKeyFrameName = \"chunkCurveEven_shrink\";\n              this.alien.play(nextKeyFrameName);\n              this.alien.once(Phaser.Animations.Events.ANIMATION_COMPLETE, () => {\n                nextKeyFrameName = 'chunkHeadEven_idle'\n                this.alien.play(nextKeyFrameName);\n                this.lastAnimationKey = nextKeyFrameName;\n                res()\n              })\n            } else {\n              this.changeOrientation(this.orientation)\n              nextKeyFrameName = \"chunkCurveOdd_shrink\";\n              this.alien.setFlipY(true);\n              this.alien.setFlipX(false);\n              this.alien.play(nextKeyFrameName);\n              this.alien.once(Phaser.Animations.Events.ANIMATION_COMPLETE, () => {\n                // this.alien.setFlipX(true);\n                this.alien.setFlipY(false);\n                nextKeyFrameName = 'chunkHeadEven_idle'\n                this.alien.play(nextKeyFrameName);\n                this.lastAnimationKey = nextKeyFrameName;\n                res()\n              })\n            }\n          } else {\n            if (this.getTurning(this.elbowOrientation) === TURNINGS.CW) {\n              this.changeOrientation(this.orientation)\n              nextKeyFrameName = \"chunkCurveOdd_shrink\";\n              this.alien.play(nextKeyFrameName);\n              this.alien.once(Phaser.Animations.Events.ANIMATION_COMPLETE, () => {\n                nextKeyFrameName = 'chunkHeadOdd_idle'\n                this.alien.play(nextKeyFrameName);\n                this.lastAnimationKey = nextKeyFrameName;\n                res()\n              })\n            } else {\n              nextKeyFrameName = \"chunkCurveEven_shrink\";\n              this.changeOrientation(this.orientation)\n              this.alien.setFlipY(true);\n              this.alien.setFlipX(false);\n              this.alien.play(nextKeyFrameName);\n              this.alien.once(Phaser.Animations.Events.ANIMATION_COMPLETE, () => {\n                this.alien.setFlipY(false);\n                nextKeyFrameName = 'chunkHeadOdd_idle'\n                this.alien.play(nextKeyFrameName);\n                this.lastAnimationKey = nextKeyFrameName;\n                res()\n              })\n            }\n          }\n        } else {\n          // anim reduction for middle chunks\n          const keyFrameName = `chunkHorizontal${evenOddKey}_shrink`;\n          this.alien.play(keyFrameName);\n          this.alien.once(Phaser.Animations.Events.ANIMATION_COMPLETE, () => {\n            let nextKeyFrameName = keyFrameName.replace('_shrink', '_idle').replace('Horizontal', 'Head');\n            nextKeyFrameName = nextKeyFrameName.includes('Odd') ? nextKeyFrameName.replace('Odd', 'Even') : nextKeyFrameName.replace('Even', 'Odd')\n            this.alien.play(nextKeyFrameName)\n            this.lastAnimationKey = nextKeyFrameName;\n            res()\n          });\n        }\n        \n      } else {\n        res()\n      }\n    })\n  }\n  animDestroy() {\n    this.alien.setAlpha(0.3);\n    setTimeout(() => this.alien.destroy(), TICK_TIME);\n  }\n  hitBy(el) {\n    if (el.isClass(Boulder)) {\n      console.log(\"hit by a rock\");\n      this.boss.takeBranchDamage(this.branchId, 1);\n    }\n\n    if (el.isClass(Explosion)) {\n      console.log(\"burnt\");\n      this.boss.takeBranchDamage(this.branchId, 5);\n    }\n  }\n}\nBranchChunk.className = \"BranchChunk\";\nexport default BranchChunk;\n","import { CLASS_NAMES } from '../../utils/constants'\nimport GameObject from './GameObject'\n\nexport default class Wall extends GameObject {\n  constructor(id, level) {\n    super({\n      id,\n      isRigid: true,\n      isBreakable: false,\n      isFlat: true,\n      isPickable: false,\n      isCrushable: false,\n      level\n    })\n    this.strength = 20\n  }\n}\n\nWall.className = CLASS_NAMES.WALL\n","import { CLASS_NAMES, PIXEL_NAME } from \"../../../utils/constants\";\nimport UI from \"../../UI\";\nimport GameObject from \"../GameObject\";\nimport Wall from \"../Wall\";\n\nclass Womb extends Wall {\n  constructor(boss) {\n    // super({\n    //   id: \"womb\",\n    //   isRigid: true,\n    //   isBreakable: false,\n    //   isFlat: true,\n    //   isPickable: false,\n    //   isCrushable: false,\n    //   level: boss.level,\n    // });\n    super(\"womb\", boss.level);\n\n    this.upperObject = null;\n    this.object = null;\n    this.boss = boss\n  }\n\n  setPosition(coords) {\n    super.setPosition(coords);\n    this.object = this.level.scene.add\n      .rectangle(\n        UI.tileToScreen(coords.x),\n        UI.tileToScreen(coords.y),\n        UI.tileToScreen(1),\n        UI.tileToScreen(1),\n        0x00ff00\n      )\n      .setAlpha(0)\n      .setOrigin(0, 0);\n    // let block = new Wall(PIXEL_NAME.WALL, this.level);\n    // block.setPosition(coords);\n    this.level.setObjectAt(coords.x, coords.y, this);\n\n    // this.upperObject = this.level.scene.add\n    //   .rectangle(\n    //     UI.tileToScreen(coords.x),\n    //     UI.tileToScreen(coords.y - 1),\n    //     UI.tileToScreen(1),\n    //     UI.tileToScreen(1),\n    //     0x00ff00\n    //   )\n    //   .setOrigin(0, 0);\n    // block = new Wall(PIXEL_NAME.WALL, this.level);\n    // block.setPosition({\n    //   x: coords.x,\n    //   y: coords.y - 1,\n    // });\n    // this.level.setObjectAt(coords.x, coords.y - 1, block);\n  }\n}\n\nWomb.className = CLASS_NAMES.WOMB\nexport default Womb;\n","import Phaser from \"phaser\";\nimport { CLASS_NAMES, DIRS, SCALE } from \"../../../utils/constants\";\nimport UI from \"../../UI\";\nimport BranchChunk from \"./BranchChunk\";\nimport Womb from \"./Womb\";\nimport EasyStar from \"easystarjs\";\n\nclass Abushgidim {\n  constructor(level, position) {\n    this.level = level;\n    this.position = position;\n    this.body = null;\n    this.leftBranch = {\n      id: \"LEFT_BRANCH\",\n      chunks: [],\n      originPos: { x: position.x - 2, y: position.y - 2 },\n      damageReceived: 0,\n      energy: 50,\n      maxEnergy: 50,\n      animating: false,\n    };\n    this.midBranch = {\n      id: \"MID_BRANCH\",\n      chunks: [],\n      originPos: { x: position.x, y: position.y - 3 },\n      damageReceived: 0,\n      energy: 50,\n      maxEnergy: 50,\n      animating: false,\n    };\n    this.rightBranch = {\n      id: \"RIGHT_BRANCH\",\n      chunks: [],\n      originPos: { x: position.x + 2, y: position.y - 2 },\n      damageReceived: 0,\n      energy: 50,\n      maxEnergy: 50,\n      animating: false,\n    };\n    this.leftWomb = null;\n    this.rightWomb = null;\n    this.easystar = new EasyStar.js();\n    this.alive = true;\n\n    this.drawEnemy();\n    this.subscribeToTicks();\n  }\n\n  subscribeToTicks() {\n    this.level.onNextTick((lvl) => {\n      this.maintenance();\n      if (this.alive) {\n        this.subscribeToTicks();\n      }\n    });\n  }\n\n  drawEnemy() {\n    // this.body = this.level.scene.add\n    //   .rectangle(\n    //     UI.tileToScreen(this.position.x),\n    //     UI.tileToScreen(this.position.y),\n    //     UI.tileToScreen(1),\n    //     UI.tileToScreen(1),\n    //     0xff0000\n    //   )\n    //   .setOrigin(0, 0);\n    this.body = [\n      // RIGHT WOMB\n      this.level.scene.add\n        .sprite(0, 0)\n        .setOrigin(0.5, 0.5)\n        .setScale(SCALE())\n        .setPosition(\n          UI.tileToScreen(this.position.x + 2) + UI.tileToScreen(0.5),\n          UI.tileToScreen(this.position.y - 1) + UI.tileToScreen(0.5)\n        )\n        .play(\"bossWombTop\")\n        .setDepth(5.5),\n      this.level.scene.add\n        .sprite(0, 0)\n        .setOrigin(0.5, 0.5)\n        .setScale(SCALE())\n        .setPosition(\n          UI.tileToScreen(this.position.x + 1) + UI.tileToScreen(0.5),\n          UI.tileToScreen(this.position.y) + UI.tileToScreen(0.5)\n        )\n        .play(\"bossWombBottom1\")\n        .setDepth(5.5),\n      this.level.scene.add\n        .sprite(0, 0)\n        .setOrigin(0.5, 0.5)\n        .setScale(SCALE())\n        .setPosition(\n          UI.tileToScreen(this.position.x + 2) + UI.tileToScreen(0.5),\n          UI.tileToScreen(this.position.y) + UI.tileToScreen(0.5)\n        )\n        .play(\"bossWombBottom2_idle\")\n        .setDepth(5.5),\n      // LEFT WOMB\n      this.level.scene.add\n        .sprite(0, 0)\n        .setOrigin(0.5, 0.5)\n        .setScale(SCALE())\n        .setPosition(\n          UI.tileToScreen(this.position.x - 2) + UI.tileToScreen(0.5),\n          UI.tileToScreen(this.position.y - 1) + UI.tileToScreen(0.5)\n        )\n        .setFlipX(true)\n        .play(\"bossWombTop\")\n        .setDepth(5.5),\n      this.level.scene.add\n        .sprite(0, 0)\n        .setOrigin(0.5, 0.5)\n        .setScale(SCALE())\n        .setPosition(\n          UI.tileToScreen(this.position.x - 1) + UI.tileToScreen(0.5),\n          UI.tileToScreen(this.position.y) + UI.tileToScreen(0.5)\n        )\n        .setFlipX(true)\n        .play(\"bossWombBottom1\")\n        .setDepth(5.5),\n      this.level.scene.add\n        .sprite(0, 0)\n        .setOrigin(0.5, 0.5)\n        .setScale(SCALE())\n        .setPosition(\n          UI.tileToScreen(this.position.x - 2) + UI.tileToScreen(0.5),\n          UI.tileToScreen(this.position.y) + UI.tileToScreen(0.5)\n        )\n        .setFlipX(true)\n        .play(\"bossWombBottom2_idle\")\n        .setDepth(5.5),\n      // CENTER\n      this.level.scene.add\n        .sprite(0, 0)\n        .setOrigin(0.5, 0.5)\n        .setScale(SCALE())\n        .setPosition(\n          UI.tileToScreen(this.position.x) + UI.tileToScreen(0.5),\n          UI.tileToScreen(this.position.y - 2) + UI.tileToScreen(0.5)\n        )\n        .play(\"bossCenterTop\")\n        .setDepth(5.5),\n      this.level.scene.add\n        .sprite(0, 0)\n        .setOrigin(0.5, 0.5)\n        .setScale(SCALE())\n        .setPosition(\n          UI.tileToScreen(this.position.x) + UI.tileToScreen(0.5),\n          UI.tileToScreen(this.position.y - 1) + UI.tileToScreen(0.5)\n        )\n        .play(\"bossCenterMid\")\n        .setDepth(5.5),\n      this.level.scene.add\n        .sprite(0, 0)\n        .setOrigin(0.5, 0.5)\n        .setScale(SCALE())\n        .setPosition(\n          UI.tileToScreen(this.position.x) + UI.tileToScreen(0.5),\n          UI.tileToScreen(this.position.y) + UI.tileToScreen(0.5)\n        )\n        .play(\"bossCenterBottom\")\n        .setDepth(5.5),\n      // RIGHT SIDE\n      this.level.scene.add\n        .sprite(0, 0)\n        .setOrigin(0.5, 0.5)\n        .setScale(SCALE())\n        .setPosition(\n          UI.tileToScreen(this.position.x + 1) + UI.tileToScreen(0.5),\n          UI.tileToScreen(this.position.y - 2) + UI.tileToScreen(0.5)\n        )\n        .play(\"bossSideTop\")\n        .setDepth(5.5),\n      this.level.scene.add\n        .sprite(0, 0)\n        .setOrigin(0.5, 0.5)\n        .setScale(SCALE())\n        .setPosition(\n          UI.tileToScreen(this.position.x + 1) + UI.tileToScreen(0.5),\n          UI.tileToScreen(this.position.y - 1) + UI.tileToScreen(0.5)\n        )\n        .play(\"bossSideMid\")\n        .setDepth(5.5),\n      this.level.scene.add\n        .sprite(0, 0)\n        .setOrigin(0.5, 0.5)\n        .setScale(SCALE())\n        .setPosition(\n          UI.tileToScreen(this.position.x + 1) + UI.tileToScreen(0.5),\n          UI.tileToScreen(this.position.y) + UI.tileToScreen(0.5)\n        )\n        .play(\"bossSideBottom\")\n        .setDepth(5.5),\n      // RIGHT BORDER\n      this.level.scene.add\n        .sprite(0, 0)\n        .setOrigin(0.5, 0.5)\n        .setScale(SCALE())\n        .setPosition(\n          UI.tileToScreen(this.position.x + 2) + UI.tileToScreen(0.5),\n          UI.tileToScreen(this.position.y - 2) + UI.tileToScreen(0.5)\n        )\n        .play(\"bossBorderTop\")\n        .setDepth(5.5),\n      this.level.scene.add\n        .sprite(0, 0)\n        .setOrigin(0.5, 0.5)\n        .setScale(SCALE())\n        .setPosition(\n          UI.tileToScreen(this.position.x + 2) + UI.tileToScreen(0.5),\n          UI.tileToScreen(this.position.y - 1) + UI.tileToScreen(0.5)\n        )\n        .play(\"bossBorderMid\")\n        .setDepth(5.5),\n      this.level.scene.add\n        .sprite(0, 0)\n        .setOrigin(0.5, 0.5)\n        .setScale(SCALE())\n        .setPosition(\n          UI.tileToScreen(this.position.x + 2) + UI.tileToScreen(0.5),\n          UI.tileToScreen(this.position.y) + UI.tileToScreen(0.5)\n        )\n        .play(\"bossBorderBottom\")\n        .setDepth(5.5),\n      // LEFT SIDE\n      this.level.scene.add\n        .sprite(0, 0)\n        .setOrigin(0.5, 0.5)\n        .setScale(SCALE())\n        .setPosition(\n          UI.tileToScreen(this.position.x - 1) + UI.tileToScreen(0.5),\n          UI.tileToScreen(this.position.y - 2) + UI.tileToScreen(0.5)\n        )\n        .setFlipX(true)\n        .play(\"bossSideTop\")\n        .setDepth(5.5),\n      this.level.scene.add\n        .sprite(0, 0)\n        .setOrigin(0.5, 0.5)\n        .setScale(SCALE())\n        .setPosition(\n          UI.tileToScreen(this.position.x - 1) + UI.tileToScreen(0.5),\n          UI.tileToScreen(this.position.y - 1) + UI.tileToScreen(0.5)\n        )\n        .setFlipX(true)\n        .play(\"bossSideMid\")\n        .setDepth(5.5),\n      this.level.scene.add\n        .sprite(0, 0)\n        .setOrigin(0.5, 0.5)\n        .setScale(SCALE())\n        .setPosition(\n          UI.tileToScreen(this.position.x - 1) + UI.tileToScreen(0.5),\n          UI.tileToScreen(this.position.y) + UI.tileToScreen(0.5)\n        )\n        .setFlipX(true)\n        .play(\"bossSideBottom\")\n        .setDepth(5.5),\n      // LEFT BORDER\n      this.level.scene.add\n        .sprite(0, 0)\n        .setOrigin(0.5, 0.5)\n        .setScale(SCALE())\n        .setPosition(\n          UI.tileToScreen(this.position.x - 2) + UI.tileToScreen(0.5),\n          UI.tileToScreen(this.position.y - 2) + UI.tileToScreen(0.5)\n        )\n        .setFlipX(true)\n        .play(\"bossBorderTop\")\n        .setDepth(5.5),\n      this.level.scene.add\n        .sprite(0, 0)\n        .setOrigin(0.5, 0.5)\n        .setScale(SCALE())\n        .setPosition(\n          UI.tileToScreen(this.position.x - 2) + UI.tileToScreen(0.5),\n          UI.tileToScreen(this.position.y - 1) + UI.tileToScreen(0.5)\n        )\n        .setFlipX(true)\n        .play(\"bossBorderMid\")\n        .setDepth(5.5),\n      this.level.scene.add\n        .sprite(0, 0)\n        .setOrigin(0.5, 0.5)\n        .setScale(SCALE())\n        .setPosition(\n          UI.tileToScreen(this.position.x - 2) + UI.tileToScreen(0.5),\n          UI.tileToScreen(this.position.y) + UI.tileToScreen(0.5)\n        )\n        .setFlipX(true)\n        .play(\"bossBorderBottom\")\n        .setDepth(5.5),\n    ];\n\n    let branch = new BranchChunk(this, this.leftBranch.id, 0x00ff00);\n    branch.setPosition(this.leftBranch.originPos);\n    this.leftBranch.chunks.push(branch);\n    branch.animGrow();\n\n    branch = new BranchChunk(this, this.midBranch.id, 0x008800);\n    branch.setPosition(this.midBranch.originPos);\n    this.midBranch.chunks.push(branch);\n    branch.animGrow();\n\n    branch = new BranchChunk(this, this.rightBranch.id, 0x00bb00);\n    branch.setPosition(this.rightBranch.originPos);\n    this.rightBranch.chunks.push(branch);\n    branch.animGrow();\n\n    let womb = new Womb(this);\n    womb.setPosition({ ...this.position, x: this.position.x - 2 });\n    this.leftWomb = womb;\n\n    womb = new Womb(this);\n    womb.setPosition({ ...this.position, x: this.position.x + 2 });\n    this.rightWomb = womb;\n  }\n\n  async growBranches() {\n    const grid = this.level.objects.map((row) =>\n      row.map((el) => {\n        return el.isClass(CLASS_NAMES.GROUND) ||\n          el.isClass(CLASS_NAMES.PLAYER) ||\n          el.isClass(CLASS_NAMES.EMPTY)\n          ? 0\n          : 1;\n      })\n    );\n    this.easystar.setAcceptableTiles([0]);\n\n    //===========\n    // MID BRANCH\n    //===========\n    let midPath = [];\n    let lastChunk = null;\n    if (this.midBranch.energy > 0) {\n      // allow path finder to start from branch head position\n      lastChunk = this.midBranch.chunks.slice(-1)[0];\n      grid[lastChunk.position.y][lastChunk.position.x] = 0; // flags walkable\n      this.easystar.setGrid(grid);\n      midPath = await this.calcPathForBranch(this.midBranch);\n      grid[lastChunk.position.y][lastChunk.position.x] = 1; // restores flag\n      // flags new path as invalid\n      midPath.forEach((p) => (grid[p.y][p.x] = 1));\n    }\n\n    //============\n    // LEFT BRANCH\n    //============\n    let leftPath = [];\n    if (this.leftBranch.energy > 0) {\n      // allow path finder to start from branch head position\n      lastChunk = this.leftBranch.chunks.slice(-1)[0];\n      grid[lastChunk.position.y][lastChunk.position.x] = 0; // flags walkable\n      this.easystar.setGrid(grid);\n      leftPath = await this.calcPathForBranch(this.leftBranch);\n      grid[lastChunk.position.y][lastChunk.position.x] = 1; // restores flag\n      // flags new path as invalid\n      leftPath.forEach((p) => (grid[p.y][p.x] = 1));\n    }\n\n    //=============\n    // RIGHT BRANCH\n    //=============\n    let rightPath = [];\n    if (this.rightBranch.energy > 0) {\n      // allow path finder to start from branch head position\n      lastChunk = this.rightBranch.chunks.slice(-1)[0];\n      grid[lastChunk.position.y][lastChunk.position.x] = 0; // flags walkable\n      this.easystar.setGrid(grid);\n      rightPath = await this.calcPathForBranch(this.rightBranch);\n      // no need to restore since all pathfinder have been called.\n    }\n\n    await this.level.awaitTicksTime(2);\n\n    // =========================================\n    // calc focus object by proximity to player\n    // =========================================\n\n    // helper\n    const gridToPixels = (pos) =>\n      pos ? { x: UI.tileToScreen(pos.x), y: UI.tileToScreen(pos.y) } : null;\n    const MAX = Number.MAX_SAFE_INTEGER;\n    // elements from which to messure the distance\n    const midPoint =\n      midPath.length > 0\n        ? midPath.slice(-1)[0]\n        : this.midBranch.chunks.length > 0\n        ? // wider range so it can't compete agains a branch that can move, but if noone can move, this will tell the closest to the player\n          {\n            x: 64 + this.midBranch.chunks.slice(-1)[0].position.x,\n            y: 64 + this.midBranch.chunks.slice(-1)[0].position.y,\n          }\n        : { x: MAX, y: MAX };\n    const leftPoint =\n      leftPath.length > 0\n        ? leftPath.slice(-1)[0]\n        : this.leftBranch.chunks.length > 0\n        ? // wider range so it can't compete agains a branch that can move, but if noone can move, this will tell the closest to the player\n          {\n            x: 64 + this.leftBranch.chunks.slice(-1)[0].position.x,\n            y: 64 + this.leftBranch.chunks.slice(-1)[0].position.y,\n          }\n        : { x: MAX, y: MAX };\n    const rightPoint =\n      rightPath.length > 0\n        ? rightPath.slice(-1)[0]\n        : this.rightBranch.chunks.length > 0\n        ? // wider range so it can't compete agains a branch that can move, but if noone can move, this will tell the closest to the player\n          {\n            x: 64 + this.rightBranch.chunks.slice(-1)[0].position.x,\n            y: 64 + this.rightBranch.chunks.slice(-1)[0].position.y,\n          }\n        : { x: MAX, y: MAX };\n    // distance to player for new branch head or previous branch head in case that easystarjs can't find a path\n    const midDistToPlayer = Phaser.Math.Distance.BetweenPoints(\n      gridToPixels(midPoint),\n      this.level.player.alien\n    );\n    const leftDistToPlayer = Phaser.Math.Distance.BetweenPoints(\n      gridToPixels(leftPoint),\n      this.level.player.alien\n    );\n    const rightDistToPlayer = Phaser.Math.Distance.BetweenPoints(\n      gridToPixels(rightPoint),\n      this.level.player.alien\n    );\n    // get the closest to player\n    const minDistToPlayer = Math.min(\n      midDistToPlayer,\n      leftDistToPlayer,\n      rightDistToPlayer\n    );\n    let focusCoords;\n    if (minDistToPlayer === midDistToPlayer) {\n      // detects if its a point belonging to a non moving brnach, and substract the offset\n      focusCoords =\n        midPoint.x > 64 ? { x: midPoint.x - 64, y: midPoint.y - 64 } : midPoint;\n    }\n    if (minDistToPlayer === leftDistToPlayer) {\n      // detects if its a point belonging to a non moving brnach, and substract the offset\n      focusCoords =\n        leftPoint.x > 64\n          ? { x: leftPoint.x - 64, y: leftPoint.y - 64 }\n          : leftPoint;\n    }\n    if (minDistToPlayer === rightDistToPlayer) {\n      // detects if its a point belonging to a non moving brnach, and substract the offset\n      focusCoords =\n        rightPoint.x > 64\n          ? { x: rightPoint.x - 64, y: rightPoint.y - 64 }\n          : rightPoint;\n    }\n    await this.level.scene.rules.panAndFollow({\n      x: UI.tileToScreen(focusCoords.x),\n      y: UI.tileToScreen(focusCoords.y),\n      width: 1,\n      height: 1,\n    });\n\n    // closure helper to dispose one by one the position of a path found.\n    const nextPosDispenser = (path) => () => path.shift();\n\n    if (\n      this.isSamePosition(\n        midPath[midPath.length - 1],\n        this.level.player.position\n      ) ||\n      this.isSamePosition(\n        leftPath[leftPath.length - 1],\n        this.level.player.position\n      ) ||\n      this.isSamePosition(\n        rightPath[rightPath.length - 1],\n        this.level.player.position\n      )\n    ) {\n      this.level.playerKilledByBranch();\n    }\n    // calls animations in parallel, awaits for all to resolve\n    await Promise.all([\n      this.animateGrow(this.midBranch, nextPosDispenser(midPath)),\n      this.animateGrow(this.leftBranch, nextPosDispenser(leftPath)),\n      this.animateGrow(this.rightBranch, nextPosDispenser(rightPath)),\n    ]);\n  }\n\n  async animateGrow(branch, getNextPos) {\n    const nextPos = getNextPos();\n    if (nextPos && !branch.animating) {\n      const chunk = new BranchChunk(this, branch.id, branch.chunks[0].color);\n      chunk.setPosition(nextPos);\n      branch.chunks.push(chunk);\n      await Promise.all(branch.chunks.map((b) => b.animGrow()));\n      // await this.level.awaitTicksTime(2);\n      await this.animateGrow(branch, getNextPos);\n    }\n  }\n\n  async animateReduction(branch) {\n    if (branch.chunks.length > 1) {\n      branch.animating = true;\n      await Promise.all(branch.chunks.map((b) => b.animReduction()));\n      branch.animating = false;\n\n      const chunk = branch.chunks.pop();\n      if(chunk) {\n        chunk.animDetachment();\n  \n        await this.level.awaitTicksTime(0.5);\n        this.level.replaceByEmpty(chunk);\n      }\n    }\n  }\n\n  async calcPathForBranch(branch) {\n    const lastChunk = branch.chunks.slice(-1)[0];\n    const start = lastChunk.position;\n    const end = this.level.player.position;\n\n    const path = await this.calcPath(start, end);\n    // return path.slice(1, path.length - 1)\n    return path.slice(1, 5);\n  }\n\n  calcPath(start, end) {\n    return new Promise((res) => {\n      this.easystar.findPath(start.x, start.y, end.x, end.y, (path) => {\n        res(path || []);\n      });\n      this.easystar.calculate();\n    });\n  }\n\n  birthBats() {\n    // this.createBatLeftUp()\n    this.createBatLeftDown();\n    // this.createBatRightUp()\n    this.createBatRightDown();\n  }\n  async createBatRightUp() {\n    const exitPos = {\n      x: this.rightWomb.position.x + 1,\n      y: this.rightWomb.position.y - 1,\n    };\n    const upperBat = this.createBatAt(exitPos);\n    if (upperBat) {\n      await this.level.awaitTicks(2);\n      this.level.moveables.push(upperBat);\n    }\n  }\n  async createBatLeftUp() {\n    const exitPos = {\n      x: this.leftWomb.position.x - 1,\n      y: this.leftWomb.position.y - 1,\n    };\n    const dir = \"CW\";\n    const upperBat = this.createBatAt(exitPos, dir);\n    if (upperBat) {\n      // delay enemy activation to avoid collision right after born\n      await this.level.awaitTicks(2);\n      this.level.moveables.push(upperBat);\n    }\n  }\n  createBatRightDown() {\n    const exitPos = {\n      x: this.rightWomb.position.x + 1,\n      y: this.rightWomb.position.y,\n    };\n    const lowerBat = this.createBatAt(exitPos);\n    if (lowerBat) {\n      lowerBat.alien?.setAlpha(0);\n      this.body[2].play(\"bossWombBottom2_birth\");\n      this.body[2].once(Phaser.Animations.Events.ANIMATION_COMPLETE, () => {\n        this.level.moveables.push(lowerBat);\n        this.body[2].play(\"bossWombBottom2_idle\");\n        lowerBat.alien?.setAlpha(1);\n      });\n    } else {\n      this.body[2].play(\"bossWombBottom2_blocked\");\n      this.body[2].once(Phaser.Animations.Events.ANIMATION_COMPLETE, () => {\n        this.body[2].play(\"bossWombBottom2_idle\");\n      });\n    }\n  }\n  createBatLeftDown() {\n    const exitPos = {\n      x: this.leftWomb.position.x - 1,\n      y: this.leftWomb.position.y,\n    };\n    const dir = \"CW\";\n    const lowerBat = this.createBatAt(exitPos, dir);\n    if (lowerBat) {\n      lowerBat.alien?.setAlpha(0);\n      this.body[5].play(\"bossWombBottom2_birth\");\n      this.body[5].once(Phaser.Animations.Events.ANIMATION_COMPLETE, () => {\n        this.level.moveables.push(lowerBat);\n        this.body[5].play(\"bossWombBottom2_idle\");\n        lowerBat.alien?.setAlpha(1);\n      });\n    } else {\n      this.body[5].play(\"bossWombBottom2_blocked\");\n      this.body[5].once(Phaser.Animations.Events.ANIMATION_COMPLETE, () => {\n        this.body[5].play(\"bossWombBottom2_idle\");\n      });\n    }\n  }\n  createBatAt(pos, dir = \"CCW\") {\n    const exit = this.level.getObjectAt(pos.x, pos.y);\n    if (exit.isClass(CLASS_NAMES.EMPTY)) {\n      const enemy = this.level.createEnemyAt(pos);\n      enemy.scanDirection = dir;\n      return enemy;\n    }\n  }\n\n  maintenance() {\n    if (\n      this.midBranch.damageReceived > 0 &&\n      this.midBranch.energy > 0 &&\n      !this.midBranch.animating\n    ) {\n      this.animateReduction(this.midBranch);\n      this.midBranch.damageReceived--;\n      this.midBranch.energy--;\n      this.level.scene.events.emit(\"branch_takes_damage\", {\n        branchId: this.midBranch.id,\n        newValue: this.midBranch.energy / this.midBranch.maxEnergy,\n      });\n    }\n    if (\n      this.leftBranch.damageReceived > 0 &&\n      this.leftBranch.energy > 0 &&\n      !this.leftBranch.animating\n    ) {\n      this.animateReduction(this.leftBranch);\n      this.leftBranch.damageReceived--;\n      this.leftBranch.energy--;\n      this.level.scene.events.emit(\"branch_takes_damage\", {\n        branchId: this.leftBranch.id,\n        newValue: this.leftBranch.energy / this.leftBranch.maxEnergy,\n      });\n    }\n    if (\n      this.rightBranch.damageReceived > 0 &&\n      this.rightBranch.energy > 0 &&\n      !this.rightBranch.animating\n    ) {\n      this.animateReduction(this.rightBranch);\n      this.rightBranch.damageReceived--;\n      this.rightBranch.energy--;\n      this.level.scene.events.emit(\"branch_takes_damage\", {\n        branchId: this.rightBranch.id,\n        newValue: this.rightBranch.energy / this.rightBranch.maxEnergy,\n      });\n    }\n\n    if (\n      this.midBranch.energy <= 0 &&\n      this.leftBranch.energy <= 0 &&\n      this.rightBranch.energy <= 0 &&\n      !this.defeated\n    ) {\n      this.defeated = true;\n      this.level.destroyObjectsByKind(CLASS_NAMES.ENEMY);\n      this.level.playerWon();\n    }\n  }\n\n  destroyBranch(branch) {\n    console.log(\"branch destroyed\");\n    branch.chunks.forEach((ch) => {\n      ch.animDestroy();\n      this.level.replaceByEmpty(ch);\n    });\n    branch.chunks = [];\n  }\n  takeBranchDamage(branchId, amount) {\n    const branch = this.getBranchById(branchId);\n    branch.damageReceived += amount;\n    if (branch.damageReceived >= branch.energy && branch.energy > 0) {\n      branch.energy = 0;\n      this.destroyBranch(branch);\n      this.level.scene.events.emit(\"branch_takes_damage\", {\n        branchId,\n        newValue: 0,\n      });\n    } else {\n      const group = this.level.scene.add.group({\n        classType: Phaser.GameObjects.Sprite,\n        defaultKey: null,\n        defaultFrame: null,\n        active: true,\n        maxSize: -1,\n        runChildUpdate: false,\n        createCallback: null,\n        removeCallback: null,\n        createMultipleCallback: null,\n      });\n      // FLASH BRANCH\n      group.addMultiple(branch.chunks.map((ch) => ch.alien));\n      const flash = this.level.scene.plugins\n        .get(\"rexFlash\")\n        .add(group, { duration: 75, repeat: 3 });\n      flash.flash();\n      flash.once(\"complete\", () => group.clear());\n    }\n  }\n\n  // branches helpers\n  getBranchById(branchId) {\n    return [this.leftBranch, this.midBranch, this.rightBranch].find(\n      (b) => b.id === branchId\n    );\n  }\n  chunkIsHead(chunk, brachId) {\n    const branch = this.getBranchById(brachId);\n    return branch.chunks[branch.chunks.length - 1] === chunk;\n  }\n  chunkIsNeck(chunk, brachId) {\n    const branch = this.getBranchById(brachId);\n    return (\n      branch.chunks.length > 1 &&\n      branch.chunks[branch.chunks.length - 2] === chunk\n    );\n  }\n  isSamePosition(posA, posB) {\n    return posA && posB && posA.x === posB.x && posA.y === posB.y;\n  }\n  getChunkOrientation(chunk, branchId) {\n    const branch = this.getBranchById(branchId);\n    const chunkIdx = branch.chunks.findIndex((ch) => ch === chunk);\n    // is head when is not into the branch (after creation before insert) or is last element.\n    // const isHead = chunkIdx === -1 || chunkIdx === branch.chunks.length - 1\n    const isBase = chunkIdx === 0 || branch.chunks.length === 0;\n    if (isBase) {\n      return DIRS.UP;\n    }\n    const prevChunk =\n      chunkIdx === -1\n        ? branch.chunks[branch.chunks.length - 1]\n        : branch.chunks[chunkIdx - 1];\n    if (\n      prevChunk.position.x < chunk.position.x &&\n      prevChunk.position.y === chunk.position.y\n    ) {\n      return DIRS.RIGHT;\n    }\n    if (\n      prevChunk.position.x > chunk.position.x &&\n      prevChunk.position.y === chunk.position.y\n    ) {\n      return DIRS.LEFT;\n    }\n    if (\n      prevChunk.position.x === chunk.position.x &&\n      prevChunk.position.y < chunk.position.y\n    ) {\n      return DIRS.DOWN;\n    }\n    if (\n      prevChunk.position.x === chunk.position.x &&\n      prevChunk.position.y > chunk.position.y\n    ) {\n      return DIRS.UP;\n    }\n  }\n  isElbow(chunk, branchId) {\n    const branch = this.getBranchById(branchId);\n    const chunkIdx = branch.chunks.findIndex((ch) => ch === chunk);\n    // is head when is not into the branch (after creation before insert) or is last element.\n    const isHead = chunkIdx === -1 || chunkIdx === branch.chunks.length - 1;\n    const isBase = chunkIdx === 0 || branch.chunks.length === 0;\n    if (isHead) {\n      return false;\n    }\n    const nextChunk = branch.chunks[chunkIdx + 1];\n    // if it's base, mock chunk below to make this alwas DIRS.UP\n    const prevChunk = isBase\n      ? { ...chunk, position: { ...chunk.position, y: chunk.position.y + 1 } }\n      : branch.chunks[chunkIdx - 1];\n    if (\n      prevChunk.position.x < nextChunk.position.x &&\n      prevChunk.position.y > nextChunk.position.y\n    ) {\n      if (prevChunk.position.x < chunk.position.x) {\n        //  x\n        // o\n        return DIRS.RIGHT + DIRS.UP;\n      } else {\n        // x\n        // o\n        return DIRS.UP + DIRS.RIGHT;\n      }\n    }\n    if (\n      prevChunk.position.x < nextChunk.position.x &&\n      prevChunk.position.y < nextChunk.position.y\n    ) {\n      if (prevChunk.position.x < chunk.position.x) {\n        // o\n        //  x\n        return DIRS.RIGHT + DIRS.DOWN;\n      } else {\n        // o\n        // x\n        return DIRS.DOWN + DIRS.RIGHT;\n      }\n    }\n    if (\n      prevChunk.position.x > nextChunk.position.x &&\n      prevChunk.position.y < nextChunk.position.y\n    ) {\n      if (prevChunk.position.x > chunk.position.x) {\n        // o\n        // x\n        return DIRS.LEFT + DIRS.DOWN;\n      } else {\n        //  o\n        // x\n        return DIRS.DOWN + DIRS.LEFT;\n      }\n    }\n    if (\n      prevChunk.position.x > nextChunk.position.x &&\n      prevChunk.position.y > nextChunk.position.y\n    ) {\n      if (prevChunk.position.x > chunk.position.x) {\n        // x\n        // o\n        return DIRS.LEFT + DIRS.UP;\n      } else {\n        // x\n        //  o\n        return DIRS.UP + DIRS.LEFT;\n      }\n    }\n\n    // after all, if no condition matches, return false since is no elbow\n    return false;\n  }\n}\n\nexport default Abushgidim;\n","import Phaser from \"phaser\";\nimport { SCALE, TICK_TIME, TILE_SIZE } from \"../../utils/constants\";\n\nclass CircularProgress {\n  constructor(scene) {\n    this.scene = scene;\n    this.object = null;\n    this.flash = null;\n  }\n\n  setValue(value) {\n    this.object.value = value;\n    if (this.object.value > 0.85) {\n      this.flash.flash();\n    }\n  }\n\n  reset() {\n    this.scene.tweens.add({\n      targets: this.object,\n      value: 0,\n      ease: \"Linear\",\n      duration: 500,\n    });\n  }\n\n  draw({\n    x = 0,\n    y = 0,\n    radius = 0.5 * SCALE,\n    barColor = 0x5d9b79,\n    trackColor = 0x486859,\n    centerColor = 0x486859,\n    thickness = 0.8,\n    startAngle = Phaser.Math.DegToRad(270),\n  }) {\n    this.object = this.scene.add.rexCircularProgress({\n      x,\n      y,\n      radius,\n\n      barColor,\n      trackColor,\n      centerColor,\n      thickness,\n      startAngle,\n      anticlockwise: true,\n\n      value: 0,\n      easeValue: {\n        duration: 0,\n        ease: \"Linear\",\n      },\n      valuechangeCallback: function (newValue, oldValue, circularProgress) {\n        // console.log(newValue, oldValue, circularProgress);\n      },\n    });\n    this.object.setScrollFactor(0);\n    this.object.depth = 100;\n    this.object.name = \"circularProgress\";\n\n    this.flash = this.scene.plugins\n      .get(\"rexFlash\")\n      .add(this.object, { duration: TICK_TIME, repeat: 2 });\n  }\n}\n\nexport default CircularProgress;\n","import { TICK_TIME } from \"../../utils/constants\";\nimport UI from \"../UI\";\n\nclass BranchesEnergyBars {\n  constructor(scene) {\n    this.scene = scene;\n    this.branch1 = {\n      progressBox: null,\n      progressBar: null,\n      value: 0,\n      x: 0,\n      y: 0,\n      barWidth: 0,\n      barHeight: 0,\n      flash: null,\n    };\n    this.branch2 = {\n      progressBox: null,\n      progressBar: null,\n      value: 0,\n      x: 0,\n      y: 0,\n      barWidth: 0,\n      barHeight: 0,\n      flash: null,\n    };\n    this.branch3 = {\n      progressBox: null,\n      progressBar: null,\n      value: 0,\n      x: 0,\n      y: 0,\n      barWidth: 0,\n      barHeight: 0,\n      flash: null,\n    };\n  }\n\n  draw({ x, y }) {\n    const BAR_WIDTH = UI.tileToScreen(0.3);\n    const BAR_HEIGHT = UI.tileToScreen(1);\n    const GUTTER = UI.tileToScreen(0.03);\n    const PADDING = UI.pixelToScreen(1);\n    this.branch1.progressBox = this.scene.add.graphics();\n    this.branch1.progressBox.name = \"progressBox1\"\n    this.branch1.progressBox.depth = 100;\n    this.branch1.progressBox.setScrollFactor(0);\n    this.branch1.progressBox.fillStyle(0x486859, 0.8);\n    this.branch1.progressBox.fillRect(x, y, BAR_WIDTH, BAR_HEIGHT);\n\n    this.branch1.progressBar = this.scene.add.graphics();\n    this.branch1.progressBar.name = \"progressBar1\"\n\n    this.branch1.progressBar.depth = 101;\n    this.branch1.progressBar.setScrollFactor(0);\n    this.branch1.progressBar.fillStyle(0x5d9b79, 1);\n    this.branch1.barWidth = BAR_WIDTH - 2 * PADDING;\n    this.branch1.barHeight = BAR_HEIGHT - 2 * PADDING;\n    this.branch1.x = x + PADDING;\n    this.branch1.y = y + PADDING + this.branch1.barHeight;\n    this.branch1.progressBar.fillRect(\n      this.branch1.x,\n      this.branch1.y,\n      this.branch1.barWidth,\n      - this.branch1.barHeight\n    );\n    \n    this.branch1.flash = this.scene.plugins\n      .get(\"rexFlash\")\n      .add(this.branch1.progressBar, { duration: TICK_TIME, repeat: 2 });\n\n    this.branch2.progressBox = this.scene.add.graphics();\n    this.branch2.progressBox.name = \"progressBox2\"\n    this.branch2.progressBox.depth = 100;\n    this.branch2.progressBox.setScrollFactor(0);\n    this.branch2.progressBox.fillStyle(0x486859, 0.8);\n    this.branch2.progressBox.fillRect(\n      x + BAR_WIDTH + GUTTER,\n      y,\n      BAR_WIDTH,\n      BAR_HEIGHT\n    );\n\n    this.branch2.progressBar = this.scene.add.graphics();\n    this.branch2.progressBar.name = \"progressBar2\"\n    this.branch2.progressBar.depth = 101;\n    this.branch2.progressBar.setScrollFactor(0);\n    this.branch2.progressBar.fillStyle(0x5d9b79, 1);\n    this.branch2.barWidth = BAR_WIDTH - 2 * PADDING;\n    this.branch2.barHeight = BAR_HEIGHT - 2 * PADDING;\n    this.branch2.x = x + BAR_WIDTH + GUTTER + PADDING;\n    this.branch2.y = y + PADDING + this.branch1.barHeight;\n    this.branch2.progressBar.fillRect(\n      this.branch2.x,\n      this.branch2.y,\n      this.branch2.barWidth,\n      - this.branch2.barHeight\n    );\n    this.branch2.flash = this.scene.plugins\n      .get(\"rexFlash\")\n      .add(this.branch2.progressBar, { duration: TICK_TIME, repeat: 2 });\n\n    this.branch3.progressBox = this.scene.add.graphics();\n    this.branch3.progressBox.name = \"progressBox3\"\n    this.branch3.progressBox.depth = 100;\n    this.branch3.progressBox.setScrollFactor(0);\n    this.branch3.progressBox.fillStyle(0x486859, 0.8);\n    this.branch3.progressBox.fillRect(\n      x + 2 * BAR_WIDTH + 2 * GUTTER,\n      y,\n      BAR_WIDTH,\n      BAR_HEIGHT\n    );\n\n    this.branch3.progressBar = this.scene.add.graphics();\n    this.branch3.progressBar.name = \"progressBar3\"\n    this.branch3.progressBar.depth = 101;\n    this.branch3.progressBar.setScrollFactor(0);\n    this.branch3.progressBar.fillStyle(0x5d9b79, 1);\n    this.branch3.barWidth = BAR_WIDTH - 2 * PADDING;\n    this.branch3.barHeight = BAR_HEIGHT - 2 * PADDING;\n    this.branch3.x = x + 2 * BAR_WIDTH + 2 * GUTTER + PADDING;\n    this.branch3.y = y + PADDING + this.branch1.barHeight;\n    this.branch3.progressBar.fillRect(\n      this.branch3.x,\n      this.branch3.y,\n      this.branch3.barWidth,\n      - this.branch3.barHeight\n    );\n    this.branch3.flash = this.scene.plugins\n      .get(\"rexFlash\")\n      .add(this.branch3.progressBar, { duration: TICK_TIME, repeat: 2 });\n\n    this.scene.events.on(\"branch_takes_damage\", this.reduceValue.bind(this));\n  }\n\n  reduceValue({branchId, newValue}) {\n    const branch = \n      branchId === \"LEFT_BRANCH\"\n        ? this.branch1\n        : branchId === \"MID_BRANCH\"\n        ? this.branch2\n        : this.branch3;\n\n    branch.progressBar.clear();\n    branch.progressBar.fillStyle(0x5d9b79, 1);\n    branch.progressBar.fillRect(\n      branch.x,\n      branch.y,\n      branch.barWidth,\n      - newValue * branch.barHeight\n    );\n    console.log(branch.flash);\n    if(branch.flash.timer) {\n      branch.flash.flash()\n    }\n  }\n}\n\nexport default BranchesEnergyBars;\n","import Phaser from \"phaser\";\nimport LevelBase from \"./levelBase\";\nimport { Exit, Interactive, Player, Torch } from \"../objects\";\nimport { translate } from \"../../utils/localization\";\nimport GreenExplosion from \"../objects/Abushgidim/GreenExplosion\";\nimport {\n  CLASS_NAMES,\n  DIRS,\n  PIXEL_NAME,\n  PIXEL_TO_TILEMAP_POSITION,\n  SCALE,\n  TICK_TIME,\n  TILE_SIZE,\n} from \"../../utils/constants\";\nimport UI from \"../UI\";\nimport Abushgidim from \"../objects/Abushgidim/index.js\";\nimport BranchChunk from \"../objects/Abushgidim/BranchChunk\";\nimport CircularProgress from \"../CircularProgress/CircularProgress\";\nimport BranchesEnergyBars from \"../BranchesEnergyBars/BranchesEnergyBars\";\n\nclass LevelKiFinale extends LevelBase {\n  constructor() {\n    super();\n    this.name = \"The prophecy\";\n    this.diamondsGoal = 0;\n    this.worldArtOriginPos = { x: 14, y: 15 };\n    this.reloadSpots = [];\n    this.batBirthSpots = [];\n    this.stepsToBossGrowth = 10;\n    this.stepCount = 0;\n    this.artSpot = null;\n    // flag to indicate the player was killed by the boss and take action after reconnect\n    this.playerKilled = false;\n    this.ticksCountForBossLoop = 50;\n    this.ticksCount = 50;\n    this.flash = null;\n    this.isRestart = true;\n\n    // gidim = spirit\n    // Abu = minor god father of plants and vegetation\n    // Abushgidim => the bad root of then father of plants\n\n    this.circularProgress = null;\n  }\n\n  get id() {\n    return this.constructor.key;\n  }\n\n  async connectToScene(scene) {\n    await super.connectToScene(scene);\n    scene.ui.drawKiBossScores();\n    this.circularProgress = new CircularProgress(scene);\n    this.branchesEnergyBars = new BranchesEnergyBars(scene);\n\n    // this.circularProgress.draw({\n    //   x: UI.tileToScreen(19.15),\n    //   y: UI.tileToScreen(1),\n    //   radius: UI.tileToScreen(0.5),\n    // });\n    // this.branchesEnergyBars.draw({\n    //   x: UI.tileToScreen(1.5),\n    //   y: UI.tileToScreen(0.5),\n    // });\n    this.scene.children.getByName(\"score_left_img\").setVisible(false);\n    this.scene.children.getByName(\"score_right_img\").setVisible(false);\n\n    this.drawProfecy();\n    // pan little higher so art can be fully seen\n    // this.focusObject = {\n    //   ...this.player.alien,\n    //   y: this.player.alien.y - UI.tileToPixels(3),\n    // };\n\n    this.boss = new Abushgidim(this, {\n      // half between 2 birth spots\n      x:\n        Math.min(\n          this.batBirthSpots[0].position.x,\n          this.batBirthSpots[1].position.x\n        ) +\n        Math.abs(\n          this.batBirthSpots[0].position.x - this.batBirthSpots[1].position.x\n        ) /\n          2,\n      // same level as birth spots\n      y: this.batBirthSpots[0].position.y,\n    });\n\n    this.battleMusic = this.scene.sound.add(\"escape_music\", {\n      loop: true,\n      valume: 0,\n    });\n\n    if (this.scene.isRestart) {\n      this.jumpToBattle();\n    }\n\n    this.prepareDwarfForProphecy();\n\n    // // UNCOMMENT FOR TEST\n    // this.scene.input.keyboard.addListener(\"keyup\", this.onKeyUp.bind(this));\n    // this.boss.rightBranch.chunks = []\n\n    // let chunk = new BranchChunk(this.boss, this.boss.rightBranch.id, 0x00ff00);\n    // chunk.setPosition({ x: this.artSpot.position.x - 6, y: this.artSpot.position.y-2});\n    // this.boss.rightBranch.chunks.push(chunk);\n    // // this.drawSmallRosette({ x: this.player.position.x - 6, y: this.player.position.y-2}, this.boss.rightBranch)\n\n    // this.boss.rightBranch.chunks.forEach(ch => ch.animGrow())\n\n    await this.awaitTicks(2);\n\n    // this.startBattle()\n    // this.bossLoop();\n    // this.bossDefeated()\n  }\n  async jumpToBattle() {\n    this.player.setPosition({\n      x: this.artSpot.position.x,\n      y: this.artSpot.position.y + 3,\n    });\n    this.moveObject(this.player, this.player.position);\n    this.focusObject = this.player.alien;\n    // this.scene.rules.setUpCameraFollow(this.player.alien)\n    // pan camera to player\n    // setTimeout(() => this.scene.rules.panAndFollow(this.player.alien), 0)\n\n    this.leader.setPosition({\n      x: this.artSpot.position.x + 2,\n      y: this.artSpot.position.y,\n    });\n    this.moveObject(this.leader, this.leader.position);\n    this.leader.animIdle();\n    this.destroyObjectsInRange(\n      {\n        x1: this.artSpot.position.x - 1,\n        x2: this.artSpot.position.x + 2,\n        y1: this.artSpot.position.y,\n        y2: this.artSpot.position.y + 2,\n      },\n      1\n    );\n    await this.awaitTicks(2);\n    this.startBattle();\n  }\n\n  prepareDwarfForProphecy() {\n    const line = this.artSpot.position.x + 1 - this.leader.position.x;\n    for (let i = 1; i <= line; i++) {\n      this.leader.leadingPath.push({\n        x: this.leader.position.x + i,\n        y: this.leader.position.y,\n      });\n    }\n  }\n\n  startBattle() {\n    this.pause();\n\n    this.circularProgress.draw({\n      x: UI.tileToScreen(19.15),\n      y: UI.tileToScreen(0),\n      radius: UI.tileToScreen(0.5),\n    });\n    this.branchesEnergyBars.draw({\n      x: UI.tileToScreen(1.5),\n      y: UI.tileToScreen(-0.5),\n    });\n    this.scene.children.getByName(\"score_left_img\").setVisible(true);\n    this.scene.children.getByName(\"score_right_img\").setVisible(true);\n\n    this.scene.tweens.add({\n      targets: this.scene.rules.music,\n      volume: 0,\n      ease: \"Linear\",\n      duration: 1000,\n    });\n    this.scene.rules?.music?.stop();\n\n    this.battleMusic?.play();\n    this.scene.tweens.add({\n      targets: this.battleMusic,\n      volume: 1,\n      ease: \"Linear\",\n      duration: 1000,\n    });\n    this.bossLoop();\n    // this.bossDefeated()\n  }\n\n  growLeft() {\n    let chunk = new BranchChunk(this.boss, this.boss.rightBranch.id, 0x00ff00);\n    const prevChunk =\n      this.boss.rightBranch.chunks[this.boss.rightBranch.chunks.length - 1];\n    chunk.setPosition({ x: prevChunk.position.x - 1, y: prevChunk.position.y });\n    this.boss.rightBranch.chunks.push(chunk);\n\n    this.boss.rightBranch.chunks.forEach((ch) => ch.animGrow());\n  }\n\n  growRight() {\n    let chunk = new BranchChunk(this.boss, this.boss.rightBranch.id, 0x00ff00);\n    const prevChunk =\n      this.boss.rightBranch.chunks[this.boss.rightBranch.chunks.length - 1];\n    chunk.setPosition({ x: prevChunk.position.x + 1, y: prevChunk.position.y });\n    this.boss.rightBranch.chunks.push(chunk);\n\n    this.boss.rightBranch.chunks.forEach((ch) => ch.animGrow());\n  }\n\n  growUp() {\n    let chunk = new BranchChunk(this.boss, this.boss.rightBranch.id, 0x00ff00);\n    const prevChunk =\n      this.boss.rightBranch.chunks[this.boss.rightBranch.chunks.length - 1];\n    chunk.setPosition({ x: prevChunk.position.x, y: prevChunk.position.y - 1 });\n    this.boss.rightBranch.chunks.push(chunk);\n\n    this.boss.rightBranch.chunks.forEach((ch) => ch.animGrow());\n  }\n\n  growDown() {\n    let chunk = new BranchChunk(this.boss, this.boss.rightBranch.id, 0x00ff00);\n    const prevChunk =\n      this.boss.rightBranch.chunks[this.boss.rightBranch.chunks.length - 1];\n    chunk.setPosition({ x: prevChunk.position.x, y: prevChunk.position.y + 1 });\n    this.boss.rightBranch.chunks.push(chunk);\n\n    this.boss.rightBranch.chunks.forEach((ch) => ch.animGrow());\n  }\n\n  drawSmallRosette(oPos, branch) {\n    let chunk = new BranchChunk(this.boss, this.boss.rightBranch.id, 0x00ff00);\n    chunk.setPosition({ x: oPos.x, y: oPos.y });\n    this.boss.rightBranch.chunks.push(chunk);\n\n    chunk = new BranchChunk(this.boss, this.boss.rightBranch.id, 0x00ff00);\n    chunk.setPosition({ x: oPos.x - 1, y: oPos.y });\n    this.boss.rightBranch.chunks.push(chunk);\n\n    chunk = new BranchChunk(this.boss, this.boss.rightBranch.id, 0x00ff00);\n    chunk.setPosition({ x: oPos.x - 1, y: oPos.y + 1 });\n    this.boss.rightBranch.chunks.push(chunk);\n\n    chunk = new BranchChunk(this.boss, this.boss.rightBranch.id, 0x00ff00);\n    chunk.setPosition({ x: oPos.x - 1, y: oPos.y + 2 });\n    this.boss.rightBranch.chunks.push(chunk);\n\n    chunk = new BranchChunk(this.boss, this.boss.rightBranch.id, 0x00ff00);\n    chunk.setPosition({ x: oPos.x, y: oPos.y + 2 });\n    this.boss.rightBranch.chunks.push(chunk);\n\n    chunk = new BranchChunk(this.boss, this.boss.rightBranch.id, 0x00ff00);\n    chunk.setPosition({ x: oPos.x + 1, y: oPos.y + 2 });\n    this.boss.rightBranch.chunks.push(chunk);\n\n    chunk = new BranchChunk(this.boss, this.boss.rightBranch.id, 0x00ff00);\n    chunk.setPosition({ x: oPos.x + 1, y: oPos.y + 1 });\n    this.boss.rightBranch.chunks.push(chunk);\n\n    chunk = new BranchChunk(this.boss, this.boss.rightBranch.id, 0x00ff00);\n    chunk.setPosition({ x: oPos.x + 1, y: oPos.y });\n    this.boss.rightBranch.chunks.push(chunk);\n  }\n\n  repost() {\n    this.reloadSpots.forEach((spot) => {\n      if (this.isDestinationEmpty(spot.position.x, spot.position.y)) {\n        let element = null;\n        if (Math.random() > 0.75) {\n          element = this.createBarrelAt(spot.position);\n        } else {\n          element = this.createBoulderAt(spot.position);\n        }\n        element.setPosition(spot.position);\n        this.moveables.push(element);\n        this.onAddElement(element);\n        element.addedToScene();\n        this.objects[element.position.y][element.position.x] = element;\n      }\n    });\n  }\n\n  playerKilledByBranch() {\n    this.playerKilled = true;\n  }\n\n  playerWon() {\n    // console.log(\"YOU WON\");\n    this.bossDefeated();\n  }\n\n  drawProfecy() {\n    const map = this.scene.children.getByName(\"layer_2\");\n    for (let i = 0; i <= 3; i++) {\n      for (let j = 0; j <= 3; j++) {\n        map.putTileAt(\n          PIXEL_TO_TILEMAP_POSITION.WORLD_ART + j + i * 10,\n          this.worldArtOriginPos.x + j,\n          this.worldArtOriginPos.y + i,\n          false,\n          \"layer_1\"\n        );\n      }\n    }\n  }\n\n  onKeyUp(event) {\n    if (event.key === \"1\") {\n      this.showDialog1();\n    }\n    if (event.key === \"2\") {\n      this.showDialog2();\n    }\n    if (event.key === \"3\") {\n      this.showDialog3();\n    }\n    if (event.key === \"4\") {\n      this.showDialog4();\n    }\n    if (event.key === \"5\") {\n      this.scene.events.emit(\"dialogue:updateCharacterName\");\n    }\n    if (event.key === \"9\") {\n      this.destroyObjectsByKind(CLASS_NAMES.ENEMY);\n    }\n    if (event.key === \"7\") {\n      this.boss.takeBranchDamage(\"RIGHT_BRANCH\", 1);\n    }\n    if (event.key === \"8\") {\n      this.boss.takeBranchDamage(\"RIGHT_BRANCH\", 5);\n    }\n    if (event.key === DIRS.LEFT) {\n      this.growLeft();\n    }\n    if (event.key === DIRS.RIGHT) {\n      this.growRight();\n    }\n    if (event.key === DIRS.UP) {\n      this.growUp();\n    }\n    if (event.key === DIRS.DOWN) {\n      this.growDown();\n    }\n  }\n\n  showDialog1() {\n    this.scene.events.once(\"dialogue:hidden\", async () => {\n      await this.awaitTicks(3);\n      await this.playEarthquake(\n        {\n          x1: this.player.position.x,\n          x2: this.player.position.x,\n          y1: this.player.position.y,\n          y2: this.player.position.y,\n        },\n        1\n      );\n      this.destroyObjectsInRange(\n        {\n          x1: this.player.position.x - 1,\n          x2: this.player.position.x + 2,\n          y1: this.player.position.y,\n          y2: this.player.position.y + 2,\n        },\n        1\n      );\n\n      await this.awaitTicks(5);\n      this.showDialog2();\n    });\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Mary\", \"closeUp_Dwarf\"],\n      participantNames: [\"Mary\", \"Doc\"],\n      conversation: [\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_19.dialog_1.mary_say_1\")],\n        },\n        {\n          who: \"closeUp_Dwarf\",\n          text: [translate(\"level_19.dialog_1.dwarf_say_1\")],\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_19.dialog_1.mary_say_2\")],\n        },\n        {\n          who: \"closeUp_Dwarf\",\n          text: [translate(\"level_19.dialog_1.dwarf_say_2\")],\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_19.dialog_1.mary_say_3\")],\n        },\n        {\n          who: \"closeUp_Dwarf\",\n          text: [translate(\"level_19.dialog_1.dwarf_say_3\")],\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_19.dialog_1.mary_say_4\")],\n        },\n        {\n          who: \"closeUp_Dwarf\",\n          text: [translate(\"level_19.dialog_1.dwarf_say_4\")],\n        },\n      ],\n    });\n  }\n\n  showDialog2() {\n    this.scene.events.once(\"dialogue:hidden\", async () => {\n      // await this.awaitTicks(3)\n\n      this.onNextTick((lvl) => lvl.startBattle());\n    });\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Mary\", \"closeUp_Dwarf\"],\n      participantNames: [\"Mary\", \"Doc\"],\n      conversation: [\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_19.dialog_2.mary_say_1\")],\n        },\n        {\n          who: \"closeUp_Dwarf\",\n          text: [translate(\"level_19.dialog_2.dwarf_say_1\")],\n        },\n        {\n          who: \"closeUp_Dwarf\",\n          text: [translate(\"level_19.dialog_2.dwarf_say_2\")],\n        },\n        {\n          who: \"closeUp_Dwarf\",\n          text: [translate(\"level_19.dialog_2.dwarf_say_3\")],\n        },\n      ],\n    });\n  }\n\n  moveDwarfToExit() {\n    // hack to auto move dwarf\n    if (this.dwarfRun) {\n      if (this.leader.leadingPath.length !== 0) {\n        this.onNextTick(() => {\n          this.leader.onPlayerMoves(this.leader.position);\n          this.moveDwarfToExit();\n        });\n      } else {\n        this.dwarfRun = false;\n        this.replaceByEmpty(this.leader);\n        this.leader = null;\n        this.player.reconnect();\n      }\n    }\n  }\n\n  showDialog3() {\n    this.scene.events.once(\"dialogue:hidden\", async () => {\n      this.dwarfRun = true;\n      this.leader.leadingPath = [\n        { x: this.leader.position.x + 1, y: this.leader.position.y },\n        { x: this.leader.position.x + 1, y: this.leader.position.y },\n        { x: this.leader.position.x + 2, y: this.leader.position.y },\n        { x: this.leader.position.x + 2, y: this.leader.position.y },\n        { x: this.leader.position.x + 3, y: this.leader.position.y },\n        { x: this.leader.position.x + 3, y: this.leader.position.y },\n      ];\n      this.moveDwarfToExit();\n    });\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Mary\", \"closeUp_Dwarf\"],\n      participantNames: [\"Mary\", \"Marduk\"],\n      conversation: [\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_19.dialog_3.mary_say_1\")],\n        },\n        {\n          who: \"closeUp_Dwarf\",\n          text: [translate(\"level_19.dialog_3.dwarf_say_1\")],\n        },\n        {\n          who: \"closeUp_Dwarf\",\n          text: [translate(\"level_19.dialog_3.dwarf_say_2\")],\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_19.dialog_3.mary_say_2\")],\n        },\n        {\n          who: \"closeUp_Dwarf\",\n          text: [translate(\"level_19.dialog_3.dwarf_say_3\")],\n        },\n      ],\n    });\n  }\n\n  showDialog4() {\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\n        \"closeUp_Mary\",\n        \"closeUp_Marduk\",\n        \"closeUp_Dwarf\",\n        \"closeUp_Tiamat\",\n      ],\n      participantNames: [\"Mary\", \"Marduk\", \"Doc\", \"Tiamat\"],\n      conversation: [\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_1.dialog_1.mary_say_1\")],\n          options: [],\n        },\n      ],\n    });\n  }\n\n  onInteractWith(el) {\n    super.onInteractWith(el);\n\n    if (el.isClass(Exit)) {\n      this.onComplete();\n    }\n\n    if (el.order === 99) {\n      this.showDialog3();\n    }\n\n    if (el.order === 0) {\n      this.playTheProphecy();\n    }\n  }\n\n  onAddElement(el) {\n    if (el.isClass(Player)) {\n      el.power = 1;\n      el.hasPickaxe = true;\n    }\n\n    if (el.isClass(Torch)) {\n      el.ignite();\n    }\n\n    if (el.isClass(Interactive) && el.order === 0) {\n      this.artSpot = el;\n    }\n    // interactive spots (excluding exit)\n    if (el.isClass(Interactive) && !el.isClass(Exit) && el.order !== 0) {\n      const isUpperHalf = el.position.y < this.config.length / 2;\n      if (isUpperHalf) {\n        this.reloadSpots.push(el);\n      } else {\n        this.batBirthSpots.push(el);\n      }\n    }\n  }\n\n  // Abushgidim loop\n  async bossLoop() {\n    if (this.boss.defeated) {\n      return true;\n    }\n    this.onNextTick((lvl) => lvl.bossLoop());\n    if (this.ticksCount < this.ticksCountForBossLoop) {\n      this.ticksCount++;\n      this.circularProgress.setValue(\n        this.ticksCount / this.ticksCountForBossLoop\n      );\n\n      return false;\n    } else {\n      this.ticksCount = 0;\n      this.circularProgress.reset();\n    }\n\n    // disconnect player\n    this.player.disconnect();\n\n    // pause enemies\n    this.pause();\n\n    // pan camera to boss\n    await this.scene.rules.panAndFollow({\n      x: UI.tileToScreen(this.boss.position.x),\n      y: UI.tileToScreen(this.boss.position.y),\n      width: 1,\n      height: 1,\n    });\n    // birth of bats\n    // await this.awaitTicks(3);\n    await this.boss.birthBats();\n\n    // repost\n    this.repost();\n\n    // pan camera to branches\n    // grow branches\n    await this.boss.growBranches();\n    // await new Promise((res) => setTimeout(res, TICK_TIME * 5));\n\n    // pan camera to player\n    await this.scene.rules.panAndFollow(this.player.alien);\n\n    if (!this.playerKilled) {\n      // reconnect player\n      this.player.reconnect();\n\n      // resume enemies\n      this.resume();\n    } else {\n      this.player.die();\n      setTimeout(() => {\n        // this.onCharacterDie(this.player);\n      }, 2000)\n    }\n  }\n\n  async bossDefeated() {\n    // FADE OUT DRAMATIC MUSIC\n    this.scene.tweens.add({\n      targets: this.battleMusic,\n      volume: 0,\n      ease: \"Linear\",\n      duration: 1000,\n    });\n\n    // DISCONNECT PLAYER\n    this.player.disconnect();\n\n    // MOVE DWARF AND SET INTERACTIVE SPOT\n    this.repositionDwarfToEndLevel();\n\n    // PAN CAMERA TO BOSS\n    await this.scene.rules.panAndFollow({\n      x: UI.tileToScreen(this.boss.position.x),\n      y: UI.tileToScreen(this.boss.position.y),\n      width: 1,\n      height: 1,\n    });\n\n    // THROW GREEN EXPLOSIONS RANDOMLY OVER BOSS BODY\n    const randomNegPosRange = (n) =>\n      Math.floor(Math.random() * n) * (Math.round(Math.random()) ? 1 : -1);\n    for (let i = 0; i < 20; i++) {\n      this.setTickTimeout(() => {\n        const exp = new GreenExplosion(\"GREEN_EXPLOSION\", this);\n        exp.setPosition({\n          x: this.boss.position.x + randomNegPosRange(3),\n          y: this.boss.position.y - 1 + randomNegPosRange(2),\n        });\n      }, i);\n    }\n\n    // BLINK BOSS\n    const group = this.scene.add.group({\n      classType: Phaser.GameObjects.Sprite,\n      defaultKey: null,\n      defaultFrame: null,\n      active: true,\n      maxSize: -1,\n      runChildUpdate: false,\n      createCallback: null,\n      removeCallback: null,\n      createMultipleCallback: null,\n    });\n\n    // FLASH BOSS AND DESTROY\n    group.addMultiple(this.boss.body);\n    await this.awaitTicks(10);\n    const flash = this.scene.plugins\n      .get(\"rexFlash\")\n      .add(group, { duration: TICK_TIME / 2, repeat: 20 });\n    flash.flash();\n    flash.once(\"complete\", () => {\n      group.clear();\n      this.boss.body.forEach((s) => {\n        this.scene.add\n          .sprite(s.x, s.y)\n          .setOrigin(0, 0.25)\n          .play(\"ground_disolves\");\n        s.destroy();\n      });\n    });\n\n    // QUAKE EFFECT\n    this.playEarthquake(\n      {\n        x1: this.boss.position.x,\n        x2: this.boss.position.x,\n        y1: this.boss.position.y,\n        y2: this.boss.position.y,\n      },\n      1\n    );\n\n    await this.awaitTicks(10);\n\n    // CLEAR PATH BENEATH BOSS\n    const condition = (el) => {\n      const destroyable =\n        el.isClass(CLASS_NAMES.BLOCK) ||\n        el.isClass(CLASS_NAMES.WOMB) ||\n        el.isClass(CLASS_NAMES.BOULDER);\n      return destroyable;\n    };\n    this.destroyObjectsInRange(\n      {\n        x1: this.boss.position.x - 4,\n        x2: this.boss.position.x + 4,\n        y1: this.boss.position.y - 6,\n        y2: this.boss.position.y + 2,\n      },\n      1,\n      condition\n    );\n\n    await this.awaitTicks(10);\n\n    // FADE IN MUSIC\n    this.scene.rules.music.play();\n    this.scene.tweens.add({\n      targets: this.scene.rules.music,\n      volume: 1,\n      ease: \"Linear\",\n      duration: 1000,\n    });\n\n    // PAN TO PLAYER\n    await this.scene.rules.panAndFollow(this.player.alien);\n\n    // RECONNECT PLAYER\n    this.player.reconnect();\n  }\n\n  repositionDwarfToEndLevel() {\n    this.teleportObject(this.leader, {\n      x: this.boss.position.x,\n      y: this.boss.position.y + 3,\n    });\n    this.leader.leadingPath = [\n      { x: this.leader.position.x, y: this.leader.position.y + 1 },\n      { x: this.leader.position.x, y: this.leader.position.y + 2 },\n      { x: this.leader.position.x, y: this.leader.position.y + 3 },\n      { x: this.leader.position.x, y: this.leader.position.y + 4 },\n      { x: this.leader.position.x, y: this.leader.position.y + 5 },\n      { x: this.leader.position.x, y: this.leader.position.y + 6 },\n      { x: this.leader.position.x, y: this.leader.position.y + 7 },\n      { x: this.leader.position.x, y: this.leader.position.y + 8 },\n      { x: this.leader.position.x, y: this.leader.position.y + 9 },\n      { x: this.leader.position.x, y: this.leader.position.y + 10 },\n      { x: this.leader.position.x + 1, y: this.leader.position.y + 10 },\n      { x: this.leader.position.x + 2, y: this.leader.position.y + 10 },\n      { x: this.leader.position.x + 3, y: this.leader.position.y + 10 },\n      { x: this.leader.position.x + 4, y: this.leader.position.y + 10 },\n      { x: this.leader.position.x + 5, y: this.leader.position.y + 10 },\n      { x: this.leader.position.x + 6, y: this.leader.position.y + 10 },\n      { x: this.leader.position.x + 7, y: this.leader.position.y + 10 },\n      { x: this.leader.position.x + 8, y: this.leader.position.y + 10 },\n      { x: this.leader.position.x + 9, y: this.leader.position.y + 10 },\n      { x: this.leader.position.x + 10, y: this.leader.position.y + 10 },\n      { x: this.leader.position.x + 11, y: this.leader.position.y + 10 },\n      { x: this.leader.position.x + 12, y: this.leader.position.y + 10 },\n    ];\n    const intElement = new Interactive(PIXEL_NAME.INTERACTION, this);\n    intElement.order = 99;\n    // intElement.ephemeral = false;\n    this.interactiveElements[\n      `${this.exit.position.x - 4}-${this.exit.position.y}`\n    ] = intElement;\n    intElement.setPosition({\n      x: this.exit.position.x - 4,\n      y: this.exit.position.y,\n    });\n  }\n\n  destroy() {\n    super.destroy();\n\n    this.battleMusic.stop();\n\n    this.branchesEnergyBars?.branch1?.progressBar?.destroy();\n    this.branchesEnergyBars?.branch2?.progressBar?.destroy();\n    this.branchesEnergyBars?.branch3?.progressBar?.destroy();\n  }\n\n  async playTheProphecy() {\n    this.player.disconnect();\n\n    this.onNextTick(() => {\n      this.player.alien.play({ key: \"brave_run_up\", startFrame: 1 }, true);\n      this.player.alien.anims.currentAnim.pause();\n      this.leader.alien.play(\"dwarf_look_up\");\n    });\n\n    await this.awaitTicks(8);\n    this.leader.animIdle();\n    this.showDialog1();\n  }\n  onComplete() {\n    this.scene.events.off(\"levelcompleted\");\n    super.onComplete();\n    this.scene.navigateToScene(\"KiStageCompleted\");\n  }\n}\n\nLevelKiFinale.key = \"level_ki_finale\";\nexport default LevelKiFinale;\n","import LevelBase from './levelBase'\nimport { Interactive, Exit, Jewel } from '../objects'\n// import { PIXEL_TO_TILEMAP_POSITION, PIXEL_NAME } from '../../utils/constants'\nimport { translate } from '../../utils/localization'\nimport { SCALE } from '../../utils/constants'\nimport UI from '../UI'\n\nclass Level2 extends LevelBase {\n  constructor() {\n    super()\n    this.name = 'The wise move'\n  }\n\n  get id() {\n    return this.constructor.key\n  }\n\n  async connectToScene(scene) {\n    await super.connectToScene(scene)\n    \n    if(this.unfinished) {\n      scene.events.once('levelstart', () => this.showDialog1())\n    }\n\n    let light_beam = this.scene.add.image(\n      this.scene.cameras.main.width / 2,\n      this.scene.cameras.main.height / 2,\n      \"light_beam\"\n    );\n    light_beam.x = UI.tileToScreen(14);\n    light_beam.y = UI.tileToScreen(0);\n    light_beam.setOrigin(0, 0);\n    light_beam.setScale(SCALE * 2);\n    light_beam.scaleX = SCALE * 2.4;\n    light_beam.setScrollFactor(1);\n    light_beam.depth = 4.5;\n    light_beam.alpha = 0.5;\n\n    var particles = scene.add.particles(\"spark\").setScale(SCALE);\n    var emitter = particles.createEmitter();\n    emitter.setPosition(\n      { min: UI.tileToPixels(17), max: UI.tileToPixels(28) },\n      { min: UI.tileToPixels(0), max: UI.tileToPixels(15) }\n    );\n    emitter.setQuantity(5);\n    emitter.setFrequency(20000);\n    emitter.setAngle({ min: 0, max: 360 });\n    emitter.setSpeed(5);\n    emitter.setGravityY(0.1);\n    emitter.setGravityX(0);\n    emitter.setLifespan({ min: 10000, max: 50000 });\n    emitter.alpha.onChange(0.5);\n  }\n\n  showDialog1() {\n    this.scene.events.emit('dialogue:show', {\n      participants: ['closeUp_Mary'],\n      participantNames: ['Mary'],\n      conversation: [\n        {\n          who: 'closeUp_Mary',\n          text: [\n            translate('level_2.dialog_1.mary_say_1')\n          ],\n          options: []\n        },\n      ]\n    })\n  }\n  showDialog2() {\n    this.scene.events.emit('dialogue:show', {\n      participants: ['closeUp_Mary'],\n      participantNames: ['Mary'],\n      conversation: [\n        {\n          who: 'closeUp_Mary',\n          text: [\n            translate('level_2.dialog_2.mary_say_1')\n          ],\n          options: []\n        },\n      ]\n    })\n  }\n\n  onInteractWith(el) {\n    super.onInteractWith(el)\n    \n    if(el.isClass(Exit)) {\n      this.onComplete()\n    }\n  }\n  onJewelPick(el) {\n    super.onJewelPick(el)\n    if(el.isClass(Jewel) && this.collectedDiamonds === 1 && this.unfinished) {\n      this.showDialog2()\n    }\n  }\n}\n\nLevel2.key = 'level_2'\nexport default Level2\n","import LevelBase from \"./levelBase\";\nimport { Enemy, Exit } from \"../objects\";\nimport { Interactive } from \"../objects\";\nimport { translate } from \"../../utils/localization\";\nimport {\n  PIXEL_NAME,\n  PIXEL_TO_TILEMAP_POSITION,\n  SCALE,\n} from \"../../utils/constants\";\nimport UI from \"../UI\";\n\nclass Level3 extends LevelBase {\n  constructor() {\n    super();\n    this.name = \"The tower\";\n    this.diamondsGoal = 0;\n  }\n\n  get id() {\n    return this.constructor.key;\n  }\n\n  async connectToScene(scene) {\n    await super.connectToScene(scene)\n\n    let light_beam = this.scene.add.image(\n      this.scene.cameras.main.width / 2,\n      this.scene.cameras.main.height / 2,\n      \"light_beam\"\n    );\n    light_beam.x = UI.tileToScreen(20.5);\n    light_beam.y = UI.tileToScreen(10);\n    light_beam.setOrigin(0, 0);\n    light_beam.setScale(SCALE * 2);\n    light_beam.scaleX = SCALE;\n    light_beam.setScrollFactor(1);\n    light_beam.depth = 4.5;\n    light_beam.alpha = 0.5;\n\n    let particles = scene.add.particles(\"spark\").setScale(SCALE);\n    let emitter = particles.createEmitter();\n    emitter.setPosition(\n      { min: UI.tileToPixels(21), max: UI.tileToPixels(26) },\n      { min: UI.tileToPixels(9), max: UI.tileToPixels(24) }\n    );\n    emitter.setQuantity(5);\n    emitter.setFrequency(20000);\n    emitter.setAngle({ min: 0, max: 360 });\n    emitter.setSpeed(5);\n    emitter.setGravityY(0.1);\n    emitter.setGravityX(0);\n    emitter.setLifespan({ min: 10000, max: 50000 });\n    emitter.alpha.onChange(0.5);\n\n    // beam 2\n    light_beam = this.scene.add.image(\n      this.scene.cameras.main.width / 2,\n      this.scene.cameras.main.height / 2,\n      \"light_beam\"\n    );\n    light_beam.x = UI.tileToScreen(12.5);\n    light_beam.y = UI.tileToScreen(31);\n    light_beam.setOrigin(0, 0);\n    light_beam.setScale(SCALE * 2);\n    light_beam.scaleX = SCALE * 2.25;\n    light_beam.setScrollFactor(1);\n    light_beam.depth = 4.5;\n    light_beam.alpha = 0.5;\n\n    particles = scene.add.particles(\"spark\").setScale(SCALE);\n    emitter = particles.createEmitter();\n    emitter.setPosition(\n      { min: UI.tileToPixels(15), max: UI.tileToPixels(26) },\n      { min: UI.tileToPixels(29), max: UI.tileToPixels(44) }\n    );\n    emitter.setQuantity(5);\n    emitter.setFrequency(20000);\n    emitter.setAngle({ min: 0, max: 360 });\n    emitter.setSpeed(5);\n    emitter.setGravityY(0.1);\n    emitter.setGravityX(0);\n    emitter.setLifespan({ min: 10000, max: 50000 });\n    emitter.alpha.onChange(0.5);\n  }\n\n  onInteractWith(el) {\n    super.onInteractWith(el);\n    if (el.isClass(Exit)) {\n      this.onComplete();\n    }\n    if (el.isClass(Interactive) && [1, 2].includes(el.order) && this.unfinished) {\n      this.showDialog1()\n      // ================================\n      // removes usless interactive spots\n      // ================================\n      Object.keys(this.interactiveElements).forEach((k) => {\n        // removes if is not the exit\n        const spot = this.interactiveElements[k]\n        if (spot && !spot.isClass(Exit) && spot.order <= 2) {\n          this.interactiveElements[k] = null;\n        }\n      });\n    }\n    if (el.isClass(Interactive) && el.order === 3) {\n      const layer = this.scene.children.getByName(\"layer_1\");\n      const { tilemap: map } = layer;\n      this.player.power = 1;\n      this.player.hasPickaxe = true;\n      map.putTileAt(\n        PIXEL_TO_TILEMAP_POSITION[PIXEL_NAME.EMPTY],\n        el.position.x,\n        el.position.y,\n        false,\n        \"layer_1\"\n      );\n      el.alien.destroy();\n\n      if(this.unfinished) {\n        this.showDialog4();\n      }\n    }\n  }\n\n  showDialog1() {\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Mary\"],\n      participantNames: ['Mary'],\n      conversation: [\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_3.dialog_1.mary_say_1\")],\n          options: [],\n        },\n      ],\n    });\n  }\n  \n  showDialog4() {\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Mary\"],\n      participantNames: ['Mary'],\n      conversation: [\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_3.dialog_4.mary_say_1\")],\n        },\n      ],\n    });\n  }\n\n  onAddElement(el) {\n\n    // add pickaxe\n    if (el.isClass(Interactive) && el.order === 3) {\n      const layer = this.scene.children.getByName(\"layer_1\");\n      const { tilemap: map } = layer;\n      const pickaxe = this.scene.add\n        .sprite(48, 16)\n        .setOrigin(0, 0.25)\n        .play(\"pickaxe_idle\");\n      pickaxe.setScale(layer.scaleX);\n      pickaxe.x = map.tileToWorldX(el.position.x);\n      pickaxe.y = map.tileToWorldY(el.position.y);\n\n      el.alien = pickaxe;\n    }\n\n\n    if (el.isClass(Enemy)) {\n      // make second enemy to run ACW so boulder can make it escape from blast\n      if (this.enemiesCount === 1) {\n        el.scanDirection = \"ACW\";\n      }\n    }\n\n  }\n  \n}\n\nLevel3.key = 'level_3'\nexport default Level3;\n","import LevelBase from \"./levelBase\";\nimport { Enemy, Exit, Player } from \"../objects\";\nimport { Interactive } from \"../objects\";\nimport { translate } from \"../../utils/localization\";\n\nclass Level4 extends LevelBase {\n  constructor() {\n    super();\n    this.name = \"The round\";\n    this.enemiesCount = 0;\n    // countdown to trigger dialog after n moves after the quake\n    this.countDownAfterQuakeUntilMessage = null;\n\n    // this.onPlayerMoves.bind(this)\n  }\n\n  get id() {\n    return this.constructor.key;\n  }\n\n  async onInteractWith(el) {\n    super.onInteractWith(el);\n\n    // earthquake triggers\n    if ([0, 1, 2, 3, 4, 5, 6, 7].includes(el.order)) {\n      this.player.disconnect();\n      await this.playEarthquake(\n        {\n          x1: el.position.x - 9,\n          x2: el.position.x + 9,\n          y1: el.position.y - 6,\n          y2: el.position.y + 6,\n        },\n        1\n      );\n\n      if (this.unfinished) {\n        this.countDownAfterQuakeUntilMessage = 4;\n        this.scene.events.addListener(\"player_moves\", this.onPlayerMoves, this);\n      }\n      this.player.reconnect();\n    }\n\n    if (el.isClass(Exit)) {\n      this.onComplete();\n    }\n  }\n  onPlayerMoves() {\n    if (this.countDownAfterQuakeUntilMessage !== null) {\n      this.countDownAfterQuakeUntilMessage--;\n      if (this.countDownAfterQuakeUntilMessage === 0) {\n        this.showDialog1();\n\n        this.scene.events.removeListener(\"player_moves\", this.onPlayerMove);\n      }\n    }\n  }\n\n  showDialog1() {\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Mary\"],\n      participantNames: [\"Mary\"],\n      conversation: [\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_4.dialog_1.mary_say_1\")],\n        },\n      ],\n    });\n  }\n  onAddElement(el) {\n    if (el.isClass(Player)) {\n      el.power = 1;\n      el.hasPickaxe = true;\n    }\n\n    if (el.isClass(Enemy)) {\n      this.enemiesCount++;\n      // make second enemy to run ACW so boulder can make it escape from blast\n      if (this.enemiesCount % 2 === 0) {\n        el.scanDirection = \"ACW\";\n      }\n    }\n  }\n}\n\nLevel4.key = \"level_4\";\nexport default Level4;\n","import Phaser from \"phaser\";\nimport LevelBase from \"./levelBase\";\nimport { Enemy, NPCharacter, Player } from \"../objects\";\nimport { Interactive } from \"../objects\";\nimport { translate } from \"../../utils/localization\";\n\nclass Level5 extends LevelBase {\n  constructor() {\n    super();\n    this.name = \"The encounter\";\n    this.enemiesDeadCount = 0;\n  }\n\n  get id() {\n    return this.constructor.key\n  }\n\n  async connectToScene(scene) {\n    await super.connectToScene(scene);\n    \n    // removes dwarf if level was finished in the past\n    if (!this.unfinished) {\n      this.leader.alien.alpha = 0\n      this.replaceByEmpty(this.leader)\n    }\n  }\n  destroy() {\n    // this.scene.events.off('update', this.updateLight.bind(this))\n  }\n\n  updateLight() {\n    const layer = this.scene.children.getByName(\"layer_1\");\n    if (!layer) {\n      return true;\n    }\n    const map = layer.tilemap;\n    let origin = this.player.position;\n    this.moveables.forEach((el) => {\n      var dist = Phaser.Math.Distance.Snake(\n        origin.x,\n        origin.y,\n        el.position.x,\n        el.position.y\n      );\n\n      el.alien?.setAlpha(1 - 0.1 * dist);\n    });\n    map.forEachTile((tile) => {\n      var dist = Phaser.Math.Distance.Snake(origin.x, origin.y, tile.x, tile.y);\n\n      tile.setAlpha(1 - 0.1 * dist);\n    });\n  }\n\n  onInteractWith(el) {\n    if (el.order === 0) {\n      this.onComplete();\n    }\n  }\n  onAddElement(el) {\n    if (el.isClass(Player)) {\n      el.power = 1;\n      el.hasPickaxe = true;\n    }\n    if (el.isClass(NPCharacter)) {\n      el.leadingPath = [\n        { x: 8, y: 36 },\n        { x: 9, y: 36 },\n        { x: 10, y: 36 },\n        { x: 11, y: 36 },\n        { x: 11, y: 37 },\n        { x: 11, y: 38 },\n        { x: 11, y: 39 },\n        { x: 11, y: 40 },\n        { x: 12, y: 40 },\n        { x: 13, y: 40 },\n        { x: 14, y: 40 },\n        { x: 14, y: 39 },\n        { x: 14, y: 38 },\n        { x: 15, y: 38 },\n        { x: 16, y: 38 },\n        { x: 17, y: 38 },\n        { x: 18, y: 38 },\n        { x: 19, y: 38 },\n        { x: 20, y: 38 },\n        { x: 21, y: 38 },\n        { x: 22, y: 38 },\n        { x: 23, y: 38 },\n        { x: 24, y: 38 },\n        { x: 25, y: 38 },\n        { x: 26, y: 38 },\n        { x: 27, y: 38 },\n        { x: 28, y: 38 },\n        { x: 29, y: 38 },\n        { x: 30, y: 38 },\n      ];\n      el.isCloseEnough = () => this.dwarfRun;\n    }\n  }\n\n  onCharacterDie(el) {\n    super.onCharacterDie(el);\n    if (el.isClass(Enemy)) {\n      this.enemiesDeadCount++;\n\n      if (this.enemiesDeadCount === 1 && this.unfinished) {\n        // disconnect user\n        this.player.disconnect();\n      }\n      if (this.enemiesDeadCount === 2 && this.unfinished) {\n        // after killing the second enemy\n        this.encounter();\n      }\n    }\n  }\n\n  encounter() {\n    // move npc\n    this.dwarfRun = true;\n    this.onNextTick(this.moveDwarf.bind(this));\n    // show dialog\n  }\n\n  moveDwarf() {\n    // hack to auto move dwarf until pos x is 10\n    if (this.dwarfRun) {\n      if (this.leader.position.x < 11) {\n        this.leader.onPlayerMoves(this.player.position);\n        this.onNextTick(this.moveDwarf.bind(this));\n      } else {\n        if (!this.leader.alien.anims.currentAnim.key.includes(\"idle\")) {\n          this.leader?.animIdle();\n        }\n        this.player.reconnect();\n        this.showDialog1();\n      }\n    }\n  }\n\n  showDialog1() {\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Dwarf\", \"closeUp_Mary\"],\n      participantNames: [\"???\", \"Mary\"],\n      conversation: [\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_5.dialog_1.mary_say_1\")],\n        },\n        {\n          who: \"closeUp_Dwarf\",\n          text: [translate(\"level_5.dialog_1.dwarf_say_1\")],\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_5.dialog_1.mary_say_2\")],\n        },\n        {\n          who: \"closeUp_Dwarf\",\n          text: [translate(\"level_5.dialog_1.dwarf_say_2\")],\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_5.dialog_1.mary_say_3\")],\n        },\n      ],\n    });\n  }\n}\n\nLevel5.key = \"level_5\";\nexport default Level5;\n","import { PIXEL_NAME, TICK_TIME } from \"../../utils/constants\";\nimport { Interactive } from \"../objects\";\nimport UI from \"../UI\";\nimport LevelBase from \"./levelBase\";\nimport { translate } from \"../../utils/localization\";\nimport template from \"lodash.template\";\n\nclass levelGoalKit extends LevelBase {\n  constructor() {\n    super()\n\n    this.goalCheckPoint = null\n  }\n\n  async connectToScene(scene) {\n    await super.connectToScene(scene);\n\n    this.destroyBlock = () => null;\n    if(this.unfinished) {\n\n      // Adds interactive tile before the dwarf before the angel before the exit :P\n      const intElement = new Interactive(PIXEL_NAME.INTERACTION, this);\n      intElement.order = 99;\n      intElement.ephemeral = false;\n      const x = this.exit.position.x - 4\n      const y = this.exit.position.y\n      this.interactiveElements[`${x}-${y}`] = intElement;\n      intElement.setPosition({ x, y });\n      this.goalCheckPoint = intElement\n      console.log(this.goalCheckPoint);\n      // --\n    } else {\n      // ============\n      // removes NPCs\n      // ============\n      this.follower?.alien?.destroy();\n      this.follower = null;\n      this.replaceByEmpty(this.leader);\n      this.leader.alien.destroy();\n      this.leader = null;\n    }\n  }\n\n  onInteractWith(el ){\n    super.onInteractWith(el)\n\n    if (el === this.goalCheckPoint && this.unfinished) {\n      if(this.leader.position.x !== this.goalCheckPoint.position.x + 1) {\n        this.showDialogAngel();\n      } else if (this.collectedDiamonds < this.diamondsGoal) {\n        this.showDialogGoal();\n      } else {\n        this.moveToExit()\n        this.interactiveElements[`${el.position.x}-${el.position.y}`] = null\n      }\n    }\n  }\n\n  showDialogAngel() {\n\n  }\n  showDialogGoal() {\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Mary\", \"closeUp_Dwarf\"],\n      participantNames: [\"Mary\", \"Doc\"],\n      conversation: [\n        {\n          who: \"closeUp_Dwarf\",\n          text: [\n            template(translate(\"levels.goal_dialog.dwarf_say_1\"))({\n              GOAL: this.diamondsGoal,\n              NUM: this.collectedDiamonds,\n            }),\n          ],\n        },\n      ],\n    });\n  }\n\n  async moveToExit() {\n    this.player.disconnect();\n    this.dwarfRun = true;\n    this.leader.leadingPath = [\n      { x: this.leader.position.x + 1, y: this.leader.position.y },\n      { x: this.leader.position.x + 1, y: this.leader.position.y },\n      { x: this.leader.position.x + 2, y: this.leader.position.y },\n      { x: this.leader.position.x + 2, y: this.leader.position.y },\n      { x: this.leader.position.x + 3, y: this.leader.position.y },\n      { x: this.leader.position.x + 3, y: this.leader.position.y },\n    ];\n    this.moveDwarfToExit();\n\n    // anim angel dismiss\n    this.scene.tweens.add({\n      targets: this.exit.block.alien,\n      x: UI.tileToScreen(this.exit.position.x),\n      duration: TICK_TIME * 2,\n      onComplete: async () => {\n        super.destroyBlock()\n        // auto pilot off\n        await this.awaitTicks(8)\n        this.player.reconnect();\n      },\n    });\n  }\n\n  moveDwarfToExit() {\n    // hack to auto move dwarf\n    if (this.dwarfRun) {\n      if (this.leader.leadingPath.length !== 0) {\n        this.onNextTick(() => {\n          this.leader.onPlayerMoves(this.leader.position);\n          this.moveDwarfToExit();\n        });\n      } else {\n        this.dwarfRun = false;\n        this.replaceByEmpty(this.leader);\n        this.leader = null;\n      }\n    }\n  }\n}\nexport default levelGoalKit;","import { Exit, NPCharacter, Player } from \"../objects\";\nimport { translate } from \"../../utils/localization\";\nimport template from \"lodash.template\";\nimport levelGoalKit from \"./levelGoalKit\";\n\nclass Level6 extends levelGoalKit {\n  constructor() {\n    super();\n    this.name = \"The deal\";\n    this.diamondsGoal = 10;\n    this.dwarfRun = false;\n    this.preventDisplayDiamondsGoalAmount = true;\n    this.diamondIdTriggerDwarfMove = 4;\n    this.exit = null;\n  }\n\n  get id() {\n    return this.constructor.key\n  }\n\n  async connectToScene(scene) {\n    await super.connectToScene(scene);\n\n    if (this.unfinished) {\n      this.goalCheckPoint.ephemeral = true\n\n      // set up Dwarf teleport trigger\n      const listenPostitionForDwarfTeleport = nextPos => {\n        if(nextPos.x < 4 && nextPos.y > 17) {\n          const nextPos = { x: this.exit.position.x - 3, y: this.exit.position.y };\n    \n          // teleport dwarf\n          this.teleportObject(this.leader, nextPos)\n          console.log('TELEPORT');\n          // -----\n    \n          // adjust interactive tile to talk about angel once or about jewels each time player steps on\n          if (\n            !this.interactiveElements[\n              `${this.goalCheckPoint.position.x}-${this.goalCheckPoint.position.y}`\n            ]\n          ) {\n            // restore erased interactive tile\n            this.goalCheckPoint.ephemeral = false;\n            this.interactiveElements[\n              `${this.goalCheckPoint.position.x}-${this.goalCheckPoint.position.y}`\n            ] = this.goalCheckPoint;\n          } else {\n            // make it permanent\n            this.goalCheckPoint.ephemeral = false;\n          }\n\n        } else {\n          this.scene.events.once(\"player_moves\", nextPos => listenPostitionForDwarfTeleport(nextPos))\n        }\n      }\n      \n      this.scene.events.once(\"player_moves\", nextPos => listenPostitionForDwarfTeleport(nextPos))\n    }\n  }\n\n  onInteractWith(el) {\n    super.onInteractWith(el);\n    // talk to Doc\n    if (el.order === 0 && this.unfinished) {\n      this.showDialog1();\n    }\n    if (el.isClass(Exit)) {\n      this.onComplete();\n    }\n  }\n\n  onAddElement(el) {\n    if (el.isClass(Player)) {\n      el.power = 1;\n      el.hasPickaxe = true;\n    }\n\n    if (el.isClass(Exit)) {\n      this.exit = el;\n    }\n\n    if (el.isClass(NPCharacter)) {\n      el.leadingPath = [\n        // 10, 8\n        { x: 10, y: 9 },\n        { x: 11, y: 9 },\n        { x: 12, y: 9 },\n        { x: 12, y: 10 },\n        { x: 12, y: 10 },\n        { x: 12, y: 10 },\n        { x: 13, y: 11 },\n        { x: 13, y: 11 },\n        { x: 13, y: 11 },\n        { x: 14, y: 12 },\n        { x: 15, y: 12 },\n        { x: 16, y: 12 },\n        { x: 17, y: 12 },\n        { x: 18, y: 12 },\n        { x: 18, y: 11 },\n        { x: 19, y: 11 },\n        { x: 20, y: 11 },\n        { x: 21, y: 11 },\n        { x: 22, y: 11 },\n        { x: 23, y: 11 },\n        { x: 24, y: 11 },\n        { x: 25, y: 11 },\n        { x: 26, y: 11 },\n        { x: 27, y: 11 },\n        { x: 28, y: 11 },\n        { x: 29, y: 11 },\n        { x: 30, y: 11 },\n      ];\n      el.isCloseEnough = () => this.dwarfRun;\n    }\n  }\n\n  showDialog1() {\n    this.scene.events.once(\"dialogue:hidden\", () => {\n      // this.scene.events.emit(\"score:diamond_goal_set\", this.diamondsGoal);\n    });\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Dwarf\", \"closeUp_Mary\"],\n      participantNames: [\"???\", \"Mary\"],\n      conversation: [\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_6.dialog_1.mary_say_1\")],\n        },\n        {\n          who: \"closeUp_Dwarf\",\n          text: [translate(\"level_6.dialog_1.dwarf_say_1\")],\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_6.dialog_1.mary_say_2\")],\n        },\n        {\n          who: \"closeUp_Dwarf\",\n          text: [translate(\"level_6.dialog_1.dwarf_say_2\")],\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_6.dialog_1.mary_say_3\")],\n        },\n        {\n          who: \"closeUp_Dwarf\",\n          text: [translate(\"level_6.dialog_1.dwarf_say_3\")],\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_6.dialog_1.mary_say_4\")],\n        },\n        {\n          who: \"closeUp_Dwarf\",\n          text: [translate(\"level_6.dialog_1.dwarf_say_4\")],\n        },\n        {\n          who: \"closeUp_Dwarf\",\n          text: [translate(\"level_6.dialog_1.dwarf_say_5\")],\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_6.dialog_1.mary_say_5\")],\n        },\n      ],\n    });\n\n    this.scene.events.once(\"dialogue:hidden\", () => {\n      this.player.disconnect();\n      this.dwarfRun = true;\n      this.moveDwarf();\n    });\n  }\n  showDialogAngel() {\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Mary\"],\n      participantNames: [\"Mary\"],\n      conversation: [\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_6.dialog_2.mary_say_1\")],\n        },\n      ],\n    });\n  }\n  moveToExit() {\n    this.scene.events.on(\"dialogue:message_shown\", (pageId) => {\n      if (pageId === 2) {\n        this.scene.events.emit(\"dialogue:updateCharacterName\", {\n          key: \"closeUp_Dwarf\",\n          name: \"Doc\",\n        });\n      }\n    });\n    this.scene.events.once(\"dialogue:hidden\", () => {\n      super.moveToExit();\n    });\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Mary\", \"closeUp_Dwarf\"],\n      participantNames: [\"Mary\", \"???\"],\n      conversation: [\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_6.dialog_3.mary_say_1\")],\n        },\n        {\n          who: \"closeUp_Dwarf\",\n          text: [translate(\"level_6.dialog_3.dwarf_say_1\")],\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_6.dialog_3.mary_say_2\")],\n        },\n        {\n          who: \"closeUp_Dwarf\",\n          text: [translate(\"level_6.dialog_3.dwarf_say_2\")],\n        },\n      ],\n    });\n  }\n\n  showDialogGoal() {\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Mary\", \"closeUp_Dwarf\"],\n      participantNames: [\"Mary\", \"???\"],\n      conversation: [\n        {\n          who: \"closeUp_Dwarf\",\n          text: [\n            template(translate(\"levels.goal_dialog.dwarf_say_1\"))({\n              GOAL: this.diamondsGoal,\n              NUM: this.collectedDiamonds,\n            }),\n          ],\n        },\n      ],\n    });\n  }\n\n  moveDwarf() {\n    // hack to auto move dwarf until pos x is 10\n    if (this.dwarfRun) {\n      if (this.leader.position.x < 16) {\n        this.leader.onPlayerMoves(this.player.position);\n        this.onNextTick(() => {\n          this.leader.animIdle();\n          this.moveDwarf();\n        });\n      } else {\n        this.leader.animIdle();\n        // auto pilot off\n        this.player.reconnect();\n        setTimeout(() => this.scene.events.emit(\"score:diamond_goal_set\", this.diamondsGoal), 1000);\n\n        // listen for player move until dwarf reach last position of path, then\n        // remove fix of dwarfRun and remove listener\n        const onPlayerMove = (() => {\n          if (this.leader.position.x >= 30) {\n            this.dwarfRun = false;\n            this.scene.events.removeListener(\"player_moves\", onPlayerMove);\n          }\n        }).bind(this);\n        this.scene.events.addListener(\"player_moves\", onPlayerMove);\n      }\n    }\n  }\n\n  moveDwarfToExit() {\n    // hack to auto move dwarf until pos x is 10\n    if (this.dwarfRun) {\n      if (this.leader.position.x < this.exit.position.x) {\n        this.onNextTick(() => {\n          this.leader.onPlayerMoves(this.player.position);\n          this.moveDwarfToExit();\n        });\n      } else {\n        this.leader.animIdle();\n        // auto pilot off\n        this.player.reconnect();\n      }\n    }\n  }\n}\n\nLevel6.key = \"level_6\";\nexport default Level6;\n","import { Exit, Player } from \"../objects\";\nimport levelGoalKit from \"./levelGoalKit\";\n\nclass Level7 extends levelGoalKit {\n  constructor() {\n    super();\n    this.name = \"The dangerous chambers\";\n    this.diamondsGoal = 12;\n  }\n\n  get id() {\n    return this.constructor.key;\n  }\n\n  async onInteractWith(el) {\n    super.onInteractWith(el);\n\n    // earthquake triggers\n    if (el !== this.goalCheckPoint && !el.isClass(Exit)) {\n      this.player.disconnect();\n      await this.playEarthquake(\n        {\n          x1: el.position.x - 3,\n          x2: el.position.x + 5,\n          y1: el.position.y - 10,\n          y2: el.position.y,\n        },\n        2\n      );\n      this.player.reconnect();\n    }\n    if (el.isClass(Exit)) {\n      this.onComplete();\n    }\n  }\n\n  onAddElement(el) {\n    if (el.isClass(Player)) {\n      el.power = 1;\n      el.hasPickaxe = true;\n    }\n  }\n}\n\nLevel7.key = \"level_7\";\nexport default Level7;\n","import LevelBase from \"./levelBase\";\nimport { Empty, Exit, Interactive, NPCharacter, Player } from \"../objects\";\nimport { translate } from \"../../utils/localization\";\nimport UI from \"../UI\";\nimport { PIXEL_NAME, SCALE, TICK_TIME } from \"../../utils/constants\";\nimport template from 'lodash.template'\nimport dbManager from \"../../utils/dbManager\";\n\nclass Level8 extends LevelBase {\n  constructor() {\n    super();\n    this.name = \"The Sisyphean task\";\n    this.diamondsGoal = 40;\n    this.dwarf = null;\n    this.broSprite = null;\n    this.grayscalePipeline = null;\n    this.tripMusic = null\n    this.firstVisit = true\n    this.tookTheTrip = false\n  }\n\n  get id() {\n    return this.constructor.key\n  }\n\n  async connectToScene(scene) {\n    await super.connectToScene(scene);\n\n    this.tookTheTrip = await dbManager.get('tripDone') || false\n\n    if(!this.tookTheTrip) {\n      this.broSprite = this.scene.add.sprite(48, 16).setOrigin(0, 0.25);\n      this.broSprite.setScale(SCALE);\n      this.broSprite.play(\"bro_idle\");\n      this.broSprite.x = this.dwarf.alien.x + UI.tileToScreen(12);\n      this.broSprite.y = this.dwarf.alien.y;\n  \n      this.grayscalePipeline = this.scene.renderer.pipelines.get(\"Gray\");\n      this.player.alien.setPipeline(this.grayscalePipeline);\n  \n      this.tripMusic = this.scene.sound.add('swarf_chat_music', { loop: true, valume: 0 })\n    } else {\n      // ===================\n      // removes NPC (dwarf)\n      // ===================\n      this.replaceByEmpty(this.leader);\n      this.leader.alien.destroy();\n      this.leader = null;\n      // ================================\n      // removes usless interactive spots\n      // ================================\n      Object.keys(this.interactiveElements).forEach(\n        (k) => {\n          // removes if is not the exit\n          if(!this.interactiveElements[k].isClass(Exit)) {\n            this.interactiveElements[k] = null\n          }\n        }\n      );\n    }\n  }\n\n  async onComplete() {\n    await dbManager.set('tripDone', this.tookTheTrip)\n    super.onComplete()\n  }\n\n  onInteractWith(el) {\n    super.onInteractWith(el);\n    // talk to Doc\n    if (el.order === 0) {\n      if(this.firstVisit) {\n        if(this.totalShroomsAmount > 0) {\n          this.showDialog1()\n        } else {\n          this.showDialog1NoShroom()\n        }\n      } else {\n        this.showDialog1Revisit()\n      }\n      this.firstVisit = false\n    }\n    if (el.isClass(Exit)) {\n      this.onComplete();\n    }\n  }\n\n  onAddElement(el) {\n    if (el.isClass(Player)) {\n      el.power = 1;\n      el.hasPickaxe = true;\n    }\n\n    if(el.isClass(Interactive)) {\n      el.ephemeral = false\n    }\n\n    if (el.isClass(NPCharacter)) {\n      el.isCloseEnough = () => false;\n      this.dwarf = el;\n    }\n  }\n\n  showDialog1NoShroom() {\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Mary\", \"closeUp_Dwarf\"],\n      participantNames: [\"Mary\", \"Doc\"],\n      conversation: [\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_8.dialog_1_no_shrooms.mary_say_1\")],\n        },\n        {\n          who: \"closeUp_Dwarf\",\n          text: [translate(\"level_8.dialog_1_no_shrooms.dwarf_say_1\")],\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_8.dialog_1_no_shrooms.mary_say_2\")],\n        },\n        {\n          who: \"closeUp_Dwarf\",\n          text: [template(translate(\"level_8.dialog_1_no_shrooms.dwarf_say_2\"))({NUM: 5})],\n        },\n      ]\n    })\n  }\n  showDialog1Revisit() {\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Mary\", \"closeUp_Dwarf\"],\n      participantNames: [\"Mary\", \"Doc\"],\n      conversation: [\n        {\n          who: \"closeUp_Dwarf\",\n          text: [translate(\"level_8.dialog_1_repeat.dwarf_say_1\")],\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_8.dialog_1_repeat.mary_say_1\")],\n          options: {\n            slot0: {\n              label: translate(\"level_8.dialog_1_option.yes\"),\n              slot: 0,\n              onSelect: () => this.scene.events.emit(\"dialogue:nextPage\"),\n            },\n            slot1: {\n              label: translate(\"level_8.dialog_1_option.no\"),\n              slot: 1,\n              onSelect: () => this.scene.events.emit(\"dialogue:nextPage\", 1),\n            },\n            slot2: null,\n            slot3: null,\n          }\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_8.dialog_1_repeat.mary_say_2_yes\")],\n          options: {\n            slot2: null, // hide default NEXT option\n            slot3: {\n              label: translate(\"menu.dialog_options.close\"),\n              slot: 3,\n              onSelect: () => {\n                this.scene.events.emit(\"dialogue:hide\");\n                this.scene.events.once(\"dialogue:hidden\", () => {\n                  this.playTheTrip();\n                  this.scene.events.emit(\"score:mushroom_given\")\n                  this.collectedShrooms--\n                  // flag trip done in current level.\n                  // it will save in DB after level completes.\n                  this.tookTheTrip = true\n                });\n              },\n            },\n          },\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_8.dialog_1_repeat.mary_say_2_no\")],\n        },\n      ]\n    })\n  }\n  showDialog1() {\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Mary\", \"closeUp_Dwarf\"],\n      participantNames: [\"Mary\", \"Doc\"],\n      conversation: [\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_8.dialog_1.mary_say_1\")],\n        },\n        {\n          who: \"closeUp_Dwarf\",\n          text: [translate(\"level_8.dialog_1.dwarf_say_1\")],\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_8.dialog_1.mary_say_2\")],\n          options: {\n            slot0: {\n              label: translate(\"level_8.dialog_1_option.yes\"),\n              slot: 0,\n              onSelect: () => this.scene.events.emit(\"dialogue:nextPage\"),\n            },\n            slot1: {\n              label: translate(\"level_8.dialog_1_option.no\"),\n              slot: 1,\n              onSelect: () => this.scene.events.emit(\"dialogue:nextPage\", 1),\n            },\n            slot2: null,\n            slot3: null,\n          },\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_8.dialog_1.mary_say_3_yes\")],\n          options: {\n            slot2: null, // hide default NEXT option\n            slot3: {\n              label: translate(\"menu.dialog_options.close\"),\n              slot: 3,\n              onSelect: () => {\n                this.scene.events.emit(\"dialogue:hide\");\n                this.scene.events.once(\"dialogue:hidden\", () => {\n                  this.playTheTrip();\n                  this.scene.events.emit(\"score:mushroom_given\")\n                  this.collectedShrooms--\n                  // flag trip done in current level.\n                  // it will save in DB after level completes.\n                  this.tookTheTrip = true\n                });\n              },\n            },\n          },\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_8.dialog_1.mary_say_3_no\")],\n        },\n      ],\n    });\n  }\n\n  showDialog2() {\n    return new Promise((res) => {\n      this.scene.events.emit(\"dialogue:show\", {\n        participants: [\"closeUp_Dwarf\", \"closeUp_Marduk\"],\n        participantNames: [\"Doc\", \"Marduk\"],\n        conversation: [\n          {\n            who: \"closeUp_Dwarf\",\n            text: [translate(\"level_8.dialog_2.dwarf_say_1\")],\n          },\n          {\n            who: \"closeUp_Marduk\",\n            text: [translate(\"level_8.dialog_2.marduk_say_1\")],\n          },\n          {\n            who: \"closeUp_Dwarf\",\n            text: [translate(\"level_8.dialog_2.dwarf_say_2\")],\n          },\n          {\n            who: \"closeUp_Marduk\",\n            text: [translate(\"level_8.dialog_2.marduk_say_2\")],\n          },\n          {\n            who: \"closeUp_Dwarf\",\n            text: [translate(\"level_8.dialog_2.dwarf_say_3\")],\n          },\n          {\n            who: \"closeUp_Marduk\",\n            text: [translate(\"level_8.dialog_2.marduk_say_3\")],\n          },\n          {\n            who: \"closeUp_Dwarf\",\n            text: [translate(\"level_8.dialog_2.dwarf_say_4\")],\n          },\n          {\n            who: \"closeUp_Dwarf\",\n            text: [translate(\"level_8.dialog_2.dwarf_say_5\")],\n          },\n          {\n            who: \"closeUp_Marduk\",\n            text: [translate(\"level_8.dialog_2.marduk_say_4\")],\n          },\n          {\n            who: \"closeUp_Dwarf\",\n            text: [translate(\"level_8.dialog_2.dwarf_say_6\")],\n          },\n          {\n            who: \"closeUp_Dwarf\",\n            text: [translate(\"level_8.dialog_2.dwarf_say_7\")],\n          },\n        ],\n      });\n\n      this.scene.events.once(\"dialogue:hidden\", () => {\n        setTimeout(res, 500);\n      });\n    });\n  }\n\n  showDialog3() {\n    return new Promise((res) => {\n      this.scene.events.emit(\"dialogue:show\", {\n        participants: [\"closeUp_Mary\", \"closeUp_Dwarf\"],\n        participantNames: [\"Mary\", \"Doc\"],\n        conversation: [\n          {\n            who: \"closeUp_Mary\",\n            text: [translate(\"level_8.dialog_3.mary_say_1\")],\n          },\n          {\n            who: \"closeUp_Dwarf\",\n            text: [translate(\"level_8.dialog_3.dwarf_say_1\")],\n          },\n          {\n            who: \"closeUp_Mary\",\n            text: [translate(\"level_8.dialog_3.mary_say_2\")],\n          },\n          {\n            who: \"closeUp_Dwarf\",\n            text: [translate(\"level_8.dialog_3.dwarf_say_2\")],\n          },\n        ],\n      });\n      this.scene.events.once(\"dialogue:hidden\", () => {\n        setTimeout(res, 500);\n      });\n    });\n  }\n\n  async playTheTrip() {\n    this.player.disconnect();\n    await this.animFadeOutLevel();\n    await this.moveCamera();\n    this.animPlayerAndDwarf();\n    await this.animBroEntrance();\n\n    await this.showDialog2();\n    await this.vanishBro();\n    await this.animDwarfMoveCloseToPlayer();\n    await this.showDialog3();\n\n    await this.vanishDwarf()\n\n    await this.animFadeInLevel()\n\n    this.restoreRegularGamePlay()\n  }\n  \n  async restoreRegularGamePlay() {\n    // remove interactive element\n    this.interactiveElements[`${this.player.position.x}-${this.player.position.y}`] = null\n    // remove dwarf presence in map\n    this.setObjectAt(\n      this.dwarf.position.x,\n      this.dwarf.position.y,\n      new Empty(PIXEL_NAME.EMPTY, this)\n    )\n\n    await this.scene.rules.panAndFollow(this.player.alien)\n    this.player.reconnect()\n  }\n\n  vanishDwarf() {\n    return new Promise((res) => {\n      // reposition player sprite\n      this.scene.tweens.add({\n        targets: this.player.alien,\n        x: this.player.alien.x + UI.tileToScreen(2),\n        duration: 3000,\n        ease: \"Linear\",\n        onComplete: () => {\n        },\n      });\n      // grayscale NPC\n      this.scene.tweens.add({\n        targets: [this.dwarf.alien],\n        duration: 3000,\n        alpha: 0,\n        x: this.dwarf.alien.x + UI.tileToScreen(2),\n        onComplete: res\n      })\n\n      // music transition\n      this.scene.tweens.add({\n        targets: this.scene.rules.music,\n        volume: 1,\n        delay: 1500,\n        ease: 'Linear',\n        duration: 1000,\n      });\n      \n      this.scene.tweens.add({\n        targets: this.tripMusic,\n        volume: 0,\n        ease: 'Linear',\n        duration: 1000,\n        onComplete: () => this.tripMusic.stop()\n      });\n    })\n  }\n\n  vanishBro() {\n    return new Promise((res) => {\n      this.scene.tweens.add({\n        targets: this.broSprite,\n        duration: 2000,\n        alpha: 0,\n        onComplete: res\n      });\n    });\n  }\n\n  async animBroEntrance() {\n    return new Promise((res) => {\n      // move bro\n      this.scene.tweens.add({\n        targets: this.broSprite,\n        x: this.broSprite.x - UI.tileToScreen(10),\n        duration: TICK_TIME * 10,\n        ease: \"Linear\",\n        delay: TICK_TIME * 10,\n        onComplete: () => {\n          this.player.animIdle();\n          this.dwarf.animIdle();\n          this.dwarf.animRunRight();\n          res();\n        },\n      });\n    });\n  }\n\n  animDwarfMoveCloseToPlayer() {\n    return new Promise((res) => {\n      this.dwarf.animRunLeft();\n      this.dwarf.animRun();\n\n      // move player left and play run right\n      this.scene.tweens.add({\n        targets: this.dwarf.alien,\n        x: this.dwarf.alien.x - UI.tileToScreen(1),\n        duration: TICK_TIME,\n        ease: \"Linear\",\n        onComplete: () => {\n          this.dwarf.animIdle();\n          this.dwarf.animRunRight();\n          // colorize player\n          this.scene.tweens.add({\n            targets: this.grayscalePipeline,\n            duration: 1000,\n            gray: 0,\n            completeDelay: 1000,\n            onComplete: res,\n          });\n        },\n      });\n    });\n  }\n\n  animPlayerAndDwarf() {\n    this.dwarf.animRunRight();\n    this.dwarf.animRun();\n\n    // move player left and play run right\n    this.scene.tweens.add({\n      targets: this.player.alien,\n      x: this.player.alien.x - UI.tileToScreen(2),\n      duration: TICK_TIME * 2,\n      ease: \"Linear\",\n      onComplete: () => {\n        this.player.animRun();\n      },\n    });\n  }\n\n  async moveCamera() {\n    // replace focus element (currently the player) for a position object relative to the dwarf\n    return this.scene.rules.panAndFollow({ x: this.dwarf.alien.x + 5, y: this.dwarf.alien.y, width: 1, height: 1 })\n  }\n\n  async animFadeInLevel() {\n    return new Promise((res) => {\n      this.scene.tweens.add({\n        targets: { alpha: 0 },\n        alpha: 1,\n        ease: \"Linear\",\n        duration: 2000,\n        onUpdate: (tween, target) => {\n          this.setLevelAlpha(target.alpha);\n        },\n        onComplete: res,\n      });\n    })\n  }\n  async animFadeOutLevel() {\n    return new Promise((res) => {\n      this.scene.tweens.add({\n        targets: this.grayscalePipeline,\n        delay: 1000,\n        duration: 1000,\n        gray: 1,\n      });\n      this.scene.tweens.add({\n        targets: { alpha: 1 },\n        alpha: 0,\n        ease: \"Linear\",\n        duration: 1000,\n        onUpdate: (tween, target) => {\n          this.setLevelAlpha(target.alpha);\n        },\n        onComplete: res,\n      });\n      // music transition\n      this.scene.tweens.add({\n        targets: this.scene.rules.music,\n        volume: 0,\n        ease: 'Linear',\n        duration: 1000,\n      });\n      this.tripMusic.volume = 0\n      this.tripMusic.play()\n      this.scene.tweens.add({\n        targets: this.tripMusic,\n        volume: 1,\n        delay: 500,\n        ease: 'Linear',\n        duration: 1000,\n      });\n    });\n  }\n\n  setLevelAlpha(value) {\n    const layer_1 = this.scene.children.getByName(\"layer_1\");\n    const layer_1z2 = this.scene.children.getByName(\"layer_1z2\");\n    const layer_2 = this.scene.children.getByName(\"layer_2\");\n    const layer_0 = this.scene.children.getByName(\"layer_0\");\n    const level_background_art = this.scene.children.getByName(\n      \"level_background_art\"\n    );\n    layer_1.setAlpha(value);\n    layer_1z2.setAlpha(value);\n    layer_2.setAlpha(value);\n    layer_0.setAlpha(value);\n    level_background_art.setAlpha(value / 4);\n    this.objects.forEach((row) =>\n      row.forEach((el) => {\n        if (el.alien && !el.isClass(Player) && !el.isClass(NPCharacter)) {\n          el.alien.setAlpha(value);\n        }\n      })\n    );\n    Object.values(this.decorationElements).forEach((el) =>\n      el.alien.setAlpha(value)\n    );\n  }\n\n}\n\nLevel8.key = \"level_8\";\nexport default Level8;\n","import { Exit, Player } from \"../objects\";\nimport levelGoalKit from \"./levelGoalKit\";\n\nclass Level9 extends levelGoalKit {\n  constructor() {\n    super();\n    this.name = \"The floodgates\";\n    this.diamondsGoal = 10;\n    // this.dwarfRun = false\n  }\n\n  get id() {\n    return this.constructor.key\n  }\n\n  onInteractWith(el) {\n    super.onInteractWith(el)\n    \n    if (el.isClass(Exit)) {\n      this.onComplete();\n    }\n  }\n\n  onAddElement(el) {\n    if (el.isClass(Player)) {\n      el.power = 1;\n      el.hasPickaxe = true;\n    }\n\n  }\n\n}\n\nLevel9.key = 'level_9'\nexport default Level9;\n","import LevelBase from \"./levelBase\";\nimport { Empty, Exit, Interactive, NPCharacter, Player } from \"../objects\";\nimport EasyStar from \"easystarjs\";\nimport { translate } from \"../../utils/localization\";\nimport UI from \"../UI\";\nimport { TICK_TIME } from \"../../utils/constants\";\nimport template from \"lodash.template\";\n\nclass Level10 extends LevelBase {\n  constructor() {\n    super();\n    this.easystar = new EasyStar.js();\n    this.name = \"The castle\";\n    this.diamondsGoal = 10;\n    this.exit = null;\n    this.dwarf = null;\n    this.dwarfRun = false;\n  }\n\n  get id() {\n    return this.constructor.key;\n  }\n\n  async connectToScene(scene) {\n    await super.connectToScene(scene);\n\n    if (this.unfinished) {\n      // erase method to animate exit destruction after talk to dwarf\n      this.destroyBlock = () => false;\n\n      // Path finder to exit for Dwarf\n      const objectsAsKeys = this.objects.map((row) =>\n        row.map((el) => (el.isClass(NPCharacter) || el.isClass(Empty) ? 0 : 1))\n      );\n      this.easystar.setGrid(objectsAsKeys);\n      this.easystar.setAcceptableTiles([0]);\n\n      // console.log(this.leader.position, this.exit.position, objectsAsKeys);\n      this.easystar.findPath(\n        this.leader.position.x,\n        this.leader.position.y,\n        this.exit.position.x - 3,\n        this.exit.position.y,\n        (path) => {\n          this.leader.leadingPath = path.slice(1);\n        }\n      );\n      this.easystar.calculate();\n    } else {\n      // removes dwarf if level was finished in the past\n      this.leader.alien.alpha = 0;\n      this.replaceByEmpty(this.leader);\n    }\n  }\n\n  onInteractWith(el) {\n    super.onInteractWith(el);\n\n    // talk to Doc\n    if (el.order === 0 && this.unfinished) {\n      this.showDialog1();\n    }\n\n    // close to angel\n    if (el.order === 1 && this.unfinished) {\n      if (this.diamondsGoal <= this.collectedDiamonds) {\n        this.clearPath();\n      } else {\n        // fall short of diamonds\n        this.showDialog3();\n      }\n    }\n\n    if (el.isClass(Exit)) {\n      this.onComplete();\n    }\n  }\n\n  showDialog1() {\n    this.scene.events.once(\"dialogue:hidden\", () => {\n      this.player.disconnect();\n      // this.leader.isCloseEnough = () => this.dwarfRun;\n      this.dwarfRun = true;\n      this.moveDwarf();\n    });\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Mary\", \"closeUp_Dwarf\"],\n      participantNames: [\"Mary\", \"Doc\"],\n      conversation: [\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_10.dialog_1.mary_say_1\")],\n        },\n        {\n          who: \"closeUp_Dwarf\",\n          text: [translate(\"level_10.dialog_1.dwarf_say_1\")],\n        },\n      ],\n    });\n  }\n\n  showDialog2() {\n    this.scene.events.once(\"dialogue:hidden\", () => {\n      // remove listener since dwarf moves by himself\n      this.scene.events.off(\"player_moves\");\n      // auto pilot off\n      this.player.reconnect();\n    });\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Mary\"],\n      participantNames: [\"Mary\"],\n      conversation: [\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_10.dialog_2.mary_say_1\")],\n        },\n      ],\n    });\n  }\n\n  showDialog3() {\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Mary\", \"closeUp_Dwarf\"],\n      participantNames: [\"Mary\", \"Doc\"],\n      conversation: [\n        {\n          who: \"closeUp_Dwarf\",\n          text: [\n            template(translate(\"level_10.dialog_3.dwarf_say_1\"))({\n              NUM: this.diamondsGoal,\n            }),\n          ],\n        },\n      ],\n    });\n  }\n\n  moveDwarf() {\n    // hack to auto move dwarf\n    if (this.dwarfRun) {\n      if (!this.leader.leadingPath.length) {\n        this.dwarfRun = false;\n      }\n\n      this.onNextTick(() => {\n        // hack: giving the leader position itself it will always return true for isCloseEnough calc since is closer than 3 blocks away.\n        this.leader.onPlayerMoves(this.leader.position);\n        // this.leader.animIdle();\n        this.moveDwarf();\n      });\n    } else {\n      this.leader.animIdle();\n    }\n    // shows dialog sonner to reduce player awaiting\n    if (this.leader.leadingPath.length === 10) {\n      this.leader.animIdle();\n      this.showDialog2();\n    }\n  }\n\n  clearPath() {\n    // anim dwarf and angel dismiss\n    this.scene.tweens.add({\n      targets: this.exit.block.alien,\n      x: UI.tileToScreen(this.exit.position.x),\n      duration: TICK_TIME * 2,\n      onComplete: () => this.exit.block.alien.destroy(),\n    });\n\n    this.leader.leadingPath = [\n      { x: this.leader.position.x + 1, y: this.leader.position.y },\n      { x: this.leader.position.x + 1, y: this.leader.position.y },\n      { x: this.leader.position.x + 2, y: this.leader.position.y },\n      { x: this.leader.position.x + 2, y: this.leader.position.y },\n      { x: this.leader.position.x + 3, y: this.leader.position.y },\n      { x: this.leader.position.x + 3, y: this.leader.position.y },\n    ];\n    this.player.disconnect();\n    this.dwarfRun = true;\n    this.moveDwarfToExit();\n  }\n\n  moveDwarfToExit() {\n    // hack to auto move dwarf\n    if (this.dwarfRun) {\n      if (this.leader.position.x < this.exit.position.x) {\n        this.onNextTick(() => {\n          this.leader.onPlayerMoves(this.leader.position);\n          // this.leader.animIdle();\n          this.moveDwarfToExit();\n        });\n      } else {\n        this.onNextTick(() => {\n          this.replaceByEmpty(this.leader);\n        });\n        // this.leader.animIdle();\n        // auto pilot off\n        this.player.reconnect();\n      }\n    }\n  }\n\n  onAddElement(el) {\n    if (el.isClass(Player)) {\n      el.power = 1;\n      el.hasPickaxe = true;\n      // // restore logic to allow overlap over exit interactive spot\n      // this.scene.events.once(\"score:diamond_goal\", () => el.canMove = el._canMove)\n    }\n\n    if (el.isClass(Exit)) {\n      this.exit = el;\n    }\n\n    if (el.isClass(Interactive) && el.order === 1) {\n      el.ephemeral = false;\n      // once goal is reached, the interactive spot become ephemeral and it will be deleted after next interaction\n      this.scene.events.once(\"score:diamond_goal\", () => (el.ephemeral = true));\n    }\n  }\n}\n\nLevel10.key = \"level_10\";\nexport default Level10;\n","import LevelBase from \"./levelBase\";\nimport { Empty, Exit, NPCharacter, Player } from \"../objects\";\nimport { translate } from \"../../utils/localization\";\nimport EasyStar from \"easystarjs\";\nimport UI from \"../UI\";\nimport { TICK_TIME } from \"../../utils/constants\";\nimport template from \"lodash.template\";\n\nclass Level11 extends LevelBase {\n  constructor() {\n    super();\n    this.easystar = new EasyStar.js();\n    this.name = \"The fallen city\";\n    this.diamondsGoal = 14;\n  }\n\n  get id() {\n    return this.constructor.key;\n  }\n\n  async connectToScene(scene) {\n    await super.connectToScene(scene);\n\n    if (this.unfinished) {\n      // erase method to animate exit destruction after talk to dwarf\n      this.destroyBlock = () => false;\n    }\n\n    // fisrt explosion\n    scene.events.once(\"barre:explode\", (el) => {\n      // TICK COUNTER TO DIALOG\n      this.setTickTimeout(lvl => lvl.showDialog2(), 5)\n    });\n  }\n\n  onInteractWith(el) {\n    super.onInteractWith(el);\n\n    if (el.order === 0 && this.unfinished) {\n      this.showDialog1();\n    }\n\n    if (el.order === 1 && this.unfinished) {\n      this.showDialog3()\n    }\n\n    if (el.order === 2 && this.unfinished) {\n      // move dwarf hidding it while travels\n      const nextPos = { x: this.exit.position.x - 3, y: this.exit.position.y };\n      this.leader.alien.alpha = 0;\n      this.moveObject(this.leader, nextPos);\n      setTimeout(() => {\n        this.leader.alien.alpha = 1;\n\n        // set up next trigger by proximity\n        this.scene.events.on(\"player_moves\", nextPos => {\n          if (this.leader.testProximity(nextPos, 1, true)) {\n            if(this.diamondsGoal <= this.collectedDiamonds) {\n              this.clearPath()\n              this.scene.events.off(\"player_moves\")\n            } else {\n              // fall short of diamonds\n              this.showDialog4()\n            }\n          }\n        })\n      }, 500);\n      // -----\n    }\n\n    if (el.isClass(Exit)) {\n      this.onComplete();\n    }\n  }\n\n  showDialog1() {\n    this.scene.events.once(\"dialogue:hidden\", () => {\n      // Path finder to exit for Dwarf\n      const objectsAsKeys = this.objects.map((row) =>\n        row.map((el) => (el.isClass(NPCharacter) || el.isClass(Empty) ? 0 : 1))\n      );\n      this.easystar.setGrid(objectsAsKeys);\n      this.easystar.setAcceptableTiles([0]);\n\n      // remove listener since dwarf moves by himself\n      this.scene.events.off(\"player_moves\");\n      this.player.disconnect();\n\n      this.easystar.enableDiagonals();\n      this.easystar.findPath(\n        this.leader.position.x,\n        this.leader.position.y,\n        1,\n        10,\n        (path) => {\n          this.leader.leadingPath = path.slice(1);\n          this.easystar.findPath(1, 10, 7, 18, (path) => {\n            // iterate leadingPath and duplicate when it moves in diagonal\n            const isDiagonal = (o, n) => o.x !== n.x && o.y !== n.y\n            this.leader.leadingPath = [\n              ...this.leader.leadingPath,\n              ...path.slice(1),\n            ].reduce((res, el, idx, src) => {\n              if(src[idx-1]) {\n                const prevEl = src[idx-1]\n                if(isDiagonal(el, prevEl)) {\n                  // repeats prev position\n                  res.push(prevEl)\n                }\n              }\n              res.push(el)\n              return res\n            },[])\n\n            this.dwarfRun = true;\n            this.moveDwarf();\n\n            // TICK COUNTER TO RECONNECT PLAYER\n            this.setTickTimeout(lvl => lvl.player.reconnect(), 4)\n          });\n          this.easystar.calculate();\n        }\n      );\n      this.easystar.calculate();\n\n      \n    });\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Mary\", \"closeUp_Dwarf\"],\n      participantNames: [\"Mary\", \"Doc\"],\n      conversation: [\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_11.dialog_1.mary_say_1\")],\n        },\n        {\n          who: \"closeUp_Dwarf\",\n          text: [translate(\"level_11.dialog_1.dwarf_say_1\")],\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_11.dialog_1.mary_say_2\")],\n        },\n        {\n          who: \"closeUp_Dwarf\",\n          text: [translate(\"level_11.dialog_1.dwarf_say_2\")],\n        },\n        {\n          who: \"closeUp_Dwarf\",\n          text: [translate(\"level_11.dialog_1.dwarf_say_3\")],\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_11.dialog_1.mary_say_3\")],\n        },\n        {\n          who: \"closeUp_Dwarf\",\n          text: [translate(\"level_11.dialog_1.dwarf_say_4\")],\n        },\n      ],\n    });\n  }\n\n  showDialog2() {\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Mary\"],\n      participantNames: [\"Mary\"],\n      conversation: [\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_11.dialog_2.mary_say_1\")],\n        },\n      ],\n    });\n  }\n  showDialog3() {\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Mary\", \"closeUp_Dwarf\"],\n      participantNames: [\"Mary\", \"Doc\"],\n      conversation: [\n        {\n          who: \"closeUp_Dwarf\",\n          text: [translate(\"level_11.dialog_3.dwarf_say_1\")],\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_11.dialog_3.mary_say_1\")],\n        },\n      ],\n    });\n  }\n\n  showDialog4() {\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Mary\", \"closeUp_Dwarf\"],\n      participantNames: [\"Mary\", \"Doc\"],\n      conversation: [\n        {\n          who: \"closeUp_Dwarf\",\n          text: [template(translate(\"level_11.dialog_4.dwarf_say_1\"))({ NUM: this.diamondsGoal })],\n        },\n      ],\n    });\n  }\n\n  moveDwarf() {\n    // hack to auto move dwarf\n    if (this.dwarfRun) {\n      if (!this.leader.leadingPath.length) {\n        this.dwarfRun = false;\n      }\n\n      this.onNextTick(() => {\n        // hack: giving the leader position itself it will always return true for isCloseEnough calc since is closer than 3 blocks away.\n        this.leader.onPlayerMoves(this.leader.position);\n        // this.leader.animIdle();\n        this.moveDwarf();\n      });\n    } else {\n      this.leader.animIdle();\n    }\n  }\n\n  clearPath() {\n    // anim dwarf and angel dismiss\n    this.scene.tweens.add({\n      targets: this.exit.block.alien,\n      x: UI.tileToScreen(this.exit.position.x),\n      duration: TICK_TIME * 2,\n      onComplete: () => this.exit.block.alien.destroy(),\n    });\n\n    this.leader.leadingPath = [\n      { x: this.leader.position.x + 1, y: this.leader.position.y },\n      { x: this.leader.position.x + 1, y: this.leader.position.y },\n      { x: this.leader.position.x + 2, y: this.leader.position.y },\n      { x: this.leader.position.x + 2, y: this.leader.position.y },\n      { x: this.leader.position.x + 3, y: this.leader.position.y },\n      { x: this.leader.position.x + 3, y: this.leader.position.y },\n    ];\n    this.player.disconnect();\n    this.dwarfRun = true;\n    this.moveDwarfToExit();\n  }\n\n  moveDwarfToExit() {\n    // hack to auto move dwarf\n    if (this.dwarfRun) {\n      if (this.leader.position.x < this.exit.position.x) {\n        this.onNextTick(() => {\n          this.leader.onPlayerMoves(this.leader.position);\n          // this.leader.animIdle();\n          this.moveDwarfToExit();\n        });\n      } else {\n        this.onNextTick(() => {\n          this.replaceByEmpty(this.leader)\n        });\n        // this.leader.animIdle();\n        // auto pilot off\n        this.player.reconnect();\n      }\n    }\n  }\n\n  onAddElement(el) {\n    if (el.isClass(Player)) {\n      el.power = 1;\n      el.hasPickaxe = true;\n    }\n\n    if (el.isClass(NPCharacter)) {\n      el.leadingPath = [];\n    }\n\n    if(el.isClass(Exit)) {\n      this.exit = el\n    }\n  }\n}\n\nLevel11.key = \"level_11\";\nexport default Level11;\n","import { Exit, Player } from \"../objects\";\nimport levelGoalKit from \"./levelGoalKit\";\n\nclass Level12 extends levelGoalKit {\n  constructor() {\n    super();\n    this.name = \"Time trial\";\n    this.diamondsGoal = 7;\n  }\n\n  get id() {\n    return this.constructor.key\n  }\n\n  onInteractWith(el) {\n    super.onInteractWith(el)\n    \n    if (el.isClass(Exit)) {\n      this.onComplete();\n    }\n  }\n\n  onAddElement(el) {\n    if (el.isClass(Player)) {\n      el.power = 1;\n      el.hasPickaxe = true;\n    }\n\n  }\n\n}\n\nLevel12.key = 'level_12'\nexport default Level12;\n","import { Exit, Interactive, Player } from \"../objects\";\nimport levelGoalKit from \"./levelGoalKit\";\nclass Level13 extends levelGoalKit {\n  constructor() {\n    super();\n    this.name = \"Risky business\";\n    this.diamondsGoal = 9;\n    this.interactiveCounts = 0;\n    this.quakeTriggerIndex = Math.trunc(Math.random() * 100) % 4;\n    this.playerOriginPosition = null;\n  }\n\n  get id() {\n    return this.constructor.key;\n  }\n\n  async connectToScene(scene) {\n    await super.connectToScene(scene);\n    this.playerOriginPosition = { ...this.player.position };\n  }\n\n  async onInteractWith(el) {\n    super.onInteractWith(el);\n\n    if (el.isClass(Exit)) {\n      this.onComplete();\n    }\n    if (el.isClass(Interactive)) {\n      if (this.interactiveCounts === this.quakeTriggerIndex) {\n        this.player.disconnect();\n        const areaWidth = 17;\n        const areaHeight = 11;\n        await this.playEarthquake(\n          {\n            x1: this.playerOriginPosition.x - areaWidth - 1,\n            x2: this.playerOriginPosition.x - 1,\n            y1: el.position.y - areaHeight,\n            y2: this.playerOriginPosition.y,\n          },\n          3\n        );\n        this.player.reconnect();\n      }\n      this.interactiveCounts++;\n    }\n  }\n\n  onAddElement(el) {\n    if (el.isClass(Player)) {\n      el.power = 1;\n      el.hasPickaxe = true;\n    }\n  }\n}\nLevel13.key = \"level_13\";\nexport default Level13;\n","import { Exit, Player } from \"../objects\";\nimport levelGoalKit from \"./levelGoalKit\";\n\nclass Level14 extends levelGoalKit {\n  constructor() {\n    super();\n    this.name = \"Short fuse\";\n    this.diamondsGoal = 10;\n  }\n\n  get id() {\n    return this.constructor.key\n  }\n\n  onInteractWith(el) {\n    super.onInteractWith(el)\n    \n    if (el.isClass(Exit)) {\n      this.onComplete();\n    }\n    if(!el.isClass(Exit)) {\n      this.player.impersonateRockford = true\n      this.player.hasPickaxe = false;\n      this.player.animIdle();\n      this.scene.events.on('player_moves', (pos) => {\n        if(pos.x !== el.position.x || pos.y !== el.position.y) {\n          this.player.impersonateRockford = false\n          this.player.hasPickaxe = true;\n        }\n        // this.onNextTick((lvl) => {\n        // })\n      })\n    }\n  }\n\n  onAddElement(el) {\n    if (el.isClass(Player)) {\n      el.power = 1;\n      el.hasPickaxe = true;\n    }\n\n    if(!el.isClass(Exit)) {\n      el.ephemeral = false\n    }\n\n  }\n\n}\n\nLevel14.key = 'level_14'\nexport default Level14;\n","import { Exit, Player } from \"../objects\";\nimport levelGoalKit from \"./levelGoalKit\";\n\nclass Level15 extends levelGoalKit {\n  constructor() {\n    super();\n    this.name = \"The catacomb\";\n    this.diamondsGoal = 15;\n  }\n\n  get id() {\n    return this.constructor.key\n  }\n\n  onInteractWith(el) {\n    super.onInteractWith(el)\n    \n    if (el.isClass(Exit)) {\n      this.onComplete();\n    }\n  }\n\n  onAddElement(el) {\n    if (el.isClass(Player)) {\n      el.power = 1;\n      el.hasPickaxe = true;\n    }\n\n  }\n\n}\n\nLevel15.key = 'level_15'\nexport default Level15;\n","import LevelBase from \"./levelBase\";\nimport { Enemy, Exit, Interactive, Player } from \"../objects\";\nimport dbManager from \"../../utils/dbManager\";\nimport UI from \"../UI\";\nimport { SCALE, TICK_TIME } from \"../../utils/constants\";\nimport { translate } from \"../../utils/localization\";\nimport template from \"lodash.template\";\n\nclass Level16 extends LevelBase {\n  constructor() {\n    super();\n    this.name = \"The sanctuary\";\n    this.diamondsGoal = 25;\n    // flag for alternative exit do not take effect until player go out and in again\n    this.wasInSanctuary = false;\n    // falg for dialogs\n    this.maryTalkedToDocAboutTheSactuary = false;\n    this.quakeTrigger = null;\n  }\n\n  get id() {\n    return this.constructor.key;\n  }\n\n  async connectToScene(scene) {\n    await super.connectToScene(scene);\n\n    // ====================\n    // sanctuary decoration\n    // ====================\n    // shadow text for SHAMASH\n    this.scene.add\n      .text(\n        UI.tileToScreen(this.follower.position.x - 0.3),\n        UI.tileToScreen(this.follower.position.y + 2.5),\n        \"\",\n        {\n          fontFamily: \"GameGirl\",\n          fill: \"#503F35\",\n          align: \"right\",\n        }\n      )\n      .setScale(SCALE);\n    // text for SHAMASH\n    this.scene.add\n      .text(\n        UI.tileToScreen(this.follower.position.x - 0.25),\n        UI.tileToScreen(this.follower.position.y + 2.55),\n        \"\",\n        {\n          fontFamily: \"GameGirl\",\n          fill: \"#947E6C\",\n          align: \"right\",\n        }\n      )\n      .setScale(SCALE);\n    if (this.unfinished) {\n      this.follower.isFollowing = false;\n      this.destroyBlock = () => false;\n      this.follower.animLayRight();\n    } else {\n      // ============================\n      // manually applys quake effect\n      // ============================\n\n      // removes debris\n      const removeDebris = (x, y) => {\n        let debris = this.getObjectAt(x, y);\n        debris.overrunBy();\n        this.replaceByEmpty(debris);\n      };\n      removeDebris(\n        this.quakeTrigger.position.x - 1,\n        this.quakeTrigger.position.y + 1\n      );\n      removeDebris(\n        this.quakeTrigger.position.x - 2,\n        this.quakeTrigger.position.y + 1\n      );\n      removeDebris(\n        this.quakeTrigger.position.x - 3,\n        this.quakeTrigger.position.y + 1\n      );\n\n      // removes ground\n      const removeGround = (x, y) => {\n        let ground = this.getObjectAt(x, y);\n        ground.overrunBy();\n        this.replaceByEmpty(ground);\n      };\n      removeGround(\n        this.quakeTrigger.position.x + 1,\n        this.quakeTrigger.position.y - 1\n      );\n      removeGround(\n        this.quakeTrigger.position.x + 2,\n        this.quakeTrigger.position.y - 1\n      );\n\n      // ============\n      // removes NPCs\n      // ============\n      this.follower.alien.destroy();\n      this.follower = null;\n      this.replaceByEmpty(this.leader);\n      this.leader.alien.destroy();\n      this.leader = null;\n\n      // ================================\n      // removes usless interactive spots\n      // ================================\n      Object.keys(this.interactiveElements).forEach(\n        (k) => {\n          // removes if is not the exit\n          if(!this.interactiveElements[k].isClass(Exit)) {\n            this.interactiveElements[k] = null\n          }\n        }\n      );\n      // this.interactiveElements[`${this.quakeTrigger.position.x}-${this.quakeTrigger.position.y}`] = null\n      // this.quakeTrigger.\n    }\n  }\n\n  onInteractWith(el) {\n    super.onInteractWith(el);\n\n    if (el.isClass(Exit)) {\n      if (this.unfinished) {\n        this.goToSanctuary();\n      } else {\n        this.onComplete();\n      }\n    }\n\n    // earthquake triggers\n    if (el.isClass(Interactive) && el.order === 0) {\n      this.playTheSighting(el);\n    }\n    // talk to dwarf\n    if (el.isClass(Interactive) && el.order === 2) {\n      const goalAchieved = this.collectedDiamonds >= this.diamondsGoal;\n      // removes interactive object since goal is achived\n      if (goalAchieved) {\n        this.interactiveElements[`${el.position.x}-${el.position.y}`] = null;\n      }\n\n      if (!this.maryTalkedToDocAboutTheSactuary) {\n        this.showDialog2();\n      } else {\n        this.showDialog2_repeat();\n      }\n    }\n    // sanctuary exit\n    if (el === this.sanctuaryEntrance && this.wasInSanctuary) {\n      this.onComplete();\n    }\n  }\n\n  onAddElement(el) {\n    if (el.isClass(Player)) {\n      el.power = 1;\n      el.hasPickaxe = true;\n    }\n\n    if (el.isClass(Enemy)) {\n      el.scanDirection = \"CCW\";\n    }\n\n    if (el.isClass(Interactive) && el.order === 2) {\n      el.ephemeral = false;\n    }\n\n    // quake trigger\n    if (el.isClass(Interactive) && el.order === 0) {\n      this.quakeTrigger = el;\n    }\n    // enter to the sanctuary\n    if (el.isClass(Interactive) && el.order === 1) {\n      el.ephemeral = false;\n      this.sanctuaryEntrance = el;\n    }\n\n    // add sanctuary entrance by clonning exit\n    if (el.isClass(Exit) && this.unfinished) {\n      const layer1z2 = this.scene.children.getByName(\"layer_1z2\");\n      const layer2 = this.scene.children.getByName(\"layer_2\");\n      layer2.copy(\n        el.position.x - 2,\n        el.position.y - 2,\n        5,\n        5,\n        this.sanctuaryEntrance.position.x - 2,\n        this.sanctuaryEntrance.position.y - 2\n      );\n      layer1z2.copy(\n        el.position.x - 2,\n        el.position.y - 2,\n        5,\n        5,\n        this.sanctuaryEntrance.position.x - 2,\n        this.sanctuaryEntrance.position.y - 2\n      );\n    }\n  }\n\n  async playTheSighting() {\n    this.player.disconnect();\n    await this.playEarthquake(\n      {\n        x1: this.player.position.x - 3,\n        x2: this.player.position.x + 3,\n        y1: this.player.position.y - 1,\n        y2: this.player.position.y + 2,\n      },\n      4\n    );\n    await this.awaitTicks(10);\n    this.player.animPushRight();\n    await this.awaitTicks(4);\n    this.player.animPushRight();\n    this.onNextTick(() => this.player.animPushRight());\n    await this.awaitTicks(4);\n    await this.showDialog1();\n    this.player.reconnect();\n  }\n\n  showDialog1() {\n    return new Promise((res) => {\n      this.scene.events.once(\"dialogue:hidden\", res);\n      this.scene.events.emit(\"dialogue:show\", {\n        participants: [\"closeUp_Mary\"],\n        participantNames: [\"Mary\"],\n        conversation: [\n          {\n            who: \"closeUp_Mary\",\n            text: [translate(\"level_16.dialog_1.mary_say_1\")],\n          },\n          {\n            who: \"closeUp_Mary\",\n            text: [translate(\"level_16.dialog_1.mary_say_2\")],\n          },\n          {\n            who: \"closeUp_Mary\",\n            text: [translate(\"level_16.dialog_1.mary_say_3\")],\n          },\n        ],\n      });\n    });\n  }\n\n  showDialog2() {\n    this.maryTalkedToDocAboutTheSactuary = true;\n    const goalAchieved = this.collectedDiamonds >= this.diamondsGoal;\n    this.scene.events.once(\"dialogue:hidden\", () => {\n      if (goalAchieved) {\n        this.moveToExit();\n      }\n    });\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Mary\", \"closeUp_Dwarf\"],\n      participantNames: [\"Mary\", \"Doc\"],\n      conversation: [\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_16.dialog_2.mary_say_1\")],\n        },\n        {\n          who: \"closeUp_Dwarf\",\n          text: [translate(\"level_16.dialog_2.dwarf_say_1\")],\n          options: {\n            slot2: {\n              label: translate(\"menu.dialog_options.next\"),\n              slot: 2,\n              onSelect: () => {\n                if (this.collectedDiamonds < this.diamondsGoal) {\n                  this.scene.events.emit(\"dialogue:nextPage\");\n                } else {\n                  this.scene.events.emit(\"dialogue:nextPage\", 1);\n                }\n              },\n            },\n          },\n        },\n        {\n          who: \"closeUp_Dwarf\",\n          text: [\n            template(translate(\"level_16.dialog_2.dwarf_say_2_diamonds\"))({\n              NUM: this.diamondsGoal,\n            }),\n          ],\n          options: {\n            slot2: null,\n          },\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_16.dialog_2.mary_say_2\")],\n        },\n      ],\n    });\n  }\n  showDialog2_repeat() {\n    const goalAchieved = this.collectedDiamonds >= this.diamondsGoal;\n    this.scene.events.once(\"dialogue:hidden\", () => {\n      if (goalAchieved) {\n        this.moveToExit();\n      }\n    });\n    const goalAchievedConversation = {\n      who: \"closeUp_Mary\",\n      text: [translate(\"level_16.dialog_2_repeat.mary_say_1\")],\n    };\n    const goalMissingConversation = {\n      who: \"closeUp_Dwarf\",\n      text: [\n        template(translate(\"level_16.dialog_2_repeat_no_diamonds.dwarf_say_1\"))(\n          { NUM: this.diamondsGoal }\n        ),\n      ],\n    };\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Mary\", \"closeUp_Dwarf\"],\n      participantNames: [\"Mary\", \"Doc\"],\n      conversation: [\n        goalAchieved ? goalAchievedConversation : goalMissingConversation,\n      ],\n    });\n  }\n\n  async moveToExit() {\n    this.dwarfRun = true;\n    this.leader.leadingPath = [\n      { x: this.leader.position.x + 1, y: this.leader.position.y },\n      { x: this.leader.position.x + 1, y: this.leader.position.y },\n      { x: this.leader.position.x + 2, y: this.leader.position.y },\n      { x: this.leader.position.x + 2, y: this.leader.position.y },\n      { x: this.leader.position.x + 3, y: this.leader.position.y },\n      { x: this.leader.position.x + 3, y: this.leader.position.y },\n    ];\n\n    // anim angel dismiss\n    this.scene.tweens.add({\n      targets: this.exit.block.alien,\n      x: UI.tileToScreen(this.exit.position.x),\n      duration: TICK_TIME * 2,\n      onComplete: () => {\n        this.exit.block.alien.destroy();\n      },\n    });\n\n    // removes exit to avoid dwarf been destroyed on interact with it\n    this.interactiveElements[\n      `${this.exit.position.x}-${this.exit.position.y}`\n    ] = null;\n    this.exit.setPosition({\n      x: this.exit.position.x + 1,\n      y: this.exit.position.y,\n    });\n\n    this.moveDwarf();\n    await this.awaitTicks(this.leader.leadingPath.length);\n    await this.teleportObject(this.leader, this.sanctuaryEntrance.position);\n\n    // restores exit\n    this.exit.setPosition({\n      x: this.exit.position.x - 1,\n      y: this.exit.position.y,\n    });\n    this.interactiveElements[\n      `${this.exit.position.x}-${this.exit.position.y}`\n    ] = this.exit;\n  }\n\n  moveDwarf() {\n    // hack to auto move dwarf until pos x is 10\n    if (this.dwarfRun) {\n      // if (this.leader.position.x < this.exit.position.x) {\n      if (this.leader.leadingPath.length) {\n        this.onNextTick(() => {\n          this.leader.onPlayerMoves(this.leader.position);\n          // this.leader.animIdle();\n          this.moveDwarf();\n        });\n      } else {\n        this.dwarfRun = false;\n        this.leader.animIdle();\n      }\n    }\n  }\n  movePlayer() {\n    if (this.playerRun) {\n      this.onNextTick(() => {\n        if (this.player.moveToNextPosition()) {\n          this.movePlayer();\n        } else {\n          this.playerRun = false;\n        }\n      });\n    }\n  }\n\n  async goToSanctuary() {\n    this.player.disconnect();\n\n    this.focusElement = {\n      position: this.sanctuaryEntrance.position,\n    };\n    await this.awaitTicks(7);\n    this.follower.alien.alpha = 0;\n    await this.teleportObject(this.player, this.sanctuaryEntrance.position);\n\n    this.player.mandatoryPath = [\n      {\n        x: this.sanctuaryEntrance.position.x - 1,\n        y: this.sanctuaryEntrance.position.y,\n      },\n      {\n        x: this.sanctuaryEntrance.position.x - 2,\n        y: this.sanctuaryEntrance.position.y,\n      },\n      {\n        x: this.sanctuaryEntrance.position.x - 3,\n        y: this.sanctuaryEntrance.position.y,\n      },\n      {\n        x: this.sanctuaryEntrance.position.x - 4,\n        y: this.sanctuaryEntrance.position.y,\n      },\n      {\n        x: this.sanctuaryEntrance.position.x - 5,\n        y: this.sanctuaryEntrance.position.y,\n      },\n      {\n        x: this.sanctuaryEntrance.position.x - 6,\n        y: this.sanctuaryEntrance.position.y,\n      },\n      {\n        x: this.sanctuaryEntrance.position.x - 7,\n        y: this.sanctuaryEntrance.position.y,\n      },\n      {\n        x: this.sanctuaryEntrance.position.x - 8,\n        y: this.sanctuaryEntrance.position.y,\n      },\n    ];\n\n    this.playerRun = true;\n    this.movePlayer();\n\n    // delay dwarf run so they keep 1 sapce bewteen\n    await this.awaitTicks(1);\n    this.leader.leadingPath = [\n      {\n        x: this.sanctuaryEntrance.position.x - 1,\n        y: this.sanctuaryEntrance.position.y,\n      },\n      {\n        x: this.sanctuaryEntrance.position.x - 2,\n        y: this.sanctuaryEntrance.position.y,\n      },\n      {\n        x: this.sanctuaryEntrance.position.x - 3,\n        y: this.sanctuaryEntrance.position.y,\n      },\n      {\n        x: this.sanctuaryEntrance.position.x - 4,\n        y: this.sanctuaryEntrance.position.y,\n      },\n      {\n        x: this.sanctuaryEntrance.position.x - 5,\n        y: this.sanctuaryEntrance.position.y,\n      },\n      {\n        x: this.sanctuaryEntrance.position.x - 6,\n        y: this.sanctuaryEntrance.position.y,\n      },\n      {\n        x: this.sanctuaryEntrance.position.x - 7,\n        y: this.sanctuaryEntrance.position.y,\n      },\n    ];\n    this.dwarfRun = true;\n    this.moveDwarf();\n\n    await this.awaitTicks(this.leader.leadingPath.length);\n    await this.awaitTicks(3);\n    this.showDialog3();\n  }\n\n  async moveDocToFinalExit() {\n    this.leader.leadingPath = [\n      {\n        x: this.sanctuaryEntrance.position.x,\n        y: this.sanctuaryEntrance.position.y,\n      },\n      {\n        x: this.sanctuaryEntrance.position.x - 1,\n        y: this.sanctuaryEntrance.position.y,\n      },\n      {\n        x: this.sanctuaryEntrance.position.x - 2,\n        y: this.sanctuaryEntrance.position.y,\n      },\n      {\n        x: this.sanctuaryEntrance.position.x - 3,\n        y: this.sanctuaryEntrance.position.y,\n      },\n      {\n        x: this.sanctuaryEntrance.position.x - 4,\n        y: this.sanctuaryEntrance.position.y,\n      },\n      {\n        x: this.sanctuaryEntrance.position.x - 5,\n        y: this.sanctuaryEntrance.position.y,\n      },\n      {\n        x: this.sanctuaryEntrance.position.x - 6,\n        y: this.sanctuaryEntrance.position.y,\n      },\n      {\n        x: this.sanctuaryEntrance.position.x - 7,\n        y: this.sanctuaryEntrance.position.y,\n      },\n    ].reverse();\n    this.dwarfRun = true;\n    this.moveDwarf();\n\n    await this.awaitTicks(this.leader.leadingPath.length + 2);\n    this.leader.alien.destroy();\n    this.leader.alien = null;\n    this.replaceByEmpty(this.leader);\n  }\n\n  showDialog3() {\n    this.scene.events.once(\"dialogue:hidden\", async () => {\n      this.wasInSanctuary = true;\n      await this.moveDocToFinalExit();\n      this.player.reconnect();\n    });\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Mary\", \"closeUp_Dwarf\"],\n      participantNames: [\"Mary\", \"Doc\"],\n      conversation: [\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_16.dialog_3.mary_say_1\")],\n        },\n        {\n          who: \"closeUp_Dwarf\",\n          text: [translate(\"level_16.dialog_3.dwarf_say_1\")],\n        },\n        {\n          who: \"closeUp_Dwarf\",\n          text: [translate(\"level_16.dialog_3.dwarf_say_2\")],\n        },\n      ],\n    });\n  }\n}\n\nLevel16.key = \"level_16\";\nexport default Level16;\n","import Phaser from \"phaser\";\nimport { Exit, Player } from \"../objects\";\nimport UI from \"../UI\";\nimport levelGoalKit from \"./levelGoalKit\";\n\nclass levelDarkKit extends levelGoalKit {\n  async connectToScene(scene) {\n    await super.connectToScene(scene);\n    //  Enable lights and set a dark ambient color\n    scene.lights.enable().setAmbientColor(0x000000);\n\n    scene.children.getByName(\"layer_0\").setPipeline(\"Light2D\");\n    scene.children.getByName(\"layer_1\").setPipeline(\"Light2D\");\n    scene.children.getByName(\"layer_2\").setPipeline(\"Light2D\");\n    scene.children.getByName(\"layer_1z2\").setPipeline(\"Light2D\");\n    this.moveables.forEach(m => !m.isClass(Player) && m.alien?.active && m.alien?.setPipeline(\"Light2D\"));\n    Object.values(this.decorationElements).forEach(m => m.alien?.setPipeline(\"Light2D\"));\n\n    this.scene.events.on(\"player_moves\", (nextPos) => {\n      this.updateLight(nextPos);\n    })\n\n    if(this.unfinished) {\n      // adds light on angel\n      this.staticlight = scene.lights\n        .addLight(\n          UI.tileToScreen(this.exit.position.x),\n          UI.tileToScreen(this.exit.position.y),\n          1000\n        )\n        .setColor(0xe6c8c8)\n        .setIntensity(1.5);\n      scene.time.addEvent({\n        delay: 100,\n        callback: function () {\n          if (!this.exit.block.alien.active && this.staticlight.intensity > 0) {\n            this.staticlight.setIntensity(this.staticlight.intensity - 0.5);\n          }\n          Phaser.Geom.Ellipse.Random(this.exit.block.alien, this.staticlight);\n        },\n        callbackScope: this,\n        repeat: -1,\n      });\n    }\n  }\n\n  onAddElement(el) {\n    super.onAddElement(el)\n\n    if (el.isClass(Exit)) {\n      const layer = this.scene.children.getByName(\"layer_2\");\n      const map = layer.tilemap;\n\n      this.exitEye = this.scene.add.sprite(48, 16, \"spark\").setOrigin(0.5, 0.5);\n      this.exitEye.setTintFill(0xd25400);\n      this.exitEye.setScale(layer.scaleX * 2, layer.scaleX * 4);\n      this.exitEye.x = map.tileToWorldX(el.position.x - 0.5);\n      this.exitEye.y = map.tileToWorldY(el.position.y - 0.4);\n      this.exitEye.depth = 100;\n      this.exitEye.alpha = 0;\n    }\n  }\n\n  updateLight(nextPos) {\n    if (!this.exit || !this.player.torch) return false;\n    if (\n      nextPos.x === this.exit.position.x - 3 &&\n      nextPos.y === this.exit.position.y\n    ) {\n      this.player.light?.setRadius(500);\n      this.player.light?.setIntensity(1.3);\n\n      // remove alpha tween\n      if (this.eyeAnimation) {\n        this.exitEye.alpha = 0;\n        this.eyeAnimation.remove();\n      }\n    } else if (\n      nextPos.x === this.exit.position.x - 2 &&\n      nextPos.y === this.exit.position.y\n    ) {\n      // this.player.light?.setIntensity(1.3)\n      this.player.light?.setRadius(250);\n      this.player.light?.setIntensity(0.8);\n\n      // alpha tween from 0 to 0.5\n      if (this.eyeAnimation) {\n        this.eyeAnimation.remove();\n      }\n      this.exitEye.alpha = 0.1;\n      this.eyeAnimation = this.scene.tweens.add({\n        targets: this.exitEye,\n        alpha: 0.2,\n        duration: 100,\n        yoyo: true,\n        repeat: -1,\n      });\n    } else if (\n      nextPos.x === this.exit.position.x - 1 &&\n      nextPos.y === this.exit.position.y\n    ) {\n      // this.player.light?.setIntensity(1.3)\n      this.player.light?.setIntensity(0.3);\n      this.player.light?.setRadius(125);\n\n      // alpha tween from 0.5 to 1\n      if (this.eyeAnimation) {\n        this.eyeAnimation.remove();\n      }\n      this.exitEye.alpha = 0.3;\n      this.eyeAnimation = this.scene.tweens.add({\n        targets: this.exitEye,\n        alpha: 0.5,\n        duration: 100,\n        yoyo: true,\n        repeat: -1,\n      });\n    } else if (\n      nextPos.x === this.exit.position.x &&\n      nextPos.y === this.exit.position.y\n    ) {\n      this.player.light?.setIntensity(0.1);\n    } else if (this.player.light?.intensity !== 1.5) {\n      this.player.light?.setIntensity(1.5);\n      this.player.light?.setRadius(1000);\n    }\n  }\n}\nexport default levelDarkKit;","import { Exit, Interactive, Player, Torch } from \"../objects\";\nimport { translate } from \"../../utils/localization\";\nimport levelDarkKit from \"./levelDarkKit\";\n\nclass Level17 extends levelDarkKit {\n  constructor() {\n    super();\n    this.name = \"Into the dark\";\n    this.diamondsGoal = 10;\n  }\n\n  get id() {\n    return this.constructor.key;\n  }\n\n  async connectToScene(scene) {\n    await super.connectToScene(scene);\n\n    if(this.unfinished) {\n      this.scene.events.once(\"player_moves\", nextPos => {\n        this.detectDocTeleporting(nextPos);\n      });\n    }\n  }\n\n  detectDocTeleporting(nextPos) {\n    if (nextPos.y > 45 && this.leader.position.y < 10) {\n      this.teleportObject(this.leader, {\n        x: this.exit.position.x - 3,\n        y: this.exit.position.y,\n      });\n    } else {\n      this.scene.events.once(\"player_moves\", nextPos => {\n        this.detectDocTeleporting(nextPos);\n      });\n    }\n  }\n\n  onInteractWith(el) {\n    super.onInteractWith(el);\n\n    if (el.isClass(Exit)) {\n      this.onComplete();\n    }\n\n    if (el.isClass(Interactive) && el.order === 0 && this.unfinished) {\n      this.showDialog1();\n    }\n\n    if (el.isClass(Interactive) && el.order === 1 && this.unfinished) {\n      if (this.collectedDiamonds < this.diamondsGoal) {\n        this.showDialogGoal();\n      } else {\n        this.moveToExit()\n        this.interactiveElements[`${el.position.x}-${el.position.y}`] = null\n      }\n    }\n  }\n\n  onAddElement(el) {\n    super.onAddElement(el)\n\n    if (el.isClass(Player)) {\n      el.power = 1;\n      el.hasPickaxe = true;\n      // just a hack for presentation before torch is lit\n      el.alien.alpha = 0.5;\n\n      this.onNextTick(lvl => {\n        if(!lvl.unfinished) {\n          el.ligthTorch();\n        }\n      })\n    }\n\n    if (el.isClass(Torch) && el.order === 0) {\n      el.ignite();\n    }\n\n    if (el.isClass(Interactive) && el.order === 1) {\n      el.ephemeral = false;\n    }\n  }\n\n  showDialog1() {\n    this.scene.events.once(\"dialogue:hidden\", () => {\n      this.player.ligthTorch();\n      this.setTickTimeout(() => {\n        this.showDialog2();\n      }, 10);\n    });\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Dwarf\", \"closeUp_Mary\"],\n      participantNames: [\"Doc\", \"Mary\"],\n      conversation: [\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_17.dialog_1.mary_say_1\")],\n        },\n        {\n          who: \"closeUp_Dwarf\",\n          text: [translate(\"level_17.dialog_1.dwarf_say_1\")],\n        },\n      ],\n    });\n  }\n  showDialog2() {\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Dwarf\", \"closeUp_Mary\"],\n      participantNames: [\"Doc\", \"Mary\"],\n      conversation: [\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_17.dialog_2.mary_say_1\")],\n        },\n        {\n          who: \"closeUp_Dwarf\",\n          text: [translate(\"level_17.dialog_2.dwarf_say_1\")],\n        },\n      ],\n    });\n  }\n}\n\nLevel17.key = \"level_17\";\nexport default Level17;\n","import { Exit, Interactive, Player, Torch } from \"../objects\";\nimport levelDarkKit from \"./levelDarkKit\";\nimport { translate } from \"../../utils/localization\";\n\nclass Level18 extends levelDarkKit {\n  constructor() {\n    super();\n    this.name = \"The blind side\";\n    this.diamondsGoal = 10;\n    this.quakePlayed = false;\n  }\n\n  get id() {\n    return this.constructor.key;\n  }\n\n  onInteractWith(el) {\n    super.onInteractWith(el);\n\n    if (el.isClass(Exit)) {\n      this.onComplete();\n    }\n    if (el.isClass(Interactive) && el.order === 0) {\n      this.playDropTorchIncident(el);\n    }\n    // if (el.isClass(Interactive) && el.order === 1) {\n    //   this.recoveryFromDropTorch()\n    // }\n  }\n\n  async playDropTorchIncident(el) {\n    this.player.disconnect();\n    // breaks nothing\n    await this.playEarthquake(\n      {\n        x1: el.position.x - 3,\n        x2: el.position.x,\n        y1: el.position.y - 3,\n        y2: el.position.y,\n      },\n      4\n    );\n    await this.awaitTicks(2);\n    if (this.unfinished) {\n      this.displayIncidentDialog();\n    }\n    this.player.alien.setPipeline(\"Light2D\");\n    this.player.setOffTorch();\n    this.scene.children.getByName(\"layer_0\").resetPipeline(\"Light2D\");\n  }\n\n  displayIncidentDialog() {\n    this.scene.events.once(\"dialogue:hidden\", () => {\n      this.player.reconnect();\n    });\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Mary\"],\n      participantNames: [\"Mary\"],\n      conversation: [\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_18.dialog_incident.mary_say_1\")],\n        },\n      ],\n    });\n  }\n  displayIncidentRecoveryDialog() {\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Mary\"],\n      participantNames: [\"Mary\"],\n      conversation: [\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_18.dialog_incident_recovery.mary_say_1\")],\n        },\n      ],\n    });\n  }\n\n  recoveryFromDropTorch() {\n    this.player.ligthTorch();\n    this.player.alien.resetPipeline(\"Light2D\");\n    this.scene.children.getByName(\"layer_0\").setPipeline(\"Light2D\");\n    if (this.unfinished) {\n      this.displayIncidentRecoveryDialog();\n    }\n  }\n\n  onAddElement(el) {\n    super.onAddElement(el);\n\n    if (el.isClass(Player)) {\n      el.power = 1;\n      el.hasPickaxe = true;\n      el.ligthTorch();\n    }\n\n    if (el.isClass(Torch) && el.order === 4) {\n      el.ignite();\n      el.proximityTrigger = () => {\n        if (!this.player.torch) {\n          this.recoveryFromDropTorch();\n        }\n      };\n    }\n  }\n}\n\nLevel18.key = \"level_18\";\nexport default Level18;\n","import Phaser from \"phaser\";\nimport LevelBase from \"./levelBase\";\nimport { Empty, Exit, Interactive, NPCharacter, Player } from \"../objects\";\nimport EasyStar from \"easystarjs\";\nimport Debris from \"../objects/Debris\";\nimport { PIXEL_NAME } from \"../../utils/constants\";\nimport { translate } from \"../../utils/localization\";\nimport template from 'lodash.template'\n\nclass LevelMaze1 extends LevelBase {\n  constructor() {\n    super();\n    this.name = \"The Maze\";\n    this.easystar = new EasyStar.js();\n    this.solvingPath = [];\n    this.isMaze = true;\n    this.exitEye = null;\n    this.dwarfRun = false;\n    this.buyLeadingWithShrooms = false;\n  }\n\n  async connectToScene(scene) {\n    await super.connectToScene(scene);\n    //  Enable lights and set a dark ambient color\n    scene.lights.enable().setAmbientColor(0x000000);\n\n    // this.exit = Object.values(this.interactiveElements).find((el) =>\n    //   el.isClass(Exit)\n    // );\n\n    // Path finder to exit, runs alwas since is used to detect unreachable exit\n    const objectsAsKeys = this.objects.map((row) =>\n      row.map((el) => (el.isClass(NPCharacter) || el.isClass(Empty) ? 0 : 1))\n    );\n    this.easystar.setGrid(objectsAsKeys);\n    this.easystar.setAcceptableTiles([0]);\n\n    this.easystar.findPath(\n      this.leader.position.x,\n      this.leader.position.y,\n      this.exit.position.x,\n      this.exit.position.y,\n      (path) => {\n        if (path === null) {\n          // exit was placed into an unreachable tile.\n          // flag for patch\n          this.shouldRestart = true;\n        } else {\n          this.solvingPath = path.slice(1);\n          this.leader.personalSpace = 10;\n        }\n      }\n    );\n    this.easystar.calculate();\n    // =======================\n\n    scene.events.once(\"levelstart\", () => {\n      if (this.shouldRestart) {\n        // exit was placed into an unreachable tile.\n        // restart as patch\n        scene.levels.restart();\n      } else if (this.unfinished) {\n        if(this.totalShroomsAmount > 0) {\n          this.showDialog1();\n        } else {\n          this.showDialog1_no_shrooms();\n        }\n\n        // reduce personal space after half way to exit\n        const checkProgress = () => {\n          if (this.leader.leadingPath.length < this.solvingPath.length / 3) {\n            this.leader.personalSpace = 2;\n\n            // drops an interactive object 3 blocks away from doc\n            const threePositionsBackInPath = this.solvingPath.at(\n              -this.leader.leadingPath.length - 4\n            );\n            const intElement = new Interactive(PIXEL_NAME.INTERACTION, this);\n            intElement.order = 9;\n            const { x, y } = threePositionsBackInPath;\n            this.interactiveElements[`${x}-${y}`] = intElement;\n            intElement.setPosition({ x, y });\n          } else {\n            scene.events.once(\"player_moves\", checkProgress);\n          }\n        };\n        scene.events.once(\"player_moves\", checkProgress);\n      }\n    });\n\n    // fix scenario if it was finished once at least\n    if (!this.unfinished) {\n      // plaster the wall\n      const layer = this.scene.children.getByName(\"layer_1\");\n      const debris = new Debris(PIXEL_NAME.DEBRIS, this);\n      debris.setPosition({\n        x: this.leader.position.x - 1,\n        y: this.leader.position.y,\n      });\n      layer.copy(0, 4, 1, 1, 2, 5);\n      this.setObjectAt(\n        this.leader.position.x + 1,\n        this.leader.position.y,\n        debris\n      );\n\n      // remove dwarf\n      this.replaceByEmpty(this.leader);\n      this.leader.alien.destroy();\n      this.leader.alien = null;\n    }\n  }\n\n  get id() {\n    return this.constructor.key;\n  }\n\n  onInteractWith(el) {\n    super.onInteractWith(el);\n    if (el.order === 0) {\n      this.onComplete();\n    }\n\n    if(el.order === 9 && this.buyLeadingWithShrooms) {\n      // dwarf reduced personal space\n      this.showDialog2()\n    }\n  }\n\n  onAddElement(el) {\n    if (el.isClass(Player)) {\n      el.power = 1;\n      el.hasPickaxe = false;\n    }\n\n    if (el.isClass(Exit)) {\n      const layer = this.scene.children.getByName(\"layer_2\");\n      const map = layer.tilemap;\n\n      this.exitEye = this.scene.add.sprite(48, 16, \"spark\").setOrigin(0.5, 0.5);\n      this.exitEye.setTintFill(0xd25400);\n      this.exitEye.setScale(layer.scaleX * 2, layer.scaleX * 4);\n      this.exitEye.x = map.tileToWorldX(el.position.x - 0.5);\n      this.exitEye.y = map.tileToWorldY(el.position.y - 0.4);\n      this.exitEye.depth = 100;\n      this.exitEye.alpha = 0;\n    }\n  }\n\n  showDialog1_no_shrooms() {\n    this.scene.events.once(\"dialogue:hidden\", () => {\n      this.leader.leadingPath = [\n        { x: this.leader.position.x + 1, y: this.leader.position.y },\n      ];\n      this.setUpLeader();\n    });\n\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Mary\", \"closeUp_Dwarf\"],\n      participantNames: [\"Mary\", \"Doc\"],\n      conversation: [\n        {\n          who: \"closeUp_Dwarf\",\n          text: [translate(\"maze_1.dialog_1.dwarf_say_1\")],\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"maze_1.dialog_1.mary_say_2_empty\")],\n        },\n        {\n          who: \"closeUp_Dwarf\",\n          text: [template(translate(\"maze_1.dialog_1.dwarf_say_2_empty\"))({ NUM: 9})],\n        },\n      ]\n    })\n  }\n  showDialog1() {\n    this.scene.events.once(\"dialogue:hidden\", () => {\n      if (this.buyLeadingWithShrooms) {\n        this.scene.events.emit(\"score:mushroom_given\");\n        this.collectedShrooms--;\n\n        this.leader.leadingPath = [...this.solvingPath];\n      } else {\n        this.leader.leadingPath = [\n          { x: this.leader.position.x + 1, y: this.leader.position.y },\n        ];\n      }\n      this.setUpLeader();\n    });\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Mary\", \"closeUp_Dwarf\"],\n      participantNames: [\"Mary\", \"Doc\"],\n      conversation: [\n        {\n          who: \"closeUp_Dwarf\",\n          text: [translate(\"maze_1.dialog_1.dwarf_say_1\")],\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"maze_1.dialog_1.mary_say_1\")],\n          options: {\n            slot0: {\n              label: translate(\"maze_1.dialog_1_option.yes\"),\n              slot: 0,\n              onSelect: () => {\n                this.buyLeadingWithShrooms = true;\n                this.scene.events.emit(\"dialogue:nextPage\");\n              },\n            },\n            slot1: {\n              label: translate(\"maze_1.dialog_1_option.no\"),\n              slot: 1,\n              onSelect: () => this.scene.events.emit(\"dialogue:nextPage\", 1),\n            },\n            slot2: null,\n            slot3: null,\n          },\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"maze_1.dialog_1.mary_say_2_yes\")],\n          options: {\n            slot2: null, // hide default NEXT option\n          },\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"maze_1.dialog_1.mary_say_2_no\")],\n        },\n      ],\n    });\n  }\n\n  setUpLeader() {\n    this.player.disconnect();\n    this.dwarfRun = true;\n    this.moveDwarf();\n  }\n\n  moveDwarf() {\n    // auto moves dwarf until gets personal space\n    if (this.dwarfRun) {\n      if (\n        !this.leader.isCloseEnough(this.player.position) ||\n        this.leader.leadingPath.length === 0\n      ) {\n        this.dwarfRun = false;\n      }\n\n      this.onNextTick(() => {\n        // hack: force player move action\n        this.leader.onPlayerMoves(this.player.position);\n        this.moveDwarf();\n      });\n    } else {\n      this.leader.animIdle();\n      this.player.reconnect();\n    }\n  }\n\n  showDialog2() {\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Mary\", \"closeUp_Dwarf\"],\n      participantNames: [\"Mary\", \"Doc\"],\n      conversation: [\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"maze_1.dialog_2.mary_say_1\")],\n        },\n        {\n          who: \"closeUp_Dwarf\",\n          text: [translate(\"maze_1.dialog_2.dwarf_say_1\")],\n        },\n      ],\n    });\n  }\n}\n\nLevelMaze1.key = \"maze_1\";\nexport default LevelMaze1;\n","import { SCALE } from \"../../utils/constants\";\n\nclass Arrow {\n  constructor(scene) {\n    this.scene = scene;\n    // Creating a blank tilemap\n    this.map = this.scene.make.tilemap({ tileWidth: 20, tileHeight: 20, width: 3, height: 1 });\n  }\n\n  getArrow() {\n    const map = this.map\n    // addTilesetImage: function (tilesetName, key, tileWidth, tileHeight, tileMargin, tileSpacing, gid)\n    let tileset = map.addTilesetImage('arrows', 'hud-tiles', 20, 20, 1, 2);\n    let layer = map.createBlankLayer('layer_arrow', tileset);\n    layer.name = 'layer_arrow'\n    layer.depth = 15\n    layer.setScrollFactor(0)\n    layer.setScale(SCALE)\n    \n    return map.putTileAt(30, 0, 0);\n  }\n  \n  getArrowDown() {\n    const tile = this.getArrow()\n    return tile\n  }\n  getArrowRight() {\n    const tile = this.getArrow()\n    tile.rotation = -Math.PI/2\n    return tile\n  }\n  getArrowUp() {\n    const tile = this.getArrow()\n    tile.rotation = Math.PI\n    return tile\n  }\n  getArrowLeft() {\n    const tile = this.getArrow()\n    tile.rotation = Math.PI/2\n    return tile\n  }\n}\n\nexport default Arrow","import Phaser from \"phaser\";\nimport LevelBase from \"./levelBase\";\nimport { Empty, Exit, Interactive, NPCharacter, Player } from \"../objects\";\nimport EasyStar from \"easystarjs\";\nimport { PIXEL_NAME } from \"../../utils/constants\";\nimport UI from \"../UI\";\nimport Debris from \"../objects/Debris\";\nimport { translate } from \"../../utils/localization\";\nimport template from 'lodash.template'\n\nclass LevelMaze2 extends LevelBase {\n  constructor() {\n    super();\n    this.name = \"The Dark Maze\";\n    this.easystar = new EasyStar.js();\n    this.solvingPath = [];\n    this.isMaze = true;\n    this.exitEye = null;\n    this.dwarfRun = false;\n    this.buyLeadingWithShrooms = false;\n  }\n\n  async connectToScene(scene) {\n    await super.connectToScene(scene);\n    //  Enable lights and set a dark ambient color\n    scene.lights.enable().setAmbientColor(0x000000);\n\n    // this.exit = Object.values(this.interactiveElements).find((el) =>\n    //   el.isClass(Exit)\n    // );\n\n    // Path finder to exit, runs alwas since is used to detect unreachable exit\n    const objectsAsKeys = this.objects.map((row) =>\n      row.map((el) => (el.isClass(NPCharacter) || el.isClass(Empty) ? 0 : 1))\n    );\n    this.easystar.setGrid(objectsAsKeys);\n    this.easystar.setAcceptableTiles([0]);\n\n    this.easystar.findPath(\n      this.leader.position.x,\n      this.leader.position.y,\n      this.exit.position.x,\n      this.exit.position.y,\n      (path) => {\n        if (path === null) {\n          // exit was placed into an unreachable tile.\n          // flag for patch\n          this.shouldRestart = true;\n        } else {\n          this.solvingPath = path.slice(1);\n          this.leader.personalSpace = 10;\n        }\n      }\n    );\n    this.easystar.calculate();\n    // =======================\n\n    scene.events.once(\"levelstart\", () => {\n      if (this.shouldRestart) {\n        // exit was placed into an unreachable tile.\n        // restart as patch\n        scene.levels.restart();\n      } else if (this.unfinished) {\n        if(this.totalShroomsAmount > 0) {\n          this.showDialog1();\n        } else {\n          this.showDialog1_no_shrooms();\n        }\n\n        // reduce personal space after half way to exit\n        const checkProgress = () => {\n          if (this.leader.leadingPath.length < this.solvingPath.length / 3) {\n            this.leader.personalSpace = 2;\n\n            // drops an interactive object 3 blocks away from doc\n            const threePositionsBackInPath = this.solvingPath.at(\n              -this.leader.leadingPath.length - 4\n            );\n            const intElement = new Interactive(PIXEL_NAME.INTERACTION, this);\n            intElement.order = 9;\n            const { x, y } = threePositionsBackInPath;\n            this.interactiveElements[`${x}-${y}`] = intElement;\n            intElement.setPosition({ x, y });\n          } else {\n            scene.events.once(\"player_moves\", checkProgress);\n          }\n        };\n        scene.events.once(\"player_moves\", checkProgress);\n      }\n    });\n\n    // fix scenario if it was finished once at least\n    if (!this.unfinished) {\n      // plaster the wall\n      const layer = this.scene.children.getByName(\"layer_1\");\n      const debris = new Debris(PIXEL_NAME.DEBRIS, this);\n      debris.setPosition({\n        x: this.leader.position.x - 1,\n        y: this.leader.position.y,\n      });\n      layer.copy(0, 4, 1, 1, 2, 5);\n      this.setObjectAt(\n        this.leader.position.x + 1,\n        this.leader.position.y,\n        debris\n      );\n\n      // remove dwarf\n      this.replaceByEmpty(this.leader);\n      this.leader.alien.destroy();\n      this.leader.alien = null;\n    }\n\n    //  Our spotlight. 1000px radius and white in color.\n    // this.player.light = scene.lights\n    //   .addLight(this.player.alien.x, this.player.alien.y, 1000)\n    //   .setColor(0xe6c8c8)\n    //   .setIntensity(0.5);\n    // scene.time.addEvent({\n    //   delay: 100,\n    //   callback: function () {\n    //     this.player.light.x = this.player.alien.x;\n    //     this.player.light.y = this.player.alien.y;\n    //     Phaser.Geom.Ellipse.Random(this.player.alien, this.player.light);\n    //   },\n    //   callbackScope: this,\n    //   repeat: -1,\n    // });\n\n    scene.children.getByName(\"layer_1\").setPipeline(\"Light2D\");\n    scene.children.getByName(\"layer_2\").setPipeline(\"Light2D\");\n    scene.children.getByName(\"layer_1z2\").setPipeline(\"Light2D\");\n    this.moveables.forEach(m => !m.isClass(Player) && m.alien?.active && m.alien?.setPipeline(\"Light2D\"));\n\n    // const exit = Object.values(this.interactiveElements).find((el) =>\n    //   el.isClass(Exit)\n    // );\n    // this.moveObject(this.player, {\n    //   x: exit.position.x - 3,\n    //   y: exit.position.y + 2,\n    // });\n\n    const preExit = new Interactive(PIXEL_NAME.INTERACTION, this);\n    preExit.order = -1;\n    this.interactiveElements[`${this.exit.position.x - 2}-${this.exit.position.y}`] =\n      preExit;\n    preExit.setPosition({ x: this.exit.position.x - 2, y: this.exit.position.y });\n\n    this.scene.events.on(\"player_moves\", this.updateLight.bind(this));\n  }\n\n  updateLight(nextPos) {\n    // const exit = Object.values(this.interactiveElements).find((el) =>\n    //   el.isClass(Exit)\n    // );\n    if (!this.exit) return false;\n    if (nextPos.x === this.exit.position.x - 3 && nextPos.y === this.exit.position.y) {\n      this.player.light.setRadius(500);\n      this.player.light.setIntensity(1.3);\n\n      // remove alpha tween\n      if (this.eyeAnimation) {\n        this.exitEye.alpha = 0;\n        this.eyeAnimation.remove();\n      }\n    } else if (\n      nextPos.x === this.exit.position.x - 2 &&\n      nextPos.y === this.exit.position.y\n    ) {\n      // this.player.light.setIntensity(1.3)\n      this.player.light.setRadius(250);\n      this.player.light.setIntensity(0.8);\n\n      // alpha tween from 0 to 0.5\n      if (this.eyeAnimation) {\n        this.eyeAnimation.remove();\n      }\n      this.exitEye.alpha = 0.1;\n      this.eyeAnimation = this.scene.tweens.add({\n        targets: this.exitEye,\n        alpha: 0.2,\n        duration: 100,\n        yoyo: true,\n        repeat: -1,\n      });\n    } else if (\n      nextPos.x === this.exit.position.x - 1 &&\n      nextPos.y === this.exit.position.y\n    ) {\n      // this.player.light.setIntensity(1.3)\n      this.player.light.setIntensity(0.3);\n      this.player.light.setRadius(125);\n\n      // alpha tween from 0.5 to 1\n      if (this.eyeAnimation) {\n        this.eyeAnimation.remove();\n      }\n      this.exitEye.alpha = 0.3;\n      this.eyeAnimation = this.scene.tweens.add({\n        targets: this.exitEye,\n        alpha: 0.5,\n        duration: 100,\n        yoyo: true,\n        repeat: -1,\n      });\n    } else if (nextPos.x === this.exit.position.x && nextPos.y === this.exit.position.y) {\n      this.player.light.setIntensity(0.1);\n    } else if (this.player.light !== 1.5) {\n      this.player.light.setIntensity(1.5);\n      this.player.light.setRadius(1000);\n    }\n  }\n\n  get id() {\n    return this.constructor.key;\n  }\n\n  onInteractWith(el) {\n    super.onInteractWith(el);\n    if (el.order === 0) {\n      this.onComplete();\n    }\n\n    if(el.order === 9 && this.buyLeadingWithShrooms) {\n      // dwarf reduced personal space\n      this.showDialog2()\n    }\n  }\n\n  onAddElement(el) {\n    if (el.isClass(Player)) {\n      el.power = 1;\n      el.hasPickaxe = false;\n      el.ligthTorch();\n    }\n\n    if (el.isClass(Exit)) {\n      const layer = this.scene.children.getByName(\"layer_2\");\n      const map = layer.tilemap;\n\n      this.exitEye = this.scene.add.sprite(48, 16, \"spark\").setOrigin(0.5, 0.5);\n      this.exitEye.setTintFill(0xd25400);\n      this.exitEye.setScale(layer.scaleX * 2, layer.scaleX * 4);\n      this.exitEye.x = map.tileToWorldX(el.position.x - 0.5);\n      this.exitEye.y = map.tileToWorldY(el.position.y - 0.4);\n      this.exitEye.depth = 100;\n      this.exitEye.alpha = 0;\n    }\n  }\n\n  showDialog1_no_shrooms() {\n    this.scene.events.once(\"dialogue:hidden\", () => {\n      this.leader.leadingPath = [\n        { x: this.leader.position.x + 1, y: this.leader.position.y },\n      ];\n      this.setUpLeader();\n    });\n\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Mary\", \"closeUp_Dwarf\"],\n      participantNames: [\"Mary\", \"Doc\"],\n      conversation: [\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"maze_2.dialog_1.mary_say_0\")],\n        },\n        {\n          who: \"closeUp_Dwarf\",\n          text: [translate(\"maze_2.dialog_1.dwarf_say_1\")],\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"maze_2.dialog_1.mary_say_2_empty\")],\n        },\n        {\n          who: \"closeUp_Dwarf\",\n          text: [template(translate(\"maze_2.dialog_1.dwarf_say_2_empty\"))({ NUM: 9})],\n        },\n      ]\n    })\n  }\n  showDialog1() {\n    this.scene.events.once(\"dialogue:hidden\", () => {\n      if (this.buyLeadingWithShrooms) {\n        this.scene.events.emit(\"score:mushroom_given\");\n        this.collectedShrooms--;\n\n        this.leader.leadingPath = [...this.solvingPath];\n      } else {\n        this.leader.leadingPath = [\n          { x: this.leader.position.x + 1, y: this.leader.position.y },\n        ];\n      }\n      this.setUpLeader();\n    });\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Mary\", \"closeUp_Dwarf\"],\n      participantNames: [\"Mary\", \"Doc\"],\n      conversation: [\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"maze_2.dialog_1.mary_say_0\")],\n        },\n        {\n          who: \"closeUp_Dwarf\",\n          text: [translate(\"maze_2.dialog_1.dwarf_say_1\")],\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"maze_2.dialog_1.mary_say_1\")],\n          options: {\n            slot0: {\n              label: translate(\"maze_2.dialog_1_option.yes\"),\n              slot: 0,\n              onSelect: () => {\n                this.buyLeadingWithShrooms = true;\n                this.scene.events.emit(\"dialogue:nextPage\");\n              },\n            },\n            slot1: {\n              label: translate(\"maze_2.dialog_1_option.no\"),\n              slot: 1,\n              onSelect: () => this.scene.events.emit(\"dialogue:nextPage\", 1),\n            },\n            slot2: null,\n            slot3: null,\n          },\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"maze_2.dialog_1.mary_say_2_yes\")],\n          options: {\n            slot2: null, // hide default NEXT option\n          },\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"maze_2.dialog_1.mary_say_2_no\")],\n        },\n      ],\n    });\n  }\n\n  setUpLeader() {\n    this.player.disconnect();\n    this.dwarfRun = true;\n    this.moveDwarf();\n  }\n\n  moveDwarf() {\n    // auto moves dwarf until gets personal space\n    if (this.dwarfRun) {\n      if (\n        !this.leader.isCloseEnough(this.player.position) ||\n        this.leader.leadingPath.length === 0\n      ) {\n        this.dwarfRun = false;\n      }\n\n      this.onNextTick(() => {\n        // hack: force player move action\n        this.leader.onPlayerMoves(this.player.position);\n        this.moveDwarf();\n      });\n    } else {\n      this.leader.animIdle();\n      this.player.reconnect();\n    }\n  }\n\n  showDialog2() {\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Mary\", \"closeUp_Dwarf\"],\n      participantNames: [\"Mary\", \"Doc\"],\n      conversation: [\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"maze_2.dialog_2.mary_say_1\")],\n        },\n        {\n          who: \"closeUp_Dwarf\",\n          text: [translate(\"maze_2.dialog_2.dwarf_say_1\")],\n        },\n      ],\n    });\n  }\n}\n\nLevelMaze2.key = \"maze_2\";\nexport default LevelMaze2;\n","import { DIRS } from \"../../utils/constants\"\n\nexport const isUp = key => key === \"ArrowUp\" || key === \"w\"\nexport const isDown = key => key === \"ArrowDown\" || key === \"s\"\nexport const isLeft = key => key === \"ArrowLeft\" || key === \"a\"\nexport const isRight = key => key === \"ArrowRight\" || key === \"d\"\nexport const isConfirm = key => key === \"Enter\" || key === \"Spacebar\"\nexport const isCancel = key => key === \"Escape\"\nexport const getDirection = key => {\n  if(isUp(key)) return DIRS.UP\n  if(isDown(key)) return DIRS.DOWN\n  if(isLeft(key)) return DIRS.LEFT\n  if(isRight(key)) return DIRS.RIGHT\n}","import { SCALE } from \"../utils/constants\";\nimport LevelTest from \"./levels/level_ki_finale\";\nimport Level1 from \"../components/levels/level_1\";\nimport Level2 from \"../components/levels/level_2\";\nimport Level3 from \"../components/levels/level_3\";\nimport Level4 from \"../components/levels/level_4\";\nimport Level5 from \"../components/levels/level_5\";\nimport Level6 from \"../components/levels/level_6\";\nimport Level7 from \"../components/levels/level_7\";\nimport Level8 from \"../components/levels/level_8\";\nimport Level9 from \"../components/levels/level_9\";\nimport Level10 from \"../components/levels/level_10\";\nimport Level11 from \"../components/levels/level_11\";\nimport Level12 from \"../components/levels/level_12\";\nimport Level13 from \"../components/levels/level_13\";\nimport Level14 from \"../components/levels/level_14\";\nimport Level15 from \"../components/levels/level_15\";\nimport Level16 from \"../components/levels/level_16\";\nimport Level17 from \"../components/levels/level_17\";\nimport Level18 from \"../components/levels/level_18\";\nimport LevelFinale from \"../components/levels/level_ki_finale\";\nimport LevelMaze1 from \"../components/levels/Maze_1\";\nimport UI from \"./UI\";\nimport { translate } from \"../utils/localization\";\nimport Arrow from \"./DialogArrow\";\nimport DB from \"../utils/dbManager\";\nimport dbManager from \"../utils/dbManager\";\nimport LevelMaze2 from \"./levels/Maze_2\";\nimport LevelKiFinale from \"./levels/level_ki_finale\";\nimport * as Controller from \"./Controller/Controller\";\n\nexport default class UIMenus {\n  constructor(scene) {\n    this.scene = scene;\n    this.ROW_HEIGHT = 0;\n    this.MARGIN_LEFT = 0;\n    this.MARGIN_TOP = 0;\n    this.options = [];\n    this.optionsByPage = [];\n    this.scrollIndex = 0;\n    this.isVisible = true;\n\n    window.scene = this.scene;\n  }\n  showConfirmNewGameMenu() {\n    const menuOptions = [\n      {\n        label: translate(\"menu.main.yes\"),\n        disabled: false,\n        selectable: true,\n        onSelect: () => {\n          this.scene.navigateToScene(\"IntroScene\");\n        },\n      },\n      {\n        label: translate(\"menu.main.no\"),\n        disabled: false,\n        selectable: true,\n        onSelect: () => this.scene.navigateToScene(\"SplashScreenScene\"),\n      },\n    ];\n    const header = {\n      label: translate(\"menu.main.confirmNewGame\"),\n      disabled: false,\n      selectable: false,\n    };\n    this.drawSelectableOptions(header, menuOptions, 0, 1, 2);\n  }\n  async showInitialMenu() {\n    const menuOptions = [\n      {\n        label: translate(\"menu.main.option_new\"),\n        disabled: false,\n        selectable: true,\n        onSelect: async () => {\n          const level_1 = await dbManager.get(Level1.key);\n          if (level_1) {\n            this.scene.navigateToScene(\"ConfirmNewGameScene\");\n          } else {\n            this.scene.navigateToScene(\"IntroScene\");\n          }\n        },\n      },\n      {\n        label: translate(\"menu.main.option_continue\"),\n        disabled: false,\n        selectable: true,\n        // onSelect: () => this.scene.navigateToScene(\"LevelResumeScene\", { level: Level3.key}),\n        onSelect: () => {\n          console.log(document.querySelector('canvas').width, document.querySelector('canvas').height, document.querySelector('canvas'));\n          this.scene.navigateToScene(\"MenuScene\")\n        },\n      },\n      {\n        label: translate(\"menu.main.toBeContinue\"),\n        disabled: !((await dbManager.get(LevelKiFinale.key))?.comp > 0),\n        selectable: !((await dbManager.get(LevelKiFinale.key))?.comp > 0),\n        // onSelect: () => this.scene.navigateToScene(\"LevelResumeScene\", { level: Level3.key}),\n        onSelect: () => this.scene.navigateToScene(\"KiStageCompleted\"),\n      },\n      {\n        label: \"Options\",\n        disabled: true,\n        selectable: false,\n        // onSelect: () => this.scene.navigateToScene(\"LevelResumeScene\", { level: Level3.key}),\n        onSelect: () => this.scene.navigateToScene(\"OptionsScene\"),\n      },\n    ];\n    this.drawSelectableOptions(null, menuOptions);\n  }\n  async showMainMenu() {\n    // const levelData = DB.get(Level1.key);\n    // const maxProgress = DB.get(\"maxProgress\") || 1;\n    // shorthand formatter\n    const _ = (n = \"\") =>\n      n.toLocaleString(\"en-US\", {\n        minimumIntegerDigits: 2,\n      });\n    const _gems = async (lKey) => {\n      const levelData = await DB.get(lKey);\n      return levelData\n        ? `${_(levelData.collectedDiamonds)}/${_(levelData.countDiamonds)}`\n        : \"__/__\";\n    };\n    const _threats = async (lKey) => {\n      const levelData = await DB.get(lKey);\n      return levelData\n        ? `${_(levelData.killedEnemies)}/${_(levelData.countEnemies)}`\n        : \"__/__\";\n    };\n    const _shrooms = async (lKey) => {\n      const levelData = await DB.get(lKey);\n      return levelData\n        ? `${_(levelData.collectedShrooms)}/${_(levelData.countShrooms)}`\n        : \"__/__\";\n    };\n    const _comp = async (lKey) => {\n      const levelData = await DB.get(lKey);\n      const perc = (levelData?.comp * 100).toLocaleString(\"en-US\", {\n        minimumFractionDigits: 0,\n        maximumFractionDigits: 0,\n      });\n      return levelData\n        ? `${perc <= 9 ? \"  \" : perc <= 99 ? \" \" : \"\"}${perc}%`\n        : \"  0%\";\n    };\n\n    const menuOptions = [\n      {\n        label: `Ki     1     ${await _gems(Level1.key)}     ${await _threats(\n          Level1.key\n        )}     ${await _shrooms(Level1.key)}   ${await _comp(Level1.key)}`,\n        // label: \"Ki     1     __/__     __/__     __/__   100%\",\n        disabled: false,\n        selectable: true,\n        onSelect: () =>\n          this.scene.navigateToScene(\"GameScene\", { levelName: Level1.key }),\n      },\n      {\n        label: `Ki     2     ${await _gems(Level2.key)}     ${await _threats(\n          Level2.key\n        )}     ${await _shrooms(Level2.key)}   ${await _comp(Level2.key)}`,\n        // label: \"Absu  2     __/__     __/__     __/__   100%\",\n        disabled: !((await dbManager.get(Level1.key))?.comp > 0),\n        selectable: true,\n        onSelect: () =>\n          this.scene.navigateToScene(\"GameScene\", { levelName: Level2.key }),\n      },\n      {\n        label: `Ki     3     ${await _gems(Level3.key)}     ${await _threats(\n          Level3.key\n        )}     ${await _shrooms(Level3.key)}   ${await _comp(Level3.key)}`,\n        disabled: !((await dbManager.get(Level2.key))?.comp > 0),\n        // disabled: !((await dbManager.get(Level3.key))?.comp > 0),\n        selectable: true,\n        onSelect: () =>\n          this.scene.navigateToScene(\"GameScene\", { levelName: Level3.key }),\n      },\n      {\n        label: `Ki     4     ${await _gems(Level4.key)}     ${await _threats(\n          Level4.key\n        )}     ${await _shrooms(Level4.key)}   ${await _comp(Level4.key)}`,\n        disabled: !((await dbManager.get(Level3.key))?.comp > 0),\n        selectable: true,\n        onSelect: () =>\n          this.scene.navigateToScene(\"GameScene\", { levelName: Level4.key }),\n      },\n      {\n        label: `Ki     5     ${await _gems(Level5.key)}     ${await _threats(\n          Level5.key\n        )}     ${await _shrooms(Level5.key)}   ${await _comp(Level5.key)}`,\n        disabled: !((await dbManager.get(Level4.key))?.comp > 0),\n        selectable: true,\n        onSelect: () =>\n          this.scene.navigateToScene(\"GameScene\", { levelName: Level5.key }),\n      },\n      {\n        label: `Ki     6     ${await _gems(Level6.key)}     ${await _threats(\n          Level6.key\n        )}     ${await _shrooms(Level6.key)}   ${await _comp(Level6.key)}`,\n        disabled: !((await dbManager.get(Level5.key))?.comp > 0),\n        selectable: true,\n        onSelect: () =>\n          this.scene.navigateToScene(\"GameScene\", { levelName: Level6.key }),\n      },\n      {\n        label: `Ki     7     ${await _gems(Level7.key)}     ${await _threats(\n          Level7.key\n        )}     ${await _shrooms(Level7.key)}   ${await _comp(Level7.key)}`,\n        disabled: !((await dbManager.get(Level6.key))?.comp > 0),\n        selectable: true,\n        onSelect: () =>\n          this.scene.navigateToScene(\"GameScene\", { levelName: Level7.key }),\n      },\n      {\n        label: `Ki     8     ${await _gems(Level8.key)}     ${await _threats(\n          Level8.key\n        )}     ${await _shrooms(Level8.key)}   ${await _comp(Level8.key)}`,\n        disabled: !((await dbManager.get(Level7.key))?.comp > 0),\n        selectable: true,\n        onSelect: () =>\n          this.scene.navigateToScene(\"GameScene\", { levelName: Level8.key }),\n      },\n      {\n        label: `Ki     9     ${await _gems(Level9.key)}     ${await _threats(\n          Level9.key\n        )}     ${await _shrooms(Level9.key)}   ${await _comp(Level9.key)}`,\n        disabled: !((await dbManager.get(Level8.key))?.comp > 0),\n        selectable: true,\n        onSelect: () =>\n          this.scene.navigateToScene(\"GameScene\", { levelName: Level9.key }),\n      },\n      {\n        label: `Ki    10     ${await _gems(Level10.key)}     ${await _threats(\n          Level10.key\n        )}     ${await _shrooms(Level10.key)}   ${await _comp(Level10.key)}`,\n        disabled: !((await dbManager.get(Level9.key))?.comp > 0),\n        selectable: true,\n        onSelect: () =>\n          this.scene.navigateToScene(\"GameScene\", { levelName: Level10.key }),\n      },\n      {\n        label: `Ki    11     ${await _gems(Level11.key)}     ${await _threats(\n          Level11.key\n        )}     ${await _shrooms(Level11.key)}   ${await _comp(Level11.key)}`,\n        disabled: !((await dbManager.get(Level10.key))?.comp > 0),\n        selectable: true,\n        onSelect: () =>\n          this.scene.navigateToScene(\"GameScene\", { levelName: Level11.key }),\n      },\n      {\n        label: `Ki    12     ${await _gems(Level12.key)}     ${await _threats(\n          Level12.key\n        )}     ${await _shrooms(Level12.key)}   ${await _comp(Level12.key)}`,\n        disabled: !((await dbManager.get(Level11.key))?.comp > 0),\n        selectable: true,\n        onSelect: () =>\n          this.scene.navigateToScene(\"GameScene\", { levelName: Level12.key }),\n      },\n      {\n        label: `${translate(\"menu.main.ruins\").padEnd(6, \" \")} 1`,\n        disabled: !((await dbManager.get(Level12.key))?.comp > 0),\n        selectable: true,\n        onSelect: () =>\n          this.scene.navigateToScene(\"GameScene\", {\n            levelName: LevelMaze1.key,\n          }),\n      },\n      {\n        label: `Ki    13     ${await _gems(Level13.key)}     ${await _threats(\n          Level13.key\n        )}     ${await _shrooms(Level13.key)}   ${await _comp(Level13.key)}`,\n        disabled: !((await dbManager.get(LevelMaze1.key))?.comp > 0),\n        selectable: true,\n        onSelect: () =>\n          this.scene.navigateToScene(\"GameScene\", { levelName: Level13.key }),\n      },\n      {\n        label: `Ki    14     ${await _gems(Level14.key)}     ${await _threats(\n          Level14.key\n        )}     ${await _shrooms(Level14.key)}   ${await _comp(Level14.key)}`,\n        disabled: !((await dbManager.get(Level13.key))?.comp > 0),\n        selectable: true,\n        onSelect: () =>\n          this.scene.navigateToScene(\"GameScene\", { levelName: Level14.key }),\n      },\n      {\n        label: `Ki    15     ${await _gems(Level1.key)}     ${await _threats(\n          Level15.key\n        )}     ${await _shrooms(Level15.key)}   ${await _comp(Level15.key)}`,\n        disabled: !((await dbManager.get(Level14.key))?.comp > 0),\n        selectable: true,\n        onSelect: () =>\n          this.scene.navigateToScene(\"GameScene\", { levelName: Level15.key }),\n      },\n      {\n        label: `Ki    16     ${await _gems(Level16.key)}     ${await _threats(\n          Level16.key\n        )}     ${await _shrooms(Level16.key)}   ${await _comp(Level16.key)}`,\n        disabled: !((await dbManager.get(Level15.key))?.comp > 0),\n        selectable: true,\n        onSelect: () =>\n          this.scene.navigateToScene(\"GameScene\", { levelName: Level16.key }),\n      },\n      {\n        label: `Ki    17     ${await _gems(Level17.key)}     ${await _threats(\n          Level17.key\n        )}     ${await _shrooms(Level17.key)}   ${await _comp(Level17.key)}`,\n        disabled: !((await dbManager.get(Level16.key))?.comp > 0),\n        selectable: true,\n        onSelect: () =>\n          this.scene.navigateToScene(\"GameScene\", { levelName: Level17.key }),\n      },\n      {\n        label: `Ki    18     ${await _gems(Level18.key)}     ${await _threats(\n          Level18.key\n        )}     ${await _shrooms(Level18.key)}   ${await _comp(Level18.key)}`,\n        disabled: !((await dbManager.get(Level17.key))?.comp > 0),\n        selectable: true,\n        onSelect: () =>\n          this.scene.navigateToScene(\"GameScene\", { levelName: Level18.key }),\n      },\n      {\n        label: `${translate(\"menu.main.ruins\").padEnd(6, \" \")} 2`,\n        disabled: !((await dbManager.get(Level18.key))?.comp > 0),\n        selectable: true,\n        onSelect: () =>\n          this.scene.navigateToScene(\"GameScene\", {\n            levelName: LevelMaze2.key,\n          }),\n      },\n      {\n        label: `Ki    19     ${await _gems(\n          LevelFinale.key\n        )}     ${await _threats(LevelFinale.key)}     ${await _shrooms(\n          LevelFinale.key\n        )}   ${await _comp(LevelFinale.key)}`,\n        disabled: !((await dbManager.get(LevelMaze2.key))?.comp > 0),\n        selectable: true,\n        onSelect: () =>\n          this.scene.navigateToScene(\"GameScene\", {\n            levelName: LevelFinale.key,\n          }),\n      },\n    ];\n\n    const header = {\n      label: translate(\"menu.main.heading_scrore\"),\n      disabled: false,\n      selectable: false,\n    };\n\n    // last option selected by default\n    this.drawSelectableOptions(\n      header,\n      menuOptions,\n      0, //menuOptions.length - 1,\n      null,\n      null,\n      13\n    );\n  }\n  showInGameMenu() {\n    const menuOptions = [\n      {\n        label: translate(\"menu.main.option_restart_level\"),\n        disabled: false,\n        selectable: true,\n        onSelect: () => this.scene.levels.restart(),\n      },\n      {\n        label: translate(\"menu.main.option_back_to_menu\"),\n        disabled: false,\n        selectable: true,\n        onSelect: () => this.scene.navigateToScene(\"MenuScene\"),\n      },\n    ];\n\n    this.drawSelectableOptions(null, menuOptions, 0, 4, 1);\n  }\n\n  drawSelectableOptions(\n    header,\n    options,\n    initOption,\n    offsetX,\n    offsetY,\n    maxRows = 5\n  ) {\n    this.options = options;\n\n    const FIRST_SELECTABLE_OPTION = options.findIndex(\n      (o) => o.selectable && !o.disabled\n    );\n\n    let currentOption = FIRST_SELECTABLE_OPTION;\n    if (initOption >= maxRows - 1) {\n      // must scroll options\n      if (initOption < this.options.length) {\n        this.scrollIndex = initOption - maxRows + 1;\n        const haveMorePages = this.scrollIndex + maxRows < this.options.length;\n        if (haveMorePages) {\n          this.scrollIndex = initOption - maxRows + 2;\n          // arrow points one before the last\n          currentOption = maxRows - 2;\n        } else {\n          // arrow points the last option\n          currentOption = maxRows - 1;\n        }\n        // and list scrolls up to that option\n      } else {\n        // latest option, arrow should point to that\n        currentOption = maxRows;\n        this.scrollIndex = initOption - maxRows;\n      }\n    } else if (!isNaN(initOption)) {\n      currentOption = initOption;\n    }\n\n    const currentPage = Math.floor(currentOption / maxRows) + 1;\n    let currentIndex = currentOption - Math.floor((currentPage - 1) * maxRows);\n\n    const INIT_POS = currentOption;\n    this.ROW_HEIGHT = UI.pixelToScreen(15);\n    this.MARGIN_LEFT = UI.tileToScreen(offsetX || 1);\n    const ARROW_WIDTH = UI.pixelToScreen(20);\n    const OFFSET_X = this.MARGIN_LEFT - ARROW_WIDTH;\n    this.MARGIN_TOP = UI.tileToScreen(offsetY || 2);\n\n    const arrow = new Arrow(this.scene).getArrowRight();\n    arrow.tilemapLayer.setPosition(\n      OFFSET_X,\n      this.MARGIN_TOP + this.ROW_HEIGHT * INIT_POS - this.ROW_HEIGHT / 2\n    );\n\n    const arrowUp = new Arrow(this.scene).getArrowUp();\n    arrowUp.tilemapLayer.setPosition(\n      UI.tileToScreen(19),\n      this.MARGIN_TOP - this.ROW_HEIGHT\n    );\n    arrowUp.setAlpha(this.scrollIndex === 0 ? 0.5 : 1);\n    arrowUp.setVisible(maxRows < this.options.length);\n\n    const arrowDown = new Arrow(this.scene).getArrowDown();\n    arrowDown.tilemapLayer.setPosition(\n      UI.tileToScreen(19),\n      this.MARGIN_TOP + this.ROW_HEIGHT * maxRows - this.ROW_HEIGHT\n    );\n    arrowDown.setAlpha(\n      this.scrollIndex + maxRows < this.options.length ? 1 : 0.5\n    );\n    arrowDown.setVisible(maxRows < this.options.length);\n\n    if (header) {\n      const label = [\n        ...header.label.split(\"\"),\n        ...Array(Math.max(0, 20 - header.label.length)).fill(\"\"),\n      ].join(\"\");\n      const lines = Math.round(label.length / 20);\n      const txt = this.scene.add\n        .text(\n          this.MARGIN_LEFT,\n          this.ROW_HEIGHT * -lines + this.MARGIN_TOP,\n          label,\n          {\n            fontFamily: \"Emulogic\",\n            fontSize: \"8px\",\n            fill: \"#aee0c8\",\n            fontWeight: \"regular\",\n          }\n        )\n        .setVisible(!header.disabled);\n      txt.displayHeight = 10 * SCALE;\n      txt.alpha = 1;\n      txt.depth = 16;\n      txt.name = \"header_text\";\n      txt.setScale(SCALE);\n      txt.setScrollFactor(0);\n      txt.setShadow(-1, 1);\n    }\n\n    this.drawOptionsPage(this.scrollIndex, maxRows, currentIndex);\n\n    this.scene.input.keyboard.on(\"keydown\", (event) => {\n      // break control for in game pause menu\n      if (!this.isVisible) return false;\n\n      const reducedOptions = this.optionsByPage.filter((o) => !o.disabled);\n      let newIndex = false;\n      if (Controller.isUp(event.key)) {\n        const isNextToFirstOption = currentIndex === 1;\n        const scrollOptions = isNextToFirstOption && this.scrollIndex > 0;\n        if (scrollOptions) {\n          this.scrollIndex--;\n          this.drawOptionsPage(this.scrollIndex, maxRows, currentIndex);\n        } else {\n          // move arrow\n          if (currentIndex > 0) {\n            newIndex = currentIndex - 1;\n          }\n        }\n      }\n\n      const lastAvailableOption = currentIndex === reducedOptions.length - 1;\n      if (Controller.isDown(event.key) && !lastAvailableOption) {\n        const isNextToLastOption = currentIndex === maxRows - 2;\n        const scrollOptions =\n          isNextToLastOption &&\n          this.scrollIndex + maxRows < this.options.length;\n        if (scrollOptions) {\n          this.scrollIndex++;\n          this.drawOptionsPage(this.scrollIndex, maxRows, currentIndex);\n        } else {\n          // move arrow\n          if (currentIndex < reducedOptions.length - 1) {\n            newIndex = currentIndex + 1;\n          }\n        }\n      }\n\n      if (\n        (Controller.isDown(event.key) || Controller.isUp(event.key)) &&\n        newIndex !== false\n      ) {\n        arrow.tilemapLayer.setPosition(\n          OFFSET_X,\n          this.MARGIN_TOP + this.ROW_HEIGHT * newIndex - this.ROW_HEIGHT / 2\n        );\n        const prevSelectedOpt = this.scene.children.getByName(\n          `menu_text_${currentIndex}`\n        );\n        prevSelectedOpt.alpha =\n          prevSelectedOpt.text.slice(-4) === \"100%\" ? 1 : 0.5;\n        prevSelectedOpt.setColor(\"#aee0c8\");\n        const nextSelectedOpt = this.scene.children.getByName(\n          `menu_text_${newIndex}`\n        );\n        nextSelectedOpt.alpha = 1;\n        nextSelectedOpt.setColor(\"#fff\");\n        currentIndex = newIndex;\n      }\n\n      // up down arrows maintenance\n      arrowUp.setAlpha(this.scrollIndex === 0 ? 0.5 : 1);\n      arrowDown.setAlpha(currentIndex === reducedOptions.length - 1 ? 0.5 : 1);\n\n      if (Controller.isConfirm(event.key)) {\n        if (!reducedOptions[currentIndex].disabled) {\n          reducedOptions[currentIndex].onSelect();\n        }\n      }\n    });\n  }\n\n  drawOptionsPage(from, length, current) {\n    // clean up\n    this.scene.children.list\n      .filter((el) => el.name.includes(\"menu_text\"))\n      .forEach((el) => el.destroy());\n    this.optionsByPage = this.options.slice(from, from + length);\n\n    this.optionsByPage.forEach((o, idx) => {\n      const textToPrint = [\n        ...o.label.split(\"\"),\n        ...Array(Math.max(0, 20 - o.label.length)).fill(\"\"),\n      ].join(\"\");\n      const txt = this.scene.add\n        .text(\n          this.MARGIN_LEFT,\n          this.ROW_HEIGHT * idx + this.MARGIN_TOP,\n          textToPrint,\n          {\n            fontFamily: \"Emulogic\",\n            fontSize: \"8px\",\n            fill: \"#aee0c8\",\n            fontWeight: \"regular\",\n          }\n        )\n        .setVisible(!o.disabled);\n      txt.alpha = textToPrint.slice(-4) === \"100%\" || idx === current ? 1 : 0.5;\n      txt.setColor(idx === current ? \"#fff\" : \"#aee0c8\");\n      txt.displayHeight = 10 * SCALE;\n      txt.depth = 16;\n      txt.name = `menu_text_${idx}`;\n      txt.setScale(SCALE);\n      txt.setScrollFactor(0);\n      txt.setShadow(-1, 1);\n    });\n  }\n}\n","import { SCALE, TILE_SIZE } from '../../utils/constants'\nimport * as Controller from '../Controller/Controller'\nimport Arrow from '../DialogArrow'\nimport UI from '../UI'\n\nclass DialogOptions {\n  constructor(scene) {\n    this.scene = scene\n    this.options = []\n    this.menuOptionsContainer = null\n    this.keyDownHandler = this.keyDownHandler.bind(this)\n  }\n\n  mount() {\n    this.menuOptionsContainer = this.scene.add.container(0,0)\n    this.menuOptionsContainer.setScrollFactor(0)\n    this.currentSlot = 0\n    this.scene.input.keyboard.on(\"keydown\", this.keyDownHandler)\n  }\n  \n  unmount() {\n    this.scene.input.keyboard.off(\"keydown\", this.keyDownHandler)\n    this.menuOptionsContainer.destroy()\n    this.arrow?.setVisible(false)\n    this.arrow = null\n  }\n\n  get visible() {\n    return this.menuOptionsContainer.visible\n  }\n\n  show(options = {}) {\n    this.menuOptionsContainer.setVisible(true)\n    this.options = Object.keys(options).reduce((r, k) => {\n      if(options[k] !== null) {\n        r[k] = options[k]\n      }\n      return r\n    }, {})\n    const firstNonEmptySlotKey = Object.keys(this.options).sort()[0]\n    this.currentSlot = this.options[firstNonEmptySlotKey].slot\n    \n    this.menuOptionsContainer.depth = 20\n    this.menuOptionsContainer.setPosition(\n      UI.tileToScreen(4.5),\n      UI.tileToScreen(9),\n    )\n    const drawOption = (label = '', slot = 0) => {\n      const x = UI.tileToScreen(slot === 0 || slot === 1 ? 0 : 9)\n      const y = UI.tileToScreen(slot === 0 || slot === 2 ? 0.25 : 1)\n      const textObj = this.scene.add.text(\n        x,\n        y,\n        label,\n        {\n          fontFamily: 'GameGirl',\n          fontSize: \"8px\",\n          fill: \"#ffffff\",\n          lineSpacing: 2\n        }\n      )\n      textObj.setScale(SCALE)\n      textObj.displayHeight = UI.pixelToScreen(8)\n      textObj.displayWidth = UI.pixelToScreen(8 * label.length)\n      textObj.setShadow(-1,1)\n      this.menuOptionsContainer.add(textObj)\n    }\n    Object.values(this.options).forEach(o => drawOption(o.label, o.slot))\n    // drawOption(\"YES\", 0)\n    // drawOption(\"NO\", 1)\n    // drawOption(\"CLOSE\", 2)\n    // drawOption(\"STORY\", 3)\n    \n    if(!this.arrow) {\n      this.arrow = new Arrow(this.scene).getArrowRight();\n      this.arrow.name = 'menu_arrow'\n      this.arrow.setSize(UI.tileToPixels(0.66), UI.tileToPixels(0.66))\n    }\n    this.setArrowPositionBySlot(this.currentSlot)\n    // hide if no option\n    this.arrow.setVisible(this.options.length !== 0)\n\n  }\n  hide() {\n    while(this.menuOptionsContainer?.list.length) {\n      this.menuOptionsContainer?.list?.forEach(ch => ch.destroy())\n    }\n    // this.menuOptionsContainer?.list?.forEach((ch, idx) => ch.type !== 'Graphics' ? ch.destroy() : null)\n    this.menuOptionsContainer.setVisible(false)\n    this.arrow?.setVisible(false)\n  }\n\n  keyDownHandler(event) {\n    if(!this.menuOptionsContainer.visible) { return }\n    let slot = this.currentSlot\n    if (Controller.isUp( event.key) && (slot === 1 || slot === 3)) {\n      const newSlotIdx = slot - 1\n      if (this.options[`slot${newSlotIdx}`]) {\n        this.currentSlot = newSlotIdx\n      }\n    }\n    if (Controller.isLeft(event.key)) {\n      const newSlotIdx = slot - 2\n      if (this.options[`slot${newSlotIdx}`]) {\n        this.currentSlot = newSlotIdx\n      } else if(this.options[`slot${newSlotIdx - 1}`]) {\n        this.currentSlot = newSlotIdx - 1\n      }\n    }\n    if (Controller.isRight(event.key)) {\n      const newSlotIdx = slot + 2\n      if (this.options[`slot${newSlotIdx}`]) {\n        this.currentSlot = newSlotIdx\n      } else if(this.options[`slot${newSlotIdx + 1}`]) {\n        this.currentSlot = newSlotIdx + 1\n      }\n    }\n    if (Controller.isDown(event.key) && (slot === 0 || slot === 2)) {\n      const newSlotIdx = slot + 1\n      if (this.options[`slot${newSlotIdx}`]) {\n        this.currentSlot = newSlotIdx\n      }\n    }\n\n    if(Controller.isConfirm(event.key)) {\n      const selectedOption = Object.values(this.options).find(o => o.slot === this.currentSlot)\n      selectedOption?.onSelect()\n    } else {\n      this.setArrowPositionBySlot(this.currentSlot)\n    }\n  }\n\n  setArrowPositionBySlot(slot) {\n    const ARROW_OFFSET_X = -UI.tileToScreen(0.5)\n    const ARROW_OFFSET_Y = -UI.tileToScreen(0.4)\n    const x = UI.tileToScreen(slot === 0 || slot === 1 ? 0 : 9)\n    const y = UI.tileToScreen(slot === 0 || slot === 2 ? 0.25 : 1)\n\n    this.arrow.tilemapLayer.setPosition(\n      x + ARROW_OFFSET_X + this.menuOptionsContainer.x,\n      y + ARROW_OFFSET_Y + this.menuOptionsContainer.y\n    )\n  }\n}\n\nexport default DialogOptions\n","import { TILE_SIZE, SCALE } from \"../../utils/constants\";\nimport { translate } from \"../../utils/localization\";\nimport * as Controller from \"../Controller/Controller\";\nimport DialogOptions from \"../DialogOptions\";\nimport UI from \"../UI\";\n\n\nconst TRANSITION_DURATION = 500;\nclass Dialogs {\n  constructor(scene) {\n    this.scene = scene;\n    this.tnContainer = null;\n    this.participantSprites = {};\n    this.conversation = {};\n    this.currentDialogIndex = 0;\n    this.isShowing = false;\n    this.isFullTextDisplayed = false;\n    this.dialogOptions = new DialogOptions(this.scene);\n    this.showDialog = this.showDialog.bind(this);\n    this.handleKeyDown = this.handleKeyDown.bind(this);\n    this.updateCharacterName = this.updateCharacterName.bind(this);\n    this.tIDs = [];\n  }\n\n  mount() {\n    this.tIDs.push(\n      setTimeout(\n        () =>\n          this.scene.input.keyboard.addListener(\"keydown\", this.handleKeyDown),\n        TRANSITION_DURATION\n      )\n    );\n\n    // this.scene.events.on('dialogue:show', this.showDialog)\n    // this.scene.events.on('dialogue:hide', this.hideDialog)\n  }\n  unmount() {\n    this.tIDs.forEach((id) => clearTimeout(id));\n    const l = this.scene.children.getByName(\"layer_hud\");\n    if (l) {\n      l.destroy();\n    }\n    const c = this.scene.children.getByName(\"dialog_tn_container\");\n    if (c) {\n      c.destroy();\n    }\n    const p = this.scene.children.getByName(\"placeholder_text\");\n    if (p) {\n      p.destroy();\n    }\n    if (this.overlay) {\n      this.overlay.destroy();\n    }\n    if (this.topWindowboxing) {\n      this.topWindowboxing.destroy();\n    }\n    if (this.bottomWindowboxing) {\n      this.bottomWindowboxing.destroy();\n    }\n  }\n\n  handleKeyDown(event) {\n    // enter when full text displayed (otherwise is fast forward) as options are hidden (otherwise is option selection)\n    if (\n      Controller.isConfirm(event.key) &&\n      this.isFullTextDisplayed &&\n      !this.dialogOptions.visible\n    ) {\n      if (this.currentDialogIndex < this.conversation.length - 1) {\n        // next page\n        // this.showMessage(this.conversation[++this.currentDialogIndex]);\n      } else {\n        this.scene.events.emit(\"dialogue:hide\");\n        // this.scene.input.keyboard.removeListener('keydown', onNextPage)\n      }\n    }\n  }\n\n  hideDialog() {\n    this.scene.input.keyboard.removeListener(\"keydown\", this.handleKeyDown);\n\n    const retVal = new Promise((res) => {\n      const map = this.scene.children.list.find(\n        (ch) => ch.name === \"layer_hud\"\n      ).tilemap;\n      this.clearText();\n      this.dialogOptions.unmount();\n      this.scene.tweens.add({\n        targets: [map.layers[0].tilemapLayer, this.tnContainer],\n        y: UI.tileToScreen(-7),\n        duration: 500,\n        ease: \"Back.In\",\n        onComplete: () => {\n          // this.scene.levels?.current?.resume()\n          this.isShowing = false;\n          res();\n        },\n      });\n    });\n\n    return retVal;\n  }\n\n  showDialog({ participants, participantNames = [], conversation }) {\n    this.isShowing = true;\n    this.conversation = conversation;\n    this.currentDialogIndex = 0;\n\n    // this.scene.levels?.current?.pause()\n    this.prepareHUD(participants, participantNames);\n    this.prepareText();\n\n    const map = this.scene.children.list.find(\n      (ch) => ch.name === \"layer_hud\"\n    ).tilemap;\n    map.layers[0].tilemapLayer.y = this.tnContainer.y = UI.tileToScreen(-8);\n\n    this.scene.tweens.add({\n      targets: this.overlay,\n      alpha: 0.4,\n      duration: TRANSITION_DURATION,\n      ease: \"Cubic.Out\",\n    });\n    this.scene.tweens.add({\n      targets: [map.layers[0].tilemapLayer, this.tnContainer],\n      y: UI.tileToScreen(4),\n      duration: TRANSITION_DURATION,\n      ease: \"Cubic.Out\",\n      onComplete: () => {\n        this.dialogOptions.mount();\n        // let lastDialog = conversation.shift()\n\n        this.showMessage(this.conversation[this.currentDialogIndex]);\n      },\n    });\n  }\n\n  fullTextDisplayed() {\n    this.isFullTextDisplayed = true;\n    this.scene.events.emit(\"dialogue:message_shown\", this.currentDialogIndex);\n    // show options\n    const onlyOnePageOption = {\n      slot1: {\n        label: translate(\"menu.dialog_options.close\"),\n        slot: 1,\n        onSelect: () => this.scene.events.emit(\"dialogue:hide\"),\n      },\n    };\n    const moreThanOnePageOption = {\n      slot1: {\n        label: translate(\"menu.dialog_options.story\"),\n        slot: 1,\n        // next page\n        onSelect: () =>\n          this.showMessage(this.conversation[++this.currentDialogIndex]),\n      },\n      slot3: {\n        label: translate(\"menu.dialog_options.close\"),\n        slot: 3,\n        onSelect: () => this.scene.events.emit(\"dialogue:hide\"),\n      },\n    };\n    const defaultPageOption = {\n      slot2: {\n        label: translate(\"menu.dialog_options.next\"),\n        slot: 2,\n        // next page\n        onSelect: () =>\n          this.showMessage(this.conversation[++this.currentDialogIndex]),\n      },\n      slot3: {\n        label: translate(\"menu.dialog_options.close\"),\n        slot: 3,\n        onSelect: () => this.scene.events.emit(\"dialogue:hide\"),\n      },\n    };\n    const lastPageOption = {\n      slot3: {\n        label: translate(\"menu.dialog_options.close\"),\n        slot: 3,\n        onSelect: () => this.scene.events.emit(\"dialogue:hide\"),\n      },\n    };\n    const options = {\n      ...(this.conversation.length === 1 ? onlyOnePageOption : {}),\n      ...(this.conversation.length > 1 && this.currentDialogIndex === 0\n        ? moreThanOnePageOption\n        : {}),\n      ...(this.currentDialogIndex > 0 &&\n      this.currentDialogIndex < this.conversation.length - 1\n        ? defaultPageOption\n        : {}),\n      ...(this.currentDialogIndex === this.conversation.length - 1 &&\n      this.conversation.length > 1\n        ? lastPageOption\n        : {}),\n      ...(this.conversation[this.currentDialogIndex].options || {}),\n    };\n    this.dialogOptions.show(options);\n  }\n\n  showMessage(message) {\n    this.clearText();\n    this.dialogOptions.hide();\n    this.writeText(message.text);\n\n    const c = this.scene.children.getByName(\"dialog_tn_container\");\n    Object.keys(this.participantSprites).forEach((k) => {\n      if (k === message.who) {\n        // participantSprites[k].alpha = 1\n        this.participantSprites[k].clearTint();\n        c.list.find((el) => el.name === `char_${k}_text_to_remove`).clearTint();\n      } else {\n        // participantSprites[k].alpha = 0.5\n        this.participantSprites[k].setTint(0x333333);\n        const txt = c.list.find((el) => el.name === `char_${k}_text_to_remove`);\n        txt?.setTint(0x999999);\n      }\n    });\n  }\n\n  prepareHUD(participants, participantNames) {\n    this.overlay = this.scene.add.graphics();\n    this.overlay.clear();\n    this.overlay.fillStyle(0x000000, 1);\n    this.overlay.fillRect(0, 0, UI.tileToScreen(20), UI.tileToScreen(20));\n    this.overlay.alpha = 0;\n    this.overlay.setScrollFactor(0);\n\n    // Creating a blank tilemap with dimensions matching the dungeon\n    const map = this.scene.make.tilemap({\n      tileWidth: 20,\n      tileHeight: 20,\n      width: 20,\n      height: 20,\n    });\n\n    // addTilesetImage: function (tilesetName, key, tileWidth, tileHeight, tileMargin, tileSpacing, gid)\n    let tileset = map.addTilesetImage(\"hud-tiles\", \"hud-tiles\", 20, 20, 1, 2);\n\n    let layer = map.createBlankLayer(\"layer_hud\", tileset);\n    layer.name = \"layer_hud\";\n    layer.depth = 15;\n    layer.setScrollFactor(0);\n    layer.setScale(SCALE);\n\n    // Fill with black tiles\n    // layer.fill(1)\n    let p, tn, charName;\n    this.tnContainer = this.scene.add.container(0, 0);\n    this.tnContainer.depth = 20;\n    this.tnContainer.name = \"dialog_tn_container\";\n    // this.tnContainer.setScale(SCALE)\n    // this.tnContainer.y = -this.scene.renderer.height/2\n    switch (participants.length) {\n      case 2:\n        if (participants[1]) {\n          p = participants[1];\n          tn = this.scene.add\n            .sprite(0, 0)\n            .play(p)\n            .setOrigin(0, 0.25)\n            .setScale(SCALE);\n          tn.name = `${p}_tn_to_remove`;\n          tn.x = UI.tileToScreen(17) + UI.pixelToScreen(10);\n          tn.y = UI.tileToScreen(3) + UI.pixelToScreen(2);\n          tn.setScrollFactor(0);\n          tn.setFlipX(true);\n          this.tnContainer.add(tn);\n          this.participantSprites[p] = tn;\n        }\n\n        /// TN MIDDLE RIGHT\n        Dialogs.drawWindow(map, { w: 3, h: 2, x: 17, y: 3 });\n        // NAME\n        charName = this.scene.add\n          .text(\n            tn.x - UI.tileToScreen(2) * 0.25,\n            tn.y + UI.tileToScreen(2) * 0.8,\n            participantNames[1] || \"???\",\n            {\n              fontFamily: \"GameGirl\",\n              fill: \"#ffffff\",\n              align: \"right\",\n            }\n          )\n          .setScale(SCALE / 2)\n          .setScrollFactor(0);\n        charName.name = `char_${p}_text_to_remove`;\n        this.tnContainer.add(charName);\n      // eslint-disable-next-line no-fallthrough\n      case 1:\n        if (participants[0]) {\n          p = participants[0];\n          tn = this.scene.add\n            .sprite(0, 0)\n            .play(p)\n            .setOrigin(0, 0.25)\n            .setScale(SCALE);\n          tn.name = `${p}_tn_to_remove`;\n          tn.x = UI.tileToScreen(0) + UI.pixelToScreen(12);\n          tn.y = UI.tileToScreen(3) + UI.pixelToScreen(2);\n          tn.setScrollFactor(0);\n          this.tnContainer.add(tn);\n          this.participantSprites[p] = tn;\n        }\n        /// TN MIDDLE LEFT\n        Dialogs.drawWindow(map, { w: 3, h: 2, x: 0, y: 3 });\n        // NAME\n        charName = this.scene.add\n          .text(\n            tn.x - UI.tileToScreen(2) * 0.25,\n            tn.y + UI.tileToScreen(2) * 0.8,\n            participantNames[0] || \"???\",\n            {\n              fontFamily: \"GameGirl\",\n              fill: \"#ffffff\",\n              align: \"right\",\n            }\n          )\n          .setScale(SCALE / 2)\n          .setScrollFactor(0);\n        charName.name = `char_${p}_text_to_remove`;\n        this.tnContainer.add(charName);\n        break;\n      case 4:\n        /// TN LOWER RIGHT\n        if (participants[3]) {\n          p = participants[3];\n          tn = this.scene.add\n            .sprite(0, 0)\n            .play(p)\n            .setOrigin(0, 0.25)\n            .setScale(SCALE);\n          tn.name = `${p}_tn_to_remove`;\n          tn.x = UI.tileToScreen(17) + UI.pixelToScreen(10);\n          tn.y = UI.tileToScreen(4) + UI.pixelToScreen(2);\n          tn.setScrollFactor(0);\n          tn.setFlipX(true);\n          this.tnContainer.add(tn);\n          this.participantSprites[p] = tn;\n        }\n        Dialogs.drawWindow(map, { w: 3, h: 2, x: 17, y: 4 });\n        // NAME\n        charName = this.scene.add\n          .text(\n            tn.x - UI.tileToScreen(2) * 0.25,\n            tn.y + UI.tileToScreen(2) * 0.8,\n            participantNames[3] || \"???\",\n            {\n              fontFamily: \"GameGirl\",\n              fill: \"#ffffff\",\n              align: \"right\",\n            }\n          )\n          .setScale(SCALE / 2)\n          .setScrollFactor(0);\n        charName.name = `char_${p}_text_to_remove`;\n        this.tnContainer.add(charName);\n      // eslint-disable-next-line no-fallthrough\n      case 3:\n        /// TN UPPER LEFT\n        if (participants[0]) {\n          p = participants[0];\n          tn = this.scene.add\n            .sprite(0, 0)\n            .play(p)\n            .setOrigin(0, 0.25)\n            .setScale(SCALE);\n          tn.name = `${p}_tn_to_remove`;\n          tn.x = UI.tileToScreen(0) + UI.pixelToScreen(12);\n          tn.y = UI.tileToScreen(0) + UI.pixelToScreen(2);\n          tn.setScrollFactor(0);\n          this.tnContainer.add(tn);\n          this.participantSprites[p] = tn;\n        }\n        Dialogs.drawWindow(map, { w: 3, h: 2, x: 0, y: 0 });\n        // NAME\n        charName = this.scene.add\n          .text(\n            tn.x - UI.tileToScreen(2) * 0.25,\n            tn.y + UI.tileToScreen(2) * 0.8,\n            participantNames[0] || \"???\",\n            {\n              fontFamily: \"GameGirl\",\n              fill: \"#ffffff\",\n              align: \"right\",\n            }\n          )\n          .setScale(SCALE / 2)\n          .setScrollFactor(0);\n        charName.name = `char_${p}_text_to_remove`;\n        this.tnContainer.add(charName);\n\n        /// TN BOTTOM LEFT\n        if (participants[2]) {\n          p = participants[2];\n          tn = this.scene.add\n            .sprite(0, 0)\n            .play(p)\n            .setOrigin(0, 0.25)\n            .setScale(SCALE);\n          tn.name = `${p}_tn_to_remove`;\n          tn.x = UI.tileToScreen(0) + UI.pixelToScreen(12);\n          tn.y = UI.tileToScreen(4) + UI.pixelToScreen(2);\n          tn.setScrollFactor(0);\n          this.tnContainer.add(tn);\n          this.participantSprites[p] = tn;\n        }\n\n        Dialogs.drawWindow(map, { w: 3, h: 2, x: 0, y: 4 });\n        // NAME\n        charName = this.scene.add\n          .text(\n            tn.x - UI.tileToScreen(2) * 0.25,\n            tn.y + UI.tileToScreen(2) * 0.8,\n            participantNames[2] || \"???\",\n            {\n              fontFamily: \"GameGirl\",\n              fill: \"#ffffff\",\n              align: \"right\",\n            }\n          )\n          .setScale(SCALE / 2)\n          .setScrollFactor(0);\n        charName.name = `char_${p}_text_to_remove`;\n        this.tnContainer.add(charName);\n\n        /// TN UPPER RIGHT\n        if (participants[1]) {\n          p = participants[1];\n          tn = this.scene.add\n            .sprite(0, 0)\n            .play(p)\n            .setOrigin(0, 0.25)\n            .setScale(SCALE);\n          tn.name = `${p}_tn_to_remove`;\n          tn.x = UI.tileToScreen(17) + UI.pixelToScreen(10);\n          tn.y = UI.tileToScreen(0) + UI.pixelToScreen(2);\n          tn.setScrollFactor(0);\n          tn.setFlipX(true);\n          this.tnContainer.add(tn);\n          this.participantSprites[p] = tn;\n        }\n        Dialogs.drawWindow(map, { w: 3, h: 2, x: 17, y: 0 });\n        // NAME\n        charName = this.scene.add\n          .text(\n            tn.x - UI.tileToScreen(2) * 0.25,\n            tn.y + UI.tileToScreen(2) * 0.8,\n            participantNames[1] || \"???\",\n            {\n              fontFamily: \"GameGirl\",\n              fill: \"#ffffff\",\n              align: \"right\",\n            }\n          )\n          .setScale(SCALE / 2)\n          .setScrollFactor(0);\n        charName.name = `char_${p}_text_to_remove`;\n        this.tnContainer.add(charName);\n        break;\n      default:\n    }\n\n    Dialogs.drawWindow(map, { w: 14, h: 7, x: 3, y: 0 });\n  }\n\n  updateCharacterName(key = \"closeUp_Mary\", name = \"???\") {\n    const c = this.scene.children.getByName(\"dialog_tn_container\");\n    const charName = c.list.find(\n      (el) => el.name === `char_${key}_text_to_remove`\n    );\n    charName.setText(name);\n  }\n\n  prepareText() {\n    const textObj = this.scene.add.text(\n      UI.tileToScreen(3.5),\n      UI.tileToScreen(4.5),\n      \" \",\n      {\n        fontFamily: \"GameGirl\",\n        //  fontSize: \"8px\",\n        fill: \"#ffffff\",\n        lineSpacing: 2,\n        // wordWrap: { width: MAX_CHARS_BY_LINE * 8 }\n      }\n    );\n    textObj.setScrollFactor(0);\n    textObj.displayHeight = 10 * SCALE;\n    textObj.displayWidth = 10 * SCALE;\n    textObj.name = \"placeholder_text\";\n    textObj.depth = 20;\n    textObj.setShadow(-1, 1);\n  }\n\n  writeText(text) {\n    const charPlaceholder = this.scene.children.getByName(\"placeholder_text\");\n    this.isFullTextDisplayed = false;\n    // ===========\n    // prepare one big text with \\n by line of 26 char length\n    const MAX_CHARS_BY_LINE = 26;\n    const fullText = text.join(\"\"); // legacy for texts as array\n    const paragraphs = fullText.split(\"\\n\"); // respect \\n into text\n    const lines = [];\n    while (paragraphs.length) {\n      let line = \"\"; // new line\n      const paragraphWords = paragraphs.shift().split(\" \");\n      while (paragraphWords.length) {\n        const prevLine = line; // save current line\n        const nextWord = paragraphWords.shift();\n        line += nextWord + \" \"; // build new line\n        if (line.trim().length > MAX_CHARS_BY_LINE) {\n          // new line is bigger than mx char by line\n          lines.push(prevLine); // store prev line\n          paragraphWords.unshift(nextWord); // restore last word for next line\n          line = \"\";\n        }\n      }\n      lines.push(line);\n    }\n    let letters = lines.join(\"\\n\");\n    // ===========\n\n    let timerId;\n    const fastForward = () => {\n      clearTimeout(timerId);\n      if (letters.length) {\n        putLetter(letters.length);\n      }\n    };\n    const putLetter = (len = 1) => {\n      const char = letters.substring(0, len);\n      letters = letters.substring(len);\n      charPlaceholder.setText(charPlaceholder.text + char);\n      if (letters.length) {\n        timerId = setTimeout(\n          () => putLetter(1),\n          [\".\", \"!\", \"?\"].includes(char) ? 500 : 50\n        );\n        this.tIDs.push(timerId);\n      } else {\n        this.scene.input.keyboard.off(\"keyup\", fastForward);\n        this.fullTextDisplayed();\n      }\n    };\n    putLetter();\n    this.tIDs.push(\n      setTimeout(\n        () =>\n          this.scene.input.keyboard.once(\"keyup\", (event) => {\n            if (Controller.isConfirm(event.key) || Controller.isCancel(event.key)) {\n              fastForward();\n            }\n          }),\n        500\n      )\n    );\n  }\n\n  clearText() {\n    this.scene.children.getByName(\"placeholder_text\").setText(\"\");\n    // this.scene.children.list.filter(el => el.name === 'placeholder_text').forEach(el => el.setText(\"\"))\n  }\n\n  static drawWindow(map, { w, h, x, y }) {\n    const THEME = 6;\n    const TILES = {\n      TOP_LEFT: 0 + THEME,\n      TOP_MIDDLE: 1 + THEME,\n      TOP_RIGHT: 2 + THEME,\n      LEFT: 10 + THEME,\n      MIDDLE: 11 + THEME,\n      RIGHT: 12 + THEME,\n      BOTTOM_LEFT: 20 + THEME,\n      BOTTOM_MIDDLE: 21 + THEME,\n      BOTTOM_RIGHT: 22 + THEME,\n    };\n    for (let j = 0; j < h; j++) {\n      for (let i = 0; i < w; i++) {\n        let tile;\n        if (i === 0 && j === 0) {\n          tile = TILES.TOP_LEFT;\n        }\n        if (i > 0 && i < w - 1 && j === 0) {\n          tile = TILES.TOP_MIDDLE;\n        }\n        if (i === w - 1 && j === 0) {\n          tile = TILES.TOP_RIGHT;\n        }\n\n        if (i === 0 && j > 0 && j < h - 1) {\n          tile = TILES.LEFT;\n        }\n        if (i > 0 && i < w - 1 && j > 0 && j < h - 1) {\n          tile = TILES.MIDDLE;\n        }\n        if (i === w - 1 && j > 0 && j < h - 1) {\n          tile = TILES.RIGHT;\n        }\n\n        if (i === 0 && j === h - 1) {\n          tile = TILES.BOTTOM_LEFT;\n        }\n        if (i > 0 && i < w - 1 && j === h - 1) {\n          tile = TILES.BOTTOM_MIDDLE;\n        }\n        if (i === w - 1 && j === h - 1) {\n          tile = TILES.BOTTOM_RIGHT;\n        }\n\n        map.putTileAt(tile, i + x, j + y);\n      }\n    }\n  }\n}\n\nexport default Dialogs;\n","import { SCALE, SCALE_V, TILE_SIZE } from \"../utils/constants\";\nimport UIMenus from \"./UIMenus\";\nimport Dialogs from \"./Dialogs\";\nimport dbManager from \"../utils/dbManager\";\nimport * as Controller from \"./Controller/Controller\";\n\nexport default class UI {\n  constructor(scene, noScores) {\n    this.scene = scene;\n    this.inGameMenu = null;\n    this.setUpPuseResumeGame();\n    this.mushroomsIcon = null;\n    this.diamondsIcon = null;\n\n    this.scene.events.off(\"game_paused\");\n    this.scene.events.on(\"game_paused\", () => this.showPauseMenu());\n    this.scene.events.off(\"game_resumed\");\n    this.scene.events.on(\"game_resumed\", () => this.hidePauseMenu());\n\n    const rockHit1 = this.scene.sound.add(\"rock_hit\");\n    const rockHit2 = this.scene.sound.add(\"rock_hit2\");\n    const rockHit3 = this.scene.sound.add(\"rock_hit3\");\n    const rockHit = [rockHit1, rockHit2, rockHit3];\n    this.scene.events.off(\"sounds:rock_hit_hard\");\n    this.scene.events.on(\"sounds:rock_hit_hard\", () =>\n      rockHit[Math.trunc(Math.random() * 10) % 3].play()\n    );\n\n    const rockSlideHard1 = this.scene.sound.add(\"rock_slide_hard1\");\n    const rockSlideHard2 = this.scene.sound.add(\"rock_slide_hard2\");\n    const rockSlideHard3 = this.scene.sound.add(\"rock_slide_hard3\");\n    const rockSlideHard = [rockSlideHard1, rockSlideHard2, rockSlideHard3];\n    this.scene.events.off(\"sounds:rock_slide_hard\");\n    this.scene.events.on(\"sounds:rock_slide_hard\", () =>\n      rockSlideHard[Math.trunc(Math.random() * 10) % 3].play()\n    );\n\n    const rockSlideSoft1 = this.scene.sound.add(\"rock_slide_soft1\");\n    const rockSlideSoft2 = this.scene.sound.add(\"rock_slide_soft2\");\n    const rockSlideSoft3 = this.scene.sound.add(\"rock_slide_soft3\");\n    const rockSlideSoft = [rockSlideSoft1, rockSlideSoft2, rockSlideSoft3];\n    this.scene.events.off(\"sounds:rock_slide_soft\");\n    this.scene.events.on(\"sounds:rock_slide_soft\", () =>\n      rockSlideSoft[Math.trunc(Math.random() * 10) % 3].play()\n    );\n\n    const rockHitSoft = this.scene.sound.add(\"rock_hit_soft\");\n    this.scene.events.off(\"sounds:rock_hit_soft\");\n    this.scene.events.on(\"sounds:rock_hit_soft\", () => rockHitSoft.play());\n\n    const gemHit = this.scene.sound.add(\"gem_hit\");\n    this.scene.events.off(\"sounds:gem_hit\");\n    this.scene.events.on(\"sounds:gem_hit\", () => gemHit.play());\n\n    const explosion = this.scene.sound.add(\"explosion\");\n    this.scene.events.off(\"sounds:explosion\");\n    this.scene.events.on(\"sounds:explosion\", () => explosion.play());\n\n    const shroomPick = this.scene.sound.add(\"shroom_pick\");\n    this.scene.events.off(\"sounds:shroom_pick\");\n    this.scene.events.on(\"sounds:shroom_pick\", () => shroomPick.play());\n\n    const gemPick = this.scene.sound.add(\"gem_pick\");\n    this.scene.events.off(\"sounds:gem_pick\");\n    this.scene.events.on(\"sounds:gem_pick\", () => gemPick.play());\n\n    const coinPick = this.scene.sound.add(\"coin\");\n    this.scene.events.off(\"sounds:coin\");\n    this.scene.events.once(\"sounds:coin\", () => coinPick.play());\n\n    const clearHit1 = this.scene.sound.add(\"clear_hit1\");\n    const clearHit2 = this.scene.sound.add(\"clear_hit2\");\n    const clearHit3 = this.scene.sound.add(\"clear_hit3\");\n    const clearHit = [clearHit1, clearHit2, clearHit3];\n    this.scene.events.off(\"sounds:clear_hit\");\n    this.scene.events.on(\"sounds:clear_hit\", () =>\n      clearHit[Math.trunc(Math.random() * 10) % 3].play()\n    );\n\n    const deathByRockHit = this.scene.sound.add(\"death_by_rock\");\n    this.scene.events.off(\"sounds:death_by_rock_hit\");\n    this.scene.events.on(\"sounds:death_by_rock_hit\", () =>\n      deathByRockHit.play()\n    );\n\n    const levelComplete = this.scene.sound.add(\"level_complete\");\n    this.scene.events.off(\"sounds:level_complete\");\n    this.scene.events.on(\"sounds:level_complete\", () => levelComplete.play());\n    if (!noScores) {\n      this.drawScores();\n    }\n\n    this.dialogs = new Dialogs(this.scene);\n    this.scene.events.off(\"dialogue:show\");\n    this.scene.events.on(\"dialogue:show\", (props) => {\n      this.scene.levels?.current?.pause();\n      this.dialogs.mount();\n      this.dialogs.showDialog(props);\n    });\n    this.scene.events.off(\"dialogue:updateCharacterName\");\n    this.scene.events.on(\n      \"dialogue:updateCharacterName\",\n      async ({ key, name }) => {\n        this.dialogs.updateCharacterName(key, name);\n      }\n    );\n    this.scene.events.off(\"dialogue:nextPage\");\n    this.scene.events.on(\"dialogue:nextPage\", async (skipAmount = 0) => {\n      // console.log(this.dialogs.currentDialogIndex, this.dialogs.conversation);\n      this.dialogs.currentDialogIndex += skipAmount;\n      this.dialogs.showMessage(\n        this.dialogs.conversation[++this.dialogs.currentDialogIndex]\n      );\n    });\n    this.scene.events.off(\"dialogue:hide\");\n    this.scene.events.on(\"dialogue:hide\", async () => {\n      await this.dialogs.hideDialog();\n      this.scene.events.emit(\"dialogue:hidden\");\n      this.dialogs.unmount();\n      this.scene.levels?.current?.resume();\n    });\n\n    this.topWindowboxing = this.scene.add.graphics();\n    this.topWindowboxing.fillStyle(0x000000, 1);\n    this.topWindowboxing.fillRect(\n      0,\n      -UI.tileToScreen(9),\n      UI.tileToScreen(20),\n      UI.tileToScreen(10)\n    );\n    // hidden\n    this.topWindowboxing.y = -UI.tileToScreen(1.5);\n    this.topWindowboxing.setScrollFactor(0);\n    this.topWindowboxing.depth = 110;\n\n    const tilesByHeight =\n      document.querySelector(\"canvas\").height / (TILE_SIZE * SCALE);\n    // console.log({ tilesByHeight });\n    this.bottomWindowboxing = this.scene.add.graphics();\n    this.bottomWindowboxing.fillStyle(0x000000, 1);\n    this.bottomWindowboxing.fillRect(\n      0,\n      UI.tileToScreen(tilesByHeight - 1),\n      UI.tileToScreen(20),\n      UI.tileToScreen(10)\n    );\n    // hidden\n    this.bottomWindowboxing.y = UI.tileToScreen(1.5);\n    this.bottomWindowboxing.setScrollFactor(0);\n    this.bottomWindowboxing.depth = 110;\n  }\n\n  setWindowBoxBehaviour() {\n    const layerScores = this.scoresLayer;\n    // console.log(this.scene.children, layerScores);\n    if (!layerScores) {\n      return false;\n    }\n    const originalValues = {\n      topY: this.topWindowboxing?.y || 0,\n      botY: this.bottomWindowboxing?.y || 0,\n      lsY: layerScores?.y,\n      dsY: this.diamondsScore?.y || 0,\n      diY: this.diamondsIcon?.y || 0,\n      miY: this.mushroomsIcon?.y || 0,\n      msY: this.mushroomsScore?.y || 0,\n      dsgY: this.diamondsScoreGoal?.y || 0,\n      pbarY: 0, // boss progress bar\n      pboxY: 0, // boss progress box\n    };\n\n    this.scene.events.off(\"player:disconnected\");\n    this.scene.events.on(\"player:disconnected\", () => {\n      const targetObj = {\n        y: 0,\n      };\n      originalValues.topY = this.topWindowboxing?.y || 0;\n      originalValues.botY = this.bottomWindowboxing?.y || 0;\n      originalValues.dsgY = this.diamondsScoreGoal?.y || 0;\n      originalValues.dsY = this.diamondsScore?.y || 0;\n      const circularProgress =\n        this.scene.children.getByName(\"circularProgress\");\n      const progressBar1 = this.scene.children.getByName(\"progressBar1\");\n      const progressBox1 = this.scene.children.getByName(\"progressBox1\");\n      const progressBar2 = this.scene.children.getByName(\"progressBar2\");\n      const progressBox2 = this.scene.children.getByName(\"progressBox2\");\n      const progressBar3 = this.scene.children.getByName(\"progressBar3\");\n      const progressBox3 = this.scene.children.getByName(\"progressBox3\");\n      originalValues.circY =\n        circularProgress?.y || UI.tileToPixels(4);\n      originalValues.pbar1Y = progressBar1?.y || UI.tileToPixels(3.75);\n      originalValues.pbox1Y = progressBox1?.y || UI.tileToPixels(3.75);\n      originalValues.pbar2Y = progressBar2?.y || UI.tileToPixels(3.75);\n      originalValues.pbox2Y = progressBox2?.y || UI.tileToPixels(3.75);\n      originalValues.pbar3Y = progressBar3?.y || UI.tileToPixels(3.75);\n      originalValues.pbox3Y = progressBox3?.y || UI.tileToPixels(3.75);\n      this.scene.tweens.add({\n        targets: targetObj,\n        y: UI.tileToPixels(5),\n        ease: \"Linear\",\n        duration: 250,\n        onUpdate: (tween, target) => {\n          this.topWindowboxing.y = originalValues.topY + target.y;\n          this.bottomWindowboxing.y = originalValues.botY - target.y;\n          layerScores.y = originalValues.lsY - target.y;\n          this.diamondsScore &&\n            (this.diamondsScore.y = originalValues.dsY - target.y);\n          this.diamondsIcon &&\n            (this.diamondsIcon.y = originalValues.diY - target.y);\n          this.mushroomsIcon &&\n            (this.mushroomsIcon.y = originalValues.miY - target.y);\n          this.mushroomsScore &&\n            (this.mushroomsScore.y = originalValues.msY - target.y);\n          this.diamondsScoreGoal &&\n            (this.diamondsScoreGoal.y = originalValues.dsgY - target.y);\n          circularProgress &&\n            (circularProgress.y = originalValues.circY - target.y);\n          progressBar1 && (progressBar1.y = originalValues.pbar1Y - target.y);\n          progressBox1 && (progressBox1.y = originalValues.pbox1Y - target.y);\n          progressBar2 && (progressBar2.y = originalValues.pbar2Y - target.y);\n          progressBox2 && (progressBox2.y = originalValues.pbox2Y - target.y);\n          progressBar3 && (progressBar3.y = originalValues.pbar3Y - target.y);\n          progressBox3 && (progressBox3.y = originalValues.pbox3Y - target.y);\n        },\n      });\n    });\n    this.scene.events.off(\"player:reconnected\");\n    this.scene.events.on(\"player:reconnected\", () => {\n      const layerScores = this.scene.children.getByName(\"layer_scores\");\n      const targetObj = {\n        y: UI.tileToPixels(5),\n      };\n\n      const circularProgress =\n        this.scene.children.getByName(\"circularProgress\");\n      const progressBar1 = this.scene.children.getByName(\"progressBar1\");\n      const progressBox1 = this.scene.children.getByName(\"progressBox1\");\n      const progressBar2 = this.scene.children.getByName(\"progressBar2\");\n      const progressBox2 = this.scene.children.getByName(\"progressBox2\");\n      const progressBar3 = this.scene.children.getByName(\"progressBar3\");\n      const progressBox3 = this.scene.children.getByName(\"progressBox3\");\n\n      this.scene.tweens.add({\n        targets: targetObj,\n        y: 0,\n        ease: \"Linear\",\n        duration: 1000,\n        onUpdate: (tween, target) => {\n          this.topWindowboxing.y = originalValues.topY - (1 - target.y);\n          this.bottomWindowboxing.y = originalValues.botY + (1 - target.y);\n          layerScores.y = originalValues.lsY - target.y;\n          this.diamondsScore &&\n            (this.diamondsScore.y = originalValues.dsY - target.y);\n          this.diamondsIcon &&\n            (this.diamondsIcon.y = originalValues.diY - target.y);\n          this.mushroomsIcon &&\n            (this.mushroomsIcon.y = originalValues.miY - target.y);\n          this.mushroomsScore &&\n            (this.mushroomsScore.y = originalValues.msY - target.y);\n          this.diamondsScoreGoal &&\n            (this.diamondsScoreGoal.y = originalValues.dsgY - target.y);\n          circularProgress &&\n            (circularProgress.y = originalValues.circY - target.y);\n          progressBar1 && (progressBar1.y = originalValues.pbar1Y - target.y);\n          progressBox1 && (progressBox1.y = originalValues.pbox1Y - target.y);\n          progressBar2 && (progressBar2.y = originalValues.pbar2Y - target.y);\n          progressBox2 && (progressBox2.y = originalValues.pbox2Y - target.y);\n          progressBar3 && (progressBar3.y = originalValues.pbar3Y - target.y);\n          progressBox3 && (progressBox3.y = originalValues.pbox3Y - target.y);\n        },\n      });\n    });\n  }\n\n  destroy() {\n    this.mushroomsIcon?.destroy();\n    this.diamondsIcon?.destroy();\n    this.mushroomsScore?.destroy();\n    this.diamondsScore?.destroy();\n    this.diamondsScoreGoal?.destroy();\n    this.scene.events.off(\"score:diamond_goal\");\n    this.scene.events.off(\"score:diamond_set\");\n    this.scene.events.off(\"score:diamond_goal_set\");\n    this.scene.events.off(\"score:mushroom_collected\");\n    this.scene.events.off(\"score:mushroom_given\");\n  }\n  onResize() {\n    const layer = this.scene.children.getByName(\"layer_scores\");\n    if (!layer) return false;\n\n    this.mushroomsIcon\n      .setPosition(UI.tileToScreen(18), UI.tileToScreen(1))\n      .setScale(SCALE * 1.5);\n\n    const shroomsAmount = window.localStorage.getItem(\"shrooms\") || \"0\";\n    this.mushroomsScore?.setPosition(\n      UI.tileToScreen(20) - this.MT_MARGIN_RIGHT,\n      // map.tileToWorldY(1)\n      UI.tileToScreen(1)\n    );\n    this.mushroomsScore?.setScrollFactor(0);\n    this.mushroomsScore && (this.mushroomsScore.displayHeight = 10 * SCALE);\n    this.mushroomsScore &&\n      (this.mushroomsScore.displayWidth = shroomsAmount.length * 10 * SCALE);\n\n    this.diamondsIcon\n      .setPosition(UI.tileToScreen(1) + this.D_MARGIN_LEFT, UI.tileToScreen(1))\n      .setScale(SCALE * 1.5);\n\n    this.diamondsScoreGoal?.setPosition(\n      UI.tileToScreen(3) - this.DT_MARGIN_RIGHT,\n      UI.tileToScreen(1)\n    );\n    this.diamondsScoreGoal &&\n      (this.diamondsScoreGoal.displayHeight = 8 * SCALE);\n    this.diamondsScoreGoal &&\n      (this.diamondsScoreGoal.displayWidth = 2 * 8 * SCALE);\n\n    this.diamondsScore?.setPosition(\n      UI.tileToScreen(3) - this.DT_MARGIN_RIGHT,\n      UI.tileToScreen(1) - this.diamondsScoreGoal?.test !== \"00\"\n        ? UI.tileToScreen(0.5)\n        : 0\n    );\n    this.diamondsScore && (this.diamondsScore.displayHeight = 10 * SCALE);\n    this.diamondsScore &&\n      (this.diamondsScore.displayWidth =\n        this.diamondsAmount.length * 10 * SCALE);\n  }\n\n  hidePauseMenu() {\n    const layer = this.scene.children.list.find(\n      (el) => el.name === \"layer_pause_nenu\"\n    );\n    if (layer) {\n      layer.setVisible(false);\n      // flag to avoid options to work after menu is hidden\n      this.inGameMenu.isVisible = false;\n    }\n    this.scene.children.list\n      .filter((el) => el.name.includes(\"menu_text\"))\n      .forEach((el) => el.destroy());\n    this.scene.children.list\n      .filter((el) => el.name.includes(\"_tn_to_remove\"))\n      .forEach((el) => el.destroy());\n\n    this.scene.children.list\n      .filter((el) => el.name.includes(\"layer_arrow\"))\n      .forEach((el) => el.destroy());\n    // this.scene.children.list.filter(el => el.name.includes('layer_pause_nenu')).forEach(el => el.destroy())\n  }\n\n  preapreScoreTilemap() {\n    // Creating a blank tilemap with dimensions matching the dungeon\n    const map = this.scene.make.tilemap({\n      tileWidth: 20,\n      tileHeight: 20,\n      width: 20,\n      height: 20,\n    });\n    // addTilesetImage: function (tilesetName, key, tileWidth, tileHeight, tileMargin, tileSpacing, gid)\n    map.addTilesetImage(\"hud-tiles\", \"hud-tiles\", 20, 20, 1, 2);\n\n    let scoreTileset = map.addTilesetImage(\n      \"hud-tiles\",\n      \"hud-tiles\",\n      20,\n      20,\n      1,\n      2\n    );\n\n    let scoresLayer = map.createBlankLayer(\"layer_scores\", scoreTileset);\n    scoresLayer.name = \"layer_scores\";\n    scoresLayer.depth = 6;\n    scoresLayer.setScrollFactor(0);\n\n    scoresLayer.setScale(SCALE);\n    this.scoresLayer = scoresLayer;\n    // console.log(this.scoresLayer);\n\n    return map;\n  }\n\n  drawKiBossScores() {\n    const map = this.preapreScoreTilemap();\n\n    // LEFT\n    Dialogs.drawWindow(map, { w: 3, h: 2, x: 0, y: 0 });\n\n    // RIGHT\n    Dialogs.drawWindow(map, { w: 3, h: 2, x: 17, y: 0 });\n\n    const msh = this.scene.add\n      .sprite(map.tileToWorldX(18), map.tileToWorldY(1))\n      .play(\"closeUp_Abushgidim\")\n      .setOrigin(0.5, 0.5)\n      .setScale(SCALE());\n    msh.depth = 16;\n    msh.name = \"score_right_img\";\n    msh.setScrollFactor(0);\n    this.mushroomsIcon = msh;\n\n    const D_MARGIN_LEFT_PX = -2; //px\n    this.D_MARGIN_LEFT = D_MARGIN_LEFT_PX * SCALE;\n    const diamond = this.scene.add\n      .sprite(\n        map.tileToWorldX(1) + this.D_MARGIN_LEFT,\n        map.tileToWorldY(1) + 2 * SCALE()\n      )\n      .play(\"closeUp_tentacles\")\n      .setOrigin(0.5, 0.5)\n      .setScale(SCALE());\n    diamond.depth = 16;\n    diamond.name = \"score_left_img\";\n    diamond.setScrollFactor(0);\n    this.diamondsIcon = diamond;\n\n    this.setWindowBoxBehaviour();\n  }\n  async drawScores() {\n    const map = this.preapreScoreTilemap();\n\n    // LEFT\n    Dialogs.drawWindow(map, { w: 3, h: 2, x: 0, y: 0 });\n\n    // RIGHT\n    Dialogs.drawWindow(map, { w: 3, h: 2, x: 17, y: 0 });\n\n    // this.pickaxeScore = window.localStorage.getItem('pickaxe')\n    // const s = this.scene.add.sprite(\n    //   map.tileToWorldX(9) + 10 * SCALE,\n    //   map.tileToWorldY(0) + 10 * SCALE,\n    // ).play('closeUp_Pickaxe').setOrigin(0.1, 0.15).setScale(SCALE)\n    // s.depth = 6\n    // s.setScrollFactor(0)\n    // s.setVisible(this.pickaxeScore === 'true')\n\n    const msh = this.scene.add\n      .sprite(map.tileToWorldX(18), map.tileToWorldY(1))\n      .play(\"closeUp_Mushroom\")\n      .setOrigin(0.5, 0.5)\n      .setScale(SCALE * 1.5);\n    msh.depth = 6;\n    msh.name = \"score_img\";\n    msh.setScrollFactor(0);\n    this.mushroomsIcon = msh;\n\n    const MT_MARGIN_RIGHT_PX = 9;\n    this.MT_MARGIN_RIGHT = MT_MARGIN_RIGHT_PX * SCALE;\n    // const shroomsAmount = window.localStorage.getItem(\"shrooms\") || \"0\";\n    // console.log(dbManager.getLevels())\n    // const shroomsAmount = dbManager.getLevels().reduce((r, l) => r + l.collectedShrooms, 0);\n    // console.log(await dbManager.get(\"totalShroomsAmount\"));\n    const shroomsAmount = Math.max(\n      (await dbManager.get(\"totalShroomsAmount\")) || 0,\n      0\n    );\n    this.mushroomsScore = this.scene.add.text(\n      map.tileToWorldX(20) - this.MT_MARGIN_RIGHT,\n      map.tileToWorldY(1),\n      String(shroomsAmount),\n      {\n        fontFamily: \"GameGirl\",\n        fill: \"#ffffff\",\n        align: \"right\",\n      }\n    );\n    this.mushroomsScore.setData(\"amount\", shroomsAmount);\n    this.mushroomsScore.setOrigin(1, 0);\n    this.mushroomsScore.displayHeight = 10 * SCALE;\n    this.mushroomsScore.displayWidth =\n      String(shroomsAmount).length * 10 * SCALE;\n    this.mushroomsScore.name = \"score_text_to_remove\";\n    this.mushroomsScore.depth = 6;\n    this.mushroomsScore.setScrollFactor(0);\n    this.mushroomsScore.setShadow(-1, 1);\n\n    const D_MARGIN_LEFT_PX = 0.5; //px\n    this.D_MARGIN_LEFT = D_MARGIN_LEFT_PX * SCALE;\n    const diamond = this.scene.add\n      .sprite(map.tileToWorldX(1) + this.D_MARGIN_LEFT, map.tileToWorldY(1))\n      .play(\"closeUp_Diamond\")\n      .setOrigin(0.5, 0.5)\n      .setScale(SCALE * 1.5);\n    diamond.depth = 6;\n    diamond.name = \"score_img\";\n    diamond.setScrollFactor(0);\n    this.diamondsIcon = diamond;\n\n    this.scene.events.once(\"score:diamond_goal\", () => {\n      this.scene.tweens.add({\n        targets: diamond,\n        scale: SCALE * 2,\n        ease: \"Linear\",\n        duration: 250,\n        yoyo: true,\n        // onComplete: () => {\n        //   this.music.stop()\n        // },\n      });\n    });\n\n    const DT_MARGIN_RIGHT_PX = 9;\n    this.DT_MARGIN_RIGHT = DT_MARGIN_RIGHT_PX * SCALE;\n    this.diamondsAmount = \"0\";\n    this.diamondsScore = this.scene.add.text(\n      map.tileToWorldX(3) - this.DT_MARGIN_RIGHT,\n      map.tileToWorldY(1),\n      // map.tileToWorldY(0.5),\n      this.diamondsAmount,\n      {\n        fontFamily: \"GameGirl\",\n        fill: \"#ffffff\",\n        align: \"right\",\n      }\n    );\n    this.diamondsScore.setOrigin(1, 0);\n    this.diamondsScore.displayHeight = 10 * SCALE;\n    this.diamondsScore.displayWidth = this.diamondsAmount.length * 10 * SCALE;\n    this.diamondsScore.name = \"score_text_to_remove\";\n    this.diamondsScore.depth = 6;\n    this.diamondsScore.setScrollFactor(0);\n    this.diamondsScore.setShadow(-1, 1);\n\n    this.diamondsScoreGoal = this.scene.add.text(\n      map.tileToWorldX(3) - this.DT_MARGIN_RIGHT,\n      map.tileToWorldY(1),\n      \"00\", // goal\n      {\n        fontFamily: \"GameGirl\",\n        fill: \"gold\",\n        align: \"right\",\n      }\n    );\n    this.diamondsScoreGoal.alpha = 0;\n    this.diamondsScoreGoal.setOrigin(1, 0);\n    this.diamondsScoreGoal.displayHeight = 8 * SCALE;\n    this.diamondsScoreGoal.displayWidth = 2 * 8 * SCALE;\n    this.diamondsScoreGoal.name = \"score_text_to_remove\";\n    this.diamondsScoreGoal.depth = 6;\n    this.diamondsScoreGoal.setScrollFactor(0);\n    this.diamondsScoreGoal.setShadow(-1, 1);\n\n    this.scene.events.on(\"score:mushroom_collected\", (howMany = 1) => {\n      const amount = this.mushroomsScore.getData(\"amount\") + howMany;\n      this.mushroomsScore.setText(amount);\n    });\n    this.scene.events.on(\"score:mushroom_given\", (howMany = 1) => {\n      const amount = Number(this.mushroomsScore.getData(\"amount\")) - howMany;\n      this.mushroomsScore.setText(String(amount));\n    });\n    window.scene = this.scene;\n\n    this.scene.events.on(\"score:diamond_set\", (amount) => {\n      this.diamondsAmount = amount;\n      this.diamondsScore.setText(amount);\n    });\n\n    this.scene.events.once(\"score:diamond_goal_set\", (amount) => {\n      this.scene.tweens.add({\n        targets: this.diamondsScore,\n        y: UI.tileToScreen(0.5),\n        ease: \"Linear\",\n        duration: 250,\n        onComplete: () => {},\n      });\n      const targetPosX = this.diamondsScoreGoal.x;\n      this.diamondsScoreGoal.x += UI.tileToScreen(0.5);\n      this.diamondsScoreGoal.alpha = 0;\n      this.diamondsScoreGoal.setText(amount);\n      this.scene.tweens.add({\n        targets: this.diamondsScoreGoal,\n        x: targetPosX,\n        alpha: 1,\n        ease: \"Linear\",\n        duration: 250,\n        delay: 200,\n      });\n    });\n\n    this.setWindowBoxBehaviour();\n  }\n\n  drawMenuOptions(map) {\n    this.inGameMenu = new UIMenus(this.scene);\n    this.inGameMenu.showInGameMenu();\n  }\n\n  showPauseMenu() {\n    const existingLayer = this.scene.children.list.find(\n      (el) => el.name === \"layer_pause_nenu\"\n    );\n    // flag to avoid options to work after menu is hidden\n    if (existingLayer) {\n      existingLayer.setVisible(true);\n      this.drawMenuOptions();\n      this.inGameMenu.isVisible = true;\n      return true;\n    }\n\n    // Creating a blank tilemap with dimensions matching the dungeon\n    const map = this.scene.make.tilemap({\n      tileWidth: 20,\n      tileHeight: 20,\n      width: 20,\n      height: 20,\n    });\n    // addTilesetImage: function (tilesetName, key, tileWidth, tileHeight, tileMargin, tileSpacing, gid)\n    let tileset = map.addTilesetImage(\"hud-tiles\", \"hud-tiles\", 20, 20, 1, 2);\n\n    let layer = map.createBlankLayer(\"layer_pause_nenu\", tileset);\n    layer.name = \"layer_pause_nenu\";\n    layer.depth = 15;\n    layer.setScrollFactor(0);\n\n    layer.setScale(SCALE);\n\n    Dialogs.drawWindow(map, { w: 14, h: 3, x: 3, y: 0 });\n    this.drawMenuOptions(map);\n    this.inGameMenu.isVisible = true;\n  }\n\n  setUpPuseResumeGame() {\n    this.scene.input.keyboard.removeListener(\n      \"keydown\",\n      this.onKeyDown.bind(this)\n    );\n    this.scene.input.keyboard.addListener(\"keydown\", this.onKeyDown.bind(this));\n  }\n\n  onKeyDown(event) {\n    const pauseGame = () => {\n      this.scene.levels.current.pause();\n      this.scene.events.emit(\"game_paused\");\n    };\n    const resumeGame = () => {\n      this.scene.levels.current.resume();\n      this.scene.events.emit(\"game_resumed\");\n    };\n    if (\n      Controller.isCancel(event.key) &&\n      !this.dialogs.isShowing &&\n      this.scene.levels.current.player.connected\n    ) {\n      const action = this.scene.levels.current.isPaused\n        ? resumeGame\n        : pauseGame;\n      action();\n    }\n  }\n\n  // HELPER\n  static tileToScreen(val = 0) {\n    return UI.pixelToScreen(val * TILE_SIZE);\n  }\n  static tileToPixels(val = 0) {\n    return val * TILE_SIZE;\n  }\n  static pixelToScreen(val = 0) {\n    return val * SCALE;\n  }\n}\n","import Character from \"./Character\";\nimport { CLASS_NAMES, DIRS } from \"../../utils/constants\";\nimport UI from \"../UI\";\n\nexport default class Enemy extends Character {\n  constructor(id, level) {\n    super(id, level);\n    this.moveIntentDir = DIRS.UP;\n    this.scanDirection = \"CW\";\n    this.anchorPosition = null;\n    this.line1 = null;\n    this.debug = false;\n  }\n  \n  addedToScene() {\n    if (this.debug) {\n      this.directionLine = this.level.scene.add.line(\n        // obj position = tile with 0.5 offset\n        UI.tileToScreen(this.position.x) + UI.tileToScreen(1) / 2,\n        UI.tileToScreen(this.position.y) + UI.tileToScreen(1) / 2,\n        // start point of line\n        0,\n        0,\n        // end point of line\n        0,\n        -UI.tileToScreen(1),\n        0x0000ff\n      );\n      this.directionLine.setRotation(Math.PI / 2);\n      this.directionLine.width = 1; // keep it this size for rotation to properly apply\n      this.directionLine.height = 1; // keep it this size for rotation to properly apply\n      this.directionLine.setOrigin(0.5, 0.5);\n\n      this.anchorLine = this.level.scene.add.line(\n        // obj position = tile with 0.5 offset\n        UI.tileToScreen(this.position.x) + UI.tileToScreen(1) / 2,\n        UI.tileToScreen(this.position.y) + UI.tileToScreen(1) / 2,\n        // start point of line\n        0,\n        0,\n        // end point of line\n        0,\n        -UI.tileToScreen(1),\n        0x00ff00\n      );\n      this.anchorLine.setRotation(Math.PI / 2);\n      this.anchorLine.width = 1; // keep it this size for rotation to properly apply\n      this.anchorLine.height = 1; // keep it this size for rotation to properly apply\n      this.anchorLine.setOrigin(0.5, 0.5);\n    }\n  }\n  overrunBy(el) {\n    if (!el.isClass(CLASS_NAMES.PLAYER)) {\n      // this.alien.visible = false\n      // this.alien.alpha = 0.5\n      this.alien?.destroy();\n      this.line1?.destroy();\n      this.level.onCharacterDie(this);\n      this.level.onEnemyKill(this)\n    }\n    if (el.isClass(CLASS_NAMES.BOULDER) || el.isClass(CLASS_NAMES.JEWEL)) {\n      this.level.scene.events.emit(\"sounds:death_by_rock_hit\");\n    }\n\n    this.level.enemy_die_effect.x = this.alien.x;\n    this.level.enemy_die_effect.y = this.alien.y;\n    this.level.enemy_die_effect.play(\"enemy_dies\");\n  }\n  loop() {\n    if (this.moveIntentDir === DIRS.RIGHT && this.alien.flipX) {\n      this.alien.setFlipX(false);\n    }\n    if (this.moveIntentDir === DIRS.LEFT && !this.alien.flipX) {\n      this.alien.setFlipX(true);\n    }\n\n    if (this.debug) {\n      this.directionLine.setPosition(\n        UI.tileToScreen(this.position.x) + UI.tileToScreen(1) / 2,\n        UI.tileToScreen(this.position.y) + UI.tileToScreen(1) / 2\n      );\n      this.directionLine.setRotation(\n        this.moveIntentDir === DIRS.UP\n          ? 0\n          : this.moveIntentDir === DIRS.RIGHT\n          ? Math.PI / 2\n          : this.moveIntentDir === DIRS.DOWN\n          ? Math.PI\n          : (3 * Math.PI) / 2\n      );\n      if (this.anchorPosition) {\n        // console.log(this.anchorPosition);\n        this.anchorLine.setPosition(\n          UI.tileToScreen(this.position.x) + UI.tileToScreen(1) / 2,\n          UI.tileToScreen(this.position.y) + UI.tileToScreen(1) / 2\n        );\n\n        this.anchorLine.setRotation(\n          this.anchorPosition.y < this.position.y\n            ? 0\n            : this.anchorPosition.x > this.position.x\n            ? Math.PI / 2\n            : this.anchorPosition.y > this.position.y\n            ? Math.PI\n            : (3 * Math.PI) / 2\n        );\n      }\n    }\n  }\n}\n\nEnemy.className = CLASS_NAMES.ENEMY;\n","import Character from \"./Character\"\nimport { CLASS_NAMES, DIRS } from \"../../utils/constants\"\n\nexport default class NPCharacter extends Character {\n  constructor(id, level, name) {\n    super(id, level)\n    this.name = name\n    this.moveIntentDir = \"\"\n    this.isFollowing = false\n    this.isLeading = false\n    this.leadingPath = []\n    level.scene.events.on('player_moves',  this.onPlayerMoves.bind(this))\n    this.personalSpace = 3\n  }\n\n  lookUp() {\n    this.moveIntentDir = DIRS.UP\n    this.alien.play('dwarf_look_up')\n  }\n  \n  onPlayerMoves(nextPos) {\n    if(this.isCloseEnough(nextPos) && this.isLeading) {\n      if(this.leadingPath.length) {\n        const nextPos = this.leadingPath.shift()\n        this.calcMoveIntentForLeader(nextPos)\n        this.level.moveObject(this, nextPos)\n      }\n    }\n  }\n\n  isCloseEnough(pos) {\n    const xDist = Math.abs(this.position.x - pos.x)\n    const yDist = Math.abs(this.position.y - pos.y)\n    return xDist < this.personalSpace && yDist < this.personalSpace\n    // return (\n    //   // NORTH\n    //   (this.position.x === pos.x && this.position.y - 1 === pos.y) ||\n    //   // EAST\n    //   (this.position.x + 1 === pos.x && this.position.y === pos.y) ||\n    //   // SOUTH\n    //   (this.position.x === pos.x && this.position.y + 1 === pos.y) ||\n    //   // WEST\n    //   (this.position.x - 1 === pos.x && this.position.y === pos.y)\n    // )\n  }\n  calcMoveIntentForLeader(nextPos) {\n    this.moveIntentDir = this.position.y < nextPos.y ? DIRS.DOWN : this.moveIntentDir\n    this.moveIntentDir = this.position.y > nextPos.y ? DIRS.UP : this.moveIntentDir\n    if (this.position.x < nextPos.x) {\n      this.moveIntentDir = DIRS.LEFT\n      this.animRunRight()\n    }\n    if (this.position.x > nextPos.x) {\n      this.moveIntentDir = DIRS.RIGHT\n      this.animRunLeft()\n    }\n\n    // this.moveObject(follower, followerNextPos)\n\n    // if(this.moveIntentDir === DIRS.UP) {\n    //   this.alien.depth = 20\n    //   player.alien.depth = 0\n    // } else {\n    //   player.alien.depth = 20\n    //   this.alien.depth = 0\n    // }\n  }\n\n  destroy() {\n    // animate die\n\n  }\n  animIdle() {\n    this.alien?.play(`${this.name}_idle`)\n  }\n\n  animRun() {\n    let animRunVariant = \"\"\n    if (this.moveIntentDir === DIRS.UP) {\n      animRunVariant = \"_up\"\n    }\n    if (this.moveIntentDir === DIRS.DOWN) {\n      animRunVariant = \"_down\"\n    }\n    const animName = `${this.name}_run${animRunVariant}`\n    if (this.alien.anims.currentAnim.key !== animName) {\n      this.alien.play(animName)\n    }\n  }\n  animRunLeft(){\n    this.alien.setFlipX(true)\n    this.alien.setOrigin(0.25, 0.25)\n  }\n  animRunRight(){\n    this.alien.setFlipX(false)\n    this.alien.setOrigin(0, 0.25)\n  }\n  animLayRight() {\n    this.alien?.setFlipX(false)\n    this.alien?.play(`${this.name}_laying`)\n  }\n  animLayLeft() {\n    this.alien?.setFlipX(true)\n    this.alien?.play(`${this.name}_laying`)\n  }\n\n  die() {\n    this.inactive = true\n    this.alien.alpha = 0\n    this.level.scene.events.off('player_moves',  this.onPlayerMoves)\n    this.destroy()\n    // this.level.onCharacterDie(this)\n  }\n\n  overrunBy(el) {\n    if (el.isClass(CLASS_NAMES.BOULDER)) {\n      this.level.scene.events.emit(\"sounds:death_by_rock_hit\")\n    }\n    if (!el.isClass(CLASS_NAMES.PLAYER)) {\n      this.die()\n    }\n  }\n  runningOver(el) {\n    if (el.isClass(CLASS_NAMES.ENEMY)) {\n      this.die()\n    }\n    // this.isBrakingGround = el.isClass(Ground.className)\n  }\n}\n\nNPCharacter.className = CLASS_NAMES.NPC\n","import { CLASS_NAMES, SCALE } from \"../../utils/constants\";\nimport UI from \"../UI\";\nimport Explosion from \"./Explosion\";\nimport Fallable from \"./Fallable\";\nimport Player from \"./Player\";\n\nexport default class Jewel extends Fallable {\n  constructor(id, level) {\n    super({\n      id,\n      isRigid: false,\n      isBreakable: true,\n      isFlat: false,\n      isPickable: true,\n      isCrushable: false,\n      level,\n    });\n    this.strength = 4;\n  }\n  overrunBy(el) {\n    if (el.isClass(Player)) {\n      this.alien.destroy()\n      this.shine.destroy()\n      // this.alien.visible = false;\n      // this.shine.visible = false;\n      this.level.onJewelPick(this);\n      this.level.scene.events.emit(\"sounds:gem_pick\");\n    }\n\n    if (el.isClass(Explosion)) {\n      this.alien.destroy()\n      this.shine.destroy()\n      // this.alien.visible = false;\n      // this.shine.visible = false;\n      this.alien.destroy();\n    }\n  }\n  move(coords) {\n    super.move(coords);\n    if (!this.shine) {\n      this.shine = this.level.scene.add\n        .sprite(48, 16)\n        .setOrigin(0.05, 0.2)\n        .play(\"diamond_shine\");\n      this.shine.setScale(SCALE());\n      this.shine.depth = 4.5\n    }\n    this.shine.x = UI.tileToScreen(coords.x);\n    this.shine.y = UI.tileToScreen(coords.y);\n    if(this.isFalling) {\n      this.shine.stop()\n    } else {\n      this.shine.play(\"diamond_shine\")\n    }\n  }\n}\n\nJewel.className = CLASS_NAMES.JEWEL;\n","import Phaser from \"phaser\";\nimport Character from \"./Character\";\nimport Enemy from \"./Enemy\";\nimport Boulder from \"./Boulder\";\nimport { CLASS_NAMES, DIRS } from \"../../utils/constants\";\nimport NPCharacter from \"./NPCharacter\";\nimport Ground from \"./Ground\";\nimport Jewel from \"./Jewel\";\nimport * as Controller from \"../Controller/Controller\";\n\nexport default class Player extends Character {\n  constructor(id, level) {\n    super(id, level);\n    this.power = 0.5;\n    this.moveIntentDir = \"\";\n    this.connected = true;\n    this.torch = null;\n    this.mandatoryPath = [];\n    this.ligth = null;\n\n    // flag to make Brave to await like Rockford\n    this.impersonateRockford = false;\n\n    const scene = level.scene;\n    scene.input.keyboard.removeListener(\"keydown\", this.onKeyDown);\n    scene.input.keyboard.addListener(\"keydown\", this.onKeyDown.bind(this));\n\n    scene.input.keyboard.removeListener(\"keyup\", this.onKeyUp);\n    scene.input.keyboard.addListener(\"keyup\", this.onKeyUp.bind(this));\n  }\n  disconnect() {\n    if (!this.connected) {\n      return false;\n    }\n    this.connected = false;\n    this.moveIntentDir = \"\";\n    if (!this.inactive) {\n      this.animIdle();\n    }\n    this.level.scene.events.emit(\"player:disconnected\");\n  }\n  reconnect() {\n    if (this.connected) {\n      return false;\n    }\n    this.connected = true;\n    this.level.scene.events.emit(\"player:reconnected\");\n  }\n  onKeyUp(event) {\n    if (Controller.getDirection(this.moveIntentDir) === Controller.getDirection(event.key) && this.connected) {\n      this.moveIntentDir = \"\";\n      this.pushingDirection = null;\n    }\n  }\n  onKeyDown(event) {\n    if (\n      !event.repeat && (\n      Controller.isUp(event.key) ||\n      Controller.isDown(event.key) ||\n      Controller.isLeft(event.key) ||\n      Controller.isRight(event.key)\n      ) && this.connected\n    ) {\n      this.moveIntentDir = Controller.getDirection(event.key);\n      // calls loop to avoid delay between key press and visual movement at the begining of next loop\n      if (!this.isMoving) {\n        this.level.playerLoop();\n      }\n    }\n  }\n  destroy() {}\n  moveToNextPosition() {\n    if (!this.mandatoryPath.length) {\n      this.moveIntentDir = \"\";\n      this.animIdle();\n      return false;\n    }\n    const nextPos = this.mandatoryPath.shift();\n    this.calcMoveIntent(nextPos);\n    this.level.moveObject(this, nextPos);\n    return true;\n  }\n  calcMoveIntent(nextPos) {\n    this.moveIntentDir =\n      this.position.y < nextPos.y ? DIRS.DOWN : this.moveIntentDir;\n    this.moveIntentDir =\n      this.position.y > nextPos.y ? DIRS.UP : this.moveIntentDir;\n    if (this.position.x < nextPos.x) {\n      this.moveIntentDir = DIRS.LEFT;\n      this.animRunRight();\n    }\n    if (this.position.x > nextPos.x) {\n      this.moveIntentDir = DIRS.RIGHT;\n      this.animRunLeft();\n    }\n  }\n  animIdle() {\n    const animName = this.hasPickaxe\n      ? \"brave_idle_pickaxe\"\n      : this.impersonateRockford\n      ? \"brave_idle_rockford\"\n      : \"brave_idle\";\n    if (\n      (this.moveIntentDir === \"\" || !this.canMoveDir(this.moveIntentDir)) &&\n      !this.inactive\n    ) {\n      this.alien?.play(animName);\n      this.alien?.setFlipX(false);\n      this.alien?.setOrigin(0, 0.25);\n\n      this.torch?.play(\"torch_idle\");\n      this.torch?.setFlipX(false);\n      this.torch?.setOrigin(0, 0.25);\n    }\n  }\n  animPushRight() {\n    this.alien?.play(\"brave_push\");\n    this.alien.setFlipX(false);\n    this.alien.setOrigin(0, 0.25);\n\n    this.torch?.play(\"torch_push\");\n    this.torch?.setFlipX(false);\n    this.torch?.setOrigin(0, 0.25);\n  }\n  animPushLeft() {\n    this.alien?.play(\"brave_push\");\n    this.alien.setFlipX(true);\n    this.alien.setOrigin(0.25, 0.25);\n\n    this.torch?.play(\"torch_push\");\n    this.torch?.setFlipX(true);\n    this.torch?.setOrigin(0.25, 0.25);\n  }\n  animRun() {\n    let dirVariant = \"\";\n    let pickaxeVariant = \"\";\n    let actionVariant = \"_run\";\n    let character = \"brave\";\n    if (Controller.isUp( this.moveIntentDir)) {\n      dirVariant = \"_up\";\n    }\n    if (Controller.isDown(this.moveIntentDir)) {\n      dirVariant = \"_down\";\n    }\n    if (this.isBrakingGround) {\n      actionVariant = \"_break\";\n    }\n    if (this.hasPickaxe) {\n      pickaxeVariant = \"_pickaxe\";\n      if (dirVariant === \"\" && this.isBrakingGround && Math.random() > 0.5) {\n        pickaxeVariant = pickaxeVariant + \"_alt\";\n      }\n    }\n\n    const animName = character + actionVariant + pickaxeVariant + dirVariant;\n\n    if (this.alien.anims.currentAnim.key !== animName && !this.inactive) {\n      this.alien.play(animName);\n\n      // if(actionVariant.includes('run')) {\n      this.torch?.play(\"torch_run\" + dirVariant);\n      // }\n      // if(actionVariant.includes('break')) {\n      //   this.torch?.play('torch_break' + dirVariant)\n      // }\n    }\n  }\n  // these 2 method are probably switched.\n  // animRunRight is called when player runs left and viceversa\n  animRunRight() {\n    this.alien.setFlipX(false);\n    this.alien.setOrigin(0, 0.25);\n    // this.alien.setFlipX(true)\n    this.torch?.setFlipX(false);\n    this.torch?.setOrigin(0, 0.25);\n    // this.torch?.setFlipX(true)\n  }\n  animRunLeft() {\n    this.alien.setFlipX(true);\n    this.alien.setOrigin(0.25, 0.25);\n    // this.alien.setFlipX(false)\n    this.torch?.setFlipX(true);\n    this.torch?.setOrigin(0.25, 0.25);\n    // this.torch?.setFlipX(false)\n  }\n\n  die() {\n    this.inactive = true;\n    // this.disconnect()\n    const scene = this.level.scene;\n    scene.input.keyboard.off(\"keydown\");\n    scene.input.keyboard.off(\"keyup\");\n    // animate die\n    this.level.onCharacterDie(this);\n    this.alien.play(\"brave_dies\");\n    this.alien.on(Phaser.Animations.Events.ANIMATION_COMPLETE, () => {\n      this.destroy();\n      this.alien.alpha = 0;\n    });\n  }\n\n  overrunBy(el) {\n    if (el.isClass(CLASS_NAMES.FALLABLE)) {\n      this.level.scene.events.emit(\"sounds:death_by_rock_hit\");\n    }\n\n    if (el.constructor.className !== NPCharacter.className) {\n      this.die();\n    }\n  }\n  runningOver(el) {\n    if (el.isClass(Enemy)) {\n      this.die();\n    }\n\n    if (el.isClass(Ground)) {\n      const layer = this.level.scene.children.getByName(\"layer_1\");\n      const { tilemap: map } = layer;\n      this.level.break_effect.x = map.tileToWorldX(el.position.x);\n      this.level.break_effect.y = map.tileToWorldY(el.position.y);\n      this.level.break_effect.play(\"ground_breaks\");\n    }\n    if (el.isClass(Jewel)) {\n      const layer = this.level.scene.children.getByName(\"layer_1\");\n      const { tilemap: map } = layer;\n      this.level.pick_effect.x = map.tileToWorldX(el.position.x);\n      this.level.pick_effect.y = map.tileToWorldY(el.position.y);\n      this.level.pick_effect.play(\"jewel_pick\");\n    }\n  }\n\n  setupLight() {\n    this.light = this.level.scene.lights\n      .addLight(this.alien.x, this.alien.y, 1000)\n      .setColor(0xe6c8c8)\n      .setIntensity(1.5);\n  }\n\n  ligthTorch() {\n    if (!this.light) {\n      this.setupLight();\n    }\n    this.alien.alpha = 1;\n    this.torch = this.level.scene.add.sprite(48, 16).setOrigin(0, 0.25);\n    this.torch.setScale(this.alien.scaleX);\n    this.torch.depth = 4.5; // .5 higher than player when has follower\n    this.torch.play(\"torch_idle\");\n    this.level.scene.time.addEvent({\n      delay: 10,\n      callback: function () {\n        if (this.torch) {\n          this.torch.x = this.alien?.x;\n          this.torch.y = this.alien?.y;\n        }\n      },\n      callbackScope: this,\n      repeat: -1,\n    });\n\n    this.level.scene.time.addEvent({\n      delay: 100,\n      callback: function () {\n        if (this.light) {\n          this.light.x = this.alien.x;\n          this.light.y = this.alien.y;\n        }\n        if (!this.torch && this.light?.intensity > 0) {\n          this.light.setIntensity(this.light.intensity - 0.3);\n        }\n\n        const isTooCloseToExit =\n          this.position.y === this.level.exit.position.y &&\n          Math.abs(this.position.x - this.level.exit.position.x) <= 3;\n        if (this.torch && this.light?.intensity < 1.5 && !isTooCloseToExit) {\n          this.light.setIntensity(this.light.intensity + 0.3);\n          Phaser.Geom.Ellipse.Random(this.alien, this.light);\n        }\n      },\n      callbackScope: this,\n      repeat: -1,\n    });\n  }\n\n  setOffTorch() {\n    this.torch.destroy();\n    this.torch = null;\n    this.light.setIntensity(0);\n    this.light = null;\n  }\n}\n\nPlayer.className = CLASS_NAMES.PLAYER;\n","import { CLASS_NAMES } from '../../utils/constants'\nimport Empty from './Empty'\nimport Player from './Player'\n\nexport default class Interactive extends Empty {\n  constructor(id, level) {\n    super(id, level)\n    this.ephemeral = true\n  }\n  overrunBy(el) {\n    if (el.isClass(Player)) {\n      this.level.onInteractWith(this)\n    }\n  }\n}\n\nInteractive.className = CLASS_NAMES.INTERACTIVE\n","import { CLASS_NAMES } from \"../../utils/constants\"\nimport Interactive from \"./Interactive\"\n\nexport default class Exit extends Interactive {\n}\n\nExit.className = CLASS_NAMES.EXIT\n","import {\n  CLASS_NAMES,\n  PIXEL_NAME,\n  SCALE,\n  TICK_TIME,\n  TILE_SIZE,\n} from \"../../utils/constants\";\nimport UI from \"../UI\";\nimport Empty from \"./Empty\";\nimport Explosion from \"./Explosion\";\nimport Fallable from \"./Fallable\";\n\nexport default class Barrel extends Fallable {\n  constructor(id, level) {\n    super({\n      id,\n      isRigid: false,\n      isBreakable: true,\n      isFlat: true,\n      isPickable: false,\n      isCrushable: true,\n      level,\n    });\n    this.reach = 1;\n    this.strength = 5;\n    this.objectsToDestroyByExplostion = [];\n    this.objectsToReachByExplostion = [];\n    this.exploded = false\n    this.key = Math.random();\n  }\n  addedToScene() {\n    let particles = this.level.scene.add.particles(\"spark\").setScale(SCALE);\n    this.emitter = particles.createEmitter();\n    this.emitter.setQuantity(15);\n    this.emitter.setFrequency(1000);\n    this.emitter.setAngle({ min: -180, max: 90 });\n    this.emitter.setSpeed({ min: 5, max: 7 });\n    this.emitter.setGravityY(1);\n    this.emitter.setGravityX(0.01);\n    this.emitter.setLifespan({ min: 1000, max: 5000 });\n    this.emitter.alpha.onChange(0.5);\n    this.emitter.tint.onChange(0xd25400);\n    this.emitter.stop();\n  }\n  explode() {\n    if(this.exploded) { return false; }\n    this.alien?.destroy();\n\n    // remove barrel: filtering moveables doesn't work since movables are locally referenced and are ot affected by this.\n    // this.level.moveables = this.level.moveables.filter((e) => e !== this);\n\n    this.level.parallelMovables = this.level.parallelMovables.filter(\n      (e) => e !== this\n    );\n    this.level.replaceByEmpty(this);\n    this.exploded = true;\n\n    // freeze explosion places so objects can not move before the explosion triggers\n    for (\n      let x = this.position.x - this.reach;\n      x <= this.position.x + this.reach;\n      x++\n    ) {\n      for (\n        let y = this.position.y - this.reach;\n        y <= this.position.y + this.reach;\n        y++\n      ) {\n        const burntEl = this.level.getObjectAt(x, y);\n        const burntWillBreak =\n          burntEl.isBreakable && (burntEl.strength || 0) < 10; // explosion.power\n        if (burntWillBreak && !this.level.objectIsEmpty(burntEl)) {\n          this.objectsToDestroyByExplostion.push(burntEl);\n          if (burntEl.isClass(CLASS_NAMES.FALLABLE)) {\n            // prevent to keep moving by removing it from movables\n            burntEl.freeze = true;\n            // this.level.moveables = this.level.moveables.filter(\n            //   (e) => e !== burntEl\n            // );\n            this.level.parallelMovables = this.level.parallelMovables.filter(\n              (e) => e !== burntEl\n            );\n          }\n        }\n        if (!burntWillBreak && !this.level.objectIsEmpty(burntEl)) {\n          // reach but not destroy\n          this.objectsToReachByExplostion.push(burntEl);\n        }\n        if (burntWillBreak || this.level.objectIsEmpty(burntEl) || (burntEl && burntEl.isClass(CLASS_NAMES.EXPLOSION))) {\n          // complete explosion matrix with empty elements to replace them later with explosion objects\n          const explosionPlaceholder = new Explosion(\n            PIXEL_NAME.EXPLOSION,\n            this.level\n          );\n          explosionPlaceholder.setPosition({ x, y });\n          this.level.setObjectAt(x, y, explosionPlaceholder);\n          this.objectsToDestroyByExplostion.push(explosionPlaceholder);\n        }\n      }\n    }\n    // this.onExplode()\n    // setTimeout(() => this.onExplode(), TICK_TIME/2)\n    setTimeout(() => this.onExplode(), TICK_TIME / 2);\n\n    this.level.scene.events.emit(\"sounds:explosion\");\n    this.level.scene.events.emit(\"barre:explode\", this);\n    this.level.scene.cameras.main.shake(500, 0.003);\n  }\n\n  onExplode() {\n    const lvl = this.level;\n    this.objectsToDestroyByExplostion.forEach((burntEl) => {\n      const explosion = new Explosion(PIXEL_NAME.EXPLOSION, lvl);\n      if (!burntEl.isClass(Explosion)) {\n        burntEl.overrunBy(explosion);\n        lvl.onDestroyElement(burntEl);\n      }\n    });\n    this.objectsToDestroyByExplostion = [];\n\n    this.objectsToReachByExplostion.forEach((reachedEl) => {\n      // in some cases when an explosion reaches a Barrel, the barrel is destroyed between the collect of this.objectsToReachByExplostion\n      // and the execution of this function, resulting reachedEl to be false bcs was destroyed by another process.\n      if (reachedEl) {\n        reachedEl.hitBy(new Explosion(PIXEL_NAME.EXPLOSION, this.level));\n      }\n    });\n    this.objectsToReachByExplostion = [];\n\n    this.emitter.setPosition(\n      {\n        min: UI.tileToPixels(this.position.x),\n        max: UI.tileToPixels(this.position.x + 1),\n      },\n      {\n        min: UI.tileToPixels(this.position.y),\n        max: UI.tileToPixels(this.position.y + 1),\n      }\n    );\n    // this.emitter.start()\n    this.level.onNextTick((lvl) => {\n      this.emitter.stop();\n    });\n  }\n  overrunBy() {\n    this.explode();\n    // setTimeout(() => this.explode(), TICK_TIME/2)\n  }\n  runningOver(el) {\n    if(!el.isClass(CLASS_NAMES.EXPLOSION)) {\n      this.explode()\n    }\n    // console.log(this.key, 'barrel overrunning:', el);\n  }\n}\nBarrel.className = CLASS_NAMES.BARREL;\n","import { CLASS_NAMES } from '../../utils/constants'\nimport Explosion from './Explosion'\nimport Fallable from './Fallable'\nimport Player from './Player'\n\nexport default class Mushroom extends Fallable {\n  constructor(id, level) {\n    super({\n      id,\n      isRigid: false,\n      isBreakable: true,\n      isFlat: false,\n      isPickable: true,\n      isCrushable: false,\n      level\n    })\n    this.strength = 4\n  }\n  overrunBy(el) {\n    if(el.isClass(Player)) {\n      this.alien.visible = false\n      this.level.onMushroomPick(this)\n      this.level.scene.events.emit('sounds:shroom_pick')\n      this.level.scene.events.emit('score:mushroom_collected')\n    }\n\n    if(el.isClass(Explosion)) {\n      this.alien.visible = false\n      this.alien.destroy()\n    }\n  }\n}\n\nMushroom.className = CLASS_NAMES.MUSHROOM\n","import UI from '../UI'\nimport GameObject from './GameObject'\nimport Phaser from 'phaser'\nimport { CLASS_NAMES, PIXEL_NAME, SCALE } from '../../utils/constants'\nimport Interactive from './Interactive'\nimport Player from './Player'\n\nexport default class Torch extends GameObject {\n  constructor(id, level) {\n    super({\n      id,\n      isRigid: true,\n      isBreakable: false,\n      isFlat: true,\n      isPickable: false,\n      isCrushable: false,\n      level\n    })\n    this.isLit = false\n    this.light = null\n    this.alien = level.scene.add\n      .sprite(48, 16)\n      .setOrigin(0, 0.5)\n      .play(\"wall_torch_idle\");\n    this.alien.on(Phaser.Animations.Events.ANIMATION_COMPLETE, () => {\n      if(this.isLit) {\n        if(this.alien.flipX) {\n          this.alien.setOrigin(0, 0.5)\n        } else {\n          this.alien.setOrigin(0.15, 0.5)\n        }\n        this.alien.setFlipX(!this.alien.flipX)\n        this.alien.play(\"wall_torch_lit\")\n      }\n    });\n    this.alien.setScale(SCALE());\n    this.strength = 20\n    this.leftTrigger = null\n    this.rightTrigger = null\n  }\n\n  ignite() {\n    this.alien.play(\"wall_torch_lighting\")\n    this.isLit = true\n    this.setUpLights()\n  }\n  \n  async setPosition(coords) {\n    super.setPosition(coords)\n\n    this.alien.x = UI.tileToScreen(coords.x);\n    this.alien.y = UI.tileToScreen(coords.y);\n    \n    this.level.onNextTick(() => {\n      this.setIgniteTriggers()\n    })\n  }\n\n  setUpLights() {\n    this.light = this.level.scene.lights\n      .addLight(UI.tileToScreen(this.position.x), UI.tileToScreen(this.position.y), 1000)\n      .setColor(0xe6c8c8)\n      .setIntensity(0);\n    \n    this.level.scene.time.addEvent({\n      delay: 100,\n      callback: function () {\n        if(!this.alien) { return false }\n        if(this.light.intensity < 1.5) {\n          this.light.setIntensity(this.light.intensity + 0.3)\n        }\n        Phaser.Geom.Ellipse.Random(\n          {x: this.alien.x + UI.tileToPixels(1), y: this.alien.y, width: this.alien.width, height: this.alien.height },\n          this.light\n        );\n      },\n      callbackScope: this,\n      repeat: -1,\n    });\n  }\n\n  proximityTrigger(el) {\n    if (el.isClass(Player) && el.torch && !this.isLit) {\n      this.ignite()\n    }\n  }\n\n  setIgniteTriggers() {\n    const leftNeighbour = this.level.getObjectAt(this.position.x - 1, this.position.y)\n    const rightNeighbour = this.level.getObjectAt(this.position.x + 1, this.position.y)\n    if(leftNeighbour) {\n      const element = new Interactive(PIXEL_NAME.INTERACTION, this)\n      element.setPosition(leftNeighbour.position)\n      element.overrunBy = this.proximityTrigger.bind(this)\n      this.level.interactiveElements[`${element.position.x}-${element.position.y}`] = element\n      this.leftTrigger = element\n    }\n    if(rightNeighbour) {\n      const element = new Interactive(PIXEL_NAME.INTERACTION, this)\n      element.setPosition(rightNeighbour.position)\n      element.overrunBy = this.proximityTrigger.bind(this)\n      this.level.interactiveElements[`${element.position.x}-${element.position.y}`] = element\n      this.rightTrigger = element\n    }\n  }\n\n}\n\nTorch.className = CLASS_NAMES.TORCH\n","import { CLASS_NAMES } from \"../../utils/constants\";\nimport Wall from \"./Wall\";\n\nclass Block extends Wall {}\n\nBlock.className = CLASS_NAMES.BLOCK\nexport default Block;\n","import { SCALE } from \"../../utils/constants\";\nimport { translate } from \"../../utils/localization\";\nimport { Exit, Interactive } from \"../objects\";\nimport UI from \"../UI\";\nimport LevelBase from \"./levelBase\";\n\nclass Level1 extends LevelBase {\n  constructor() {\n    super();\n    this.name = \"The beginning\";\n  }\n\n  get id() {\n    return this.constructor.key;\n  }\n\n  async connectToScene(scene) {\n    await super.connectToScene(scene);\n\n    if(this.unfinished) {\n      scene.events.once(\"levelstart\", () => this.showDialog1());\n    }\n\n    let light_beam = this.scene.add.image(\n      this.scene.cameras.main.width / 2,\n      this.scene.cameras.main.height / 2,\n      \"light_beam\"\n    );\n    light_beam.x = UI.tileToScreen(14);\n    light_beam.y = UI.tileToScreen(1);\n    light_beam.setOrigin(0, 0);\n    light_beam.setScale(SCALE * 2);\n    light_beam.scaleX = SCALE * 2.4;\n    light_beam.setScrollFactor(1);\n    light_beam.depth = 4.5;\n    light_beam.alpha = 0.5;\n\n    var particles = scene.add.particles(\"spark\").setScale(SCALE);\n    var emitter = particles.createEmitter();\n    emitter.setPosition(\n      { min: UI.tileToPixels(17), max: UI.tileToPixels(28) },\n      { min: UI.tileToPixels(0), max: UI.tileToPixels(10) }\n    );\n    emitter.setQuantity(5);\n    emitter.setFrequency(20000);\n    emitter.setAngle({ min: 0, max: 360 });\n    emitter.setSpeed(5);\n    emitter.setGravityY(0.1);\n    emitter.setGravityX(0);\n    emitter.setLifespan({ min: 10000, max: 50000 });\n    emitter.alpha.onChange(0.5);\n  }\n\n  showDialog1() {\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Mary\"],\n      participantNames: [\"Mary\"],\n      conversation: [\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_1.dialog_1.mary_say_1\")],\n          options: [],\n        },\n      ],\n    });\n  }\n  showDialog2() {\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Mary\"],\n      participantNames: [\"Mary\"],\n      conversation: [\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_1.dialog_2.mary_say_1\")],\n          options: [],\n        },\n      ],\n    });\n  }\n\n  onInteractWith(el) {\n    super.onInteractWith(el);\n    if (el.isClass(Exit)) {\n      this.onComplete();\n    }\n    if (el.isClass(Interactive) && el.order === 0 && this.unfinished) {\n      this.showDialog2();\n    }\n  }\n}\nLevel1.key = \"level_1\";\nexport default Level1;\n","import LevelBase from './levelBase'\nimport { PIXEL_NAME, DIRS } from '../../utils/constants'\nimport { Player, Wall, Ground, Empty } from '../objects'\n\n\nclass LevelFinale extends LevelBase {\n  constructor() {\n    super()\n    this.name = 'The escape'\n\n    this.winningLoopRef = this.winningLoop.bind(this)\n  }\n\n  get id() {\n    return this.constructor.key\n  }\n\n  async connectToScene(scene) {\n    await super.connectToScene(scene)\n    this.voidLevel = scene.children.getByName('layer_1').tilemap.height - 1\n    this.fx = this.scene.sound.add('earthquake')\n    // scene.events.once('levelstart', () => {\n    //   scene.events.emit('dialogue:show', {\n    //     participants: ['closeUp_Mary', 'closeUp_Tiamat'],\n    //     conversation: [\n    //       {\n    //         who: 'closeUp_Tiamat',\n    //         text: [\n    //           \"STOP!!\",\n    //           \"I will destroy everything\",\n    //           \"if i have to.\",\n    //           \"you belong to me!!\",\n    //         ]\n    //       }\n    //     ]\n    //   })\n    // })\n    scene.events.on('update', this.winningLoopRef)\n    this.startVoid(scene)\n    \n  }\n  startVoid(phaserScene) {\n    const camera = phaserScene.cameras.main\n    setTimeout(() => {\n      camera.shake(2000, 0.005)\n      this.fx.play()\n    }, 1500)\n    // destroy ground up to 1 tiles before player\n  }\n  playerLoop() {\n    super.playerLoop()\n    this.voidLoop()\n  }\n  resetAutoVoidTimer() {\n    clearTimeout(this.autoDestroyTID)\n    this.autoDestroyTID = setTimeout(this.destroyMap.bind(this), 5000)\n  }\n  destroyMap() {\n    this.resetAutoVoidTimer()\n    const layer = this.scene.children.getByName('layer_1')\n    if(!layer) {\n      return false\n    }\n    const { tilemap: map } = layer\n    const camera = this.scene.cameras.main\n    const y = this.voidLevel\n    layer.fill(100, 0, y, map.width, 1)\n    this.objects[y].forEach((el, x) => {\n      if (el.isClass(Wall) || el.isClass(Ground)) {\n        this.objects[y][x] = new Empty(PIXEL_NAME.EMPTY, this)\n      }\n    })\n    \n    this.moveables = this.moveables.filter(el => {\n      if (el.position.y > this.voidLevel) {\n        el.alien?.destroy()\n        return false\n      }\n      return true\n    })\n\n    camera.shake(1000, 0.001)\n    this.fx.play()\n    this.voidLevel--\n\n    // eval death.\n    if (this.player.position.y > this.voidLevel) {\n      this.player.die()\n      this.onCharacterDie(this.player)\n    }\n  }\n  voidLoop() {\n    // detect player move direction\n    if (this.player.isMoving && this.player.nextMoveDir === DIRS.UP) {\n      this.resetAutoVoidTimer()\n      // if moves up\n      if(this.voidLevel - this.player.position.y > 8) {\n        // only detroy ground when more than 3 tiles of space\n        this.destroyMap()\n      }\n    } else if(this.player.isMoving && this.player.nextMoveDir !== '') {\n      // if moves sides or down\n      // destroy ground\n      this.destroyMap()      \n    }\n\n  }\n  destroy() {\n    this.scene.events.off('update', this.winningLoopRef)\n    this.fx.stop()\n    clearTimeout(this.autoDestroyTID)\n    \n  }\n\n  winningLoop() {\n    if(this.player.position.y < 5) {\n      clearTimeout(this.autoDestroyTID)\n      this.scene.events.off('update', this.winningLoopRef)\n      this.onComplete()\n    }\n  }\n\n  onAddElement(el) {\n    if(el.isClass(Player)) {\n      el.power = 1\n      el.hasPickaxe = true\n    }\n  }\n}\n\nLevelFinale.key = 'level_finale'\nexport default LevelFinale\n","import Phaser from \"phaser\";\nimport * as Controller from \"../components/Controller/Controller\";\nimport UIMenus from \"../components/UIMenus\";\nimport { SCALE } from \"../utils/constants\";\nimport CRTFilter from \"../utils/CRTShaderFX\";\nimport dbManager from \"../utils/dbManager\";\nimport { playGlobalScore } from \"../utils/globalScore\";\n\nlet titlesMusic;\nexport default class MenuScene extends Phaser.Scene {\n  constructor() {\n    super(\"MenuScene\");\n  }\n\n  preload() {}\n\n  navigateToScene(sceneId, props = {}) {\n    this.cameras.main.fade(500, 0, 0, 0);\n    this.tweens.add({\n      targets: titlesMusic,\n      volume: 0,\n      ease: \"Linear\",\n      duration: 500,\n      onComplete: () => {\n        titlesMusic.pause();\n        this.scene.start(sceneId, props);\n      },\n    });\n  }\n\n  create() {\n    this.cameras.main.setPostPipeline(CRTFilter);\n    this.cameras.main.setBackgroundColor(\"#486859\");\n\n    let image = this.add.image(\n      this.cameras.main.width / 2,\n      // this.cameras.main.width / 2,\n      this.cameras.main.height / 2,\n      // this.cameras.main.height / 3,\n      \"Stage1_bg\"\n    );\n    let scaleX = this.cameras.main.width / image.width;\n    let scaleY = this.cameras.main.height / image.height;\n    let scale = Math.max(scaleX, scaleY);\n    image.setScale(scale * 1.5).setScrollFactor(0);\n    image.name = \"background_art\";\n\n    playGlobalScore(this)\n\n    // //  Enable lights and set a dark ambient color\n    // this.lights.enable().setAmbientColor(0x333333);\n    // image.setPipeline(\"Light2D\");\n    // //  Our spotlight. 100px radius and white in color.\n    // var light = this.lights\n    //   .addLight(180, 80, 200)\n    //   .setColor(0xffffff)\n    //   .setIntensity(2);\n    // //  Track the pointer\n    // this.input.on(\"pointermove\", function (pointer) {\n    //   light.x = pointer.x;\n    //   light.y = pointer.y;\n    // });\n\n    // var flash = this.plugins.get('rexFlash').add(part);\n    // flash.flash()\n\n    // var particles = this.add.particles('spark').setScale(SCALE);\n\n    // var emitter = particles.createEmitter();\n\n    // emitter.setPosition(10*SCALE, 10*SCALE);\n    // emitter.setSpeed(20);\n    // // emitter.setBlendMode(Phaser.BlendModes.ADD);\n\n    // off-line version\n    // this.cameras.main.fadeIn(500, 0, 0, 0);\n    // this.events.emit(\"scene_ready\", this.sys.config);\n    // const mainMenu = new UIMenus(this);\n    // mainMenu.showMainMenu();\n    // titlesMusic = this.sound.add(\"credits\", { loop: true });\n    // return false\n\n    titlesMusic = this.sound.add(\"credits\", { loop: true });\n\n    window.WebFont.load({\n      custom: {\n        families: [\"GameGirl\"],\n      },\n      active: () => {\n        this.cameras.main.fadeIn(500, 0, 0, 0);\n        this.events.emit(\"scene_ready\", this.sys.config);\n\n        titlesMusic = this.sound.add(\"credits\", { loop: true });\n\n        // titlesMusic.play();\n\n        // this.events.once(Phaser.Scenes.Events.WAKE, () => console.log(Phaser.Scenes.Events.WAKE))\n        // this.events.once(Phaser.Scenes.Events.UPDATE, () => console.log(Phaser.Scenes.Events.UPDATE))\n        // this.events.once(Phaser.Scenes.Events.TRANSITION_WAKE, () => console.log(Phaser.Scenes.Events.TRANSITION_WAKE))\n        // this.events.once(Phaser.Scenes.Events.TRANSITION_START, () => console.log(Phaser.Scenes.Events.TRANSITION_START))\n        // this.events.once(Phaser.Scenes.Events.TRANSITION_OUT, () => console.log(Phaser.Scenes.Events.TRANSITION_OUT))\n        // this.events.once(Phaser.Scenes.Events.TRANSITION_INIT, () => console.log(Phaser.Scenes.Events.TRANSITION_INIT))\n        // this.events.once(Phaser.Scenes.Events.TRANSITION_COMPLETE, () => console.log(Phaser.Scenes.Events.TRANSITION_COMPLETE))\n        // this.events.once(Phaser.Scenes.Events.START, () => console.log(Phaser.Scenes.Events.START))\n        // this.events.once(Phaser.Scenes.Events.SLEEP, () => console.log(Phaser.Scenes.Events.SLEEP))\n        // this.events.once(Phaser.Scenes.Events.SHUTDOWN, () => console.log(Phaser.Scenes.Events.SHUTDOWN))\n        // this.events.once(Phaser.Scenes.Events.RESUME, () => console.log(Phaser.Scenes.Events.RESUME))\n        // this.events.once(Phaser.Scenes.Events.RENDER, () => console.log(Phaser.Scenes.Events.RENDER))\n        // this.events.once(Phaser.Scenes.Events.READY, () => console.log(Phaser.Scenes.Events.READY))\n        // this.events.once(Phaser.Scenes.Events.PRE_RENDER, () => console.log(Phaser.Scenes.Events.PRE_RENDER))\n        // this.events.once(Phaser.Scenes.Events.PAUSE, () => console.log(Phaser.Scenes.Events.PAUSE))\n        // this.events.once(Phaser.Scenes.Events.CREATE, () => console.log(Phaser.Scenes.Events.CREATE))\n        // this.events.once(Phaser.Scenes.Events.BOOT, () => console.log(Phaser.Scenes.Events.BOOT))\n\n        this.input.keyboard.off(\"keydown\");\n        this.input.keyboard.on(\"keydown\", (event) => {\n          console.log(event.key);\n          if (Controller.isCancel(event.key)) {\n            this.navigateToScene(\"SplashScreenScene\");\n          }\n        });\n\n        const mainMenu = new UIMenus(this);\n        mainMenu.showMainMenu();\n      },\n    });\n  }\n}\n","import Phaser from \"phaser\";\nimport { SCALE, SCALE_RATIO, SCALE_V } from \"./constants\";\nconst fragShader = `\n#define SHADER_NAME BLUR_FS\n\nprecision mediump float;\n\n//\"in\" attributes from our vertex shader\nvarying vec2 outTexCoord;\n\n//declare uniforms\nuniform sampler2D uMainSampler;\nuniform float uResolution;\nuniform float radius;\nuniform vec2 dir;\n\nvoid main()\n{\n    //this will be our RGBA sum\n    vec4 sum = vec4(0.0);\n\n    //our original texcoord for this fragment\n    vec2 tc = outTexCoord;\n\n    //the amount to blur, i.e. how far off center to sample from\n    //1.0 -> blur by one pixel\n    //2.0 -> blur by two pixels, etc.\n    float blur = radius/uResolution;\n\n    //the direction of our blur\n    //(1.0, 0.0) -> x-axis blur\n    //(0.0, 1.0) -> y-axis blur\n    float hstep = dir.x;\n    float vstep = dir.y;\n\n    //apply blurring, using a 9-tap filter with predefined gaussian weights\",\n\n    sum += texture2D(uMainSampler, vec2(tc.x - 4.0*blur*hstep, tc.y - 4.0*blur*vstep)) * 0.0162162162;\n    sum += texture2D(uMainSampler, vec2(tc.x - 3.0*blur*hstep, tc.y - 3.0*blur*vstep)) * 0.0540540541;\n    sum += texture2D(uMainSampler, vec2(tc.x - 2.0*blur*hstep, tc.y - 2.0*blur*vstep)) * 0.1216216216;\n    sum += texture2D(uMainSampler, vec2(tc.x - 1.0*blur*hstep, tc.y - 1.0*blur*vstep)) * 0.1945945946;\n\n    sum += texture2D(uMainSampler, vec2(tc.x, tc.y)) * 0.2270270270;\n\n    sum += texture2D(uMainSampler, vec2(tc.x + 1.0*blur*hstep, tc.y + 1.0*blur*vstep)) * 0.1945945946;\n    sum += texture2D(uMainSampler, vec2(tc.x + 2.0*blur*hstep, tc.y + 2.0*blur*vstep)) * 0.1216216216;\n    sum += texture2D(uMainSampler, vec2(tc.x + 3.0*blur*hstep, tc.y + 3.0*blur*vstep)) * 0.0540540541;\n    sum += texture2D(uMainSampler, vec2(tc.x + 4.0*blur*hstep, tc.y + 4.0*blur*vstep)) * 0.0162162162;\n\n    //discard alpha for our simple demo,return\n    gl_FragColor =  vec4(sum.rgb, 1.0);\n}\n`;\n\nconst fragCRTShader = `\n  #ifdef GL_ES\n      precision highp float;\n  #endif\n\n  #define PI 3.1415926538\n\n  // Samplers\n  varying vec2 outTexCoord;\n  uniform sampler2D uMainSampler;\n\n  // Parameters\n  uniform vec2 curvature;\n  uniform vec2 screenResolution;\n  uniform vec2 scanLineOpacity;\n  uniform float vignetteOpacity;\n  uniform float brightness;\n  uniform float vignetteRoundness;\n\n\n  vec2 curveRemapUV(vec2 uv)\n  {\n      // as we near the edge of our screen apply greater distortion using a sinusoid.\n\n      uv = uv * 2.0 - 1.0;\n  vec2 offset = abs(uv.yx) / vec2(curvature.x, curvature.y);\n  uv = uv + uv * offset * offset;\n  uv = uv * 0.5 + 0.5;\n      return uv;\n  }\n\n  vec4 scanLineIntensity(float uv, float resolution, float opacity)\n  {\n      float intensity = sin(uv * resolution * PI * 2.0);\n      intensity = ((0.5 * intensity) + 0.5) * 0.9 + 0.1;\n      return vec4(vec3(pow(intensity, opacity)), 1.0);\n  }\n\n  vec4 vignetteIntensity(vec2 uv, vec2 resolution, float opacity, float roundness)\n  {\n      float intensity = uv.x * uv.y * (1.0 - uv.x) * (1.0 - uv.y);\n      return vec4(vec3(clamp(pow((resolution.x / roundness) * intensity, opacity), 0.0, 1.0)), 1.0);\n  }\n\n  void main(void) \n  {\n      vec2 remappedUV = curveRemapUV(vec2(outTexCoord.x, outTexCoord.y));\n      vec4 baseColor = texture2D(uMainSampler, remappedUV);\n\n      baseColor *= vignetteIntensity(remappedUV, screenResolution, vignetteOpacity, vignetteRoundness);\n\n      baseColor *= scanLineIntensity(remappedUV.x, screenResolution.y, scanLineOpacity.x);\n      baseColor *= scanLineIntensity(remappedUV.y, screenResolution.x, scanLineOpacity.y);\n\n      baseColor *= vec4(vec3(brightness), 1.0);\n\n      if (remappedUV.x < 0.0 || remappedUV.y < 0.0 || remappedUV.x > 1.0 || remappedUV.y > 1.0){\n          gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n      } else {\n          gl_FragColor = baseColor;\n      }\n  }\n`;\n\nexport default class BlurPostFX extends Phaser.Renderer.WebGL.Pipelines\n  .PostFXPipeline {\n  constructor(game) {\n    // super({game})\n    super({\n      game,\n      renderTarget: true,\n      fragShader: fragCRTShader,\n      // uniforms: [\n      //     'uProjectionMatrix',\n      //     'uMainSampler',\n      //     'uResolution',\n      //     'radius',\n      //     'dir'\n      // ]\n      uniforms: [\n        // 'uProjectionMatrix',\n        \"uMainSampler\",\n        \"curvature\",\n        \"screenResolution\",\n        \"scanLineOpacity\",\n        \"vignetteOpacity\",\n        \"brightness\",\n        \"vignetteRoundness\",\n      ],\n    });\n    this.set2f(\"curvature\", 6.0, 100.0);\n    // this.set2f(\"curvature\", 6.0, 6.0);\n    // this.set2f(\"screenResolution\", 320, 240);\n\n    // const ratio = document.querySelector('canvas').width / document.querySelector('canvas').height\n    // this.set2f(\"screenResolution\", 1024 / ratio, 760 / ratio);\n    // this.set2f(\"screenResolution\", 640 / ratio, 480 / ratio);\n    // this.set2f(\"screenResolution\", 640 / SCALE_RATIO, 480 / SCALE_RATIO);\n    // const w = document.querySelector(\"canvas\").width;\n    // const h = document.querySelector(\"canvas\").height;\n    const w = document.querySelector(\"#content\").width;\n    const h = document.querySelector(\"#content\").height;\n    this.set2f(\"screenResolution\", w, h);\n    this.set2f(\"scanLineOpacity\", 0.5, 0.05);\n    // this.set2f(\"scanLineOpacity\", 0.25, 0.25);\n    this.set1f(\"vignetteOpacity\", 0.5);\n    this.set1f(\"vignetteRoundness\", 1.0);\n    this.set1f(\"brightness\", 1.25);\n\n    window.document.querySelector('#content').style.marginLeft = 0\n    window.document.querySelector('#content').style.marginTop = 0\n  }\n\n  onPreRender() {\n    const ratio =\n      document.querySelector(\"#content\").width /\n      document.querySelector(\"#content\").height;\n    this.set2f(\"screenResolution\", 640, 480);\n  }\n}\n","import { translate } from \"../../utils/localization\"\n\nclass LoadingBar {\n  constructor(scene) {\n    this.scene = scene\n    this.value = 0\n    this.progressBar = null\n    this.progressBox = null\n    this.loadingText = null\n    this.percentText = null\n    this.draw()\n  }\n\n  setValue(val) {\n    this.value = val\n    this.updateProgress()\n    if(this.value >= 1) {\n      this.unload()\n    }\n  }\n\n  updateProgress() {\n    const screenCenterX = this.scene?.cameras?.main?.worldView.x + this.scene?.cameras?.main?.width / 2;\n    const screenCenterY = this.scene?.cameras?.main?.worldView.y + this.scene?.cameras?.main?.height / 2;\n    this.percentText.setText(parseInt(this.value * 100) + '%');\n    this.progressBar.clear();\n    this.progressBar.fillStyle(0xffffff, 1);\n    this.progressBar.fillRect(screenCenterX-300/2, screenCenterY-30/2, 300 * this.value, 30);\n  }\n\n  draw() {\n    this.progressBar = this.scene.add.graphics();\n    this.progressBox = this.scene.add.graphics();\n    this.progressBox.fillStyle(0x222222, 0.8);\n    const screenCenterX = this.scene?.cameras?.main?.worldView.x + this.scene?.cameras?.main?.width / 2;\n    const screenCenterY = this.scene?.cameras?.main?.worldView.y + this.scene?.cameras?.main?.height / 2;\n    const width = this.scene.cameras.main.width;\n    const height = this.scene.cameras.main.height;\n\n    this.progressBox.fillRect(screenCenterX-320/2, screenCenterY-50/2, 320, 50);\n    \n    this.loadingText = this.scene.make.text({\n        x: width / 2,\n        y: height / 2 - 50,\n        text: translate('menu.main.loading_message'),\n        style: {\n            font: '20px monospace',\n            fill: '#ffffff'\n        }\n    });\n    this.loadingText.setOrigin(0.5, 0.5);\n    \n    this.percentText = this.scene.make.text({\n        x: width / 2,\n        y: screenCenterY + 50,\n        text: '0%',\n        style: {\n            font: '18px monospace',\n            fill: '#ffffff'\n        }\n    });\n    this.percentText.setOrigin(0.5, 0.5);\n  }\n\n  unload() {\n    this.progressBar.destroy();\n    this.progressBox.destroy();\n    this.loadingText.destroy();\n    this.percentText.destroy();\n  }\n}\n\nexport default LoadingBar;\n","import Phaser from \"phaser\";\nimport Level1 from \"../components/levels/level_1\";\nimport Level2 from \"../components/levels/level_2\";\nimport Level3 from \"../components/levels/level_3\";\nimport Level4 from \"../components/levels/level_4\";\nimport Level5 from \"../components/levels/level_5\";\nimport Level6 from \"../components/levels/level_6\";\nimport Level7 from \"../components/levels/level_7\";\nimport Level8 from \"../components/levels/level_8\";\nimport Level9 from \"../components/levels/level_9\";\nimport Level10 from \"../components/levels/level_10\";\nimport Level11 from \"../components/levels/level_11\";\nimport Level12 from \"../components/levels/level_12\";\nimport Level13 from \"../components/levels/level_13\";\nimport Level14 from \"../components/levels/level_14\";\nimport Level15 from \"../components/levels/level_15\";\nimport Level16 from \"../components/levels/level_16\";\nimport Level17 from \"../components/levels/level_17\";\nimport Level18 from \"../components/levels/level_18\";\nimport LevelFinale from \"../components/levels/level_finale\";\nimport LevelTest from \"../components/levels/level_ki_finale\";\nimport UIMenus from \"../components/UIMenus\";\nimport CRTFilter from \"../utils/CRTShaderFX\";\nimport LoadingBar from \"../components/LoadingBar/LoadingBar\";\nimport { SCALE } from \"../utils/constants\";\nimport { translate } from \"../utils/localization\";\n\nlet titlesMusic;\nexport default class LandingScene extends Phaser.Scene {\n  constructor() {\n    super(\"LandingScene\");\n  }\n\n  preload() {\n    this.cameras.main.setPostPipeline(CRTFilter);\n\n    const bar = new LoadingBar(this);\n\n    this.load.on(\"progress\", function (value) {\n      bar.setValue(value);\n    });\n\n    this.load.on(\"complete\", function () {\n      window.WebFont.load({\n        custom: {\n          families: [\"GameGirl\", \"Emulogic\"],\n        },\n        active: () => {\n          bar.setValue(1);\n        },\n      });\n      // onLoadingComplete()\n    });\n\n    // const txt = this.add\n    //   .text(\n    //     80 * SCALE(),\n    //     121 * SCALE() + 20 * SCALE(),\n    //     translate(\"menu.main.loading_message\"),\n    //     // https://en.wikipedia.org/wiki/Sumerian_language\n\n    //     //              \n    //     // nam  inim-ma  diri-diri-e3  e-ak\n    //     // acted unspeakably\n\n    //     //        \n    //     // ummaki-da  dam-a-ra  e-da-ak\n\n    //     {\n    //       fontFamily: \"GameGirl\",\n    //       fontSize: \"40px\",\n    //       fill: \"#ffffff\",\n    //     }\n    //   )\n    //   .setShadow(-1, 1);\n\n    // txt.setScale(SCALE() / 5);\n    this.load.script(\n      \"webfont\",\n      \"https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js\"\n    );\n    // this.load.image('main-tiles', process.env.PUBLIC_URL + '/assets/tilemaps/tilemap_20x20.png');\n    this.load.image(\n      \"main-tiles\",\n      process.env.PUBLIC_URL + \"/assets/tilemaps/world1_tiles_20x20.png\"\n    );\n    this.load.image(\n      \"gates-tiles\",\n      process.env.PUBLIC_URL + \"/assets/tilemaps/gates_tilemap_20x20.png\"\n    );\n    this.load.image(\n      \"hud-tiles\",\n      process.env.PUBLIC_URL + \"/assets/tilemaps/hud_tilemap_20x20.png\"\n    );\n    this.load.image(\n      LevelTest.key,\n      process.env.PUBLIC_URL + \"/assets/maps/level_19.png\"\n    );\n    this.load.image(\n      `${LevelTest.key}_bg`,\n      process.env.PUBLIC_URL + \"/assets/maps/level_19_bg.png\"\n    );\n    this.load.image(\n      Level1.key,\n      process.env.PUBLIC_URL + \"/assets/maps/level_1.png\"\n    );\n    this.load.image(\n      `${Level1.key}_bg`,\n      process.env.PUBLIC_URL + \"/assets/maps/level_1_bg.png\"\n    );\n    this.load.image(\n      Level2.key,\n      process.env.PUBLIC_URL + \"/assets/maps/level_2.png\"\n    );\n    this.load.image(\n      `${Level2.key}_bg`,\n      process.env.PUBLIC_URL + \"/assets/maps/level_2_bg.png\"\n    );\n    this.load.image(\n      Level3.key,\n      process.env.PUBLIC_URL + \"/assets/maps/level_3.png\"\n    );\n    this.load.image(\n      `${Level3.key}_bg`,\n      process.env.PUBLIC_URL + \"/assets/maps/level_3_bg.png\"\n    );\n    this.load.image(\n      Level4.key,\n      process.env.PUBLIC_URL + \"/assets/maps/level_4.png\"\n    );\n    this.load.image(\n      `${Level4.key}_bg`,\n      process.env.PUBLIC_URL + \"/assets/maps/level_default_bg.png\"\n    );\n    this.load.image(\n      Level5.key,\n      process.env.PUBLIC_URL + \"/assets/maps/level_5.png\"\n    );\n    this.load.image(\n      `${Level5.key}_bg`,\n      process.env.PUBLIC_URL + \"/assets/maps/level_default_bg.png\"\n    );\n    this.load.image(\n      Level6.key,\n      process.env.PUBLIC_URL + \"/assets/maps/level_6.png\"\n    );\n    this.load.image(\n      `${Level6.key}_bg`,\n      process.env.PUBLIC_URL + \"/assets/maps/level_default_bg.png\"\n    );\n    this.load.image(\n      Level7.key,\n      process.env.PUBLIC_URL + \"/assets/maps/level_7.png\"\n    );\n    this.load.image(\n      `${Level7.key}_bg`,\n      process.env.PUBLIC_URL + \"/assets/maps/level_default_bg.png\"\n    );\n    this.load.image(\n      Level8.key,\n      process.env.PUBLIC_URL + \"/assets/maps/level_8.png\"\n    );\n    this.load.image(\n      `${Level8.key}_bg`,\n      process.env.PUBLIC_URL + \"/assets/maps/level_default_bg.png\"\n    );\n    this.load.image(\n      Level9.key,\n      process.env.PUBLIC_URL + \"/assets/maps/level_9.png\"\n    );\n    this.load.image(\n      `${Level9.key}_bg`,\n      process.env.PUBLIC_URL + \"/assets/maps/level_default_bg.png\"\n    );\n    this.load.image(\n      Level10.key,\n      process.env.PUBLIC_URL + \"/assets/maps/level_10.png\"\n    );\n    this.load.image(\n      `${Level10.key}_bg`,\n      process.env.PUBLIC_URL + \"/assets/maps/level_default_bg.png\"\n    );\n    this.load.image(\n      Level11.key,\n      process.env.PUBLIC_URL + \"/assets/maps/level_11.png\"\n    );\n    this.load.image(\n      `${Level11.key}_bg`,\n      process.env.PUBLIC_URL + \"/assets/maps/level_default_bg.png\"\n    );\n    this.load.image(\n      Level12.key,\n      process.env.PUBLIC_URL + \"/assets/maps/level_12.png\"\n    );\n    this.load.image(\n      `${Level12.key}_bg`,\n      process.env.PUBLIC_URL + \"/assets/maps/level_default_bg.png\"\n    );\n    this.load.image(\n      Level13.key,\n      process.env.PUBLIC_URL + \"/assets/maps/level_13.png\"\n    );\n    this.load.image(\n      `${Level13.key}_bg`,\n      process.env.PUBLIC_URL + \"/assets/maps/level_default_bg.png\"\n    );\n    this.load.image(\n      Level14.key,\n      process.env.PUBLIC_URL + \"/assets/maps/level_14.png\"\n    );\n    this.load.image(\n      `${Level14.key}_bg`,\n      process.env.PUBLIC_URL + \"/assets/maps/level_default_bg.png\"\n    );\n    this.load.image(\n      Level15.key,\n      process.env.PUBLIC_URL + \"/assets/maps/level_15.png\"\n    );\n    this.load.image(\n      `${Level15.key}_bg`,\n      process.env.PUBLIC_URL + \"/assets/maps/level_default_bg.png\"\n    );\n    this.load.image(\n      Level16.key,\n      process.env.PUBLIC_URL + \"/assets/maps/level_16.png\"\n    );\n    this.load.image(\n      `${Level16.key}_bg`,\n      process.env.PUBLIC_URL + \"/assets/maps/level_default_bg.png\"\n    );\n    this.load.image(\n      Level17.key,\n      process.env.PUBLIC_URL + \"/assets/maps/level_17.png\"\n    );\n    this.load.image(\n      `${Level17.key}_bg`,\n      process.env.PUBLIC_URL + \"/assets/maps/level_default_bg.png\"\n    );\n    this.load.image(\n      Level18.key,\n      process.env.PUBLIC_URL + \"/assets/maps/level_18.png\"\n    );\n    this.load.image(\n      `${Level18.key}_bg`,\n      process.env.PUBLIC_URL + \"/assets/maps/level_default_bg.png\"\n    );\n    this.load.image(\n      LevelFinale.key,\n      process.env.PUBLIC_URL + \"/assets/maps/level_finale.png\"\n    );\n    this.load.image(\n      \"Stage1_bg\",\n      process.env.PUBLIC_URL + \"/assets/images/stage_1_bg_art.png\"\n    );\n    this.load.image(\n      \"IntroTiamat\",\n      process.env.PUBLIC_URL + \"/assets/images/intro_tiamat.png\"\n    );\n    this.load.image(\n      \"IntroSky\",\n      process.env.PUBLIC_URL + \"/assets/images/intro_sky.png\"\n    );\n    this.load.image(\n      \"IntroClouds\",\n      process.env.PUBLIC_URL + \"/assets/images/intro_clouds.png\"\n    );\n    this.load.image(\n      \"IntroGround\",\n      process.env.PUBLIC_URL + \"/assets/images/intro_ground.png\"\n    );\n    this.load.image(\n      \"IntroGroundHigh\",\n      process.env.PUBLIC_URL + \"/assets/images/intro_ground_high.png\"\n    );\n    this.load.image(\n      \"IntroGroundBreak\",\n      process.env.PUBLIC_URL + \"/assets/images/intro_ground_break.png\"\n    );\n    this.load.image(\n      \"IntroComet\",\n      process.env.PUBLIC_URL + \"/assets/images/intro_comet.png\"\n    );\n    this.load.image(\n      \"IntroPeopleClimbing\",\n      process.env.PUBLIC_URL + \"/assets/images/intro_people_climbing.png\"\n    );\n    this.load.image(\n      \"IntroPeoplePraying\",\n      process.env.PUBLIC_URL + \"/assets/images/intro_people_praying.png\"\n    );\n    this.load.image(\n      \"IntroPeoplePrayingHigh\",\n      process.env.PUBLIC_URL + \"/assets/images/intro_people_praying_high.png\"\n    );\n    this.load.image(\n      \"IntroPeopleDescending\",\n      process.env.PUBLIC_URL + \"/assets/images/intro_people_descending.png\"\n    );\n    this.load.image(\n      \"IntroPeopleFalling\",\n      process.env.PUBLIC_URL + \"/assets/images/intro_people_falling.png\"\n    );\n    this.load.image(\n      \"IntroPeopleJumping\",\n      process.env.PUBLIC_URL + \"/assets/images/intro_people_jumping.png\"\n    );\n    this.load.image(\n      \"IntroStorm\",\n      process.env.PUBLIC_URL + \"/assets/images/intro_storm.png\"\n    );\n    this.load.image(\n      \"Prologue\",\n      process.env.PUBLIC_URL + \"/assets/images/Prologue.png\"\n    );\n    this.load.image(\n      \"thechild\",\n      process.env.PUBLIC_URL + \"/assets/images/thechild.png\"\n    );\n    this.load.image(\n      \"theworld\",\n      process.env.PUBLIC_URL + \"/assets/images/theworld.png\"\n    );\n    this.load.image(\n      \"Tiamat\",\n      process.env.PUBLIC_URL + \"/assets/images/Tiamat.png\"\n    );\n    this.load.image(\n      \"Cover\",\n      process.env.PUBLIC_URL + \"/assets/images/cover.png\"\n    );\n    this.load.image(\n      \"Bossfight\",\n      process.env.PUBLIC_URL + \"/assets/images/Bossfight.png\"\n    );\n    this.load.image(\n      \"Bossfighthands\",\n      process.env.PUBLIC_URL + \"/assets/images/Bossfighthands.png\"\n    );\n    this.load.image(\n      \"spark\",\n      process.env.PUBLIC_URL + \"/assets/sprites/flare_blue.png\"\n    );\n    this.load.image(\n      \"light_beam\",\n      process.env.PUBLIC_URL + \"/assets/sprites/light_beam.png\"\n    );\n    this.load.spritesheet(\n      \"boulder\",\n      process.env.PUBLIC_URL + \"/assets/sprites/boulder_sprite.png\",\n      { frameWidth: 26, frameHeight: 26 }\n    );\n    this.load.spritesheet(\n      \"explosion\",\n      process.env.PUBLIC_URL + \"/assets/sprites/explosion_sprite.png\",\n      { frameWidth: 26, frameHeight: 26 }\n    );\n    this.load.spritesheet(\n      \"torch\",\n      process.env.PUBLIC_URL + \"/assets/sprites/torch_sprite.png\",\n      { frameWidth: 26, frameHeight: 26 }\n    );\n    this.load.spritesheet(\n      \"brave\",\n      process.env.PUBLIC_URL + \"/assets/sprites/brave_sprite.png\",\n      { frameWidth: 26, frameHeight: 26 }\n    );\n    this.load.spritesheet(\n      \"bro\",\n      process.env.PUBLIC_URL + \"/assets/sprites/bro_sprite.png\",\n      { frameWidth: 26, frameHeight: 26 }\n    );\n    this.load.spritesheet(\n      \"dwarf\",\n      process.env.PUBLIC_URL + \"/assets/sprites/dwarf_sprite.png\",\n      { frameWidth: 26, frameHeight: 26 }\n    );\n    this.load.spritesheet(\n      \"boss\",\n      process.env.PUBLIC_URL + \"/assets/sprites/boss_sprite.png\",\n      { frameWidth: 20, frameHeight: 20 }\n    );\n    this.load.spritesheet(\n      \"gate\",\n      process.env.PUBLIC_URL + \"/assets/sprites/gate_sprite.png\",\n      { frameWidth: 26, frameHeight: 26 }\n    );\n    this.load.spritesheet(\n      \"bat\",\n      process.env.PUBLIC_URL + \"/assets/sprites/bat_sprite.png\",\n      { frameWidth: 26, frameHeight: 26 }\n    );\n    this.load.spritesheet(\n      \"pickables\",\n      process.env.PUBLIC_URL + \"/assets/sprites/pickables_sprite.png\",\n      { frameWidth: 26, frameHeight: 26 }\n    );\n    this.load.spritesheet(\n      \"closeUp\",\n      process.env.PUBLIC_URL + \"/assets/sprites/close_up_sprite.png\",\n      { frameWidth: 40, frameHeight: 40 }\n    );\n    this.load.spritesheet(\n      \"closeUpItems\",\n      process.env.PUBLIC_URL + \"/assets/sprites/close_up_sprite.png\",\n      { frameWidth: 20, frameHeight: 20 }\n    );\n    this.load.audio(\n      \"credits\",\n      process.env.PUBLIC_URL + \"/assets/audio/Score/Opening Credits_.mp3\"\n    );\n    this.load.audio(\n      \"opening_peace\",\n      process.env.PUBLIC_URL + \"/assets/audio/Score/NormalDay.mp3\"\n    );\n    this.load.audio(\n      \"opening_quakes\",\n      process.env.PUBLIC_URL + \"/assets/audio/Score/Earthquakes+Tiamat.mp3\"\n    );\n    this.load.audio(\n      \"credits\",\n      process.env.PUBLIC_URL + \"/assets/audio/Score/NormalDay.mp3\"\n    );\n    this.load.audio(\n      \"levels_surface\",\n      process.env.PUBLIC_URL + \"/assets/audio/Score/1st 7 Levels.mp3\"\n    );\n    this.load.audio(\n      \"swarf_chat_music\",\n      process.env.PUBLIC_URL +\n        \"/assets/audio/Score/MushroomDwarfDialogue(loop).mp3\"\n    );\n    this.load.audio(\n      \"generic_chat_music\",\n      process.env.PUBLIC_URL + \"/assets/audio/Score/GenericDialogue(loop).mp3\"\n    );\n    this.load.audio(\n      \"escape_music\",\n      process.env.PUBLIC_URL +\n        \"/assets/audio/Score/BossBattle_EscapeTheVoid!(loop).mp3\"\n    );\n    this.load.audio(\n      \"rock_hit\",\n      process.env.PUBLIC_URL + \"/assets/audio/SFX/RockHit.mp3\"\n    );\n    this.load.audio(\n      \"rock_hit2\",\n      process.env.PUBLIC_URL + \"/assets/audio/SFX/RockHit2.mp3\"\n    );\n    this.load.audio(\n      \"rock_hit3\",\n      process.env.PUBLIC_URL + \"/assets/audio/SFX/RockHit3.wav\"\n    );\n    this.load.audio(\n      \"rock_hit_soft\",\n      process.env.PUBLIC_URL + \"/assets/audio/SFX/RockHitSoft.mp3\"\n    );\n    this.load.audio(\n      \"explosion\",\n      process.env.PUBLIC_URL + \"/assets/audio/SFX/MidSizeExplosion.mp3\"\n    );\n    this.load.audio(\n      \"clear_hit1\",\n      process.env.PUBLIC_URL + \"/assets/audio/SFX/PickaxeClearingGround1.mp3\"\n    );\n    this.load.audio(\n      \"clear_hit2\",\n      process.env.PUBLIC_URL + \"/assets/audio/SFX/PickaxeClearingGround2.mp3\"\n    );\n    this.load.audio(\n      \"clear_hit3\",\n      process.env.PUBLIC_URL + \"/assets/audio/SFX/PickaxeClearingGround3.mp3\"\n    );\n    this.load.audio(\n      \"rock_slide_hard1\",\n      process.env.PUBLIC_URL + \"/assets/audio/SFX/RockSlideHard1.mp3\"\n    );\n    this.load.audio(\n      \"rock_slide_hard2\",\n      process.env.PUBLIC_URL + \"/assets/audio/SFX/RockSlideHard2.mp3\"\n    );\n    this.load.audio(\n      \"rock_slide_hard3\",\n      process.env.PUBLIC_URL + \"/assets/audio/SFX/RockSlideHard3.mp3\"\n    );\n    this.load.audio(\n      \"rock_slide_soft1\",\n      process.env.PUBLIC_URL + \"/assets/audio/SFX/RockSlideSoft1.mp3\"\n    );\n    this.load.audio(\n      \"rock_slide_soft2\",\n      process.env.PUBLIC_URL + \"/assets/audio/SFX/RockSlideSoft2.mp3\"\n    );\n    this.load.audio(\n      \"rock_slide_soft3\",\n      process.env.PUBLIC_URL + \"/assets/audio/SFX/RockSlideSoft3.mp3\"\n    );\n    this.load.audio(\n      \"coin\",\n      process.env.PUBLIC_URL + \"/assets/audio/SFX/CoinSound.mp3\"\n    );\n    this.load.audio(\n      \"gem_hit\",\n      process.env.PUBLIC_URL + \"/assets/audio/SFX/GemHitRock.mp3\"\n    );\n    this.load.audio(\n      \"shroom_pick\",\n      process.env.PUBLIC_URL + \"/assets/audio/SFX/MushroomPickUp.mp3\"\n    );\n    this.load.audio(\n      \"gem_pick\",\n      process.env.PUBLIC_URL + \"/assets/audio/SFX/DiamondPickUp.mp3\"\n    );\n    this.load.audio(\n      \"death_by_rock\",\n      process.env.PUBLIC_URL + \"/assets/audio/SFX/DeathByRock.mp3\"\n    );\n    this.load.audio(\n      \"level_complete\",\n      process.env.PUBLIC_URL + \"/assets/audio/SFX/Level Finish.mp3\"\n    );\n    this.load.audio(\n      \"earthquake\",\n      process.env.PUBLIC_URL + \"/assets/audio/SFX/Earthquake.mp3\"\n    );\n    // this.load.on(Phaser.Loader.Events.PROGRESS, console.log)\n  }\n\n  navigateToScene(sceneId, props = {}) {\n    this.cameras.main.fade(500, 0, 0, 0);\n    this.cameras.main.once(\"camerafadeoutcomplete\", () => {\n      this.scene.start(sceneId, props);\n    });\n    // this.tweens.add({\n    //   targets: titlesMusic,\n    //   volume: 0,\n    //   ease: \"Linear\",\n    //   duration: 500,\n    //   onComplete: () => {\n    //     titlesMusic.pause();\n    //     console.log(sceneId);\n    //     this.scene.start(sceneId, props);\n    //   },\n    // });\n  }\n\n  create() {\n    // this.cameras.main.setBackgroundColor(\"#486859\")\n    // this.cameras.main.setBackgroundColor(\"#000\");\n\n    const txt = this.add\n      .text(\n        80 * SCALE(),\n        121 * SCALE() + 20 * SCALE(),\n        translate('menu.main.key_to_start'),\n        // https://en.wikipedia.org/wiki/Sumerian_language\n\n        //              \n        // nam  inim-ma  diri-diri-e3  e-ak\n        // acted unspeakably\n\n        //        \n        // ummaki-da  dam-a-ra  e-da-ak\n\n        {\n          fontFamily: \"GameGirl\",\n          fontSize: \"40px\",\n          fill: \"#ffffff\",\n        }\n      )\n      .setShadow(-1, 1);\n\n    txt.setScale(SCALE() / 5);\n\n    this.input.keyboard.on(\"keydown\", (event) => {\n      this.navigateToScene(\"SplashScreenScene\");\n      // window.document.addEventListener('fullscreenchange', () => {\n      //   if(document.fullscreenElement === null) {\n      //     window.location.reload()\n      //   }\n      // });\n      // if (event.key === \"Enter\" && !this.scale.isFullscreen) {\n      //   this.scale.startFullscreen();\n      //   this.navigateToScene(\"SplashScreenScene\");\n      //   this.input.keyboard.off(\"keydown\");\n      // }\n    });\n\n    // let image = this.add.image(\n    //   this.cameras.main.width / 2,\n    //   this.cameras.main.height / 2,\n    //   \"Cover\"\n    // );\n    // let image = this.add.image(this.cameras.main.width / 2, this.cameras.main.height / 3, 'Cover')\n    // let scaleX = this.cameras.main.width / image.width;\n    // let scaleY = this.cameras.main.height / image.height;\n    // let scale = Math.min(scaleX, scaleY);\n    // image.setOrigin(0.5, 0.5);\n    // image.setScale(scale).setScrollFactor(0);\n    // // image.setScale(scale * 1.5).setScrollFactor(0)\n    // image.name = \"background_art\";\n\n    // this.tweens.add({\n    //   targets: circularProgress,\n    //   value: 0.75,\n    //   duration: 2000,\n    //   ease: \"Cubic\",\n    // });\n\n    // this.anims.create({\n    //   key: \"explosion_explode\",\n    //   frames: this.anims.generateFrameNumbers(\"explosion\", {\n    //     frames: [0, 1, 2, 3, 4, 5, 6, 7],\n    //   }),\n    //   frameRate: 1,\n    //   repeat: 0,\n    // });\n\n    // const explosion = this.add.sprite(48, 16).setOrigin(0.125, 0.125).play('explosion_explode')\n    // explosion.setScale(SCALE())\n    // explosion.x = explosion.y + 200\n\n    // off-line version\n    // this.cameras.main.fadeIn(500, 0, 0, 0)\n    // this.events.emit('scene_ready', this.sys.config)\n    // const menu = new UIMenus(this)\n    // menu.showInitialMenu()\n    // titlesMusic = this.sound.add('credits', { loop: true });\n    // return false\n\n    // titlesMusic = this.sound.add(\"credits\", { loop: true });\n    // window.WebFont.load({\n    //   custom: {\n    //     families: [\"GameGirl\", \"Emulogic\"],\n    //   },\n    //   active: () => {\n    // this.cameras.main.fadeIn(500, 0, 0, 0);\n    // this.events.emit(\"scene_ready\", this.sys.config);\n\n    // titlesMusic = this.sound.add(\"credits\", { loop: true });\n    // titlesMusic.play()\n\n    // this.events.once(Phaser.Scenes.Events.WAKE, () => console.log(Phaser.Scenes.Events.WAKE))\n    // this.events.once(Phaser.Scenes.Events.UPDATE, () => console.log(Phaser.Scenes.Events.UPDATE))\n    // this.events.once(Phaser.Scenes.Events.TRANSITION_WAKE, () => console.log(Phaser.Scenes.Events.TRANSITION_WAKE))\n    // this.events.once(Phaser.Scenes.Events.TRANSITION_START, () => console.log(Phaser.Scenes.Events.TRANSITION_START))\n    // this.events.once(Phaser.Scenes.Events.TRANSITION_OUT, () => console.log(Phaser.Scenes.Events.TRANSITION_OUT))\n    // this.events.once(Phaser.Scenes.Events.TRANSITION_INIT, () => console.log(Phaser.Scenes.Events.TRANSITION_INIT))\n    // this.events.once(Phaser.Scenes.Events.TRANSITION_COMPLETE, () => console.log(Phaser.Scenes.Events.TRANSITION_COMPLETE))\n    // this.events.once(Phaser.Scenes.Events.START, () => console.log(Phaser.Scenes.Events.START))\n    // this.events.once(Phaser.Scenes.Events.SLEEP, () => console.log(Phaser.Scenes.Events.SLEEP))\n    // this.events.once(Phaser.Scenes.Events.SHUTDOWN, () => console.log(Phaser.Scenes.Events.SHUTDOWN))\n    // this.events.once(Phaser.Scenes.Events.RESUME, () => console.log(Phaser.Scenes.Events.RESUME))\n    // this.events.once(Phaser.Scenes.Events.RENDER, () => console.log(Phaser.Scenes.Events.RENDER))\n    // this.events.once(Phaser.Scenes.Events.READY, () => console.log(Phaser.Scenes.Events.READY))\n    // this.events.once(Phaser.Scenes.Events.PRE_RENDER, () => console.log(Phaser.Scenes.Events.PRE_RENDER))\n    // this.events.once(Phaser.Scenes.Events.PAUSE, () => console.log(Phaser.Scenes.Events.PAUSE))\n    // this.events.once(Phaser.Scenes.Events.CREATE, () => console.log(Phaser.Scenes.Events.CREATE))\n    // this.events.once(Phaser.Scenes.Events.BOOT, () => console.log(Phaser.Scenes.Events.BOOT))\n\n    // let currentOption = 0\n\n    // const arrow = this.add.graphics({ fillStyle: { color: 0xffffff, alpha: 1 } })\n    // arrow.fillTriangle(0, 0, 5, 5, 0, 10).setPosition(70 * SCALE, 27 * SCALE)\n    // // arrow.setPosition(70 * SCALE, ((12 * newOption) + 2) * SCALE)\n    // arrow.setScale(SCALE)\n\n    // const menu = new UIMenus(this);\n    // menu.showInitialMenu();\n\n    // menuOptions.forEach((o, idx) => {\n    //   const txt = this.add.text(80 * SCALE, (14 * idx + 1) * SCALE + 20 * SCALE,\n    //     o.label,\n    //     {\n    //       fontFamily: 'GameGirl',\n    //       // fontSize: \"14px\",\n    //       fill: \"#ffffff\",\n    //     }\n    //   ).setVisible(!o.disabled)\n    //   txt.displayHeight = 10 * SCALE\n    //   txt.setScale(SCALE)\n    //   // txt.displayWidth = idx * 10 * SCALE\n\n    // })\n\n    // this.input.keyboard.on('keydown', event => {\n    //   let newOption = false\n    //   if (event.key === 'ArrowUp') {\n    //     newOption = currentOption > 0 ? currentOption - 1 : menuOptions.length - 1\n    //   }\n    //   if (event.key === 'ArrowDown') {\n    //     newOption = currentOption < menuOptions.length - 1 ? currentOption + 1 : 0\n    //   }\n    //   if(newOption !== false && !menuOptions[newOption].disabled) {\n    //     const INIT_OFFSET = 27 * SCALE\n    //     arrow.setPosition(70 * SCALE, (14 * newOption) * SCALE + INIT_OFFSET)\n    //     currentOption = newOption\n    //   }\n    //   if (event.key === 'Enter') {\n    //     if(!menuOptions[currentOption].disabled) {\n    //       menuOptions[currentOption].onSelect()\n    //     }\n    //   }\n    // })\n    // },\n    // });\n  }\n}\n","const getMusic = (scene) => {\n  if (!window.credits_score) {\n    window.credits_score = scene.sound.add(\"credits\", {\n      loop: true,\n      valume: 0,\n    });\n  }\n  return window.credits_score;\n};\nexport const playGlobalScore = (scene) => {\n  stopResumeScore(scene);\n  const music = getMusic(scene);\n  if (!music.isPlaying) {\n    music.play();\n    music.volume = 0;\n\n    scene.tweens.add({\n      targets: music,\n      volume: 1,\n      delay: 10,\n      ease: \"Linear\",\n      duration: 1000,\n    });\n  }\n};\nexport const stopGlobalScore = (scene) => {\n  const music = getMusic(scene);\n  if (music.isPlaying) {\n    scene.tweens.add({\n      targets: music,\n      volume: 0,\n      ease: \"Linear\",\n      duration: 1000,\n      onComplete: () => {\n        music.stop();\n      },\n    });\n  }\n};\n\nconst getResumeMusic = (scene) => {\n  if (!window.resume_score) {\n    window.resume_score = scene.sound.add(\"generic_chat_music\", {\n      loop: true,\n      valume: 0,\n    });\n  }\n  return window.resume_score;\n};\nexport const playResumeScore = (scene) => {\n  const music = getResumeMusic(scene);\n  if (!music.isPlaying) {\n    music.play();\n    music.volume = 0;\n\n    scene.tweens.add({\n      targets: music,\n      volume: 1,\n      delay: 10,\n      ease: \"Linear\",\n      duration: 1000,\n    });\n  }\n};\nexport const stopResumeScore = (scene) => {\n  const music = getResumeMusic(scene);\n  if (music.isPlaying) {\n    scene.tweens.add({\n      targets: music,\n      volume: 0,\n      ease: \"Linear\",\n      duration: 1000,\n      onComplete: () => {\n        music.stop();\n      },\n    });\n  }\n};\n","import Phaser from \"phaser\";\nimport { SCALE, TILES_BY_SCREEN, TILE_SIZE } from \"../utils/constants\";\nimport CRTFilter from \"../utils/CRTShaderFX\";\nimport UI from \"../components/UI\";\nimport { translate } from \"../utils/localization\";\nimport Level1 from \"../components/levels/level_1\";\nimport dbManager from \"../utils/dbManager\";\nimport { stopGlobalScore } from \"../utils/globalScore\";\n\nexport default class IntroScene extends Phaser.Scene {\n  constructor() {\n    super(\"IntroScene\");\n\n    // intro images\n    this.images = {\n      tiamat: null,\n      sky: null,\n      clouds: null,\n      storm: null,\n      ground: null,\n      ground_high: null,\n      ground_break: null,\n      comet: null,\n      people_climbing: null,\n      people_paying: null,\n      people_paying_high: null,\n      people_descending: null,\n      people_falling: null,\n      people_jumping: null,\n    };\n    this.texts = {\n      line1: null,\n      line2: null,\n      line3: null,\n      level_title: null,\n    };\n    this.sounds = {\n      background_music: null,\n      dramatic_music: null,\n      earthquake: null,\n    };\n  }\n\n  preload() {\n    dbManager.reset();\n  }\n\n  createAnimations() {\n    this.anims.create({\n      key: \"closeUp_Mary\",\n      frames: this.anims.generateFrameNumbers(\"closeUp\", { frames: [0] }),\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"closeUp_Marduk\",\n      frames: this.anims.generateFrameNumbers(\"closeUp\", { frames: [1] }),\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"closeUp_Dwarf\",\n      frames: this.anims.generateFrameNumbers(\"closeUp\", { frames: [2] }),\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"closeUp_Tiamat\",\n      frames: this.anims.generateFrameNumbers(\"closeUp\", { frames: [5] }),\n      repeat: 0,\n    });\n    // this.anims.create({\n    //   key: 'closeUp_Pickaxe',\n    //   frames:this.anims.generateFrameNumbers('closeUpItems', { frames: [ 6 ] }),\n    //   repeat: 0,\n    // })\n    // this.anims.create({\n    //   key: 'closeUp_Mushroom',\n    //   frames:this.anims.generateFrameNumbers('closeUpItems', { frames: [ 7 ] }),\n    //   repeat: 0,\n    // })\n  }\n  createSounds() {\n    this.sounds.background_music = this.sound.add(\"opening_peace\", {\n      loop: true,\n    });\n    this.sounds.dramatic_music = this.sound.add(\"opening_quakes\", {\n      loop: true,\n    });\n    this.sounds.earthquake = this.sound.add(\"earthquake\");\n  }\n  createTextPlaceholders() {\n    this.texts.line1 = this.createTextLine(-4);\n    this.texts.line2 = this.createTextLine(-3);\n    this.texts.line3 = this.createTextLine(-2);\n\n    this.texts.level_title = this.createTextLine(0);\n    this.texts.level_title.setPosition(\n      this.cameras.main.width / 2,\n      this.cameras.main.height / 2\n    );\n    this.texts.level_title._shadow.setPosition(\n      this.cameras.main.width / 2,\n      this.cameras.main.height / 2\n    );\n    this.texts.level_title.setOrigin(0.5, 0.5);\n    this.texts.level_title._shadow.setOrigin(0.5, 0.5);\n    this.texts.level_title.alpha = 0;\n    this.texts.level_title._shadow.alpha = 0;\n    this.texts.level_title.setText(translate(\"stage_1.title\"));\n  }\n  createTextLine(lineNumber) {\n    const LINE_HEIGHT = 10 * SCALE;\n    const LINE_REF = lineNumber < 0 ? this.cameras.main.height : 0;\n    const LINE_REF_FACTOR = lineNumber < 0 ? -1 : 1;\n    const XPOS = 2 * SCALE;\n    const YPOS =\n      LINE_REF + Math.abs(LINE_HEIGHT * lineNumber) * LINE_REF_FACTOR;\n    const lineShadow = this.add\n      .text(80, 10, \"\", {\n        fontFamily: \"GameGirl\",\n        fontSize: \"10px\",\n        fill: \"#ffffff\",\n      })\n      .setScale(SCALE)\n      .setPosition(XPOS, YPOS);\n\n    lineShadow.displayHeight = LINE_HEIGHT;\n    const line = this.add\n      .text(lineShadow.x + 5, lineShadow.y - 5, \"\", lineShadow.style)\n      .setScale(SCALE);\n    line.displayHeight = lineShadow.displayHeight;\n    lineShadow.setTint(0x333333);\n\n    // line.setData('shadow', lineShadow)\n    line._setText = line.setText;\n    line._shadow = lineShadow;\n    line.setText = (txt) => {\n      line._shadow.setText(txt);\n      line._setText(txt);\n    };\n\n    return line;\n  }\n  createImages() {\n    this.images.sky = this.createFullscreenImage(\"IntroSky\");\n    this.images.clouds = this.createFullscreenImage(\"IntroClouds\");\n    this.images.tiamat = this.createFullscreenImage(\"IntroTiamat\");\n    this.images.ground = this.createFullscreenImage(\"IntroGround\");\n    this.images.comet = this.createFullscreenImage(\"IntroComet\");\n    this.images.storm = this.createFullscreenImage(\"IntroStorm\");\n    this.images.ground_high = this.createFullscreenImage(\"IntroGroundHigh\");\n    this.images.ground_break = this.createFullscreenImage(\"IntroGroundBreak\");\n    this.images.people_climbing = this.createFullscreenImage(\n      \"IntroPeopleClimbing\"\n    );\n    this.images.people_falling =\n      this.createFullscreenImage(\"IntroPeopleFalling\");\n    this.images.people_paying =\n      this.createFullscreenImage(\"IntroPeoplePraying\");\n    this.images.people_paying_high = this.createFullscreenImage(\n      \"IntroPeoplePrayingHigh\"\n    );\n    this.images.people_descending = this.createFullscreenImage(\n      \"IntroPeopleDescending\"\n    );\n    this.images.people_jumping =\n      this.createFullscreenImage(\"IntroPeopleJumping\");\n  }\n  createFullscreenImage(name) {\n    let image = this.add.image(\n      this.cameras.main.width / 2,\n      this.cameras.main.height / 2,\n      name\n    );\n    image.setScale(SCALE).setScrollFactor(0);\n    image.alpha = 0;\n    return image;\n  }\n\n  async animEnterTiamat(duration) {\n    return new Promise((res) => {\n      this.tweens.add({\n        targets: this.images.tiamat,\n        alpha: 1,\n        // scale: scale,\n        duration,\n        ease: \"Linear\",\n        onComplete: res,\n      });\n    });\n  }\n  async animExitTiamat(duration) {\n    return new Promise((res) => {\n      this.tweens.add({\n        targets: this.images.tiamat,\n        alpha: 0,\n        duration,\n        ease: \"Linear\",\n        onComplete: res,\n      });\n    });\n  }\n  async animEnterWorld() {\n    return new Promise((res) => {\n      this.tweens.add({\n        targets: this.images.sky,\n        // scale: scale,\n        alpha: 1,\n        duration: 2500,\n        ease: \"Linear\",\n        // onComplete: res\n      });\n      this.tweens.add({\n        targets: this.images.clouds,\n        // scale: scale,\n        alpha: 1,\n        delay: 3000,\n        duration: 2500,\n        ease: \"Linear\",\n        // onComplete: res\n      });\n      this.tweens.add({\n        targets: this.images.comet,\n        // scale: scale,\n        alpha: 1,\n        delay: 6000,\n        duration: 2500,\n        ease: \"Linear\",\n        // onComplete: res\n      });\n      this.tweens.add({\n        targets: this.images.ground,\n        // scale: scale,\n        alpha: 1,\n        delay: 9000,\n        duration: 2500,\n        ease: \"Linear\",\n        onComplete: res,\n      });\n    });\n  }\n  async animEnterPeople() {\n    const DELAY_TO_START = 3000;\n    return new Promise((res) => {\n      this.tweens.add({\n        targets: this.images.people_climbing,\n        delay: DELAY_TO_START,\n        alpha: 1,\n        duration: 1000,\n        yoyo: true,\n        hold: 1000,\n        ease: \"Linear\",\n        // onComplete: res\n      });\n      this.tweens.add({\n        targets: this.images.people_paying,\n        // scale: scale,\n        alpha: 1,\n        delay: DELAY_TO_START + 2000,\n        duration: 1000,\n        ease: \"Linear\",\n        onComplete: res,\n      });\n    });\n  }\n  async animGroundTransition() {\n    return new Promise((res) => {\n      this.tweens.add({\n        targets: [this.images.people_paying, this.images.ground],\n        alpha: 0,\n        duration: 1000,\n        ease: \"Linear\",\n      });\n      this.tweens.add({\n        targets: [this.images.people_paying_high, this.images.ground_high],\n        alpha: 1,\n        // delay: 1000,\n        duration: 1000,\n        ease: \"Linear\",\n      });\n      // anim people\n      this.tweens.add({\n        targets: [this.images.people_paying_high],\n        alpha: 0,\n        delay: 2000,\n        duration: 1000,\n        ease: \"Linear\",\n      });\n      this.tweens.add({\n        targets: [this.images.people_descending],\n        alpha: 1,\n        delay: 2000,\n        duration: 1000,\n        ease: \"Linear\",\n        completeDelay: 2000,\n        onComplete: res,\n      });\n    });\n  }\n  async animPage(duration) {\n    return new Promise((res) => {\n      this.texts.line1.alpha =\n        this.texts.line2.alpha =\n        this.texts.line3.alpha =\n          0;\n\n      this.tweens.add({\n        targets: [\n          this.texts.line1,\n          this.texts.line1._shadow,\n          this.texts.line2,\n          this.texts.line2._shadow,\n          this.texts.line3,\n          this.texts.line3._shadow,\n        ],\n        alpha: 1,\n        duration: 1000,\n        completeDelay: duration, // delay before onComplete\n        onComplete: () => {\n          this.tweens.add({\n            targets: [\n              this.texts.line1,\n              this.texts.line1._shadow,\n              this.texts.line2,\n              this.texts.line2._shadow,\n              this.texts.line3,\n              this.texts.line3._shadow,\n            ],\n            alpha: 0,\n            duration: 1000,\n            onComplete: res,\n          });\n        },\n      });\n    });\n  }\n  async animPage1(duration) {\n    this.texts.line1.setText(translate(\"intro.story_page_1.line_1\"));\n    this.texts.line2.setText(translate(\"intro.story_page_1.line_2\"));\n\n    return this.animPage(duration);\n  }\n  async animPage2(duration) {\n    this.texts.line1.setText(translate(\"intro.story_page_2.line_1\"));\n    this.texts.line2.setText(translate(\"intro.story_page_2.line_2\"));\n    this.texts.line3.setText(translate(\"intro.story_page_2.line_3\"));\n\n    return this.animPage(duration);\n  }\n  async animPage3(duration) {\n    this.texts.line1.setText(translate(\"intro.story_page_3.line_1\"));\n    this.texts.line2.setText(translate(\"intro.story_page_3.line_2\"));\n    this.texts.line3.setText(translate(\"intro.story_page_3.line_3\"));\n\n    return this.animPage(duration);\n  }\n  async animPage4(duration) {\n    // this.texts.line1.setPosition(0, 0)\n    this.texts.line1.setText(translate(\"intro.story_page_4.line_1\"));\n    this.texts.line2.setText(translate(\"intro.story_page_4.line_2\"));\n    this.texts.line3.setText(\"\");\n    return this.animPage(duration);\n  }\n  async animPage5(duration) {\n    this.texts.line1.setText(translate(\"intro.story_page_5.line_1\"));\n    this.texts.line2.setText(translate(\"intro.story_page_5.line_2\"));\n    this.texts.line3.setText(\"\");\n    return this.animPage(duration);\n  }\n  async animEarthquake() {\n    this.cameras.main.shake(2000, 0.005);\n    this.sounds.earthquake.play();\n  }\n  async animStormEnter() {\n    return new Promise((res) => {\n      this.tweens.add({\n        targets: [this.images.storm],\n        alpha: 1,\n        // delay: 2000,\n        duration: 2000,\n        ease: \"Linear\",\n        completeDelay: 2000,\n        onComplete: () => {\n          // hide underlay elements so later we can anim storm fade out to black\n          this.images.clouds.alpha = 0;\n          this.images.comet.alpha = 0;\n          this.images.ground.alpha = 0;\n          this.images.sky.alpha = 0;\n          res();\n        },\n      });\n    });\n  }\n  async animEnterFalling() {\n    return new Promise((res) => {\n      this.tweens.add({\n        targets: [this.images.ground_high, this.images.people_descending],\n        alpha: 0,\n        delay: 1000,\n        duration: 1000,\n        ease: \"Linear\",\n      });\n      this.tweens.add({\n        targets: [this.images.ground_break, this.images.people_falling],\n        alpha: 1,\n        delay: 1000,\n        duration: 1000,\n        ease: \"Linear\",\n        completeDelay: 2000,\n        onComplete: res,\n      });\n    });\n  }\n\n  async animEnterJumping() {\n    return new Promise((res) => {\n      this.tweens.add({\n        targets: [this.images.people_falling],\n        alpha: 0,\n        delay: 1000,\n        duration: 1000,\n        ease: \"Linear\",\n      });\n      this.tweens.add({\n        targets: [this.images.people_jumping],\n        alpha: 1,\n        delay: 1000,\n        duration: 1000,\n        ease: \"Linear\",\n        completeDelay: 5000,\n        onComplete: res,\n      });\n    });\n  }\n  async animLevelTitle() {\n    return new Promise((res) => {\n      this.tweens.add({\n        targets: [\n          this.images.people_jumping,\n          this.images.ground_break,\n          this.images.storm,\n        ],\n        alpha: 0,\n        delay: 1000,\n        duration: 1000,\n        ease: \"Linear\",\n      });\n      this.tweens.add({\n        targets: [this.texts.level_title, this.texts.level_title._shoadow],\n        alpha: 1,\n        delay: 1000,\n        duration: 1000,\n        ease: \"Linear\",\n        completeDelay: 5000,\n        onComplete: res,\n      });\n    });\n  }\n  playMusic() {\n    this.sounds.background_music.play();\n  }\n  playDramaticMusic() {\n    this.tweens.add({\n      targets: this.sounds.background_music,\n      volume: 0,\n      duration: 500,\n      completeDelay: 1000, // delay before onComplete\n      onComplete: () => {\n        this.sounds.background_music.stop();\n        this.sounds.dramatic_music.play();\n        // this.showThirdDialogs()\n      },\n    });\n  }\n  exitMusic() {\n    this.tweens.add({\n      targets: this.sounds.dramatic_music,\n      volume: 0,\n      duration: 1500,\n      onComplete: () => {\n        this.sounds.dramatic_music.stop();\n      },\n    });\n  }\n  async create() {\n    stopGlobalScore(this);\n    this.cameras.main.setPostPipeline(CRTFilter);\n    new UI(this, true);\n\n    this.createAnimations();\n    this.createSounds();\n    this.createImages();\n    this.createTextPlaceholders();\n\n    // animations\n\n    this.playMusic();\n    this.animEnterTiamat(5000);\n    await this.animPage1(8000);\n\n    this.animEnterWorld();\n    await this.animPage2(8000);\n    this.animEnterPeople();\n    await this.animPage3(8000);\n\n    await this.showFirstDialogs();\n\n    await this.animExitTiamat(5000);\n    await this.animGroundTransition();\n    await this.showSecondDialogs();\n\n    this.playDramaticMusic();\n    await this.animStormEnter();\n\n    this.animEarthquake();\n    this.animEnterFalling();\n    await this.animPage4(4000);\n\n    this.animPage5(6000);\n    await this.animEnterJumping();\n\n    this.exitMusic();\n    await this.animLevelTitle();\n\n    this.cameras.main.fade(1000, 0, 0, 0);\n    this.cameras.main.once(\"camerafadeoutcomplete\", () =>\n      this.scene.start(\"GameScene\", { levelName: Level1.key })\n    );\n  }\n\n  showFirstDialogs() {\n    this.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Mary\", \"closeUp_Tiamat\", \"closeUp_Marduk\"],\n      participantNames: [\"Mary\", \"Tiamat\", \"Marduk\"],\n      conversation: [\n        {\n          who: \"closeUp_Tiamat\",\n          text: [translate(\"intro.dialog_1.tiamat_say_1\")],\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"intro.dialog_1.mary_say_1\")],\n        },\n        {\n          who: \"closeUp_Tiamat\",\n          text: [translate(\"intro.dialog_1.tiamat_say_2\")],\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"intro.dialog_1.mary_say_2\")],\n        },\n        {\n          who: \"closeUp_Tiamat\",\n          text: [translate(\"intro.dialog_1.tiamat_say_3\")],\n        },\n        {\n          who: \"closeUp_Marduk\",\n          text: [translate(\"intro.dialog_1.marduk_say_1\")],\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"intro.dialog_1.mary_say_3\")],\n        },\n        {\n          who: \"closeUp_Tiamat\",\n          text: [translate(\"intro.dialog_1.tiamat_say_4\")],\n        },\n        {\n          who: \"closeUp_Tiamat\",\n          text: [translate(\"intro.dialog_1.tiamat_say_5\")],\n        },\n        {\n          who: \"closeUp_Tiamat\",\n          text: [translate(\"intro.dialog_1.tiamat_say_6\")],\n        },\n      ],\n    });\n\n    // hack to get control after dialogue close\n    return new Promise((res) => {\n      this.levels = {\n        current: {\n          pause: () => false,\n          resume: () => {\n            setTimeout(res, 1000);\n          },\n        },\n      };\n    });\n  }\n\n  showSecondDialogs() {\n    this.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Mary\", \"closeUp_Marduk\"],\n      participantNames: [\"Mary\", \"Marduk\"],\n      conversation: [\n        {\n          who: \"closeUp_Marduk\",\n          text: [translate(\"intro.dialog_2.marduk_say_1\")],\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"intro.dialog_2.mary_say_1\")],\n        },\n        {\n          who: \"closeUp_Marduk\",\n          text: [translate(\"intro.dialog_2.marduk_say_2\")],\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"intro.dialog_2.mary_say_2\")],\n        },\n        {\n          who: \"closeUp_Marduk\",\n          text: [translate(\"intro.dialog_2.marduk_say_3\")],\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"intro.dialog_2.mary_say_3\")],\n        },\n        {\n          who: \"closeUp_Marduk\",\n          text: [translate(\"intro.dialog_2.marduk_say_4\")],\n        },\n      ],\n    });\n    // hack to get control after dialogue close\n    return new Promise((res) => {\n      this.levels = {\n        current: {\n          pause: () => false,\n          resume: () => {\n            setTimeout(res, 1000);\n          },\n        },\n      };\n    });\n  }\n\n  showThirdDialogs() {\n    // hack to get control after dialogue close\n    this.levels = {\n      current: {\n        pause: () => false,\n        resume: () => {\n          this.tweens.add({\n            targets: this.quakesMusic,\n            volume: 0,\n            duration: 500,\n            completeDelay: 500,\n            onComplete: () => {\n              this.scene.start(\"GameScene\", { level: 1 });\n            },\n          });\n        },\n      },\n    };\n\n    this.events.emit(\"dialogue:show\", {\n      participants: [],\n      conversation: [\n        {\n          who: \"\",\n          text: [\"- A fissure opens up\", \"beneath Marduk and he\", \"falls into\"],\n        },\n        {\n          who: \"\",\n          text: [\"- Mary rolls her eyes\", \"and jumps in after\"],\n        },\n      ],\n    });\n  }\n  animateIntro() {\n    this.cameras.main.pan(\n      this.renderer.width,\n      this.renderer.height / 2,\n      2000,\n      \"Sine.easeInOut\"\n    );\n    this.cameras.main.once(Phaser.Cameras.Scene2D.Events.PAN_COMPLETE, () => {\n      this.cameras.main.shake(2000, 0.02);\n      this.tweens.add({\n        targets: this.children.getByName(\"dark\"),\n        y: -this.renderer.height * 0.3,\n        duration: 2000,\n      });\n      this.tweens.add({\n        targets: this.children.getByName(\"partner\"),\n        y: this.renderer.height,\n        delay: 2000,\n        duration: 2000,\n        ease: \"Sine.in\",\n      });\n      this.tweens.add({\n        targets: this.children.getByName(\"player\"),\n        y: this.renderer.height,\n        x: {\n          value: this.children.getByName(\"player\").x + 150,\n          duration: 1000,\n          ease: \"Cubic.easeOut\",\n        },\n        delay: 4000,\n        duration: 2000,\n        ease: \"Back.easeInOut\",\n        onComplete: () => {\n          this.cameras.main.fade(1000, 0, 0, 0);\n          this.cameras.main.once(\n            \"camerafadeoutcomplete\",\n            () => void this.scene.start(\"GameScene\", { level: 1 })\n          );\n        },\n      });\n    });\n  }\n}\n","import Phaser from \"phaser\";\nimport dbManager from \"./dbManager\";\n\nexport const textureToMapConfig = (textures, id) => {\n  const texture = textures.get(id);\n  const image = texture.getSourceImage();\n  const levelConfig = Array(image.height)\n    .fill(\"000000\")\n    .map(() => Array(image.width).fill(\"000000\"));\n  for (let j = 0; j < image.width; j++) {\n    for (let i = 0; i < image.height; i++) {\n      const pixColor = textures.getPixel(j, i, id);\n      const key = `${Phaser.Display.Color.ComponentToHex(\n        pixColor.r\n      )}${Phaser.Display.Color.ComponentToHex(\n        pixColor.g\n      )}${Phaser.Display.Color.ComponentToHex(pixColor.b)}`;\n      levelConfig[i][j] = key;\n    }\n  }\n  return levelConfig;\n};\n\nconst _ = (n) =>\n  n.toLocaleString(\"en-US\", {\n    minimumIntegerDigits: 2,\n  });\n\nexport const formatScore = (value, total) =>\n  typeof total == 'number' ? `${_(value)}/${_(total)}` : \"__/__\";\n\nexport const formatComp = (value) => {\n  const perc = (value * 100).toLocaleString(\"en-US\", {\n    minimumFractionDigits: 0,\n    maximumFractionDigits: 0,\n  });\n  return value\n    ? ` ${perc <= 9 ? \"  \" : perc <= 99 ? \" \" : \"\"}${perc}%`\n    : \"   -\";\n};\n\nexport const drawGemsScore = (lKey) => {\n  const levelData = dbManager.get(lKey);\n  return formatScore(levelData?.collectedDiamonds, levelData?.countDiamonds);\n};\nexport const drawThreatsScore = (lKey) => {\n  const levelData = dbManager.get(lKey);\n  return formatScore(levelData?.killedEnemies, levelData?.countEnemies);\n};\nexport const drawShroomsScore = (lKey) => {\n  const levelData = dbManager.get(lKey);\n  return formatScore(levelData?.collectedShrooms, levelData?.countShrooms);\n};\nexport const drawCompScore = (lKey) => {\n  const levelData = dbManager.get(lKey);\n  return formatComp(levelData?.comp);\n};\n","import { CLASS_NAMES } from \"../../utils/constants\"\nimport Destroyable from \"./Destroyable\"\n\nexport default class Deco extends Destroyable {\n  \n}\n\nDeco.className = CLASS_NAMES.DECO","import { BG_PIXEL_TO_TILEMAP_POSITION, PIXEL_NAME, PIXEL_TO_TILEMAP_POSITION } from '../utils/constants'\nimport LevelTest from './levels/level_ki_finale'\nimport Level1 from './levels/level_1'\nimport Level2 from './levels/level_2'\nimport Level3 from './levels/level_3'\nimport Level4 from './levels/level_4'\nimport Level5 from './levels/level_5'\nimport Level6 from './levels/level_6'\nimport Level7 from './levels/level_7'\nimport Level8 from './levels/level_8'\nimport Level9 from './levels/level_9'\nimport Level10 from './levels/level_10'\nimport Level11 from './levels/level_11'\nimport Level12 from './levels/level_12'\nimport Level13 from './levels/level_13'\nimport Level14 from './levels/level_14'\nimport Level15 from './levels/level_15'\nimport Level16 from './levels/level_16'\nimport Level17 from './levels/level_17'\nimport Level18 from './levels/level_18'\nimport Maze1 from './levels/Maze_1'\nimport LevelFinale from './levels/level_ki_finale'\nimport mazegenerator from 'generate-maze'\nimport { textureToMapConfig } from '../utils/helpers'\nimport Deco from './objects/Deco'\nimport LevelMaze2 from './levels/Maze_2'\n\nexport const LEVELS = [\n  '',\n  LevelTest,\n  Level1,\n  Level2,\n  Level3,\n  Level4,\n  Level5,\n  Level6,\n  Level7,\n  Level8,\n  Level9,\n  Level10,\n  Level11,\n  Level12,\n  Maze1,\n  Level13,\n  Level14,\n  Level15,\n  Level16,\n  Level17,\n  LevelMaze2,\n  Level18,\n  LevelFinale,\n]\n\nexport const getNextLevel = levelKey => {\n  let currentIndex = LEVELS.findIndex(l => l.key === levelKey)\n  let nextLevel\n  do {\n    currentIndex++\n    nextLevel = LEVELS[currentIndex]\n  } while(typeof nextLevel === 'string' || currentIndex > LEVELS.length)\n\n  return nextLevel.key\n}\n\nexport default class LevelManager {\n  constructor(scene, currentLevelName = '') {\n    this.currentName = currentLevelName\n    this.currentIndex = LEVELS.findIndex(l => l.id === this.currentName)\n    this.scene = scene\n    this.start()\n  }\n  \n  async start() {\n    const Level = LEVELS.find(l => l.key === this.currentName)\n    this.current = new Level()\n    const [mapConfig, bgConfig] = this.generateConfig()\n    this.current.config = mapConfig\n    this.current.bgConfig = bgConfig\n    this.map = this.createMap()\n    this.createBackground()\n    await this.current.connectToScene(this.scene)\n    this.scene.cameras.main.once('camerafadeincomplete', () => {\n      // this.current.resume()\n      this.scene.events.emit('levelstart')\n    })\n    this.current.pause()\n  }\n  restart() {\n    this.scene.cameras.main.fade(500, 0, 0, 0)\n    this.scene.cameras.main.once('camerafadeoutcomplete', () => {\n      this.scene.events.off('player_moves')\n      this.current.destroy()\n      this.scene.children.list.forEach(ch => {\n        ch.destroy()\n      })\n      this.scene.rules.destroy()\n      this.scene.ui.destroy()\n      this.scene.levels.current?.destroy()\n      this.scene.scene.restart({ levelName: this.currentName, isRestart: true })\n      \n    })\n  }\n\n  next() {\n    // destroy and unload\n    this.currentIndex += 1\n    if(typeof LEVELS[this.currentIndex] === 'string' && LEVELS[this.currentIndex].includes('cinematic')) {\n      this.scene.scene.start('ConnectorScene', { id: this.currentIndex, name: LEVELS[this.currentIndex]})\n    } else if (LEVELS[this.currentIndex]) {\n      this.start()\n    } else {\n      this.scene.scene.start('MenuScene')\n    }\n\n  }\n\n  generateConfig() {\n    const scene = this.scene\n    const levelId = this.current.constructor.key\n    \n    let levelConfig\n    let bgConfig\n    if(this.current.isMaze) {\n      // Generate a maze\n      // Width == 8, height == 4, maze edges are closed, using random seed \n      const MAZE_WIDTH = 40\n      const MAZE_HEIGHT = 10\n      const STARTING_ROW = 3 // move 3 blocks down to avoid hud overlap\n      levelConfig = Array(2*MAZE_HEIGHT + STARTING_ROW +1 ).fill('000000').map(r => Array(2*MAZE_WIDTH+1).fill('000000'))\n      const maze = mazegenerator(MAZE_WIDTH, MAZE_HEIGHT, true, Math.round(Math.random() * Math.pow(10, 8)))\n      maze.forEach(row => {\n        row.forEach(cell => {\n          const j = 2 * cell.x + 1\n          const i = 2 * cell.y + 1 + STARTING_ROW\n          // top\n          levelConfig[i-1][j] = cell.top ? PIXEL_NAME.WALL : PIXEL_NAME.EMPTY\n          if(cell.top) {\n            levelConfig[i-1][j+1] = PIXEL_NAME.WALL\n            levelConfig[i-1][j-1] = PIXEL_NAME.WALL\n          }\n          // right\n          levelConfig[i][j+1] = cell.right ? PIXEL_NAME.WALL : PIXEL_NAME.EMPTY\n          if(cell.right) {\n            levelConfig[i+1][j+1] = PIXEL_NAME.WALL\n            levelConfig[i-1][j+1] = PIXEL_NAME.WALL\n          }\n          // bottom\n          levelConfig[i+1][j] = cell.bottom ? PIXEL_NAME.WALL : PIXEL_NAME.EMPTY\n          if(cell.bottom) {\n            levelConfig[i+1][j+1] = PIXEL_NAME.WALL\n            levelConfig[i+1][j-1] = PIXEL_NAME.WALL\n          }\n          // left\n          levelConfig[i][j-1] = cell.left ? PIXEL_NAME.WALL : PIXEL_NAME.EMPTY\n          if(cell.left) {\n            levelConfig[i+1][j-1] = PIXEL_NAME.WALL\n            levelConfig[i-1][j-1] = PIXEL_NAME.WALL\n          }\n          // center\n          levelConfig[i][j] = PIXEL_NAME.EMPTY\n        })\n      })\n      levelConfig[STARTING_ROW + 1][1] = PIXEL_NAME.PLAYER\n      // levelConfig[STARTING_ROW-1][levelConfig[0].length - 2] = PIXEL_NAME.PLAYER\n      // levelConfig[STARTING_ROW+1][1] = PIXEL_NAME.BRO\n      levelConfig[STARTING_ROW + 2][1] = PIXEL_NAME.DWARF\n      levelConfig[STARTING_ROW + 2][2] = PIXEL_NAME.EMPTY // dwarf position to move away the path\n\n      // try to set an exit\n      const rowIdx = levelConfig.findIndex((r) => {\n          // ignores 3 top spaces saved for HUD\n          const lastColTile = r.slice(-1).pop()\n          \n          const isNotTopBufferSpace = lastColTile !== PIXEL_NAME.EMPTY\n          // gets last 2 position skiping last one (column) that is always a wall\n          const lastThreeBeforLastTile = r.slice(-4, -1)\n          // const tileIsEmpty = lastThreeBeforLastTile[2] === PIXEL_NAME.EMPTY\n          // const emptyPrecededByEmpty = tileIsEmpty && lastThreeBeforLastTile[0] === PIXEL_NAME.EMPTY\n          const threeEmptyInARow = lastThreeBeforLastTile.every(t => t === PIXEL_NAME.EMPTY)\n          // finds first row with 2 consecutive empty spaces into the maze\n          return isNotTopBufferSpace && threeEmptyInARow\n        })\n      \n      levelConfig[rowIdx][levelConfig[0].length - 1] = PIXEL_NAME.EXIT\n      this.buildWallsAroundGate(levelConfig)\n    } else {\n      levelConfig = textureToMapConfig(scene.textures, levelId)\n      // decorates gate\n      bgConfig = textureToMapConfig(scene.textures, `${levelId}_bg`)\n    }\n    return [levelConfig, bgConfig]\n  }\n  buildWallsAroundGate(config) {\n    config.forEach((row, y) => {\n      row.forEach((el, x) => {\n        if(el === PIXEL_NAME.EXIT) {\n          config[y-1][x] = PIXEL_NAME.DEBRIS\n          config[y-1][x-1] = PIXEL_NAME.DEBRIS\n          config[y-1][x-2] = PIXEL_NAME.DEBRIS\n\n          config[y+1][x] = PIXEL_NAME.DEBRIS\n          config[y+1][x-1] = PIXEL_NAME.DEBRIS\n          config[y+1][x-2] = PIXEL_NAME.DEBRIS\n\n        }\n      })\n    })\n\n  }\n  createBackground() {\n    let image = this.scene.add.image(0, 0, 'Stage1_bg')\n    let scaleX = this.scene.cameras.main.width / image.width\n    let scaleY = this.scene.cameras.main.height / image.height\n    let scale = Math.max(scaleX, scaleY)\n    image.setOrigin(0, 0)\n    image.setScale(scale * 1.5).setScrollFactor(0.1)\n    image.name = 'level_background_art'\n    image.depth = -2\n  }\n\n  createMap() {\n    const scene = this.scene\n    const levelData = this.current\n    const SCALE = scene.data.get('custom_scale')\n    const camera = this.scene.cameras.main\n\n    let map = this.map\n    let mapZ2 = this.mapZ2\n    let underlayMap = this.underlayMap\n    if(map && map.scene) {\n      map.destroy()\n      mapZ2.destroy()\n      underlayMap.destroy()\n    }\n\n    // Creating a blank tilemap with dimensions matching the dungeon\n    map = scene.make.tilemap({ tileWidth: 20, tileHeight: 20, width: levelData.config[0].length, height: levelData.config.length });\n    mapZ2 = scene.make.tilemap({ tileWidth: 20, tileHeight: 20, width: levelData.config[0].length, height: levelData.config.length });\n    underlayMap = scene.make.tilemap({ tileWidth: 20, tileHeight: 20, width: levelData.config[0].length, height: levelData.config.length });\n\n    window.map = map\n    // addTilesetImage: function (tilesetName, key, tileWidth, tileHeight, tileMargin, tileSpacing, gid)\n    let tileset = map.addTilesetImage('tiles', 'main-tiles', 20, 20, 1, 2);\n    let tilesetGates = map.addTilesetImage('tiles-gates', 'gates-tiles', 20, 20, 1, 2);\n    let tilesetZ2 = mapZ2.addTilesetImage('tiles-z2', 'gates-tiles', 20, 20, 1, 2);\n    let underlaytileset = underlayMap.addTilesetImage('under-tiles', 'main-tiles', 20, 20, 1, 2);\n\n    let layer = map.createBlankLayer('layer_1', tileset);\n    layer.name = 'layer_1'\n    layer.depth = 0\n    let layer2 = map.createBlankLayer('layer_2', tilesetGates);\n    layer2.name = 'layer_2'\n    layer2.depth = 0\n\n    let layerZ2 = mapZ2.createBlankLayer('layer_1z2', tilesetZ2);\n    layerZ2.name = 'layer_1z2'\n    layerZ2.depth = 5\n\n    let underlayer = underlayMap.createBlankLayer('layer_0', underlaytileset);\n    underlayer.name = 'layer_0'\n    underlayer.depth = -1\n    \n    layer.setScale(SCALE)\n    layer2.setScale(SCALE)\n    layerZ2.setScale(SCALE)\n    underlayer.setScale(SCALE * 1.01)// fix glitch of empty line between tiles for specific camera positions\n    underlayer.setScrollFactor(0.95)\n\n    levelData.config.forEach((row, x) => {\n      row.forEach((el, y) => {\n        let tile = el\n        if(levelData.bgConfig) {\n          let bgTile = levelData.bgConfig[x][y]\n          underlayMap.putTileAt(BG_PIXEL_TO_TILEMAP_POSITION[bgTile], y, x)\n        }\n\n        if (\n          [\n            PIXEL_NAME.WALL,\n            PIXEL_NAME.DEBRIS,\n            PIXEL_NAME.GROUND,\n            PIXEL_NAME.ART,\n            PIXEL_NAME.ART2,\n            PIXEL_NAME.EXIT,\n            PIXEL_NAME.TORCH,\n          ].includes(tile)\n        ) {\n          if (tile === PIXEL_NAME.WALL || tile === PIXEL_NAME.TORCH) {\n            if(this.current.isMaze) {\n              tile = 1\n            } else {\n              tile = PIXEL_TO_TILEMAP_POSITION.calculateWallTileWithNeighbours(x, y, levelData.config)\n            }\n            map.putTileAt(tile, y, x, false, 'layer_1')\n          } else if (tile === PIXEL_NAME.DEBRIS) {\n            map.putTileAt(PIXEL_TO_TILEMAP_POSITION[tile], y, x, false, 'layer_1')\n            // map.putTileAt(1, y, x, false, 'layer_1')\n          } else if (tile === PIXEL_NAME.GROUND) {\n            tile = PIXEL_TO_TILEMAP_POSITION.calculateGroundTileWithNeighbours(x, y, levelData.config)\n            map.putTileAt(tile, y, x, false, 'layer_1')\n          } else if ([PIXEL_NAME.ART, PIXEL_NAME.ART2].includes(tile)) {\n            map.putTileAt(21, y, x, false, 'layer_1')\n            // two consecutives art tiles means flix horizontal\n            const isFlipX = [PIXEL_NAME.ART, PIXEL_NAME.ART2].includes(levelData.config[x][y+1])\n            const isFlipFlag = [PIXEL_NAME.ART, PIXEL_NAME.ART2].includes(levelData.config[x][y-1])\n            if(isFlipFlag) return false\n            if(isFlipX) {\n              map.putTileAt(21, y + 1, x, false, 'layer_1')\n\n              map.putTileAt(PIXEL_TO_TILEMAP_POSITION[tile] + 3, y-1, x, false, 'layer_2').setFlipX(true)\n              map.putTileAt(PIXEL_TO_TILEMAP_POSITION[tile] + 2, y, x, false, 'layer_2').setFlipX(true)\n              map.putTileAt(PIXEL_TO_TILEMAP_POSITION[tile] + 1, y+1, x, false, 'layer_2').setFlipX(true)\n              map.putTileAt(PIXEL_TO_TILEMAP_POSITION[tile], y+2, x, false, 'layer_2').setFlipX(true)\n              \n              map.putTileAt(PIXEL_TO_TILEMAP_POSITION[tile] + 10 + 3, y-1, x + 1, false, 'layer_2').setFlipX(true)\n              map.putTileAt(PIXEL_TO_TILEMAP_POSITION[tile] + 10 + 2, y, x + 1, false, 'layer_2').setFlipX(true)\n              map.putTileAt(PIXEL_TO_TILEMAP_POSITION[tile] + 10 + 1, y+1, x + 1, false, 'layer_2').setFlipX(true)\n              map.putTileAt(PIXEL_TO_TILEMAP_POSITION[tile] + 10, y+2, x + 1, false, 'layer_2').setFlipX(true)\n            } else {\n              map.putTileAt(PIXEL_TO_TILEMAP_POSITION[tile], y, x, false, 'layer_2')\n              map.putTileAt(PIXEL_TO_TILEMAP_POSITION[tile] + 1, y + 1, x, false, 'layer_2')\n              map.putTileAt(PIXEL_TO_TILEMAP_POSITION[tile] + 2, y + 2, x, false, 'layer_2')\n              map.putTileAt(PIXEL_TO_TILEMAP_POSITION[tile] + 3, y + 3, x, false, 'layer_2')\n              \n              map.putTileAt(PIXEL_TO_TILEMAP_POSITION[tile] + 10, y, x + 1, false, 'layer_2')\n              map.putTileAt(PIXEL_TO_TILEMAP_POSITION[tile] + 10 + 1, y + 1, x + 1, false, 'layer_2')\n              map.putTileAt(PIXEL_TO_TILEMAP_POSITION[tile] + 10 + 2, y + 2, x + 1, false, 'layer_2')\n              map.putTileAt(PIXEL_TO_TILEMAP_POSITION[tile] + 10 + 3, y + 3, x + 1, false, 'layer_2')\n            }\n          } else if (tile === PIXEL_NAME.EXIT) {\n            const POSITION_EXIT = PIXEL_TO_TILEMAP_POSITION[tile + (this.current.id === 'level_ki_finale' ? '_2' : '_1')]\n            // entrance behind user\n            map.putTileAt(POSITION_EXIT - 3, y - 1, x, false, 'layer_2')\n            // entrance behind and above user\n            // remove original tile\n            // map.putTileAt(PIXEL_TO_TILEMAP_POSITION[PIXEL_NAME.EMPTY] - 10 - 4, y - 2, x - 1, false, 'layer_1')\n            map.putTileAt(POSITION_EXIT - 10 - 4, y - 2, x - 1, false, 'layer_2')\n            // entrance behind and below user\n            map.putTileAt(POSITION_EXIT - 4, y - 2, x, false, 'layer_2')\n            /**\n             * 1 2 3\n             * 4 5 6\n             * 7 8 9\n             */\n            // 1\n            // let tileKind = PIXEL_TO_TILEMAP_POSITION.calculateWallTileWithNeighbours(x, y, levelData.config)\n            // map.putTileAt(PIXEL_TO_TILEMAP_POSITION[PIXEL_NAME.WALL], y - 2, x - 1, false, 'layer_1')\n            mapZ2.putTileAt(POSITION_EXIT - 10 - 2, y - 2, x - 1)\n            // 2\n            // map.putTileAt(PIXEL_TO_TILEMAP_POSITION[PIXEL_NAME.WALL], y - 1, x - 1, false, 'layer_1')\n            mapZ2.putTileAt(POSITION_EXIT - 10 - 1, y - 1, x - 1)\n            // 3\n            mapZ2.putTileAt(POSITION_EXIT - 10, y, x - 1)\n            // 4\n            mapZ2.putTileAt(POSITION_EXIT - 2, y - 2, x)\n            // 5\n            mapZ2.putTileAt(POSITION_EXIT - 1, y - 1, x)\n            // 6\n            mapZ2.putTileAt(POSITION_EXIT, y, x)\n            // 7\n            mapZ2.putTileAt(POSITION_EXIT + 10 - 2 , y - 2, x + 1)\n            // 8\n            mapZ2.putTileAt(POSITION_EXIT + 10 - 1, y - 1, x + 1)\n            // 9\n            mapZ2.putTileAt(POSITION_EXIT + 10, y, x + 1)\n          }\n        } else if ([PIXEL_NAME.HANGING_2, PIXEL_NAME.HANGING_3, PIXEL_NAME.HANGING_4, PIXEL_NAME.HANGING_5].includes(tile)) {\n          // place a wall in layer_1\n          const tileKind = PIXEL_TO_TILEMAP_POSITION.calculateWallTileWithNeighbours(x, y, levelData.config)\n          map.putTileAt(tileKind, y, x, false, 'layer_1')\n          levelData.config[x][y] = PIXEL_NAME.WALL\n\n          \n          // place 1st hanging sprite in depth = 5\n          let pos = { x: y, y: x } // inverse pos due to config loop: cols by row\n          let nextSprite = 'liana_start'\n          let hanging = this.scene.add.sprite(48, 16)\n          .setOrigin(0, 0.2)\n          .play(nextSprite)\n          hanging.setScale(layer.scaleX)\n          hanging.x = map.tileToWorldX(pos.x)\n          hanging.y = map.tileToWorldY(pos.y)\n          hanging.depth = 5\n\n          let element = new Deco(tile, this.current)\n          element.position = {...pos}\n          element.alien = hanging\n          levelData.decorationElements[`${pos.x}-${pos.y}`] = element\n          \n\n          // place hanging 2nd sprite\n          pos.y++\n          if([PIXEL_NAME.HANGING_3, PIXEL_NAME.HANGING_4, PIXEL_NAME.HANGING_5].includes(tile)) {\n            nextSprite = 'liana_middle'\n          } else {\n            nextSprite = 'liana_end'\n          }\n          hanging = this.scene.add.sprite(48, 16)\n          .setOrigin(0, 0.2)\n          .play(nextSprite)\n          hanging.setScale(layer.scaleX)\n          hanging.x = map.tileToWorldX(pos.x)\n          hanging.y = map.tileToWorldY(pos.y)\n          hanging.depth = 5\n\n          element = new Deco(tile, this.current)\n          element.position = {...pos}\n          element.alien = hanging\n          levelData.decorationElements[`${pos.x}-${pos.y}`] = element\n\n          // place hanging 3rd sprite?\n          if([PIXEL_NAME.HANGING_3, PIXEL_NAME.HANGING_4, PIXEL_NAME.HANGING_5].includes(tile)) {\n            pos.y++\n            nextSprite = PIXEL_NAME.HANGING_3 === tile ? 'liana_end' : 'liana_middle'\n\n            hanging = this.scene.add.sprite(48, 16)\n            .setOrigin(0, 0.2)\n            .play(nextSprite)\n            hanging.setScale(layer.scaleX)\n            hanging.x = map.tileToWorldX(pos.x)\n            hanging.y = map.tileToWorldY(pos.y)\n            hanging.depth = 5\n\n            element = new Deco(tile, this.current)\n            element.position = {...pos}\n            element.alien = hanging\n            levelData.decorationElements[`${pos.x}-${pos.y}`] = element\n          }\n          \n\n          // place hanging 4th sprite\n          if([PIXEL_NAME.HANGING_4, PIXEL_NAME.HANGING_5].includes(tile)) {\n            pos.y++\n            nextSprite = PIXEL_NAME.HANGING_4 === tile ? 'liana_end' : 'liana_middle'\n            hanging = this.scene.add.sprite(48, 16)\n            .setOrigin(0, 0.2)\n            .play(nextSprite)\n            hanging.setScale(layer.scaleX)\n            hanging.x = map.tileToWorldX(pos.x)\n            hanging.y = map.tileToWorldY(pos.y)\n            hanging.depth = 5\n\n            element = new Deco(tile, this.current)\n            element.position = {...pos}\n            element.alien = hanging\n            levelData.decorationElements[`${pos.x}-${pos.y}`] = element\n          }\n\n          // place hanging 5th sprite\n          if([PIXEL_NAME.HANGING_5].includes(tile)) {\n            pos.y++\n            nextSprite = 'liana_end'\n            hanging = this.scene.add.sprite(48, 16)\n            .setOrigin(0, 0.2)\n            .play(nextSprite)\n            hanging.setScale(layer.scaleX)\n            hanging.x = map.tileToWorldX(pos.x)\n            hanging.y = map.tileToWorldY(pos.y)\n            hanging.depth = 5\n\n            element = new Deco(tile, this.current)\n            element.position = {...pos}\n            element.alien = hanging\n            levelData.decorationElements[`${pos.x}-${pos.y}`] = element\n          }\n\n        } else {\n          if(!levelData.bgConfig) {\n            map.putTileAt(PIXEL_TO_TILEMAP_POSITION[PIXEL_NAME.EMPTY], y, x, false, 'layer_1')\n          }\n        }\n      })\n    })\n\n    // set up camera\n    camera.setBounds(0, 0, layer.width * layer.scaleX, layer.height * layer.scaleY);\n    camera.zoom = 1\n\n    this.underlayMap = underlayMap\n    this.mapZ2 = mapZ2\n    return map\n  }\n}","import Phaser from \"phaser\";\nimport * as Controller from \"../components/Controller/Controller\";\nimport UIMenus from \"../components/UIMenus\";\nimport { SCALE } from \"../utils/constants\";\nimport CRTFilter from \"../utils/CRTShaderFX\";\nimport dbManager from \"../utils/dbManager\";\n\nlet titlesMusic;\nexport default class ConfirmNewGameScene extends Phaser.Scene {\n  constructor() {\n    super(\"ConfirmNewGameScene\");\n  }\n\n  preload() {}\n\n  navigateToScene(sceneId, props = {}) {\n    this.cameras.main.fade(500, 0, 0, 0);\n    this.tweens.add({\n      targets: titlesMusic,\n      volume: 0,\n      ease: \"Linear\",\n      duration: 500,\n      onComplete: () => {\n        titlesMusic.pause();\n        this.scene.start(sceneId, props);\n      },\n    });\n  }\n\n  create() {\n    this.cameras.main.setPostPipeline(CRTFilter);\n    this.cameras.main.setBackgroundColor(\"#486859\");\n\n    let image = this.add.image(\n      this.cameras.main.width / 2,\n      this.cameras.main.height / 3,\n      \"Bossfight\"\n    );\n    let scaleX = this.cameras.main.width / image.width;\n    let scaleY = this.cameras.main.height / image.height;\n    let scale = Math.max(scaleX, scaleY);\n    image.setScale(scale * 1.5).setScrollFactor(0);\n    image.name = \"background_art\";\n\n    // //  Enable lights and set a dark ambient color\n    // this.lights.enable().setAmbientColor(0x333333);\n    // image.setPipeline(\"Light2D\");\n    // //  Our spotlight. 100px radius and white in color.\n    // var light = this.lights\n    //   .addLight(180, 80, 200)\n    //   .setColor(0xffffff)\n    //   .setIntensity(2);\n    // //  Track the pointer\n    // this.input.on(\"pointermove\", function (pointer) {\n    //   light.x = pointer.x;\n    //   light.y = pointer.y;\n    // });\n\n    // var flash = this.plugins.get('rexFlash').add(part);\n    // flash.flash()\n\n    // var particles = this.add.particles('spark').setScale(SCALE);\n\n    // var emitter = particles.createEmitter();\n\n    // emitter.setPosition(10*SCALE, 10*SCALE);\n    // emitter.setSpeed(20);\n    // // emitter.setBlendMode(Phaser.BlendModes.ADD);\n\n    // off-line version\n    // this.cameras.main.fadeIn(500, 0, 0, 0);\n    // this.events.emit(\"scene_ready\", this.sys.config);\n    // const mainMenu = new UIMenus(this);\n    // mainMenu.showMainMenu();\n    // titlesMusic = this.sound.add(\"credits\", { loop: true });\n    // return false\n\n    titlesMusic = this.sound.add(\"credits\", { loop: true });\n\n    window.WebFont.load({\n      custom: {\n        families: [\"GameGirl\"],\n      },\n      active: () => {\n        this.cameras.main.fadeIn(500, 0, 0, 0);\n        this.events.emit(\"scene_ready\", this.sys.config);\n\n        titlesMusic = this.sound.add(\"credits\", { loop: true });\n\n        // titlesMusic.play();\n\n        // this.events.once(Phaser.Scenes.Events.WAKE, () => console.log(Phaser.Scenes.Events.WAKE))\n        // this.events.once(Phaser.Scenes.Events.UPDATE, () => console.log(Phaser.Scenes.Events.UPDATE))\n        // this.events.once(Phaser.Scenes.Events.TRANSITION_WAKE, () => console.log(Phaser.Scenes.Events.TRANSITION_WAKE))\n        // this.events.once(Phaser.Scenes.Events.TRANSITION_START, () => console.log(Phaser.Scenes.Events.TRANSITION_START))\n        // this.events.once(Phaser.Scenes.Events.TRANSITION_OUT, () => console.log(Phaser.Scenes.Events.TRANSITION_OUT))\n        // this.events.once(Phaser.Scenes.Events.TRANSITION_INIT, () => console.log(Phaser.Scenes.Events.TRANSITION_INIT))\n        // this.events.once(Phaser.Scenes.Events.TRANSITION_COMPLETE, () => console.log(Phaser.Scenes.Events.TRANSITION_COMPLETE))\n        // this.events.once(Phaser.Scenes.Events.START, () => console.log(Phaser.Scenes.Events.START))\n        // this.events.once(Phaser.Scenes.Events.SLEEP, () => console.log(Phaser.Scenes.Events.SLEEP))\n        // this.events.once(Phaser.Scenes.Events.SHUTDOWN, () => console.log(Phaser.Scenes.Events.SHUTDOWN))\n        // this.events.once(Phaser.Scenes.Events.RESUME, () => console.log(Phaser.Scenes.Events.RESUME))\n        // this.events.once(Phaser.Scenes.Events.RENDER, () => console.log(Phaser.Scenes.Events.RENDER))\n        // this.events.once(Phaser.Scenes.Events.READY, () => console.log(Phaser.Scenes.Events.READY))\n        // this.events.once(Phaser.Scenes.Events.PRE_RENDER, () => console.log(Phaser.Scenes.Events.PRE_RENDER))\n        // this.events.once(Phaser.Scenes.Events.PAUSE, () => console.log(Phaser.Scenes.Events.PAUSE))\n        // this.events.once(Phaser.Scenes.Events.CREATE, () => console.log(Phaser.Scenes.Events.CREATE))\n        // this.events.once(Phaser.Scenes.Events.BOOT, () => console.log(Phaser.Scenes.Events.BOOT))\n\n        this.input.keyboard.off(\"keydown\");\n        this.input.keyboard.on(\"keydown\", (event) => {\n          if (Controller.isCancel( event.key)) {\n            this.navigateToScene(\"SplashScreenScene\");\n          }\n        });\n\n        const mainMenu = new UIMenus(this);\n        mainMenu.showConfirmNewGameMenu();\n        // mainMenu.showMainMenu();\n      },\n    });\n  }\n}\n","import Phaser from \"phaser\";\nimport { TICK_TIME } from \"../utils/constants\";\nimport LevelFinale from \"./levels/level_finale\";\nimport LevelKiFinale from \"./levels/level_ki_finale\";\n\nexport default class Rules {\n  constructor(scene) {\n    this.scene = scene;\n    // gravity loop\n    this.timer = 0;\n    this.worldTickFreq = TICK_TIME;\n    // scene.events.removeListener(Phaser.Scenes.Events.UPDATE, this.onSceneUpdate)\n    scene.events.on(Phaser.Scenes.Events.UPDATE, this.onSceneUpdate.bind(this));\n\n    // this.setUpPuseResumeGame()\n    // this.setUpCameraFollow()\n    scene.events.off(\"levelcompleted\");\n    scene.events.on(\"levelcompleted\", (result) => {\n      scene.events.emit(\"sounds:level_complete\");\n      scene.tweens.add({\n        targets: this.music,\n        volume: 1,\n        ease: \"Linear\",\n        duration: 500,\n        onComplete: () => {\n          this.music.stop();\n        },\n      });\n      scene.cameras.main.fade(3000, 0, 0);\n      scene.cameras.main.once(\"camerafadeoutcomplete\", () => {\n        scene.scene.start(\"LevelResumeScene\", {\n          level: scene.levels.current.constructor.key,\n          ...result,\n        });\n        // scene.levels.current.cleanLevel()\n        // scene.levels.next()\n        // scene.cameras.main.fadeIn(1000, 0, 0)\n      });\n    });\n    scene.events.removeListener(\"levelstart\", this.onLevelStart.bind(this));\n    scene.events.addListener(\"levelstart\", this.onLevelStart.bind(this));\n  }\n  destroy() {\n    this.music?.stop();\n    // this.music.destroy()\n    this.scene.events.off(Phaser.Scenes.Events.UPDATE);\n    this.scene.events.off(\"levelstart\");\n  }\n  onLevelStart() {\n    this.setUpCameraFollow();\n    if (this.scene.levels.current.id === LevelKiFinale.key) {\n      this.music = this.scene.sound.add(\"levels_surface\", {\n        loop: true,\n        valume: 0,\n      });\n      if(!this.scene.isRestart) {\n        this.music.play();\n        this.scene.tweens.add({\n          targets: this.music,\n          volume: 1,\n          ease: \"Linear\",\n          duration: 500,\n        });\n      }\n    } else {\n      this.music = this.scene.sound.add(\"levels_surface\", {\n        loop: true,\n        valume: 0,\n      });\n      this.music.play();\n      this.scene.tweens.add({\n        targets: this.music,\n        volume: 1,\n        ease: \"Linear\",\n        duration: 500,\n      });\n    }\n  }\n\n  async setUpCameraFollow(target = { x: 0, y: 0, width: 1, height: 1 }) {\n    const cam = this.scene.cameras.main;\n    \n    cam.startFollow(target, false, 0.05, 0.05);\n    await this.panAndFollow(this.scene.levels.current.focusObject)\n    this.scene.levels.current.resume();\n  }\n\n  panAndFollow(target){\n    return new Promise(res => {\n      const cam = this.scene.cameras.main;\n      cam.pan(\n        target.x,\n        target.y,\n        // this.scene.levels.current.player.alien.x,\n        // this.scene.levels.current.player.alien.y,\n        TICK_TIME * 8,\n        Phaser.Math.Easing.Cubic.InOut,\n        null,\n        (camera, progress) => {\n          if (progress === 1) {\n            camera.startFollow(\n              target,\n              // this.scene.levels.current.player.alien,\n              true,\n              0.05,\n              0.05\n            );\n            res()\n          }\n        }\n      );\n    })\n  }\n\n  onSceneUpdate(time, delta) {\n    this.timer += delta;\n    if (this.timer >= this.worldTickFreq) {\n      while (this.timer > this.worldTickFreq) {\n        this.timer -= this.worldTickFreq;\n      }\n      this.scene.levels.current.gravityLoop();\n    }\n  }\n\n  calcCompletion(\n    gems,\n    collectedGems,\n    enemies,\n    killedEnemies,\n    shrooms,\n    colectedShrooms\n  ) {\n    const levelCompleted = 1;\n    const comp =\n      (collectedGems + killedEnemies + colectedShrooms + levelCompleted) /\n      (gems + enemies + shrooms + levelCompleted);\n    return Math.round(comp * 100) / 100;\n  }\n}\n","import Phaser from \"phaser\";\nimport {\n  TILES_BY_SCREEN,\n  TILE_SIZE,\n  TICK_TIME,\n  SCALE,\n  SCALE_V,\n} from \"../utils/constants\";\nimport LevelManager from \"../components/LevelManager\";\nimport Rules from \"../components/Rules\";\nimport UI from \"../components/UI\";\nimport CRTFilter from \"../utils/CRTShaderFX\";\nimport LevelTest from \"../components/levels/level_ki_finale\";\nimport { stopGlobalScore, stopResumeScore } from \"../utils/globalScore\";\n\nexport default class GameScene extends Phaser.Scene {\n  constructor() {\n    super(\"GameScene\");\n  }\n\n  create(data = {}) {\n    stopGlobalScore(this)\n    stopResumeScore(this)\n    this.cameras.main.setPostPipeline(CRTFilter);\n    this.data.set(\"custom_scale\", SCALE);\n    this.isRestart = data.isRestart;\n\n    this.game.scale.scaleMode = Phaser.Scale.RESIZE;\n    this.handleScales();\n    this.createAnimations();\n    this.ui = new UI(this, data.levelName === LevelTest.key);\n    if (this.levels?.current) {\n      this.levels.current.cleanLevel();\n    }\n    this.levels = new LevelManager(this, data.levelName, data.isRestart);\n\n    this.cameras.main.fadeIn(1000, 0, 0, 0);\n    this.rules = new Rules(this);\n    this.events.on(Phaser.Scenes.Events.SHUTDOWN, () => {\n      this.rules.destroy();\n      this.ui.destroy();\n    });\n  }\n\n  navigateToScene(sceneId, props = {}) {\n    this.cameras.main.fade(500, 0, 0, 0);\n    this.cameras.main.once(\"camerafadeoutcomplete\", () => {\n      this.rules.destroy();\n      this.ui.destroy();\n      if (this.levels?.current) {\n        this.levels.current.cleanLevel();\n        this.levels.current.destroy();\n      }\n      this.scene.start(sceneId, props);\n    });\n  }\n\n  handleScales() {\n    // const SCALE = this.data.get(\"custom_scale\");\n    // const scalables = new Map();\n    // this.clearScalables = () => scalables.clear();\n    // this.removeFromScalables = (el) => scalables.delete(el);\n    // this.addToScalables = (el, coords) => {\n    //   el.setScale(SCALE);\n    //   scalables.set(el, coords);\n    // };\n    // this.updateScale = (scale) => {\n    //   scalables.forEach((coords, el) => el?.setScale(scale));\n    // };\n\n    window.addEventListener(\"resize\", () => {\n      // const scale =\n      //   Math.round(\n      //     (((window.innerWidth / TILES_BY_SCREEN) * 100) / TILE_SIZE / 100) *\n      //       100\n      //   ) / 100;\n      // const canvas = document.querySelector('canvas')\n      // if(window.innerHeight > window.innerWidth) {\n      //   canvas.height = 3 * window.innerWidth / 4\n      // } else {\n      //   canvas.width = 4 * window.innerHeight / 3\n      // }\n      this.children.list.forEach((ch) => {\n        ch.setScale(SCALE, SCALE_V());\n      });\n\n      this.ui.onResize();\n\n      const layer = this.children.getByName(\"layer_1\");\n      if (!layer) {\n        return false;\n      }\n      this.levels?.current.updatePositionsOnScale();\n\n      const camera = this.cameras.main;\n      camera.setBounds(\n        0,\n        0,\n        layer.width * layer.scaleX,\n        layer.height * layer.scaleY\n      );\n    });\n  }\n\n  createAnimations() {\n    this.anims.create({\n      key: \"boulder_roll_right\",\n      frames: this.anims.generateFrameNumbers(\"boulder\", {\n        frames: [7, 10, 8, 7],\n      }),\n      frameRate: (1000 / TICK_TIME) * 4,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"boulder_roll_left\",\n      frames: this.anims.generateFrameNumbers(\"boulder\", {\n        frames: [7, 8, 10, 7],\n      }),\n      frameRate: (1000 / TICK_TIME) * 4,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"diamond_roll_right\",\n      frames: this.anims.generateFrameNumbers(\"boulder\", {\n        frames: [55, 56, 57, 60, 61, 62, 63, 54],\n      }),\n      frameRate: (1000 / TICK_TIME) * 8,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"diamond_roll_left\",\n      frames: this.anims.generateFrameNumbers(\"boulder\", {\n        frames: [63, 62, 61, 60, 57, 56, 55, 54],\n      }),\n      frameRate: (1000 / TICK_TIME) * 8,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"boulder_idle\",\n      frames: this.anims.generateFrameNumbers(\"boulder\", { frames: [7] }),\n      frameRate: 1,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"wall_torch_lit\",\n      frames: this.anims.generateFrameNumbers(\"boulder\", {\n        frames: [12, 13, 14, 15, 16, 17],\n      }),\n      frameRate: (1000 / TICK_TIME) * 2.5,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"wall_torch_lighting\",\n      frames: this.anims.generateFrameNumbers(\"boulder\", {\n        frames: [26, 27, 28, 29],\n      }),\n      frameRate: (1000 / TICK_TIME) * 2.5,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"wall_torch_idle\",\n      frames: this.anims.generateFrameNumbers(\"boulder\", { frames: [25] }),\n      frameRate: (1000 / TICK_TIME) * 2.5,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"barrel_idle\",\n      frames: this.anims.generateFrameNumbers(\"boulder\", { frames: [70] }),\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"barrel_roll_right\",\n      frames: this.anims.generateFrameNumbers(\"boulder\", {\n        frames: [71, 76, 77, 70],\n      }),\n      frameRate: (1000 / TICK_TIME) * 3,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"barrel_roll_left\",\n      frames: this.anims.generateFrameNumbers(\"boulder\", {\n        frames: [77, 76, 71, 70],\n      }),\n      frameRate: (1000 / TICK_TIME) * 3,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"pillar_idle\",\n      frames: this.anims.generateFrameNumbers(\"boulder\", { frames: [66] }),\n      frameRate: 1,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"pillar_roll_right\",\n      frames: this.anims.generateFrameNumbers(\"boulder\", {\n        frames: [67, 68, 69, 66],\n      }),\n      frameRate: (1000 / TICK_TIME) * 3,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"pillar_roll_left\",\n      frames: this.anims.generateFrameNumbers(\"boulder\", {\n        frames: [69, 68, 67, 66],\n      }),\n      frameRate: (1000 / TICK_TIME) * 3,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"liana_start\",\n      frames: this.anims.generateFrameNumbers(\"boulder\", { frames: [72] }),\n      frameRate: (1000 / TICK_TIME) * 3,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"liana_middle\",\n      frames: this.anims.generateFrameNumbers(\"boulder\", { frames: [78] }),\n      frameRate: (1000 / TICK_TIME) * 3,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"liana_end\",\n      frames: this.anims.generateFrameNumbers(\"boulder\", { frames: [84] }),\n      frameRate: (1000 / TICK_TIME) * 3,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"explosion_explode\",\n      frames: this.anims.generateFrameNumbers(\"explosion\", {\n        frames: [0, 1, 2, 3, 4, 5, 6, 7],\n      }),\n      frameRate: (1000 / TICK_TIME) * 4,\n      repeat: 0,\n    });\n\n    this.anims.create({\n      key: \"diamond_idle\",\n      frames: this.anims.generateFrameNumbers(\"boulder\", {\n        frames: [54],\n      }),\n      frameRate: (1000 / TICK_TIME) * 4,\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"diamond_shine\",\n      frames: this.anims.generateFrameNumbers(\"boulder\", {\n        frames: [\n          53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53,\n          53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53,\n          53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53,\n          53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 58, 59, 64, 65,\n          53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53,\n          53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53,\n          53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53,\n          53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53,\n        ],\n      }),\n      frameRate: (1000 / TICK_TIME) * 4,\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"mushroom_idle\",\n      frames: this.anims.generateFrameNumbers(\"closeUpItems\", { frames: [20] }),\n      frameRate: 1,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"pickaxe_idle\",\n      frames: this.anims.generateFrameNumbers(\"pickables\", { frames: [6] }),\n      frameRate: 1,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"brave_idle\",\n      frames: this.anims.generateFrameNumbers(\"brave\", {\n        frames: [\n          0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 2, 2, 2, 2, 2, 2, 2, 0,\n        ],\n      }),\n      frameRate: 4,\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"brave_idle_rockford\",\n      frames: this.anims.generateFrameNumbers(\"brave\", {\n        frames: [\n          3, 3, 3, 4, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 6, 7, 5, 5, 6, 7, 5, 5, 5,\n          6, 7, 5, 5, 6, 7, 5, 5, 5, 5, 5, 5, 5, 5, 6, 7, 5, 5, 6, 7, 5, 5, 5,\n          6, 7, 5, 5, 6, 7, 5, 5, 5, 5, 5, 5, 5, 5, 6, 7, 5, 5, 6, 7, 5, 5, 5,\n          6, 7, 5, 5, 6, 7, 5, 5, 5, 5, 5, 5, 5, 5, 6, 7, 5, 5, 6, 7, 5, 5, 5,\n          4, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,\n        ],\n      }),\n      frameRate: 8,\n      repeat: -1,\n    });\n\n    this.anims.create({\n      key: \"brave_idle_pickaxe\",\n      frames: this.anims.generateFrameNumbers(\"brave\", {\n        frames: [\n          32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 33, 33, 33, 32, 34, 34, 34,\n          34, 34, 34, 34, 32,\n        ],\n      }),\n      frameRate: 4,\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"brave_run\",\n      frames: this.anims.generateFrameNumbers(\"brave\", {\n        frames: [8, 9, 10, 11, 12, 13, 14, 15],\n      }),\n      frameRate: (1000 / TICK_TIME) * 2.5, // magic number that make smooth run and full frames in about 2 cycles\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"brave_run_up\",\n      frames: this.anims.generateFrameNumbers(\"brave\", {\n        frames: [56, 57, 58, 59, 60, 61, 62, 63],\n      }),\n      frameRate: (1000 / TICK_TIME) * 2.5,\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"brave_run_pickaxe_up\",\n      frames: this.anims.generateFrameNumbers(\"brave\", {\n        frames: [56, 57, 58, 59, 60, 61, 62, 63],\n      }),\n      frameRate: (1000 / TICK_TIME) * 2.5,\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"brave_run_down\",\n      frames: this.anims.generateFrameNumbers(\"brave\", {\n        frames: [64, 65, 66, 67, 68, 69, 70, 71],\n      }),\n      frameRate: (1000 / TICK_TIME) * 2.5,\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"brave_run_pickaxe_down\",\n      frames: this.anims.generateFrameNumbers(\"brave\", {\n        frames: [72, 73, 74, 75, 76, 77, 78, 79],\n      }),\n      frameRate: (1000 / TICK_TIME) * 2.5,\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"brave_run_pickaxe\",\n      frames: this.anims.generateFrameNumbers(\"brave\", {\n        frames: [16, 17, 18, 19, 20, 21, 22, 23],\n      }),\n      frameRate: (1000 / TICK_TIME) * 2.5,\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"brave_break_pickaxe\",\n      frames: this.anims.generateFrameNumbers(\"brave\", {\n        frames: [40, 41, 41, 42, 43],\n      }),\n      frameRate: (1000 / TICK_TIME) * 5,\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"brave_break_pickaxe_up\",\n      frames: this.anims.generateFrameNumbers(\"brave\", {\n        frames: [44, 45, 45, 46, 47],\n      }),\n      frameRate: (1000 / TICK_TIME) * 5,\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"brave_break_pickaxe_down\",\n      frames: this.anims.generateFrameNumbers(\"brave\", {\n        frames: [52, 53, 53, 54, 55],\n      }),\n      frameRate: (1000 / TICK_TIME) * 5,\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"brave_break_pickaxe_alt\",\n      frames: this.anims.generateFrameNumbers(\"brave\", {\n        frames: [48, 49, 49, 50, 51],\n      }),\n      frameRate: (1000 / TICK_TIME) * 5,\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"brave_push\",\n      frames: this.anims.generateFrameNumbers(\"brave\", {\n        frames: [24, 24, 24, 24, 25, 26, 27],\n      }),\n      frameRate: (1000 / TICK_TIME) * 4,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"brave_dies\",\n      frames: this.anims.generateFrameNumbers(\"brave\", {\n        frames: [28, 29, 30, 31, 30, 31],\n      }),\n      frameRate: (1000 / TICK_TIME) * 3.5,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"torch_idle\",\n      frames: this.anims.generateFrameNumbers(\"torch\", {\n        frames: [0, 1, 2, 3],\n      }),\n      frameRate: (1000 / TICK_TIME) * 2.5,\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"torch_run\",\n      frames: this.anims.generateFrameNumbers(\"torch\", {\n        frames: [8, 9, 10, 11, 12, 13, 14, 15],\n      }),\n      frameRate: (1000 / TICK_TIME) * 2.5,\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"torch_run_up\",\n      frames: this.anims.generateFrameNumbers(\"torch\", {\n        frames: [56, 57, 58, 59, 60, 61, 62, 63],\n      }),\n      frameRate: (1000 / TICK_TIME) * 2.5,\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"torch_run_down\",\n      frames: this.anims.generateFrameNumbers(\"torch\", {\n        frames: [64, 65, 66, 67, 68, 69, 70, 71],\n      }),\n      frameRate: (1000 / TICK_TIME) * 2.5,\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"torch_push\",\n      frames: this.anims.generateFrameNumbers(\"torch\", {\n        frames: [24, 25, 26, 27, 24, 25, 26],\n      }),\n      frameRate: (1000 / TICK_TIME) * 2.5,\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"torch_break_pickaxe\",\n      frames: this.anims.generateFrameNumbers(\"torch\", {\n        frames: [40, 41, 41, 42, 43],\n      }),\n      frameRate: (1000 / TICK_TIME) * 5,\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"bat_move\",\n      frames: this.anims.generateFrameNumbers(\"boulder\", {\n        frames: [18, 19, 20, 21, 22, 23, 24],\n      }),\n      frameRate: (1000 / TICK_TIME) * 3,\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"ground_breaks\",\n      frames: this.anims.generateFrameNumbers(\"boulder\", {\n        frames: [30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40],\n      }),\n      frameRate: (1000 / TICK_TIME) * 3,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"ground_disolves\",\n      frames: this.anims.generateFrameNumbers(\"boulder\", {\n        frames: [32, 33, 34, 35, 36, 37, 38, 39, 40],\n      }),\n      frameRate: (1000 / TICK_TIME) * 3,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"jewel_pick\",\n      frames: this.anims.generateFrameNumbers(\"boulder\", {\n        frames: [42, 43, 44, 45, 46, 40],\n      }),\n      frameRate: (1000 / TICK_TIME) * 3,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"enemy_dies\",\n      frames: this.anims.generateFrameNumbers(\"boulder\", {\n        frames: [47, 48, 49, 50, 51, 52, 40],\n      }),\n      frameRate: (1000 / TICK_TIME) * 3,\n      repeat: 0,\n    });\n\n    this.anims.create({\n      key: \"closeUp_Mary\",\n      frames: this.anims.generateFrameNumbers(\"closeUp\", { frames: [0] }),\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"closeUp_Marduk\",\n      frames: this.anims.generateFrameNumbers(\"closeUp\", { frames: [1] }),\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"closeUp_Dwarf\",\n      frames: this.anims.generateFrameNumbers(\"closeUp\", { frames: [2] }),\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"closeUp_Tiamat\",\n      frames: this.anims.generateFrameNumbers(\"closeUp\", { frames: [5] }),\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"closeUp_Pickaxe\",\n      frames: this.anims.generateFrameNumbers(\"closeUpItems\", { frames: [6] }),\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"closeUp_Mushroom\",\n      frames: this.anims.generateFrameNumbers(\"closeUpItems\", { frames: [8] }),\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"closeUp_Diamond\",\n      frames: this.anims.generateFrameNumbers(\"closeUpItems\", { frames: [7] }),\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"closeUp_Abushgidim\",\n      frames: this.anims.generateFrameNumbers(\"closeUpItems\", { frames: [26] }),\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"closeUp_tentacles\",\n      frames: this.anims.generateFrameNumbers(\"closeUpItems\", { frames: [27] }),\n      repeat: 0,\n    });\n    // Bro\n    this.anims.create({\n      key: \"bro_idle\",\n      frames: this.anims.generateFrameNumbers(\"bro\", {\n        frames: [\n          0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 2, 2, 2, 2, 2, 2, 2, 0, 0, 0, 1, 1,\n          1, 1, 1, 1, 0, 0, 0, 2, 2, 2, 0, 0, 1, 1, 1, 0,\n        ],\n      }),\n      frameRate: 4,\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"bro_run\",\n      frames: this.anims.generateFrameNumbers(\"bro\", {\n        frames: [8, 9, 10, 11, 12, 13, 14, 15],\n      }),\n      frameRate: (1000 / TICK_TIME) * 2.5, // magic number that make smooth run and full frames in about 2 cycles\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"bro_run_up\",\n      frames: this.anims.generateFrameNumbers(\"bro\", {\n        frames: [56, 57, 58, 59, 60, 61, 62, 63],\n      }),\n      frameRate: (1000 / TICK_TIME) * 2.5,\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"bro_run_down\",\n      frames: this.anims.generateFrameNumbers(\"bro\", {\n        frames: [64, 65, 66, 67],\n      }),\n      frameRate: (1000 / TICK_TIME) * 4,\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"bro_laying\",\n      frames: this.anims.generateFrameNumbers(\"bro\", {\n        frames: [31],\n      }),\n      frameRate: (1000 / TICK_TIME) * 3.5,\n      repeat: 0,\n    });\n    // Shmebulock\n    this.anims.create({\n      key: \"dwarf_idle\",\n      frames: this.anims.generateFrameNumbers(\"dwarf\", {\n        frames: [\n          0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 2, 2, 2, 2, 2, 2, 2, 0,\n        ],\n      }),\n      frameRate: 4,\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"dwarf_run\",\n      frames: this.anims.generateFrameNumbers(\"dwarf\", {\n        frames: [8, 9, 10, 11, 12, 13, 14, 15],\n      }),\n      frameRate: (1000 / TICK_TIME) * 2.5, // magic number that make smooth run and full frames in about 2 cycles\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"dwarf_run_up\",\n      frames: this.anims.generateFrameNumbers(\"dwarf\", {\n        frames: [56, 57, 58, 59, 60, 61, 62, 63],\n      }),\n      frameRate: (1000 / TICK_TIME) * 2.5,\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"dwarf_look_up\",\n      frames: this.anims.generateFrameNumbers(\"dwarf\", {\n        frames: [57],\n      }),\n      frameRate: 1,\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"dwarf_run_down\",\n      frames: this.anims.generateFrameNumbers(\"dwarf\", {\n        frames: [64, 65, 66, 67],\n      }),\n      frameRate: (1000 / TICK_TIME) * 4,\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"exit_block\",\n      frames: this.anims.generateFrameNumbers(\"boulder\", {\n        frames: [0, 1, 2, 3, 4, 5],\n      }),\n      frameRate: (1000 / TICK_TIME) * 2.5,\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"moonAltarTop\",\n      frames: this.anims.generateFrameNumbers(\"closeUpItems\", { frames: [26] }),\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"moonAltarBottom\",\n      frames: this.anims.generateFrameNumbers(\"closeUpItems\", { frames: [37] }),\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"sunAltarTop\",\n      frames: this.anims.generateFrameNumbers(\"closeUpItems\", { frames: [27] }),\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"sunAltarBottom\",\n      frames: this.anims.generateFrameNumbers(\"closeUpItems\", { frames: [38] }),\n      repeat: 0,\n    });\n\n    this.anims.create({\n      key: \"chunkHorizontalEven_idle\",\n      frames: this.anims.generateFrameNumbers(\"boss\", { frames: [0] }),\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"chunkHorizontalOdd_idle\",\n      frames: this.anims.generateFrameNumbers(\"boss\", { frames: [10] }),\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"chunkCurveEven_idle\",\n      frames: this.anims.generateFrameNumbers(\"boss\", { frames: [20] }),\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"chunkCurveOdd_idle\",\n      frames: this.anims.generateFrameNumbers(\"boss\", { frames: [30] }),\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"chunkHeadEven_idle\",\n      frames: this.anims.generateFrameNumbers(\"boss\", { frames: [70] }),\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"chunkHeadOdd_idle\",\n      frames: this.anims.generateFrameNumbers(\"boss\", { frames: [60] }),\n      repeat: -1,\n    });\n\n    this.anims.create({\n      key: \"chunkHorizontalEven_grow\", // A\n      frames: this.anims.generateFrameNumbers(\"boss\", {\n        frames: [60, 61, 62, 63, 64, 0, 0, 0],\n      }),\n      frameRate: (1000 / TICK_TIME) * 3,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"chunkHorizontalOdd_grow\", // B\n      frames: this.anims.generateFrameNumbers(\"boss\", {\n        frames: [70, 71, 72, 73, 74, 10, 10, 10],\n      }),\n      frameRate: (1000 / TICK_TIME) * 3,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"chunkCurveOdd_grow\", // D\n      frames: this.anims.generateFrameNumbers(\"boss\", {\n        frames: [80, 81, 82, 83, 84],\n      }),\n      frameRate: (1000 / TICK_TIME) * 3,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"chunkCurveEven_grow\", // C\n      frames: this.anims.generateFrameNumbers(\"boss\", {\n        frames: [90, 91, 92, 93, 94],\n      }),\n      frameRate: (1000 / TICK_TIME) * 3,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"chunkHeadEven_grow\", // E\n      frames: this.anims.generateFrameNumbers(\"boss\", {\n        frames: [9, 9, 9, 50, 51, 52, 53, 70],\n      }),\n      frameRate: (1000 / TICK_TIME) * 3,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"chunkHeadOdd_grow\", // F\n      frames: this.anims.generateFrameNumbers(\"boss\", {\n        frames: [9, 9, 9, 40, 41, 42, 43, 60],\n      }),\n      frameRate: (1000 / TICK_TIME) * 3,\n      repeat: 0,\n    });\n\n    // REDUCE\n    this.anims.create({\n      key: \"chunkHeadEven_shrink\", // E\n      frames: this.anims.generateFrameNumbers(\"boss\", {\n        frames: [70, 53, 52, 51, 50, 9],\n      }),\n      frameRate: (1000 / TICK_TIME) * 6,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"chunkHeadOdd_shrink\", // F\n      frames: this.anims.generateFrameNumbers(\"boss\", {\n        frames: [60, 43, 42, 41, 40, 9],\n      }),\n      frameRate: (1000 / TICK_TIME) * 6,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"chunkHorizontalEven_shrink\", // A\n      frames: this.anims.generateFrameNumbers(\"boss\", {\n        frames: [0, 0, 0, 64, 63, 62, 61, 60],\n      }),\n      frameRate: (1000 / TICK_TIME) * 6,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"chunkHorizontalOdd_shrink\", // B\n      frames: this.anims.generateFrameNumbers(\"boss\", {\n        frames: [10, 10, 10, 74, 73, 72, 71, 70],\n      }),\n      frameRate: (1000 / TICK_TIME) * 6,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"chunkCurveOdd_shrink\", // D\n      frames: this.anims.generateFrameNumbers(\"boss\", {\n        frames: [85, 85, 84, 83, 82, 81, 80],\n      }),\n      frameRate: (1000 / TICK_TIME) * 6,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"chunkCurveEven_shrink\", // C\n      frames: this.anims.generateFrameNumbers(\"boss\", {\n        frames: [95, 95, 94, 93, 92, 91, 90],\n      }),\n      frameRate: (1000 / TICK_TIME) * 6,\n      repeat: 0,\n    });\n\n    this.anims.create({\n      key: \"bossCenterTop\",\n      frames: this.anims.generateFrameNumbers(\"boss\", { frames: [6] }),\n      frameRate: (1000 / TICK_TIME) * 3,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"bossCenterMid\",\n      frames: this.anims.generateFrameNumbers(\"boss\", { frames: [16] }),\n      frameRate: (1000 / TICK_TIME) * 3,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"bossCenterBottom\",\n      frames: this.anims.generateFrameNumbers(\"boss\", { frames: [26] }),\n      frameRate: (1000 / TICK_TIME) * 3,\n      repeat: 0,\n    });\n\n    this.anims.create({\n      key: \"bossSideTop\",\n      frames: this.anims.generateFrameNumbers(\"boss\", { frames: [7] }),\n      frameRate: (1000 / TICK_TIME) * 3,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"bossSideMid\",\n      frames: this.anims.generateFrameNumbers(\"boss\", { frames: [17] }),\n      frameRate: (1000 / TICK_TIME) * 3,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"bossSideBottom\",\n      frames: this.anims.generateFrameNumbers(\"boss\", { frames: [27] }),\n      frameRate: (1000 / TICK_TIME) * 3,\n      repeat: 0,\n    });\n\n    this.anims.create({\n      key: \"bossBorderTop\",\n      frames: this.anims.generateFrameNumbers(\"boss\", { frames: [8] }),\n      frameRate: (1000 / TICK_TIME) * 3,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"bossBorderMid\",\n      frames: this.anims.generateFrameNumbers(\"boss\", { frames: [18] }),\n      frameRate: (1000 / TICK_TIME) * 3,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"bossBorderBottom\",\n      frames: this.anims.generateFrameNumbers(\"boss\", { frames: [28] }),\n      frameRate: (1000 / TICK_TIME) * 3,\n      repeat: 0,\n    });\n\n    this.anims.create({\n      key: \"bossWombTop\",\n      frames: this.anims.generateFrameNumbers(\"boss\", { frames: [45] }),\n      frameRate: (1000 / TICK_TIME) * 3,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"bossWombBottom1\",\n      frames: this.anims.generateFrameNumbers(\"boss\", { frames: [44] }),\n      frameRate: (1000 / TICK_TIME) * 3,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"bossWombBottom2_idle\",\n      frames: this.anims.generateFrameNumbers(\"boss\", { frames: [54] }),\n      frameRate: (1000 / TICK_TIME) * 3,\n      repeat: 0,\n    });\n\n    this.anims.create({\n      key: \"bossWombBottom2_birth\",\n      frames: this.anims.generateFrameNumbers(\"boss\", {\n        frames: [54, 55, 56, 57, 57, 58, 58, 59],\n      }),\n      frameRate: (1000 / TICK_TIME) * 3,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"bossWombBottom2_blocked\",\n      frames: this.anims.generateFrameNumbers(\"boss\", {\n        frames: [54, 55, 56, 57, 56, 57, 56, 57, 56, 55],\n      }),\n      frameRate: (1000 / TICK_TIME) * 3,\n      repeat: 0,\n    });\n  }\n}\n","import Phaser from 'phaser'\nimport { SCALE, TILES_BY_SCREEN, TILE_SIZE } from '../utils/constants'\nimport CRTFilter from '../utils/CRTShaderFX'\nimport UI from '../components/UI'\n\nexport default class ConnectorScene extends Phaser.Scene {\n  constructor () {\n    super('ConnectorScene');\n  }\n  \n  preload () {\n    \n  }\n\n  createAnimations() {\n    this.anims.create({\n      key: 'closeUp_Mary',\n      frames:this.anims.generateFrameNumbers('closeUp', { frames: [ 0 ] }),\n      repeat: 0,\n    })\n    this.anims.create({\n      key: 'closeUp_Marduk',\n      frames:this.anims.generateFrameNumbers('closeUp', { frames: [ 1 ] }),\n      repeat: 0,\n    })\n    this.anims.create({\n      key: 'closeUp_Dwarf',\n      frames:this.anims.generateFrameNumbers('closeUp', { frames: [ 2 ] }),\n      repeat: 0,\n    })\n    this.anims.create({\n      key: 'closeUp_Tiamat',\n      frames:this.anims.generateFrameNumbers('closeUp', { frames: [ 3 ] }),\n      repeat: 0,\n    })\n  }\n  getMusicFromName(name) {\n    switch(name) {\n      case 'cinematic_1':\n        return 'swarf_chat_music'\n      default:\n        return 'generic_chat_music'\n    }\n  }\n  \n  getImageByName(name) {\n    let image, scaleX, scaleY, scale\n    switch(name) {\n      default:\n      case 'cinematic_1':\n        image = this.add.image(this.cameras.main.width / 2, this.cameras.main.height / 1.5, 'Tiamat')\n        scaleX = this.cameras.main.width / image.width\n        scaleY = this.cameras.main.height / image.height\n        scale = Math.max(scaleX, scaleY)\n        image.setScale(scale * 4).setScrollFactor(0)\n        break\n      case 'cinematic_last':\n        image = this.add.image(this.cameras.main.width /2, this.cameras.main.height/2, 'Tiamat')\n        scaleX = this.cameras.main.width / image.width\n        scaleY = this.cameras.main.height / image.height\n        scale = Math.max(scaleX, scaleY)\n        image.setScale(scale).setScrollFactor(0)\n        break\n      case 'cinematic_last_2':\n        image = this.add.image(this.cameras.main.width /2, this.cameras.main.height/2, 'thechild')\n        scaleX = this.cameras.main.width / image.width\n        scaleY = this.cameras.main.height / image.height\n        scale = Math.max(scaleX, scaleY)\n        image.setScale(scale).setScrollFactor(0)\n        break\n    }\n    return image\n  }\n  create({id, name}) {\n    this.currentLevel = id\n    this.createAnimations()\n    const musicName = this.getMusicFromName(name)\n    this.environmentMusic = this.sound.add(musicName, { loop: true });\n    this.environmentMusic.play();\n\n    new UI(this, true)\n\n    this.cameras.main.setPostPipeline(CRTFilter);\n    let image = this.getImageByName(name)\n    image.name = 'background_art'\n\n    this[`showDialogLevel_${name}`]()\n    \n  }\n  showDialogLevel_cinematic_escape() {\n    // hack to get control after dialogue close\n    this.levels = {\n      current:{\n        pause: () => false,\n        resume: () => {\n          setTimeout(() => {\n            this.environmentMusic.stop()\n            // this.environmentMusic.destroy()\n            this.cameras.main.fade(1000, 0, 0, 0)\n            this.cameras.main.once('camerafadeoutcomplete', () => void this.scene.start('GameScene', { level: this.currentLevel + 1 }))\n          }, 1000);\n        }\n      }\n    }\n\n    this.events.emit('dialogue:show', {\n      participants: ['closeUp_Marduk', 'closeUp_Mary'],\n      conversation: [\n        {\n          who: 'closeUp_Marduk',\n          text: [\n            \"Do you feel it Mary?\",\n            \"Do you feel her presence\",\n            \"below?\",\n          ]\n        },\n        {\n          who: 'closeUp_Mary',\n          text: [\n             \"I do... But what\",\n             \"does it mean?\",\n          ]\n        },\n        {\n          who: 'closeUp_Marduk',\n          text: [\n             \"That I do not know... But\",\n             \"it does not portend well.\",\n             \"I have learned so much in\",\n             \"so little time. Mary...I\",\n             \"cant recognize the man\",\n             \"I once was. I felt\",\n             \"bound by obligation,\",\n             \"I was trapped, Mary.\"\n          ]\n        },\n        {\n          who: 'closeUp_Mary',\n          text: [\n             \"It is time, Marduk\",\n             \"we have to escape\",\n             \"from here before\",\n             \"Tiamat stops us\",\n             \" \",\n             \"go!!!\"\n          ]\n        },\n      ]\n    })\n\n  }\n\n  showDialogLevel_cinematic_last_2() {\n    // hack to get control after dialogue close\n    this.levels = {\n      current:{\n        pause: () => {\n          this.tweens.add({\n            targets: this.children.getByName('background_art'),\n            alpha: 0,\n            duration: 500,\n            onComplete: () => {\n              const img = this.getImageByName('cinematic_last_2')\n              img.alpha = 0\n              this.tweens.add({\n                targets: img,\n                alpha: 1,\n                duration: 500,\n              })\n            }\n          })\n        },\n        resume: () => {\n          setTimeout(() => {\n            this.tweens.add({\n              targets:this.environmentMusic,\n              valume: 0,\n              duration: 500,\n            })\n            \n            this.cameras.main.fade(1000, 0, 0, 0)\n            this.cameras.main.once('camerafadeoutcomplete', () => void this.scene.start('CreditsScene'))\n          }, 1000);\n        }\n      }\n    }\n    this.events.emit('dialogue:show', {\n      participants: ['closeUp_Marduk', 'closeUp_Dwarf'],\n      conversation: [\n        {\n          who: 'closeUp_Dwarf',\n          text: [\n             \"That's not how things work\",\n             \"where I come from. Marduk,\",\n             \"You have been preparing\",\n             \"for this moment since\",\n             \"your life began. Do you\",\n             \"have the courage to\",\n             \"forge your own destiny?\",\n          ]\n        },\n      ]\n    })\n    \n  }\n  showDialogLevel_cinematic_last() {\n    // hack to get control after dialogue close\n    this.levels = {\n      current:{\n        pause: () => false,\n        resume: () => {\n          setTimeout(() => {\n            this.showDialogLevel_cinematic_last_2()\n            // this.cameras.main.fade(1000, 0, 0, 0)\n            // this.cameras.main.once('camerafadeoutcomplete', () => void this.scene.start('GameScene', { level: this.currentLevel + 1 }))\n          }, 1000);\n        }\n      }\n    }\n\n    this.events.emit('dialogue:show', {\n      participants: ['closeUp_Marduk', 'closeUp_Tiamat'],\n      conversation: [\n        {\n          who: 'closeUp_Marduk',\n          text: [\n            \"How could you do this? We\",\n            \"are your creations. This\",\n            \"is your land. How could\",\n            \"you lie to us!?\",\n            \"Why have you forsaken us?\",\n          ]\n        },\n        {\n          who: 'closeUp_Tiamat',\n          text: [\n            \"Life is a cycle. The\",\n            \"catalyst comet is a part\",\n            \"of this cycle: I did not\",\n            \"lie when I said the Comet\",\n            \"was the source of the\",\n            \"earthquakes.\",\n          ]\n        },\n        {\n          who: 'closeUp_Tiamat',\n          text: [\n             \"However: I am a force of\",\n             \"this world. It is through\",\n             \"my actions that things\",\n             \"occur. I am bound to the\",\n             \"will of the comet: for\",\n             \"truly we are one. I am\",\n             \"nature: and this...is\",\n             \"within my nature.\",\n          ]\n        },\n        {\n          who: 'closeUp_Tiamat',\n          text: [\n             \"I may have created\",\n             \"everything, yet still:\",\n             \"there was a natural order\",\n             \"to life that preceded me.\",\n          ]\n        },\n        {\n          who: 'closeUp_Tiamat',\n          text: [\n             \"You are finite in your\",\n             \"perspective Marduk.\",\n             \"Death signifies new\",\n             \"beginnings.\",\n             \" \",\n             \"This is Destiny.\",\n          ]\n        },\n        {\n          who: 'closeUp_Marduk',\n          text: [\n             \"Who would accept a fate\",\n             \"such as this? We have done\",\n             \"no wrong. We worship and\",\n             \"revere you. We are your\",\n             \"children! Would you\",\n             \"really destroy us?\",\n          ]\n        },\n        {\n          who: 'closeUp_Tiamat',\n          text: [\n            \"The end was written\",\n            \"in the beginning.\",\n            \"Fate cannot be rewritten.\"\n          ]\n        },\n      ]\n    })\n  }\n  showDialogLevel_cinematic_1() {\n    // hack to get control after dialogue close\n    this.levels = {\n      current:{\n        pause: () => false,\n        resume: () => {\n          setTimeout(() => {\n            this.tweens.add({\n              targets: this.environmentMusic,\n              volume: 0,\n              duration: 500,\n            })\n            this.cameras.main.fade(1000, 0, 0, 0)\n            this.cameras.main.once('camerafadeoutcomplete', () => void this.scene.start('GameScene', { level: this.currentLevel + 1 }))\n          }, 1000);\n        }\n      }\n    }\n    this.events.emit('dialogue:show', {\n      participants: ['closeUp_Mary', 'closeUp_Marduk', 'closeUp_Dwarf'],\n      conversation: [\n        {\n          who: 'closeUp_Mary',\n          text: [\n            \"There you are! I was\",\n            \"worried about you!\",\n            \"Are you okay?\",\n          ]\n        },\n        {\n          who: 'closeUp_Marduk',\n          text: [\n            \"- marduk has been crying -\",\n            \"Thank Tiamat Youre here!\",\n            \"I made a mistake. I ate\",\n            \"one of the mushrooms. I\",\n            \"dont feel wellI think I\",\n            \"broke my leg falling from\",\n            \"the surface.\",\n          ]\n        },\n        {\n          who: 'closeUp_Mary',\n          text: [\n            \"Are you going to\",\n            \"throw up!?\",\n            \"Can you stand?\",\n          ]\n        },{\n          who: 'closeUp_Marduk',\n          text: [\n            \"No.I dont think so.\",\n          ]\n        },\n        {\n          who: 'closeUp_Mary',\n          text: [\n            \"What are we going to do\",\n            \"with you.\",\n          ]\n        },\n        {\n          who: 'closeUp_Dwarf',\n          text: [\n            \"You know..there's\",\n            \"nothing wrong with being\",\n            \"sad or afraid. Its\",\n            \"nature's way of guiding\",\n            \"us towards a brighter\",\n            \"future.\",\n          ]\n        },\n        {\n          who: 'closeUp_Marduk',\n          text: [\n            \"WHAT ON EARTH IS THAT!?\",\n            \"Dont patronize me foul\",\n            \"beast.\",\n          ]\n        },\n        {\n          who: 'closeUp_Mary',\n          text: [\n            \"You really need to learn\",\n            \"when to shut your mouth.\",\n            \"Marduk. You have become\",\n            \"rude & foul tempered.\",\n          ]\n        },\n        {\n          who: 'closeUp_Dwarf',\n          text: [\n            \"I mean hes right.\",\n            \"I am a monster.\",\n            \"I'm... different.\"\n          ]\n        },\n        {\n          who: 'closeUp_Mary',\n          text: [\n            \"You dont seem like\",\n            \"a monster to me.\",\n          ]\n        },\n        {\n          who: 'closeUp_Dwarf',\n          text: [\n            \"Thats because we're\",\n            \"going to make a deal\"\n          ]\n        },\n        {\n          who: 'closeUp_Marduk',\n          text: [\n            \"I dont make deals with...\",\n            \"your kind...\",\n          ]\n        },\n        {\n          who: 'closeUp_Dwarf',\n          text: [\n            \"But You Will...in time...\",\n            \"things change. People grow.\",\n            \"Even you Marduk. I think\",\n            \"we could be great friends.\",\n            \"In Fact. It Is Prophecy\",\n          ]\n        }\n      ]\n    }) \n  }\n}\n","import Phaser from 'phaser'\nimport { SCALE, TILES_BY_SCREEN, TILE_SIZE } from '../utils/constants'\nimport CRTFilter from '../utils/CRTShaderFX'\nimport UI from '../components/UI'\n\nexport default class IntroScene extends Phaser.Scene {\n  constructor () {\n    super('CreditsScene');\n  }\n\n  create() {\n    this.normalDayMusic = this.sound.add('opening_peace', { loop: true })\n    this.normalDayMusic.play();\n\n    this.cameras.main.setPostPipeline(CRTFilter);\n    let image = this.add.image(this.cameras.main.width / 2, this.cameras.main.height / 2, 'theworld')\n    let scaleX = this.cameras.main.width / image.width\n    let scaleY = this.cameras.main.height / image.height\n    let scale = Math.max(scaleX, scaleY)\n    image.setScale(scale).setScrollFactor(0)\n    image.name = 'background_art'\n    image.alpha = 0\n    this.tweens.add({\n      targets: image,\n      alpha: 1,\n      duration: 5000,\n    })\n    const line1 = this.add.text(80, 10, \"THE END\",\n      {\n        fontFamily: 'GameGirl',\n        fontSize: \"10px\",\n        fill: \"#ffffff\",\n      }\n    ).setScale(scaleX * 2).setPosition(2 * scaleX, this.cameras.main.height - 20 * 4 * scaleY).setShadow(-1,1)\n    line1.displayHeight = 10 * scaleY\n    const line2 = this.add.text(80, 10, \"Thanks for playing\",\n      {\n        fontFamily: 'GameGirl',\n        fontSize: \"10px\",\n        fill: \"#ffffff\",\n      }\n    ).setScale(scaleX * 0.9).setPosition(2 * scaleX, this.cameras.main.height - 10 * 3 * scaleY).setShadow(-1,1)\n    line2.displayHeight = 10 * scaleY\n  }\n}","import { useLayoutEffect, useState, useContext } from \"react\";\nimport Phaser from \"phaser\";\nimport { context } from \"../PhaserProvider\";\n\nconst usePhaser = () => {\n  const { game, scene, sceneProps } = useContext(context);\n  const getState = (game, scene) => {\n    game.scene.scenes.forEach((s) => {\n      s.events.off(Phaser.Scenes.Events.READY);\n      s.events.once(Phaser.Scenes.Events.READY, () => {\n        s.events.off(Phaser.Scenes.Events.RENDER);\n        s.events.once(Phaser.Scenes.Events.RENDER, () => {\n          setState({\n            ...s,\n            camera: s.cameras.main,\n            cameras: s.cameras,\n            scene: s,\n          });\n        });\n      });\n    });\n    return {\n      game,\n      scene, // current scene based on last scene that called RPFScene.create\n      sceneProps, // current scene data recieved into scene.create method\n      camera: scene.cameras.main,\n      cameras: scene.cameras,\n      scenes: game.scene.scenes,\n      scenesManager: game.scene,\n    };\n  };\n  const [state, setState] = useState({});\n  useLayoutEffect(() => {\n     if (scene) {\n       setState(getState(game, scene))\n     }\n  }, [game, scene])\n\n  return state;\n};\nexport default usePhaser;\n","import React, { useEffect, forwardRef, useRef, useCallback, useLayoutEffect } from 'react'\nimport Phaser from 'phaser'\nimport usePhaser from '../hooks/usePhaser'\n\nconst GameObject = forwardRef(({\n  args,\n  type = 'Shape',\n  addedToScene = () => {},\n  addedToSceneForParent = () => {},\n  children,\n  dataParentRef,\n  ...props\n}, externalRef) => {\n  const { scene } = usePhaser()\n  const localRef = useRef()\n  const tId = useRef()\n  const ref = externalRef || localRef\n  \n  const applyProps = useCallback((_this, p) => {\n    Object.keys(p).forEach(k => {\n      if(_this?.hasOwnProperty(k) || _this?.__proto__.hasOwnProperty(k)) {\n        if(typeof _this[k] === 'function') {\n          _this[k](p[k])\n        } else {\n          _this[k] = p[k]\n        }\n      }\n    })\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props])\n  \n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useLayoutEffect(() => applyProps(ref.current, props), [props])\n  \n  // IMPORTANT: keep this as useEffect so this code runs after render\n  // that way we have all Phaser listeners settled once the objects are created\n  useEffect(() => {\n    if (scene) {\n      // new object\n      const obj = new Phaser.GameObjects[type](scene, ...args)\n      \n      // makes Rect aware of the new object\n      ref.current = obj\n      \n      // listen to added-to-scne event\n      obj.once(Phaser.GameObjects.Events.ADDED_TO_SCENE, () => {\n        // convenient callback for event as object property\n        addedToScene(obj)\n        \n        // calls parent container callback (if present)\n        addedToSceneForParent(obj)\n\n        // update Phaser with React props\n        applyProps(obj, props)\n      })\n\n      // offset execution to let object creation propagate on refs before being added to de scene\n      tId.current = setTimeout(() => {\n        // adds object to scene\n        scene.add.existing(obj)\n      })\n      \n    }\n\n    return () => {\n      ref?.current?.destroy()\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [scene])\n\n  useEffect(() =>{\n    return () => {\n      clearTimeout(tId.current)\n  }}, [])\n\n  return <>{children}</>\n})\nGameObject.displayName = `GameObject`;\nexport default GameObject\n","import { useEffect, forwardRef, useRef } from 'react'\nimport GameObject from './GameObject'\n\nconst Text = forwardRef(({\n  args,\n  children,\n  ...props\n}, externalRef) => {\n\n  const localRef = useRef()\n  const ref = externalRef || localRef\n\n  useEffect(() => {\n    if (typeof children === 'string') {\n      ref.current?.setText(children)\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [children])\n\n  return (\n    <GameObject\n      ref={ref}\n      type=\"Text\"\n      args={[\n        args?.[0] ?? props.x,\n        args?.[1] ?? props.y,\n        typeof children === 'string' ? children : args?.[2] ?? \"\",\n        args?.[3] ?? props.style\n      ]}\n      {...props}\n    />\n  )\n})\nText.displayName = 'Text'\nexport default Text\n","import React, {\n  Children,\n  useLayoutEffect,\n  useEffect,\n  cloneElement,\n  createRef,\n} from \"react\";\nimport { forwardRef, useRef } from \"react\";\nimport Phaser from \"phaser\";\nimport usePhaser from \"../hooks/usePhaser\";\nimport GameObject from \"./GameObject\";\n\nconst Container = forwardRef(\n  (\n    { args = [0, 0], addedToScene = () => {}, children, ...props },\n    externalRef\n  ) => {\n    const localRef = useRef();\n    const ref = externalRef || localRef;\n\n    const onObjectAddedToScene = (obj) => {\n      ref.current.add(obj);\n    };\n    const extractPhaserChildren = (_children) => {\n      return Children.toArray(_children).map((ch) => {\n        if (String(ch.type).includes(\"react.fragment\")) {\n          return cloneElement(ch, {\n            children: extractPhaserChildren(ch.props.children),\n          });\n        }\n        return cloneElement(ch, {\n          addedToSceneForParent: onObjectAddedToScene,\n        });\n      })\n    };\n    // console.log(Children.toArray(children));\n    return (\n      <GameObject ref={ref} type=\"Container\" args={args} {...props}>\n        {/* Inject dataParentRef to children */}\n        {extractPhaserChildren(children)}\n      </GameObject>\n    );\n  }\n);\n\nContainer.displayName = \"Container\";\nexport default Container;\n","import { forwardRef, useRef } from 'react'\nimport GameObject from './GameObject'\n\nconst Sprite = forwardRef(({\n  args,\n  children,\n  ...props\n}, externalRef) => {\n\n  const localRef = useRef()\n  const ref = externalRef || localRef\n\n  return (\n    <GameObject\n      ref={ref}\n      type=\"Sprite\"\n      args={args}\n      {...props}\n    />\n  )\n})\n\nSprite.displayName = 'Sprite'\nexport default Sprite\n","import { useRef, Fragment, useState, useCallback, useEffect } from \"react\";\nimport UI from \"../../components/UI\";\nimport Text from \"../../libs/react-phaser-fiber/components/Text\";\nimport Container from \"../../libs/react-phaser-fiber/components/Container\";\nimport usePhaser from \"../../libs/react-phaser-fiber/hooks/usePhaser\";\nimport { SCALE } from \"../../utils/constants\";\nimport Sprite from \"../../libs/react-phaser-fiber/components/Sprite\";\nimport { formatComp, formatScore } from \"../../utils/helpers\";\nimport { translate } from \"../../utils/localization\";\nimport { getNextLevel } from \"../../components/LevelManager\";\nimport { playResumeScore, stopResumeScore } from \"../../utils/globalScore\";\nimport * as Controller from \"../../components/Controller/Controller\";\n\n\nconst OptionsScene = () => {\n  const { game, scene, sceneProps } = usePhaser();\n  const [selIndex, setSelIndex] = useState(0);\n  const [showRowScore, setShowRowScore] = useState(0);\n  // const [results, setResults] = useState(null);\n  const [options] = useState([\n    translate(\"menu.main.score_op_next\"),\n    translate(\"menu.main.score_op_repeat\"),\n    translate(\"menu.main.score_op_exit\"),\n  ]);\n  const tId = useRef();\n  const refScene = useRef();\n\n  const keyDownHandler = useCallback(\n    (event) => {\n      if (Controller.isCancel(event.key)) {\n        game.scene.start(\"SplashScreenScene\");\n      }\n      if (Controller.isDown(event.key) && selIndex < options.length - 1) {\n        setSelIndex((idx) => idx + 1);\n      }\n      if (Controller.isUp(event.key) && selIndex > 0) {\n        setSelIndex((idx) => idx - 1);\n      }\n      if (Controller.isConfirm(event.key)) {\n        switch (selIndex) {\n          default:\n          case 0:\n            scene.scene.start(\"GameScene\", {\n              levelName: getNextLevel(sceneProps?.level),\n            });\n            break;\n          case 1:\n            scene.scene.start(\"GameScene\", { levelName: sceneProps?.level });\n            break;\n          case 2:\n            scene.scene.start(\"MenuScene\");\n            break;\n        }\n      }\n    },\n    [game, scene, selIndex, options, sceneProps]\n  );\n\n  useEffect(() => {\n    if (scene) {\n      scene?.input.keyboard.addListener(\"keydown\", keyDownHandler);\n      playResumeScore(scene);\n    }\n\n    return () => {\n      if (scene) {\n        scene.input.keyboard.removeListener(\"keydown\", keyDownHandler);\n      }\n    };\n  }, [scene, keyDownHandler]);\n\n  useEffect(() => {\n    refScene.current = scene;\n    scene?.anims.create({\n      key: \"arrow_menu\",\n      frames: scene.anims.generateFrameNumbers(\"hud\", { frames: [30] }),\n      repeat: 0,\n    });\n  }, [scene]);\n\n  // useEffect(() => {\n  //   if (sceneProps) {\n  //     const data = dbManager.get(sceneProps.level);\n  //     // console.log(sceneProps);\n  //     setResults({\n  //       ...data,\n  //     });\n  //   }\n  // }, [sceneProps]);\n\n  useEffect(() => {\n    if (showRowScore < 5) {\n      tId.current = setTimeout(() => setShowRowScore((v) => v + 1), 800);\n    }\n    return () => clearTimeout(tId.current);\n  }, [showRowScore]);\n\n  useEffect(() => {\n    return () => {\n      clearTimeout(tId.current);\n      refScene.current.input.keyboard.off(\"keydown\");\n    };\n  }, []);\n\n  const formatFont = (txt) => {\n    txt.displayHeight = 10 * SCALE;\n    txt.depth = 16;\n    txt.name = \"header_text\";\n    txt.setScale(SCALE);\n    txt.setScrollFactor(0);\n    txt.setShadow(-1, 1);\n  };\n  const fontStyle = {\n    fontFamily: \"Emulogic\",\n    fontSize: \"8px\",\n    fill: \"#aee0c8\",\n    fontWeight: \"regular\",\n  };\n\n  const CONTAINER_TOP = UI.tileToScreen(1);\n  const CONTAINER_LEFT = UI.tileToScreen(5);\n\n  const MARGIN_LEFT = UI.tileToScreen(1);\n  const LINE_HEIGHT = UI.tileToScreen(0.75);\n  const MENU_OPTIONS_TOP = UI.tileToScreen(7);\n\n  return (\n    <Container x={CONTAINER_LEFT} y={CONTAINER_TOP}>\n      <Text\n        x={MARGIN_LEFT}\n        y={0}\n        setStyle={fontStyle}\n        addedToScene={formatFont}\n      >\n        {`KI - ${sceneProps?.level.includes('maze') ? translate(\"menu.main.ruins\") : translate(\"menu.main.chamber\")} ${sceneProps?.level.replace(\n          /level_|maze_/,\n          \"\"\n        )} ${sceneProps?.level.includes('maze') ? \"\" : translate(\"menu.main.of\") + \" 19\"}`}\n      </Text>\n      {showRowScore > 0 && (\n        <Fragment key=\"gems_score\">\n          <Text\n            x={MARGIN_LEFT}\n            y={LINE_HEIGHT * 2}\n            setStyle={fontStyle}\n            alpha={\n              sceneProps?.collectedDiamonds < sceneProps?.countDiamonds\n                ? 0.8\n                : 1\n            }\n            addedToScene={formatFont}\n          >\n            {translate(\"menu.main.score_gems\")}\n          </Text>\n          <Text\n            x={MARGIN_LEFT + UI.tileToScreen(6)}\n            y={LINE_HEIGHT * 2}\n            setStyle={fontStyle}\n            alpha={\n              sceneProps?.collectedDiamonds < sceneProps?.countDiamonds\n                ? 0.8\n                : 1\n            }\n            addedToScene={formatFont}\n          >\n            {formatScore(\n              sceneProps?.collectedDiamonds,\n              sceneProps?.countDiamonds\n            )}\n          </Text>\n        </Fragment>\n      )}\n      {showRowScore > 1 && (\n        <Fragment key=\"enemies_score\">\n          <Text\n            x={MARGIN_LEFT}\n            y={LINE_HEIGHT * 3}\n            setStyle={fontStyle}\n            alpha={\n              sceneProps?.killedEnemies < sceneProps?.countEnemies ? 0.8 : 1\n            }\n            addedToScene={formatFont}\n          >\n            {translate(\"menu.main.score_enemies\")}\n          </Text>\n          <Text\n            x={MARGIN_LEFT + UI.tileToScreen(6)}\n            y={LINE_HEIGHT * 3}\n            setStyle={fontStyle}\n            alpha={\n              sceneProps?.killedEnemies < sceneProps?.countEnemies ? 0.8 : 1\n            }\n            addedToScene={formatFont}\n          >\n            {formatScore(sceneProps?.killedEnemies, sceneProps?.countEnemies)}\n          </Text>\n        </Fragment>\n      )}\n      {showRowScore > 2 && (\n        <Fragment key=\"shrooms_score\">\n          <Text\n            x={MARGIN_LEFT}\n            y={LINE_HEIGHT * 4}\n            setStyle={fontStyle}\n            alpha={\n              sceneProps?.collectedShrooms < sceneProps?.countShrooms ? 0.8 : 1\n            }\n            addedToScene={formatFont}\n          >\n            {translate(\"menu.main.score_shrooms\")}\n          </Text>\n          <Text\n            x={MARGIN_LEFT + UI.tileToScreen(6)}\n            y={LINE_HEIGHT * 4}\n            setStyle={fontStyle}\n            alpha={\n              sceneProps?.collectedShrooms < sceneProps?.countShrooms ? 0.8 : 1\n            }\n            addedToScene={formatFont}\n          >\n            {formatScore(\n              sceneProps?.collectedShrooms,\n              sceneProps?.countShrooms\n            )}\n          </Text>\n        </Fragment>\n      )}\n\n      <Text\n        x={MARGIN_LEFT}\n        y={LINE_HEIGHT * 4.75}\n        setStyle={fontStyle}\n        addedToScene={formatFont}\n      >\n        --------------------\n      </Text>\n      {showRowScore > 3 && (\n        <Fragment key=\"total_score\">\n          <Text\n            x={MARGIN_LEFT}\n            y={LINE_HEIGHT * 5.5}\n            setStyle={fontStyle}\n            alpha={sceneProps?.comp <= sceneProps?.prevBest ? 0.8 : 1}\n            addedToScene={formatFont}\n          >\n            {translate(\"menu.main.score_comp\")}\n          </Text>\n          <Text\n            x={MARGIN_LEFT + UI.tileToScreen(6)}\n            y={LINE_HEIGHT * 5.5}\n            setStyle={fontStyle}\n            alpha={sceneProps?.comp <= sceneProps?.prevBest ? 0.8 : 1}\n            addedToScene={formatFont}\n          >\n            {formatComp(sceneProps?.comp)}\n          </Text>\n        </Fragment>\n      )}\n      {showRowScore > 4 && (\n        <Fragment key=\"best_score\">\n          <Text\n            x={MARGIN_LEFT}\n            y={LINE_HEIGHT * 6.5}\n            setStyle={{\n              ...fontStyle,\n              fill:\n                sceneProps?.prevBest >= sceneProps?.comp\n                  ? \"#aee0c8\"\n                  : \"#ffd700\",\n            }}\n            addedToScene={formatFont}\n          >\n            {translate(\"menu.main.score_best\")}\n          </Text>\n          <Text\n            x={MARGIN_LEFT + UI.tileToScreen(6)}\n            y={LINE_HEIGHT * 6.5}\n            setStyle={{\n              ...fontStyle,\n              fill:\n                sceneProps?.prevBest >= sceneProps?.comp\n                  ? \"#aee0c8\"\n                  : \"#ffd700\",\n            }}\n            addedToScene={formatFont}\n          >\n            {formatComp(Math.max(sceneProps?.prevBest, sceneProps?.comp))}\n          </Text>\n        </Fragment>\n      )}\n      {options.map((label, idx) => (\n        <Fragment key={`row_${idx}`}>\n          {selIndex === idx && (\n            <Sprite\n              args={[100, 100, \"arrow\"]}\n              x={MARGIN_LEFT - UI.tileToScreen(1.3)}\n              y={MENU_OPTIONS_TOP + LINE_HEIGHT * idx + UI.tileToScreen(0.15)}\n              addedToScene={(el) =>\n                el\n                  ?.play(\"arrow_menu\")\n                  .setRotation(-Math.PI / 2)\n                  .setScale(SCALE)\n                  .setOrigin(0.5, 0)\n              }\n            />\n          )}\n          <Text\n            alpha={selIndex === idx ? 1 : 0.5}\n            args={[\n              MARGIN_LEFT,\n              MENU_OPTIONS_TOP + LINE_HEIGHT * idx,\n              label,\n              {\n                fontFamily: \"Emulogic\",\n                fontSize: \"8px\",\n                fill: \"#aee0c8\",\n                fontWeight: \"regular\",\n              },\n            ]}\n            addedToScene={formatFont}\n          />\n        </Fragment>\n      ))}\n    </Container>\n  );\n};\n\nexport default OptionsScene;\n","import CRTFilter from '../../utils/CRTShaderFX'\n\nconst config = {\n  preload() {\n    // this is scene binded by RPF\n    this.load.spritesheet(\n      \"hud\",\n      process.env.PUBLIC_URL + \"/assets/tilemaps/hud_tilemap_20x20.png\",\n      { frameWidth: 20, frameHeight: 20, margin: 1, sapcing: 2 }\n    );\n  },\n  create() {\n    this.cameras.main.setPostPipeline(CRTFilter);\n  }\n};\n\nexport default config\n","import { useCallback, useEffect, useRef, useState } from \"react\";\nimport UI from \"../../components/UI\";\nimport Container from \"../../libs/react-phaser-fiber/components/Container\";\nimport Text from \"../../libs/react-phaser-fiber/components/Text\";\nimport usePhaser from \"../../libs/react-phaser-fiber/hooks/usePhaser\";\nimport { SCALE } from \"../../utils/constants\";\nimport { translate } from \"../../utils/localization\";\nimport CRTFilter from \"../../utils/CRTShaderFX\";\nimport { playGlobalScore } from \"../../utils/globalScore\";\n\nconst fontStyle = {\n  fontFamily: \"GameGirl\",\n   fontSize: \"8px\",\n  fill: \"#aee0c8\",\n  lineSpacing: 2,\n  // fontFamily: \"Emulogic\",\n  // fontSize: \"8px\",\n  // fill: \"#aee0c8\",\n  fontWeight: \"regular\",\n};\nconst PAGES = {\n  PAGE1: \"PAGE1\",\n  PAGE2: \"PAGE2\",\n};\nconst KiStageCompleted = () => {\n  const { game, scene, sceneProps } = usePhaser();\n  const [currentPage, setCurrentPage] = useState(PAGES.PAGE1);\n  const fullTextDisplayed = useRef(false);\n  const page1 = [\n    {\n      xOffset: 5,\n      yOffset: 0,\n      text: translate(\"outro_ki.title\"),\n      delay: 1000,\n    },\n    {\n      xOffset: 5,\n      yOffset: 2,\n      text: translate(\"outro_ki.toBrContinue\"),\n      delay: 2500,\n    },\n    {\n      xOffset: 1,\n      yOffset: 4,\n      text: translate(\"outro_ki.discharge\"),\n      delay: 1500,\n    },\n    {\n      xOffset: 1,\n      yOffset: 5,\n      text: translate(\"outro_ki.whatsNext\"),\n      delay: 1500,\n    },\n    {\n      xOffset: 1,\n      yOffset: 6,\n      text: translate(\"outro_ki.followUs\"),\n      delay: 1500,\n    },\n    {\n      xOffset: 1,\n      yOffset: 7,\n      text: translate(\"outro_ki.ourName\"),\n      delay: 1500,\n    },\n    {\n      xOffset: 1,\n      yOffset: 9,\n      text: translate(\"outro_ki.msgLine1\"),\n      delay: 1500,\n    },\n    {\n      xOffset: 1,\n      yOffset: 10,\n      text: translate(\"outro_ki.msgLine2\"),\n      delay: 1500,\n    },\n    {\n      xOffset: 1,\n      yOffset: 13,\n      text: translate(\"outro_ki.msgLine3\"),\n      delay: 1500,\n    },\n  ];\n  const page2 = [\n    {\n      xOffset: 0,\n      yOffset: 0,\n      text: translate(\"outro_ki.credits\"),\n      delay: 500,\n    },\n    {\n      xOffset: 0,\n      yOffset: 2,\n      text: translate(\"outro_ki.creditsLine1\"),\n      delay: 2500,\n    },\n    {\n      xOffset: 0,\n      yOffset: 3,\n      text: translate(\"outro_ki.creditsLine2\"),\n      delay: 1500,\n    },\n    {\n      xOffset: 0,\n      yOffset: 4,\n      text: translate(\"outro_ki.creditsLine3\"),\n      delay: 1500,\n    },\n    {\n      xOffset: 0,\n      yOffset: 5,\n      text: translate(\"outro_ki.creditsLine4\"),\n      delay: 1500,\n    },\n    {\n      xOffset: 0,\n      yOffset: 7,\n      text: translate(\"outro_ki.creditsLine5\"),\n      delay: 3500,\n    },\n  ];\n  const keyDownHandler = useCallback(\n    (event) => {\n      console.log(event);\n      if (\n        event.key === \"Enter\" &&\n        currentPage === PAGES.PAGE1 &&\n        fullTextDisplayed.current\n      ) {\n        setCurrentPage(PAGES.PAGE2);\n      }\n      if (\n        event.key === \"Enter\" &&\n        currentPage === PAGES.PAGE2 &&\n        fullTextDisplayed.current\n      ) {\n        // setCurrentPage(PAGES.PAGE2)\n      }\n    },\n    [currentPage, setCurrentPage]\n  );\n  useEffect(() => {\n    if (scene) {\n      scene.cameras && scene.cameras.main.setPostPipeline(CRTFilter);\n      scene.input.keyboard.addListener(\"keyup\", keyDownHandler);\n\n      playGlobalScore(scene)\n    }\n    return () => {\n      scene?.input.keyboard.off(\"keyup\");\n    };\n  }, [scene, keyDownHandler]);\n\n  const formatFont = (txt) => {\n    txt.displayHeight = 10 * SCALE();\n    txt.depth = 16;\n    txt.name = \"header_text\";\n    txt.setScale(SCALE());\n    txt.setScrollFactor(0);\n    txt.setShadow(-1, 1);\n  };\n  const animate = useCallback(\n    (page, idx, txt) => {\n      const totalDelay = page.reduce((del, op, i) => {\n        if (i <= idx) {\n          del += op.delay;\n        }\n        return del;\n      }, 0);\n      scene.tweens.add({\n        targets: txt,\n        alpha: 1,\n        ease: \"Linear\",\n        duration: 500,\n        delay: totalDelay,\n        onComplete: () => {\n          if (idx === page.length - 1) {\n            fullTextDisplayed.current = true;\n          }\n        },\n      });\n      // setTimeout(() => (txt.alpha = 1), totalDelay)\n    },\n    [scene]\n  );\n\n  const CONTAINER_TOP = UI.tileToScreen(1);\n  const CONTAINER_LEFT = UI.tileToScreen(1);\n\n  const MARGIN_LEFT = UI.tileToScreen(1);\n  const LINE_HEIGHT = UI.tileToScreen(0.75);\n  const MENU_OPTIONS_TOP = UI.tileToScreen(7);\n  return (\n    <>\n      {currentPage === PAGES.PAGE1 && (\n        <Container x={CONTAINER_LEFT} y={CONTAINER_TOP}>\n          {page1.map((op, idx) => (\n            <Text\n              key={op.text}\n              x={MARGIN_LEFT * op.xOffset}\n              y={LINE_HEIGHT * op.yOffset}\n              setStyle={fontStyle}\n              addedToScene={(txt) => {\n                txt.alpha = 0;\n                animate(page1, idx, txt);\n                formatFont(txt);\n              }}\n              // alpha={1}\n            >\n              {op.text}\n            </Text>\n          ))}\n        </Container>\n      )}\n      {currentPage === PAGES.PAGE2 && (\n        <Container x={CONTAINER_LEFT} y={CONTAINER_TOP}>\n          {page2.map((op, idx) => (\n            <Text\n              key={op.text}\n              x={MARGIN_LEFT * op.xOffset}\n              y={LINE_HEIGHT * op.yOffset}\n              setStyle={fontStyle}\n              addedToScene={(txt) => {\n                txt.alpha = 0;\n                animate(page2, idx, txt);\n                formatFont(txt);\n              }}\n              // alpha={1}\n            >\n              {op.text}\n            </Text>\n          ))}\n        </Container>\n      )}\n    </>\n  );\n};\n\nexport default KiStageCompleted;\n","import CRTFilter from '../../utils/CRTShaderFX'\n\nconst config = {\n  preload() {\n    // this is scene binded by RPF\n    this.load.spritesheet(\n      \"hud\",\n      process.env.PUBLIC_URL + \"/assets/tilemaps/hud_tilemap_20x20.png\",\n      { frameWidth: 20, frameHeight: 20, margin: 1, sapcing: 2 }\n    );\n  },\n  create() {\n    this.cameras.main.setPostPipeline(CRTFilter);\n  }\n};\n\nexport default config\n","import { forwardRef, useRef } from 'react'\nimport GameObject from './GameObject'\n\nconst Image = forwardRef(({\n  args,\n  children,\n  ...props\n}, externalRef) => {\n\n  const localRef = useRef()\n  const ref = externalRef || localRef\n\n  return (\n    <GameObject\n      ref={ref}\n      type=\"Image\"\n      args={args}\n      {...props}\n    />\n  )\n})\n\nImage.displayName = 'Image'\nexport default Image\n","import { useEffect } from \"react\";\nimport UIMenus from \"../../components/UIMenus\";\nimport Container from \"../../libs/react-phaser-fiber/components/Container\";\nimport Image from \"../../libs/react-phaser-fiber/components/Image\";\nimport usePhaser from \"../../libs/react-phaser-fiber/hooks/usePhaser\";\nimport CRTFilter from '../../utils/CRTShaderFX'\nimport { playGlobalScore } from \"../../utils/globalScore\";\n\nconst SplashScreenScene = () => {\n  const { scene } = usePhaser();\n  useEffect(() => {\n    if(scene) {\n      scene.cameras.main.setPostPipeline(CRTFilter)\n\n      playGlobalScore(scene)\n\n      scene.navigateToScene = (sceneId, props = {}) => {\n        scene.cameras.main.fade(500, 0, 0, 0);\n        scene.tweens.add({\n          targets: scene.titlesMusic,\n          volume: 0,\n          ease: \"Linear\",\n          duration: 500,\n          onComplete: () => {\n            scene.titlesMusic?.pause();\n            scene.scene.start(sceneId, props);\n          },\n        });\n      }\n    }\n  },[scene])\n  \n  const onBGAddedToScreen = (image) => {\n    if(!scene?.cameras?.main) return false\n    let scaleX = scene?.cameras?.main.width / image.width;\n    let scaleY = scene?.cameras?.main.height / image.height;\n    let scale = Math.min(scaleX, scaleY);\n    image.setOrigin(0.5, 0.5);\n    image.setScale(scale).setScrollFactor(0);\n    image.name = \"background_art\";\n    const menu = new UIMenus(scene);\n    menu.showInitialMenu();\n  };\n  return (\n    <Container>\n      {scene?.cameras?.main && (\n        <Image\n          args={[\n            scene?.cameras?.main?.width / 2,\n            scene?.cameras?.main?.height / 2,\n            \"Cover\",\n          ]}\n          addedToScene={onBGAddedToScreen}\n        />\n      )}\n    </Container>\n  );\n};\nexport default SplashScreenScene;\n","const config = {\n  preload() {\n  },\n  create() {\n  }\n};\n\nexport default config\n","import Phaser from \"phaser\";\n\nconst fragShader = `\nprecision mediump float;\n\nuniform sampler2D uMainSampler[%count%];\nuniform float gray;\n\nvarying vec2 outTexCoord;\nvarying float outTexId;\nvarying vec4 outTint;\nvarying vec2 fragCoord;\n\nvoid main()\n{\n    vec4 texture;\n\n    %forloop%\n\n    gl_FragColor = texture;\n    gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126 * gl_FragColor.r + 0.7152 * gl_FragColor.g + 0.0722 * gl_FragColor.b), gray);\n}\n`;\n\nexport default class GrayScalePipeline extends Phaser.Renderer.WebGL.Pipelines.MultiPipeline {\n  constructor(game) {\n    super({\n      game,\n      fragShader,\n      uniforms: [\"uProjectionMatrix\", \"uMainSampler\", \"gray\"],\n    });\n\n    this._gray = 0;\n  }\n\n  onPreRender() {\n    this.set1f(\"gray\", this._gray);\n  }\n\n  get gray() {\n    return this._gray;\n  }\n\n  set gray(value) {\n    this._gray = value;\n  }\n}\n","import { useEffect, useState } from \"react\";\nimport usePhaser from \"../hooks/usePhaser\";\n\nconst Scene = ({ name, children }) => {\n  const [isActive, setActive] = useState(false);\n  const { game, scene } = usePhaser();\n  \n  useEffect(() => {\n    if (game?.scene.isActive(name) && scene) {\n      setActive(true);\n    }\n  }, [game, name, scene]);\n\n  return isActive ? children : null;\n};\n\nexport default Scene;\n","import { useState, useCallback, useEffect } from \"react\";\nimport * as Controller from \"../components/Controller/Controller\";\nimport UI from \"../components/UI\";\nimport Text from \"../libs/react-phaser-fiber/components/Text\";\nimport usePhaser from \"../libs/react-phaser-fiber/hooks/usePhaser\";\nimport { SCALE } from \"../utils/constants\";\n\nconst OptionsScene = () => {\n  const { game, scene } = usePhaser();\n  const [selIndex, setSelIndex] = useState(0);\n  const [subSelIndex, setSubSelIndex] = useState([0, 0, 0, 0]);\n  const [options] = useState([\"Music\", \"Sounds\", \"CRT Effect\", \"Language\"]);\n  const [submenu] = useState([\n    [\"On\", \"Off\"], // Music\n    [\"On\", \"Off\"], // Sounds\n    [\"On\", \"Off\"], // CRT Effect\n    [\"Spanish\", \"English\"], // Language\n  ]);\n\n  const keyDownHandler = useCallback(\n    (event) => {\n      if (Controller.isCancel(event.key)) {\n        game.scene.start(\"SplashScreenScene\");\n      }\n      if (Controller.isDown(event.key) && selIndex < options.length - 1) {\n        setSelIndex((idx) => idx + 1);\n      }\n      if (Controller.isUp(event.key) && selIndex > 0) {\n        setSelIndex((idx) => idx - 1);\n      }\n      if (Controller.isConfirm(event.key)) {\n        const subSel = [...subSelIndex];\n        subSel[selIndex] = (subSel[selIndex] + 1) % submenu[selIndex].length;\n        setSubSelIndex(subSel);\n      }\n    },\n    [game, selIndex, options, submenu, subSelIndex]\n  );\n  useEffect(() => {\n    scene?.input.keyboard.addListener(\"keydown\", keyDownHandler);\n    return () =>\n      scene?.input.keyboard.removeListener(\"keydown\", keyDownHandler);\n  }, [scene, keyDownHandler]);\n\n  useEffect(() => console.log(), []);\n\n  const MARGIN_LEFT = UI.tileToScreen(1);\n  const LINE_HEIGHT = UI.tileToScreen(1);\n  const MARGIN_TOP = UI.tileToScreen(4);\n  const OPT_OFFSET = UI.tileToScreen(8);\n\n  return (\n    <>\n      {options.map((label, idx) => (\n        <Text\n          key={label}\n          alpha={selIndex === idx ? 1 : 0.5}\n          args={[\n            MARGIN_LEFT,\n            LINE_HEIGHT * idx + MARGIN_TOP,\n            label,\n            {\n              fontFamily: \"Emulogic\",\n              fontSize: \"8px\",\n              fill: \"#aee0c8\",\n              fontWeight: \"regular\",\n            },\n          ]}\n          addedToScene={(txt) => {\n            txt.displayHeight = 10 * SCALE;\n            txt.depth = 16;\n            txt.name = \"header_text\";\n            txt.setScale(SCALE);\n            txt.setScrollFactor(0);\n            txt.setShadow(-1, 1);\n          }}\n        />\n      ))}\n      {submenu.map((sm, idx) => {\n        const label = sm[subSelIndex[idx]];\n        return (\n          <Text\n            key={`sub_opt_${idx}`}\n            alpha={selIndex === idx ? 1 : 0.5}\n            text={label}\n            args={[\n              MARGIN_LEFT + OPT_OFFSET,\n              LINE_HEIGHT * idx + MARGIN_TOP,\n              label,\n              {\n                fontFamily: \"Emulogic\",\n                fontSize: \"8px\",\n                fill: \"#aee0c8\",\n                fontWeight: \"regular\",\n              },\n            ]}\n            addedToScene={(txt) => {\n              txt.displayHeight = 10 * SCALE;\n              txt.depth = 16;\n              txt.name = \"header_text\";\n              txt.setScale(SCALE);\n              txt.setScrollFactor(0);\n              txt.setShadow(-1, 1);\n            }}\n          />\n        );\n      })}\n    </>\n  );\n};\n\nexport default OptionsScene;\n","import Phaser from \"phaser\";\nimport Canvas from \"./libs/react-phaser-fiber/components/Canvas\";\nimport LandingScene from \"./scenes/LandingScene\";\nimport MenuScene from \"./scenes/MenuScene\";\nimport IntroScene from \"./scenes/IntroScene\";\nimport GameScene from \"./scenes/GameScene\";\nimport ConnectorScene from \"./scenes/ConnectorScene\";\nimport CreditsScene from \"./scenes/CreditsScene\";\nimport ConfirmNewGameScene from \"./scenes/ConfirmNewGameScene\";\nimport LevelResumeMenu from \"./scenes/LevelResumeScene/LevelResumeMenu\";\nimport LevelResumeSceneConfig from \"./scenes/LevelResumeScene/config\";\nimport KiStageCompleted from \"./scenes/KiStageCompleted/KiStageCompleted\";\nimport KiStageCompletedConfig from \"./scenes/KiStageCompleted/config\";\nimport SplashScreenMenu from \"./scenes/SplashScreenScene/SplashScreenScene\";\nimport SplashScreenConfig from \"./scenes/SplashScreenScene/config\";\nimport CRTFilter from \"./utils/CRTShaderFX\";\nimport GrayScalePipeline from \"./utils/GrayScalePipeline\";\nimport { setI18nConfig } from \"./utils/localization\";\nimport { useEffect, useState } from \"react\";\nimport FadePlugin from \"phaser3-rex-plugins/plugins/fade-plugin.js\";\nimport FlashPlugin from \"phaser3-rex-plugins/plugins/flash-plugin.js\";\nimport CircularProgressPlugin from \"phaser3-rex-plugins/plugins/circularprogress-plugin.js\";\nimport TintRGBPlugin from \"phaser3-rex-plugins/plugins/tintrgb-plugin.js\";\nimport Scene from \"./libs/react-phaser-fiber/components/Scene\";\nimport OptionsScene from \"./scenes/GameOptionsScene\";\nimport dbManager from \"./utils/dbManager\";\n\nconst gameConfig = {\n  // width: \"100vw\",\n  // height: \"100vh\",\n  width: \"100%\",\n  height: \"100%\",\n  parent: window.document.querySelector(\"#content\"),\n  // width: window.innerWidth * window.devicePixelRatio,\n  // height: window.innerHeight * window.devicePixelRatio,\n  type: Phaser.WEBGL,\n  scale: {\n    mode: Phaser.Scale.RESIZE,\n    // mode: Phaser.Scale.ENVELOP,\n    max: {\n      width: (window.document.body.clientHeight * 16) / 9,\n      height: window.document.body.clientHeight,\n    },\n    autoCenter: Phaser.Scale.CENTER_BOTH,\n  },\n\n  backgroundColor: \"#000000\",\n  disableContextMenu: true,\n  pixelArt: true,\n  roundPixels: false,\n  scene: [\n    LandingScene,\n    MenuScene,\n    IntroScene,\n    GameScene,\n    ConnectorScene,\n    CreditsScene,\n    ConfirmNewGameScene,\n  ],\n  pipeline: { CRTFilter, Gray: GrayScalePipeline, GrayAlt: GrayScalePipeline },\n  plugins: {\n    global: [\n      {\n        key: \"rexFade\",\n        plugin: FadePlugin,\n        start: false,\n      },\n      {\n        key: \"rexFlash\",\n        plugin: FlashPlugin,\n        start: true,\n      },\n      {\n        key: \"rexCircularProgressPlugin\",\n        plugin: CircularProgressPlugin,\n        start: true,\n      },\n      {\n        key: \"rexTintRGB\",\n        plugin: TintRGBPlugin,\n        start: true,\n      },\n    ],\n  },\n};\n\nfunction updateAspectRatio() {\n  const container = document.querySelector(\"#root\");\n  const content = document.querySelector(\"#content\");\n  const containerRatio = container.clientWidth / container.clientHeight;\n\n  if (containerRatio > 0.56) {\n    // If the container is taller than 6/9, set the height and calculate the width\n    content.style.width = \"100%\";\n    content.style.height = container.clientWidth / (0.56) + \"px\";\n    // content.style.height = container.clientWidth / (6 / 9) + \"px\";\n  } else {\n    // If the container is wider than 6/9, set the width and calculate the height\n    content.style.width = container.clientHeight * (0.56) + \"px\";\n    // content.style.width = container.clientHeight * (6 / 9) + \"px\";\n    content.style.height = \"100%\";\n  }\n}\n\nfunction Game() {\n  const [ready, setReady] = useState();\n  useEffect(() => {\n    setI18nConfig(async () => {\n      await dbManager.bootUp();\n      setReady(true);\n    });\n\n    // Update the aspect ratio when the window is resized\n    window.addEventListener(\"resize\", updateAspectRatio);\n\n    // Initial setup\n    updateAspectRatio();\n\n    return () => {\n      window.removeEventListener(\"resize\", updateAspectRatio);\n    };\n  }, []);\n  useEffect(() => {\n    if (!ready) return;\n    // Update the aspect ratio when the window is resized\n    window.addEventListener(\"resize\", updateAspectRatio);\n\n    // Initial setup\n    updateAspectRatio();\n\n    return () => {\n      window.removeEventListener(\"resize\", updateAspectRatio);\n    };\n  }, [ready]);\n\n  return ready ? (\n    <Canvas args={gameConfig}>\n      <Scene name=\"KiStageCompleted\" config={KiStageCompletedConfig}>\n        <KiStageCompleted />\n      </Scene>\n      <Scene name=\"SplashScreenScene\" config={SplashScreenConfig}>\n        <SplashScreenMenu />\n      </Scene>\n      <Scene name=\"LevelResumeScene\" args={LevelResumeSceneConfig}>\n        <LevelResumeMenu />\n      </Scene>\n      <Scene name=\"OptionsScene\" args={LevelResumeSceneConfig}>\n        <OptionsScene />\n      </Scene>\n    </Canvas>\n  ) : null;\n}\n\nexport default Game;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React, { useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport Game from \"./Game\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport config from \"../package.json\";\n\nimport { FullScreen, useFullScreenHandle } from \"react-full-screen\";\n\nconst FullScreenHandler = () => {\n  const handle = useFullScreenHandle();\n  const [showGame, setShowGame] = useState(false);\n  const handleFullscreenChange = (state) => {\n    // console.log(state);\n    setShowGame(state);\n  };\n  return (\n    <>\n      <button onClick={handle.enter}>Enter fullscreen</button>\n      <FullScreen handle={handle} onChange={handleFullscreenChange}>\n        <Game />\n        {/* <Game /> */}\n        <div\n          style={{\n            position: \"absolute\",\n            bottom: 0,\n            right: 0,\n            fontSize: 10,\n            color: \"gray\",\n          }}\n        >\n          v{config.version}\n        </div>\n      </FullScreen>\n    </>\n  );\n};\nReactDOM.render(\n  <React.StrictMode>\n    <Game />\n  </React.StrictMode>,\n  document.getElementById(\"content\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}