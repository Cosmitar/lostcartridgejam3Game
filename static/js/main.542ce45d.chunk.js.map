{"version":3,"sources":["libs/react-phaser-fiber/PhaserProvider.js","libs/react-phaser-fiber/components/Canvas.js","scenes/MenuScene.js","scenes/IntroScene.js","utils/constants.js","components/objects/GameObject.js","components/objects/Destroyable.js","components/objects/Moveable.js","components/objects/Fallable.js","components/objects/Boulder.js","components/objects/Character.js","components/objects/Enemy.js","components/objects/Player.js","components/objects/Wall.js","components/objects/Ground.js","components/objects/Empty.js","components/objects/Interactive.js","components/objects/Barrel.js","components/objects/Explosion.js","components/objects/Jewel.js","components/levels/levelBase.js","components/LevelManager.js","components/levels/level_1.js","components/levels/level_2.js","components/Rules.js","components/UI.js","scenes/GameScene.js","Game.js","reportWebVitals.js","index.js"],"names":["context","createContext","PhaserProvider","game","children","useState","ready","setReady","useEffect","Provider","value","Canvas","forwardRef","canvasRef","args","fallbackRef","useRef","ref","setGame","callbacks","postBoot","scene","scenes","events","once","Phaser","Scenes","Events","PRE_RENDER","s","load","on","Loader","COMPLETE","Game","current","MenuScene","this","script","image","process","spritesheet","frameWidth","frameHeight","PROGRESS","console","log","window","WebFont","custom","families","active","emit","sys","config","arrow","add","graphics","fillStyle","color","alpha","fillTriangle","setPosition","currentOption","menuOptions","label","disabled","onSelect","start","level","forEach","o","idx","text","fontFamily","fontSize","fill","setAlpha","input","keyboard","event","newOption","key","length","Scene","IntroScene","forest","fillRect","renderer","width","height","forestText","container","dark","name","player","partner","cameras","main","fadeIn","animateIntro","bind","pan","Cameras","Scene2D","PAN_COMPLETE","shake","tweens","targets","getByName","y","duration","delay","ease","x","onComplete","fade","TICK_TIME","PIXEL_NAME","EMPTY","PLAYER","GROUND","BOULDER","WALL","ENEMY","JEWEL","BARREL","EXPLOSION","INTERACTION","DIRS","DOWN","UP","LEFT","RIGHT","PIXEL_TO_TILEMAP_POSITION","data","W","N","E","S","GameObject","id","isRigid","isBreakable","isFlat","isPickable","isCrushable","power","strength","force","weight","position","alien","isMoveable","coords","className","Destroyable","props","inactive","el","onDestroy","Moveable","Fallable","isFalling","nextPos","destinationElement","isDestinationInBounds","getObjectAt","destinationIsEmpty","isDestinationEmpty","destinationIsCrushable","destinationInBounds","pathElement","pathClear","objectIsEmpty","restingElement","canRest","canRollTo","Boulder","Character","pushingDirection","neighbour","emptyPlace","canBrakeNeighbour","canMove","nothingBesides","isPositionClear","isAboutToFall","canPush","moveObject","Enemy","moveIntentDir","anchorPosition","constructor","Player","destroy","onCharacterDie","repeat","includes","isMoving","playerLoop","off","die","Wall","Ground","tilemap","putTileAt","Empty","isEmpty","Interactive","onInteractWith","Barrel","onExplode","explode","Explosion","layer","map","explosion","tileWidth","tileHeight","setScale","scaleX","tileToWorldX","tileToWorldY","objects","Jewel","visible","onJewelPick","Level","moveables","playerTimeoutId","isPaused","phaserScene","r","c","element","boulder","sprite","setOrigin","play","jewel","barrel","Animations","ANIMATION_COMPLETE","enemy","addToScalables","push","onAddElement","sort","a","b","canFallDown","canFallLeft","canFallRight","enemiesLoop","newAnchor","nextDir","backToTrackDir","nextAnchorPos","helperDirCalc","filter","clearTimeout","canMoveUp","canMoveDown","canMoveLeft","canMoveRight","setFlipX","setTimeout","pos","origin","overrunBy","runningOver","setObjectAt","move","e","row","pause","warn","found","i","j","obj","xInBounds","yInBounds","LEVELS","alert","LevelBase","LevelManager","currentLevel","currentIndex","generateConfig","createMap","connectToScene","levelId","textures","get","getSourceImage","levelConfig","Array","pixColor","getPixel","Display","Color","ComponentToHex","g","levelData","SCALE","camera","tileset","make","addTilesetImage","createBlankLayer","depth","tile","calculateWallTileWithNeighbours","setBounds","scaleY","zoom","Rules","timer","worldTickFreq","addListener","UPDATE","onSceneUpdate","setUpPuseResumeGame","setUpCameraFollowPlayer","levels","next","cam","getPlayerPos","smoothFactor","scrollX","scrollY","pauseGame","resumeGame","resume","time","delta","gravityLoop","UI","Math","round","innerWidth","GameScene","set","scale","scaleMode","Scale","RESIZE","handleScales","createAnimations","scalables","Map","clearScalables","clear","removeFromScalables","delete","updateScale","addEventListener","rows","anims","create","frames","generateFrameNumbers","frameRate","gameConfig","type","AUTO","backgroundColor","disableContextMenu","pixelArt","roundPixels","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.542ce45d.chunk.js","sourcesContent":["import { useState, createContext, useEffect } from 'react'\n\nexport const context = createContext()\n\nconst PhaserProvider = ({ game, children }) => {\n  const [ready, setReady] = useState()\n  \n  // delay to let the context value to propagate before rendering children.\n  // this way children can implement usePhaser confident that objects returned are not null\n  useEffect(() => {\n    setReady(!!game)\n  }, [game])\n\n  return (\n    <context.Provider value={{ game }}>\n      {\n        ready ? children : null\n      }\n    </context.Provider>\n  )\n}\n\nexport default PhaserProvider\n","import Phaser from 'phaser'\nimport { useEffect, forwardRef, useRef, useState } from 'react'\nimport PhaserProvider from '../PhaserProvider'\n\n/**\n * Creates a new Phaser.Game with given arguments.\n * triggers functions to store game into context\n */\nconst Canvas = forwardRef(({\n  args,\n  children\n}, canvasRef) => {\n  const fallbackRef = useRef()\n  const ref = canvasRef || fallbackRef\n  const [game, setGame] = useState()\n  const [ready, setReady] = useState()\n  args.callbacks = { postBoot: game => {\n    setGame(game)\n    game.scene.scenes[0].events.once(Phaser.Scenes.Events.PRE_RENDER, s => {\n      game.scene.scenes[0].load.on(Phaser.Loader.Events.COMPLETE, () => setReady(true))\n      \n    })\n  }}\n  useEffect(() => {\n\n    const game = new Phaser.Game(args)\n    ref.current = game\n    \n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n  return ready ? <PhaserProvider game={game}>{children}</PhaserProvider> : null\n})\n\nexport default Canvas\n","import Phaser from 'phaser'\n\nexport default class MenuScene extends Phaser.Scene {\n  constructor () {\n    super('MenuScene');\n  }\n\n  preload () {\n    this.load.script('webfont', 'https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js');\n    this.load.image('main-tiles', process.env.PUBLIC_URL + '/assets/tilemaps/tilemap_20x20.png');\n    this.load.image('level_1', process.env.PUBLIC_URL + '/assets/maps/level_1.png');\n    this.load.image('level_2', process.env.PUBLIC_URL + '/assets/maps/level_2.png');\n    this.load.spritesheet('boulder', process.env.PUBLIC_URL + '/assets/sprites/boulder_sprite.png', { frameWidth: 26, frameHeight: 26 });\n    this.load.spritesheet('brave', process.env.PUBLIC_URL + '/assets/sprites/brave_sprite.png', { frameWidth: 26, frameHeight: 26 });\n    this.load.on(Phaser.Loader.Events.PROGRESS, console.log)\n  }\n\n  create() {\n    window.WebFont.load({\n      custom: {\n          families: [ 'GameGirl' ]\n      },\n      active: () => {\n        this.events.emit('scene_ready', this.sys.config)\n        const arrow = this.add.graphics({ fillStyle: { color: 0xffffff, alpha: 1 } })\n        arrow.fillTriangle(0, 0, 5, 5, 0, 10).setPosition(70, 2)\n        let currentOption = 0\n        const menuOptions = [{\n          label: 'New Game',\n          disabled: false,\n          onSelect: () => this.scene.start('IntroScene')\n        }, {\n          label: 'Level 1',\n          disabled: false,\n          onSelect: () => this.scene.start('GameScene', { level: 1 })\n        }, {\n          label: 'Level 2',\n          disabled: false,\n          onSelect: () => this.scene.start('GameScene', { level: 2 })\n        }]\n        menuOptions.forEach((o, idx) => {\n          this.add.text(80, 12 * idx + 1, o.label,\n            {\n              fontFamily: 'GameGirl',\n              fontSize: \"10px\",\n              fill: \"#ffffff\",\n            }\n          ).setAlpha(o.disabled ? 0.5 : 1)\n        })\n\n        this.input.keyboard.on('keydown', event => {\n          let newOption = false\n          if (event.key === 'ArrowUp') {\n            newOption = currentOption > 0 ? currentOption - 1 : menuOptions.length - 1\n          }\n          if (event.key === 'ArrowDown') {\n            newOption = currentOption < menuOptions.length - 1 ? currentOption + 1 : 0\n          }\n          if(newOption !== false) {\n            arrow.setPosition(70, (12 * newOption) + 2)\n            currentOption = newOption\n          }\n          if (event.key === 'Enter') {\n            if(!menuOptions[currentOption].disabled) {\n              menuOptions[currentOption].onSelect()\n            }\n          }\n        })\n      }\n    })\n  }\n}\n","import Phaser from 'phaser'\n\nexport default class IntroScene extends Phaser.Scene {\n  constructor () {\n    super('IntroScene');\n  }\n\n  preload () {\n    \n  }\n\n  create() {\n    const forest = this.add.graphics({ fillStyle: { color: 0x00ff00, alpha: 1 } })\n    forest.fillRect(0, 0, this.renderer.width * 2, this.renderer.height)\n    const forestText = this.add.text(80, 10, \"forest\",\n      {\n        fontFamily: 'GameGirl',\n        fontSize: \"10px\",\n        fill: \"#ffffff\",\n      }\n    )\n    const container = this.add.container()\n    container.add(forest)\n    container.add(forestText)\n    const ground = this.add.graphics({ fillStyle: { color: 0x654321, alpha: 1 } })\n    ground.fillRect(0, this.renderer.height - this.renderer.height * 0.3, this.renderer.width * 2, this.renderer.height * 0.3)\n    this.add.text(80, this.renderer.height - this.renderer.height * 0.3 + 10, \"ground\",\n      {\n        fontFamily: 'GameGirl',\n        fontSize: \"10px\",\n        fill: \"#ffffff\",\n      }\n    )\n\n    const dark = this.add.graphics({ fillStyle: { color: 0x000000, alpha: 1 } })\n    dark.fillRect(this.renderer.width + 100, this.renderer.height, 200, this.renderer.height * 0.3)\n    dark.name = 'dark'\n\n    const player = this.add.graphics({ fillStyle: { color: 0xb75331, alpha: 1 } })\n    player.fillRect(this.renderer.width, this.renderer.height - this.renderer.height * 0.3 - 50, 50, 50)\n    player.name = 'player'\n\n    const partner = this.add.graphics({ fillStyle: { color: 0xdab263, alpha: 1 } })\n    partner.fillRect(this.renderer.width + 200, this.renderer.height - this.renderer.height * 0.3 - 50, 50, 50)\n    partner.name = 'partner'\n    \n    this.cameras.main.fadeIn(1000, 0, 0, 0)\n    this.cameras.main.once('camerafadeincomplete', this.animateIntro.bind(this))\n  }\n\n  animateIntro() {\n\n    this.cameras.main.pan(this.renderer.width, this.renderer.height/2, 2000, 'Sine.easeInOut');\n    this.cameras.main.once(Phaser.Cameras.Scene2D.Events.PAN_COMPLETE, () => {\n      this.cameras.main.shake(2000, 0.02)\n      this.tweens.add({\n        targets: this.children.getByName('dark'),\n        y: -this.renderer.height * 0.3,\n        duration: 2000\n      })\n      this.tweens.add({\n        targets: this.children.getByName('partner'),\n        y: this.renderer.height,\n        delay: 2000,\n        duration: 2000,\n        ease: 'Sine.in'\n      })\n      this.tweens.add({\n        targets: this.children.getByName('player'),\n        y: this.renderer.height,\n        x: {\n          value: this.children.getByName('player').x + 150,\n          duration: 1000,\n          ease: 'Cubic.easeOut',\n        },\n        delay: 4000,\n        duration: 2000,\n        ease: 'Back.easeInOut',\n        onComplete: () => {\n          this.cameras.main.fade(1000, 0, 0, 0)\n          this.cameras.main.once('camerafadeoutcomplete', () => void this.scene.start('GameScene', { level: 1}))\n        }\n      })\n\n    })\n  }\n}\n","export const TICK_TIME = 250\nexport const PLAYER_TICK_TIME = TICK_TIME - 25\nexport const TILE_SIZE = 20\nexport const TILES_BY_SCREEN = 20\n\nexport const PIXEL_NAME = {\n  EMPTY: '000000',\n  PLAYER: 'ff00ff',\n  GROUND: '663300',\n  BOULDER: '999999',\n  WALL: '0000ff',\n  ENEMY: 'ff0000',\n  JEWEL: 'ffff00',\n  BARREL: '00ffff',\n  EXPLOSION: 'ffffff',\n  INTERACTION: '00ff00'\n}\n\nexport const DIRS = {\n  DOWN: 'ArrowDown',\n  UP: 'ArrowUp',\n  LEFT: 'ArrowLeft',\n  RIGHT: 'ArrowRight',\n}\n\nexport const PIXEL_TO_TILEMAP_POSITION = {\n  [PIXEL_NAME.EMPTY]: 0,\n  [PIXEL_NAME.WALL]: 1,\n  [PIXEL_NAME.GROUND]: 2,\n  calculateWallTileWithNeighbours: (x, y, data) => {\n    const W = (data[x]||[])[y-1] === PIXEL_NAME.WALL ? 'W' : '-'\n    const N = (data[x-1]||[])[y] === PIXEL_NAME.WALL ? 'N' : '-'\n    const E = (data[x]||[])[y+1] === PIXEL_NAME.WALL ? 'E' : '-'\n    const S = (data[x+1]||[])[y] === PIXEL_NAME.WALL ? 'S' : '-'\n    switch(`${N}${E}${S}${W}`) {\n      case '----':\n        default:\n        return 11\n      case 'NESW':\n        return 12\n      case 'N---':\n        return 13\n      case '-E--':\n        return 14\n      case '--S-':\n        return 15\n      case '---W':\n        return 16\n      case 'NE--':\n        return 17\n      case '-ES-':\n        return 18\n      case '--SW':\n        return 19\n      case 'N--W':\n        return 20\n      case 'NES-':\n        return 22\n      case '-ESW':\n        return 23\n      case 'N-SW':\n        return 24\n      case 'NE-W':\n        return 25\n      case 'N-S-':\n        return 27\n      case '-E-W':\n        return 26\n    }\n  }\n}","export default class GameObject {\n  constructor({ id, isRigid, isBreakable, isFlat, isPickable, isCrushable, level }) {\n    this.id = id\n    // can't be moved nor affected by gravity\n    // wall, ground\n    this.isRigid = isRigid\n\n    // destroyable under circumstances like explosions\n    // ground, boulder, diamond\n    this.isBreakable = isBreakable\n\n    // rounded objects (like boulders and diamonds) above remain still\n    // character, ground, wall\n    this.isFlat = isFlat\n\n    // can be collected by characters\n    // diamond\n    this.isPickable = isPickable\n\n    // crush under pression\n    // character, enemies, dynamite, barrel\n    this.isCrushable = isCrushable\n\n    // energy to break things\n    this.power = 0\n\n    // how resistant to brake it is\n    this.strength = 0\n\n    // how hard can push\n    this.force = 0\n\n    // how much force can resist before move\n    this.weight = 0\n\n    this.level = level\n\n    this.position = null\n    this.alien = null\n    this.isMoveable = !this.isRigid\n  }\n\n  setPosition(coords) {\n    this.position = coords\n  }\n\n  canMove() {\n    return this.isMoveable\n  }\n  overrunBy(){}\n  runningOver(){}\n  canFallDown() { return false }\n  canFallLeft() { return false }\n  canFallRight() { return false }\n  \n}\n\nGameObject.className = 'GameObject'\n","import GameObject from './GameObject'\n\nexport default class Destroyable extends GameObject {\n  constructor(props) {\n    super(props)\n    this.inactive = false\n  }\n  overrunBy(el) {\n    if(el.power > this.strength) {\n      this.level.onDestroy(this)\n      this.inactive = true\n    }\n  }\n}\n\nDestroyable.className = 'Destroyable'\n","import Destroyable from './Destroyable'\n\nexport default class Moveable extends Destroyable {\n  move({ x, y }) {\n    super.setPosition({ x, y})\n    // this.isMoving = false\n  }\n}\n\nMoveable.className = 'Moveable'\n","import Moveable from './Moveable'\n\nexport default class Fallable extends Moveable {\n  constructor(props) {\n    super(props)\n    this.isFalling = 0 // increment on each loop that the element is falling\n  }\n\n  canFallDown() {\n    const nextPos = { x: this.position.x, y: this.position.y + 1 }\n    const destinationInBounds = this.level.isDestinationInBounds(nextPos.x, nextPos.y)\n    const destinationElement = destinationInBounds && this.level.getObjectAt(nextPos.x, nextPos.y)\n    const destinationIsEmpty = this.level.isDestinationEmpty(nextPos.x, nextPos.y)\n    const destinationIsCrushable = destinationElement.isCrushable && this.isFalling\n    const canFall = destinationIsEmpty || destinationIsCrushable\n\n    return canFall\n  }\n  canRollTo(x, y) {\n    const nextPos = { x, y }\n    const destinationInBounds = this.level.isDestinationInBounds(nextPos.x, nextPos.y)\n    const pathElement = destinationInBounds && this.level.getObjectAt(nextPos.x, this.position.y)\n    const pathClear = destinationInBounds && this.level.objectIsEmpty(pathElement)\n    const destinationElement = destinationInBounds && this.level.getObjectAt(nextPos.x, nextPos.y)\n    const destinationIsEmpty = this.level.objectIsEmpty(destinationElement)\n    const restingElement = destinationInBounds && this.level.getObjectAt(this.position.x, this.position.y + 1)\n    const canRest = !this.level.isDestinationEmpty(this.position.x, this.position.y + 1) && restingElement.isFlat\n    const canRoll = destinationInBounds && destinationIsEmpty && pathClear && !canRest && restingElement && !restingElement.isFalling\n    \n    return canRoll\n  }\n  canFallRight() {\n    return this.canRollTo(this.position.x + 1, this.position.y + 1)\n  }\n  canFallLeft() {\n    return this.canRollTo(this.position.x - 1, this.position.y + 1)\n  }\n}\n\nFallable.className = 'Fallable'\n","import Fallable from './Fallable'\n\nexport default class Boulder extends Fallable {\n  constructor(id, level) {\n    super({\n      id,\n      isRigid: false,\n      isBreakable: true,\n      isFlat: false,\n      isPickable: false,\n      isCrushable: false,\n      level\n    })\n    this.strength = 5\n  }\n}\nBoulder.className = 'Boulder'\n","import Moveable from './Moveable'\nimport { DIRS } from '../../utils/constants'\n\nexport default class Character extends Moveable {\n  constructor(id, level) {\n    super({\n      id,\n      isRigid: false,\n      isBreakable: true,\n      isFlat: true,\n      isPickable: false,\n      isCrushable: true,\n      level\n    })\n    this.pushingDirection = null\n  }\n  \n  canMove(x, y) {\n    const neighbour = this.level.getObjectAt(x, y)\n    const emptyPlace = this.level.objectIsEmpty(neighbour)\n    const canBrakeNeighbour = neighbour?.isBreakable && this.power >= neighbour.strength\n    return emptyPlace || canBrakeNeighbour || neighbour.isPickable ? neighbour : false\n  }\n\n  canMoveUp() {\n    return this.canMove(this.position.x, this.position.y - 1)\n  }\n  canMoveDown() {\n    return this.canMove(this.position.x, this.position.y + 1)\n  }\n  canMoveLeft() {\n    const neighbour = this.level.getObjectAt(this.position.x - 1, this.position.y)\n    const nothingBesides = this.level.isPositionClear(this.position.x - 2, this.position.y)\n    const isAboutToFall = this.level.isPositionClear(this.position.x - 1, this.position.y + 1)\n    const canPush = neighbour?.isMoveable && nothingBesides && !isAboutToFall\n\n    let canMove = this.canMove(this.position.x - 1, this.position.y)\n    if(!canMove && canPush) {\n      if(this.pushingDirection === DIRS.LEFT) {\n        canMove = true\n        this.level.moveObject(neighbour, { x: this.position.x - 2, y: this.position.y })\n        // clears pushing dir to let a new loop to push again\n        this.pushingDirection = ''\n      } else {\n        this.pushingDirection = DIRS.LEFT\n      }\n    }\n    return canMove\n  }\n  canMoveRight() {\n    const neighbour = this.level.getObjectAt(this.position.x + 1, this.position.y)\n    const nothingBesides = this.level.isPositionClear(this.position.x + 2, this.position.y)\n    const isAboutToFall = this.level.isPositionClear(this.position.x + 1, this.position.y + 1)\n    const canPush = neighbour?.isMoveable && nothingBesides && !isAboutToFall\n\n    let canMove = this.canMove(this.position.x + 1, this.position.y)\n    if(!canMove && canPush) {\n      if(this.pushingDirection === DIRS.RIGHT) {\n        canMove = true\n        this.level.moveObject(neighbour, { x: this.position.x + 2, y: this.position.y })\n        // clears pushing dir to let a new loop to push again\n        this.pushingDirection = ''\n      } else {\n        this.pushingDirection = DIRS.RIGHT\n      }\n    }\n    return canMove\n  }\n}\n\nCharacter.className = 'Character'\n","import Character from './Character'\nimport Player from './Player'\nimport { DIRS } from '../../utils/constants'\n\nexport default class Enemy extends  Character {\n  constructor(id, level) {\n    super(id, level)\n    this.moveIntentDir = DIRS.UP\n    this.anchorPosition = null\n  }\n  overrunBy(el) {\n    if(el.constructor.className !== Player.className) {\n      // this.alien.visible = false\n      // this.alien.alpha = 0.5\n      this.alien?.destroy()\n      this.level.onCharacterDie(this)\n    }\n  }\n}\n\nEnemy.className = 'Enemy'\n","import Character from './Character'\nimport Enemy from './Enemy'\nimport { DIRS } from '../../utils/constants'\n\nexport default class Player extends Character {\n  constructor(id, level) {\n    super(id, level)\n    this.power = 0.5\n    this.moveIntentDir = ''\n\n    const scene = level.scene\n    scene.input.keyboard.on('keydown', event => {\n      if(!event.repeat && [DIRS.UP, DIRS.DOWN, DIRS.LEFT, DIRS.RIGHT].includes(event.key)) {\n        this.moveIntentDir = event.key;\n        // calls loop to avoid delay between key press and visual movement at the begining of next loop\n        if(!this.isMoving) {\n          this.level.playerLoop()\n        }\n      }\n    });\n\n    scene.input.keyboard.on('keyup', event => {\n      if (this.moveIntentDir === event.key) {\n        this.moveIntentDir = ''\n        this.pushingDirection = null\n      }\n    });\n  }\n  destroy() {\n    const scene = this.level.scene\n    // animate die\n    scene.input.keyboard.off('keydown')\n    scene.input.keyboard.off('keyup')\n  }\n\n  die() {\n    this.inactive = true\n    this.alien.alpha = 0.5\n    this.destroy()\n  }\n\n  overrunBy(el) {\n    this.die()\n  }\n  runningOver(el) {\n    if(el.constructor.className === Enemy.className) {\n      this.die()\n    }\n  }\n}\n\nPlayer.className = 'Player'\n","import GameObject from './GameObject'\n\nexport default class Wall extends GameObject {\n  constructor(id, level) {\n    super({\n      id,\n      isRigid: true,\n      isBreakable: false,\n      isFlat: true,\n      isPickable: false,\n      isCrushable: false,\n      level\n    })\n  }\n}\n\nWall.className = 'Wall'\n","import { PIXEL_TO_TILEMAP_POSITION, PIXEL_NAME } from '../../utils/constants'\nimport Destroyable from './Destroyable'\n\nexport default class Ground extends Destroyable {\n  constructor(id, level) {\n    super({\n      id,\n      isRigid: true,\n      isBreakable: true,\n      isFlat: true,\n      isPickable: false,\n      isCrushable: false,\n      level\n    })\n    this.strength = 1\n  }\n\n  overrunBy(el) {\n    super.overrunBy(el)\n    // assume is player who overruns ground\n    const layer = this.level.scene.children.getByName('layer_1')\n    const { tilemap: map } = layer\n    map.putTileAt(PIXEL_TO_TILEMAP_POSITION[PIXEL_NAME.EMPTY], this.position.x, this.position.y)\n  }\n}\n\nGround.className = 'Ground'\n","export default class Empty {\n  constructor(id, level) {\n    this.id = id\n    this.level = level\n    this.isEmpty = true\n  }\n  setPosition(coords) {\n    this.position = coords\n  }\n}\n\nEmpty.className = 'Empty'\n","import Empty from './Empty'\nimport Player from './Player'\n\nexport default class Interactive extends Empty {\n  overrunBy(el) {\n    console.log('Interactive overrunBy el', el)\n    if (el.constructor.className === Player.className) {\n      this.level.onInteractWith(this)\n    }\n  }\n}\n\nInteractive.className = 'Interactive'\n","import Fallable from './Fallable'\n\nexport default class Barrel extends Fallable {\n  constructor(id, level) {\n    super({\n      id,\n      isRigid: false,\n      isBreakable: true,\n      isFlat: true,\n      isPickable: false,\n      isCrushable: true,\n      level\n    })\n  }\n  explode() {\n    // this.alien.alpha = 0.5\n    this.alien.destroy()\n    this.level.onExplode(this)\n  }\n  overrunBy(el) {\n    this.explode()\n  }\n}\nBarrel.className = 'Barrel'\n\n","import GameObject from './GameObject'\nimport Empty from './Empty'\nimport { PIXEL_NAME, TICK_TIME } from '../../utils/constants'\n\nexport default class Explosion extends GameObject {\n  constructor(id, level) {\n    super({\n      id,\n      isRigid: false,\n      isBreakable: true,\n      isFlat: true,\n      isPickable: false,\n      isCrushable: true,\n      level\n    })\n    this.power = 10\n  }\n  setPosition(x, y) {\n    this.position = { x, y }\n    \n    const layer = this.level.scene.children.getByName('layer_1')\n    const { tilemap: map } = layer\n    const explosion = this.level.scene.add.graphics({ fillStyle: { color: 0xff0000, alpha: 1 } })\n    explosion.fillRect(0, 0, map.tileWidth, map.tileHeight)\n    explosion.setScale(layer.scaleX)\n\n    explosion.x = map.tileToWorldX(x)\n    explosion.y = map.tileToWorldY(y)\n\n    this.level.scene.tweens.add({\n      targets: explosion,\n      alpha: 0,\n      duration: TICK_TIME,\n      onComplete: () => {\n        explosion.destroy()\n        this.level.objects[y][x] = new Empty(PIXEL_NAME.EMPTY, this.level)\n      }\n    });\n    \n    this.alien = explosion\n    \n  }\n}\n\nExplosion.className = 'Explosion'\n","import Fallable from './Fallable'\nimport Player from './Player'\n\nexport default class Jewel extends Fallable {\n  constructor(id, level) {\n    super({\n      id,\n      isRigid: false,\n      isBreakable: true,\n      isFlat: false,\n      isPickable: true,\n      isCrushable: false,\n      level\n    })\n    this.strength = 4\n  }\n  overrunBy(el) {\n    if(el.constructor.className === Player.className) {\n      this.alien.visible = false\n      // this.alien.alpha = 0.5\n      this.level.onJewelPick(this)\n    } else {\n      super.overrunBy(el)\n    }\n  }\n}\n\nJewel.className = 'Jewel'\n","import Phaser from 'phaser'\nimport { TICK_TIME, PLAYER_TICK_TIME, PIXEL_NAME, DIRS, PIXEL_TO_TILEMAP_POSITION } from \"../../utils/constants\"\nimport {\n  Player,\n  Boulder,\n  Wall,\n  Empty,\n  Ground,\n  Barrel,\n  Enemy,\n  Interactive,\n  Jewel,\n  Explosion,\n} from '../objects'\n\nclass Level {\n  constructor(config) {\n    this.config = config\n    this.moveables = []\n    this.objects = []\n    this.scene = null\n    this.player = null\n    this.playerTimeoutId = 0\n    this.isPaused = false\n  }\n\n  connectToScene(phaserScene) {\n    this.scene = phaserScene\n    const layer = this.scene.children.getByName('layer_1')\n    const { tilemap: map } = layer\n    \n\n    this.objects = this.config.map((r, y) => r.map((c, x) => {\n      // factory\n      let element\n      switch(c) {\n        case PIXEL_NAME.WALL:\n          element = new Wall(c, this)\n          element.setPosition({ x, y })\n          break;\n        case PIXEL_NAME.GROUND:\n          element = new Ground(c, this)\n          element.setPosition({ x, y })\n          break;\n        case PIXEL_NAME.BOULDER:\n          const boulder = this.scene.add.sprite(48, 16).setOrigin(0, 0.25).play('boulder_idle')\n          boulder.setScale(layer.scaleX)\n          boulder.x = map.tileToWorldX(x)\n          boulder.y = map.tileToWorldY(y)\n          \n          element = new Boulder(c, this)\n          element.alien = boulder\n          break;\n        case PIXEL_NAME.JEWEL:\n          const jewel = this.scene.add.graphics({ fillStyle: { color: 0xffff00, alpha: 1 } })\n          jewel.setScale(layer.scaleX)\n          // jewel.fillRect(0, 0, map.tileWidth * layer.scaleX, map.tileHeight * layer.scaleY)\n          jewel.fillRect(0, 0, map.tileWidth, map.tileHeight)\n\n          jewel.x = map.tileToWorldX(x)\n          jewel.y = map.tileToWorldY(y)\n          \n          element = new Jewel(c, this)\n          element.alien = jewel\n          break;\n        case PIXEL_NAME.BARREL:\n          const barrel = this.scene.add.graphics({ fillStyle: { color: 0x663300, alpha: 1 } })\n          barrel.setScale(layer.scaleX)\n          // barrel.fillRect(0, 0, map.tileWidth * layer.scaleX, map.tileHeight * layer.scaleY)\n          barrel.fillRect(0, 0, map.tileWidth, map.tileHeight)\n\n          barrel.x = map.tileToWorldX(x)\n          barrel.y = map.tileToWorldY(y)\n          \n          element = new Barrel(c, this)\n          element.alien = barrel\n          break;\n        case PIXEL_NAME.PLAYER:\n          const player = this.scene.add.sprite(48, 16).setOrigin(0, 0.25).play('brave_idle')\n          player.setScale(layer.scaleX)\n          player.x = map.tileToWorldX(x)\n          player.y = map.tileToWorldY(y)\n\n          player.name = 'brave'\n          player.on(Phaser.Animations.Events.ANIMATION_COMPLETE, () => {\n            if(!player.isMoving) {\n              // player.play('brave_idle')\n            }\n          })\n\n          element = new Player(c, this)\n          element.alien = player\n\n          // add shortcut reference\n          this.player = element\n          break;\n        case PIXEL_NAME.ENEMY:\n          const enemy = this.scene.add.graphics({ fillStyle: { color: 0xff0000, alpha: 1 } })\n          enemy.fillRect(0, 0, map.tileWidth, map.tileHeight)\n          enemy.setScale(layer.scaleX)\n          this.scene.addToScalables(enemy, { x, y })\n          enemy.x = map.tileToWorldX(x)\n          enemy.y = map.tileToWorldY(y)\n          element = new Enemy(c, this)\n          element.alien = enemy\n          break;\n        case PIXEL_NAME.INTERACTION:\n          element = new Interactive(c, this)\n          break;\n        default:\n          element = new Empty(c, this);\n\n      }\n      element.setPosition({ x, y })\n      if (!this.objectIsEmpty(element) && !element.isRigid) {\n        // enters backward to start evaluating lower elements into gravityLoop\n        // this.moveables.unshift(element)\n        this.moveables.push(element)\n      }\n      this.onAddElement(element)\n      return element\n    }))\n  }\n\n  gravityLoop() {\n    if(this.isPaused) { return }\n    this.moveables.sort((a, b) => a.position.y - b.position.y).forEach(el => {\n      const canFallDown = el.canFallDown()\n      const canFallLeft = el.canFallLeft()\n      const canFallRight = el.canFallRight()\n      let nextPos\n      if(canFallDown) {\n        nextPos = { x: el.position.x, y: el.position.y + 1 }\n        el.isFalling++\n      }\n      if (!canFallDown && canFallLeft) {\n        nextPos = { x: el.position.x - 1, y: el.position.y}\n        if(el.isFalling) {\n          nextPos.y ++\n        }\n        el.isFalling++\n      }\n      if (!canFallDown && !canFallLeft && canFallRight) {\n        nextPos = { x: el.position.x + 1, y: el.position.y}\n        if(el.isFalling) {\n          nextPos.y ++\n        }\n        el.isFalling++\n      }\n\n      if (nextPos) {\n        this.moveObject(el, nextPos)\n      } else {\n        if(el.isFalling && el.constructor.className === Barrel.className) {\n          el.explode()\n        }\n        el.isFalling = 0\n      }\n    })\n\n    this.enemiesLoop()\n  }\n  enemiesLoop() {\n\n    if(this.isPaused) { return }\n    let nextPos, neighbour, isDestinationEmpty, isPerpToAnchor, newAnchor, nextDir, backToTrackDir, nextAnchorPos\n    \n    const helperDirCalc = (enemy, nextPos, nextDir, backToTrackDir, nextAnchorPos) => {\n      neighbour = this.getObjectAt(nextPos.x, nextPos.y)\n      isDestinationEmpty = this.objectIsEmpty(neighbour) || neighbour?.constructor.className === Player.className // this.isDestinationEmpty(nextPos.x, nextPos.y)\n      if (!isDestinationEmpty && !enemy.anchorPosition) {\n        enemy.anchorPosition = neighbour.position\n        // counter clockwise\n        enemy.moveIntentDir = nextDir\n      }\n      if (isDestinationEmpty && neighbour.constructor.className === Player.className) {\n        this.moveObject(enemy, nextPos)\n      }\n      if (isDestinationEmpty) {\n        if (!enemy.anchorPosition) {\n          enemy.moveIntentDir = nextDir\n          return\n        }\n        isPerpToAnchor = enemy.position.x === enemy.anchorPosition.x || enemy.position.y === enemy.anchorPosition.y\n        // scenario 1: enemy is perpendicular to anchor\n        if (isPerpToAnchor) {\n          // updates anchor counter clockwise\n          newAnchor = this.getObjectAt(nextAnchorPos.x, nextAnchorPos.y)\n          if (!this.objectIsEmpty(newAnchor) && newAnchor?.constructor.className !== Player.className) {\n            enemy.anchorPosition = newAnchor.position\n          } else {\n            enemy.moveIntentDir = backToTrackDir\n          }\n        }\n        this.moveObject(enemy, nextPos)\n      } else {\n        enemy.anchorPosition = neighbour.position\n        enemy.moveIntentDir = nextDir\n      }\n    }\n    this.moveables\n    .filter(el => el.constructor.className === Enemy.className)\n    .forEach(enemy => {\n      // potential path finding mechanism @see https://github.com/qiao/PathFinding.js\n      // if(!enemy.path) {\n      //   const grid = new window.PF.Grid(this.objects.map(row => row.map(el => el.isEmpty ? 0 : 1)));\n      //   enemy.pathfinder = new window.PF.AStarFinder();\n      //   const path = enemy.pathfinder.findPath(enemy.position.x, enemy.position.y, thi.player.position.x, this.player.position.y, grid);\n      // }\n      switch(enemy.moveIntentDir) {\n        case DIRS.UP:\n          nextPos = { x: enemy.position.x, y: enemy.position.y - 1}\n          nextDir = DIRS.LEFT\n          backToTrackDir = DIRS.RIGHT\n          nextAnchorPos = { x: nextPos.x + 1, y: nextPos.y }\n          helperDirCalc(enemy, nextPos, nextDir, backToTrackDir, nextAnchorPos)\n          \n          break;\n        case DIRS.RIGHT:\n          nextPos = { x: enemy.position.x + 1, y: enemy.position.y}\n          nextDir = DIRS.UP\n          backToTrackDir = DIRS.DOWN\n          nextAnchorPos = { x: nextPos.x, y: nextPos.y + 1 }\n          helperDirCalc(enemy, nextPos, nextDir, backToTrackDir, nextAnchorPos)\n          \n          break;\n        case DIRS.DOWN:\n          nextPos = { x: enemy.position.x, y: enemy.position.y + 1}\n          nextDir = DIRS.RIGHT\n          backToTrackDir = DIRS.LEFT\n          nextAnchorPos = { x: nextPos.x - 1, y: nextPos.y }\n          helperDirCalc(enemy, nextPos, nextDir, backToTrackDir, nextAnchorPos)\n          \n          break;\n        case DIRS.LEFT:\n          nextPos = { x: enemy.position.x - 1, y: enemy.position.y}\n          nextDir = DIRS.DOWN\n          backToTrackDir = DIRS.UP\n          nextAnchorPos = { x: nextPos.x, y: nextPos.y - 1 }\n          helperDirCalc(enemy, nextPos, nextDir, backToTrackDir, nextAnchorPos)\n          \n          break;\n\n        default:\n          break;\n      }\n    })\n  }\n  playerLoop() {\n    if(this.isPaused || this.player.inactive) { return }\n    clearTimeout(this.playerTimeoutId)\n    const player = this.player\n    \n    const nextPos = { x: player.position.x, y: player.position.y }\n    switch(player.moveIntentDir) {\n      case DIRS.UP:\n        if(player.canMoveUp()) nextPos.y -= 1\n        break;\n      case DIRS.DOWN:\n        if(player.canMoveDown()) nextPos.y += 1\n        break;\n      case DIRS.LEFT:\n        if(player.canMoveLeft()) nextPos.x -= 1\n        break;\n      case DIRS.RIGHT:\n        if(player.canMoveRight()) nextPos.x += 1\n        break;\n      default:break;\n    }\n    if ((player.position.x !== nextPos.x || player.position.y !== nextPos.y) && !player.isMoving) {\n      player.isMoving = true\n      if (player.position.x < nextPos.x) {\n        player.alien.setOrigin(0, 0.25)\n        player.alien.setFlipX(false)\n      }\n      if (player.position.x > nextPos.x) {\n        player.alien.setFlipX(true)\n        player.alien.setOrigin(0.25, 0.25)\n      }\n      player.alien.emit('player_moves', nextPos)\n      this.moveObject(player, nextPos)\n    }\n\n    this.playerTimeoutId = setTimeout(() => {\n      player.isMoving = false\n      player.alien.play('brave_idle')\n      if(player.moveIntentDir !== '') {\n        this.playerLoop()\n      }\n    }, PLAYER_TICK_TIME);\n  }\n  // afterPlayerLoop(cb) {\n  //   this.afterPlayerLoopCallbacks.push(cb)\n  // }\n  moveObject(el, pos) {\n    const layer = this.scene.children.getByName('layer_1')\n    const { tilemap: map } = layer\n    const origin = { x: el.position.x, y: el.position.y }\n    // assume destination is occupeable\n    const destinationElement = this.getObjectAt(pos.x, pos.y)\n    if (!this.objectIsEmpty(destinationElement) || destinationElement.constructor.className === Interactive.className) {\n      destinationElement.overrunBy(el)\n      el.runningOver(destinationElement)\n    }\n\n    if(el.inactive) return\n\n    // clear origin position\n    this.setObjectAt(origin.x, origin.y, new Empty(PIXEL_NAME.EMPTY, this))\n    // fill destination position\n    this.setObjectAt(pos.x, pos.y, el)\n    \n    // updates element position\n    el.move(pos)\n    if(el.constructor.className === Player.className) {\n      // alien anim\n      this.scene.tweens.add({\n        targets: el.alien,\n        x: {\n          value: map.tileToWorldX(pos.x),\n          duration: PLAYER_TICK_TIME,\n        },\n        y: {\n          value: map.tileToWorldY(pos.y),\n          duration: PLAYER_TICK_TIME,\n        },\n      });\n      el.alien.play('brave_run')\n    }\n    if(el.constructor.className === Enemy.className) {\n      // alien anim\n      this.scene.tweens.add({\n        targets: el.alien,\n        x: {\n          value: map.tileToWorldX(pos.x),\n          duration: TICK_TIME,\n        },\n        y: {\n          value: map.tileToWorldY(pos.y),\n          duration: TICK_TIME,\n        },\n      });\n    }\n    if(el.constructor.className === Jewel.className) {\n      // alien anim\n      this.scene.tweens.add({\n        targets: el.alien,\n        x: {\n          value: map.tileToWorldX(pos.x),\n          duration: TICK_TIME * 0.5,\n        },\n        y: {\n          value: map.tileToWorldY(pos.y),\n          delay: pos.x !== origin.x ? TICK_TIME * 0.5 : 0,\n          duration: pos.x !== origin.x ? TICK_TIME * 0.5 : TICK_TIME,\n        },\n        // duration: TICK_TIME,\n      });\n    }\n    if(el.constructor.className === Barrel.className) {\n      // alien anim\n      this.scene.tweens.add({\n        targets: el.alien,\n        x: {\n          value: map.tileToWorldX(pos.x),\n          duration: TICK_TIME * 0.5,\n        },\n        y: {\n          value: map.tileToWorldY(pos.y),\n          delay: pos.x !== origin.x ? TICK_TIME * 0.5 : 0,\n          duration: pos.x !== origin.x ? TICK_TIME * 0.5 : TICK_TIME,\n        },\n        // duration: TICK_TIME,\n      });\n    }\n    if(el.constructor.className === Boulder.className) {\n      // alien anim\n      this.scene.tweens.add({\n        targets: el.alien,\n        x: {\n          value: map.tileToWorldX(pos.x),\n          duration: TICK_TIME * 0.5,\n        },\n        y: {\n          value: map.tileToWorldY(pos.y),\n          delay: pos.x !== origin.x ? TICK_TIME * 0.5 : 0,\n          duration: pos.x !== origin.x ? TICK_TIME * 0.5 : TICK_TIME,\n        },\n        // duration: TICK_TIME,\n      });\n      if (pos.x !== origin.x) {\n        el.alien.play(pos.x > origin.x ? 'boulder_roll_right' : 'boulder_roll_left')\n      }\n    }\n  }\n  pause() {\n    this.isPaused = true\n  }\n  resume() {\n    this.isPaused = false\n  }\n  onCharacterDie(el) {\n    this.setObjectAt(el.position.x, el.position.y,  new Empty(PIXEL_NAME.EMPTY, this))\n    this.moveables = this.moveables.filter(e => e !== el)\n    if (el.constructor.className === Player.className) {\n      // this.player = null\n    }\n  }\n  onJewelPick(el) {\n    this.setObjectAt(el.position.x, el.position.y,  new Empty(PIXEL_NAME.EMPTY, this))\n    this.moveables = this.moveables.filter(e => e !== el)\n  }\n  onDestroy(el) {\n    if(el.constructor.className === Boulder.className) {\n      // console.log(el);\n    }\n    this.setObjectAt(el.position.x, el.position.y,  new Empty(PIXEL_NAME.EMPTY, this))\n    this.moveables = this.moveables.filter(e => e !== el)\n  }\n  onExplode(el) {\n    this.setObjectAt(el.position.x, el.position.y,  new Empty(PIXEL_NAME.EMPTY, this))\n    this.moveables = this.moveables.filter(e => e !== el)\n    for(let x = el.position.x - 2; x <= el.position.x + 2; x++) {\n      for(let y = el.position.y - 2; y < el.position.y + 2; y++) {\n        const el = this.getObjectAt(x, y)\n        const explosion = new Explosion(PIXEL_NAME.EXPLOSION, this)\n        if(el.isBreakable || this.objectIsEmpty(el)) {\n          explosion.setPosition(x, y)\n          this.objects[y][x] = explosion\n        }\n        if (el && !this.objectIsEmpty(el)){\n          el.overrunBy(explosion)\n        }\n      }\n    }\n  }\n  onComplete() {\n    this.objects.forEach(row => row.forEach(el => {\n      if(el !== this.player && el.alien) {\n        el.alien.destroy()\n      }\n    }))\n    this.pause()\n    this.scene.events.emit('levelcompleted', this)\n    // this.moveables = []\n    // this.objects.map(el => el.alien?.destroy())\n  }\n  onInteractWith(el) {\n    console.warn(`implement interaction for ${this.id}`)\n  }\n  onAddElement(el) {\n    console.warn(`implement element added ${this.id}`)\n  }\n  getPlayerPos() { return this.player.position}\n  getConfigAt(x, y) {\n    return this.isDestinationInBounds(x, y) && this.config[y][x]\n  }\n  getCoords(id) {\n    const found = []\n    for(let i = 0; i < this.config.length; i++) {\n      for(let j = 0; j < this.config[i].length; j++) {\n        if (this.config[i][j] === id) {\n          found.push({x: j, y: i})\n        }\n      }\n    }\n    return found\n  }\n  getObjectAt(x, y) {\n    return this.isDestinationInBounds(x, y) && this.objects[y][x]\n  }\n  setObjectAt(x, y, obj) {\n    this.objects[y][x] = obj\n  }\n  isPositionClear(x, y) {\n    return this.getObjectAt(x, y).isEmpty\n  }\n  isDestinationInBounds(x, y) {\n    const xInBounds = x < this.config[0].length && x >= 0\n    const yInBounds = y < this.config.length && y >= 0\n    return xInBounds && yInBounds\n  }\n  objectIsEmpty(el) {\n    return el.isEmpty\n  }\n  isDestinationEmpty(x, y) {\n    return this.getObjectAt(x, y).isEmpty\n  }\n}\n\nexport default Level\n","import Phaser from 'phaser'\nimport { PIXEL_NAME, PIXEL_TO_TILEMAP_POSITION } from '../utils/constants'\nimport Level1 from './levels/level_1'\nimport Level2 from './levels/level_2'\n\nconst LEVELS = [Level1, Level2]\n\nexport default class LevelManager {\n  constructor(scene, currentLevel = 0) {\n    this.scene = scene\n    this.currentIndex = currentLevel - 1\n    this.current = LEVELS[this.currentIndex]\n    this.start()\n  }\n  \n  start() {\n    this.current = LEVELS[this.currentIndex]\n    this.current.config = this.generateConfig()\n    this.map = this.createMap()\n    this.current.connectToScene(this.scene)\n  }\n\n  next() {\n    // destroy and unload\n    this.currentIndex += 1\n    if (LEVELS.length[this.currentIndex]) {\n      this.start()\n    } else {\n      console.log(this.scene)\n      this.scene.scene.start('MenuScene')\n    }\n\n  }\n\n  generateConfig() {\n    const scene = this.scene\n    const levelId = this.current.id\n    var texture = scene.textures.get(levelId);\n    var image = texture.getSourceImage();\n    const levelConfig = Array(image.height).fill('000000').map(r => Array(image.width).fill('000000'))\n    for(let j = 0; j < image.width; j++) {\n      for(let i = 0; i < image.height; i++) {\n        const pixColor = scene.textures.getPixel(j, i, levelId)\n        const key = `${Phaser.Display.Color.ComponentToHex(pixColor.r)}${Phaser.Display.Color.ComponentToHex(pixColor.g)}${Phaser.Display.Color.ComponentToHex(pixColor.b)}`\n        levelConfig[i][j] = key\n      }\n    }\n    return levelConfig\n  }\n\n  createMap() {\n    const scene = this.scene\n    const levelData = this.current\n    const SCALE = scene.data.get('custom_scale')\n    const camera = this.scene.cameras.main\n\n    let map = this.map\n    if(map && map.scene) {\n      map.destroy()\n    }\n\n    // Creating a blank tilemap with dimensions matching the dungeon\n    map = scene.make.tilemap({ tileWidth: 20, tileHeight: 20, width: levelData.config[0].length, height: levelData.config.length });\n\n    // addTilesetImage: function (tilesetName, key, tileWidth, tileHeight, tileMargin, tileSpacing, gid)\n    let tileset = map.addTilesetImage('tiles', 'main-tiles', 20, 20, 1, 2);\n\n    let layer = map.createBlankLayer('layer_1', tileset);\n    layer.name = 'layer_1'\n    layer.depth = 0\n\n    layer.setScale(SCALE)\n\n    // Fill with black tiles\n    layer.fill(1)\n\n    levelData.config.forEach((row, x) => {\n      row.forEach((el, y) => {\n        const tile = levelData.config[x][y]\n        if (![PIXEL_NAME.EMPTY, PIXEL_NAME.PLAYER, PIXEL_NAME.BOULDER, PIXEL_NAME.INTERACTION].includes(tile)) {\n          if (tile === PIXEL_NAME.WALL) {\n            const tile = PIXEL_TO_TILEMAP_POSITION.calculateWallTileWithNeighbours(x, y, levelData.config)\n            map.putTileAt(tile, y, x)\n          } else {\n            map.putTileAt(PIXEL_TO_TILEMAP_POSITION[tile], y, x)\n          }\n        } else {\n          map.putTileAt(PIXEL_TO_TILEMAP_POSITION[PIXEL_NAME.EMPTY], y, x)\n        }\n      })\n    })\n\n    // set up camera\n    camera.setBounds(0, 0, layer.width * layer.scaleX, layer.height * layer.scaleY);\n    camera.zoom = 1\n\n    return map\n  }\n}","import LevelBase from './levelBase'\n\nclass Level1 extends LevelBase {\n  constructor() {\n    super()\n    this.id = 'level_1'\n    this.name = 'The beginning'\n  }\n\n  connectToScene(scene) {\n    super.connectToScene(scene)\n    scene.cameras.main.once('camerafadeincomplete', () => {\n      alert('INTRO MESSAGE, \"Guess I can move those boulders\"')\n    })\n  }\n\n  onInteractWith(el) {\n    if(el.position.x === 18 && el.position.y === 14) {\n      alert('>>> Level 1 completed <<<')\n      this.onComplete()\n    }\n  }\n}\n\nexport default new Level1()\n","import LevelBase from './levelBase'\nimport { Interactive } from '../objects'\n\nclass Level2 extends LevelBase {\n  constructor() {\n    super()\n    this.id = 'level_2'\n    this.name = 'The finding'\n  }\n\n  // connectToScene(scene) {\n  //   super.connectToScene(scene)\n  //   scene.cameras.main.once('camerafadeincomplete', () => {\n  //     alert('INTRO MESSAGE, \"Guess I can move those boulders\"')\n  //   })\n  // }\n\n  onInteractWith(el) {\n    if(el.position.x === 6 && el.position.y === 6) {\n      this.player.moveIntentDir = ''\n      alert('FIRST CLUE, \"Hmm, these walls looks different. Like someone have put them here.\"')\n    }\n    if(el.position.x === 5 && el.position.y === 12) {\n      const layer = this.scene.children.getByName('layer_1')\n      const { tilemap: map } = layer\n      this.player.moveIntentDir = ''\n      alert('FIRST TOOL, \"Great! Now, with this pickaxe I can break all those clods\"')\n      this.player.power = 1\n      map.putTileAt(19, el.position.x, el.position.y)\n    }\n    if(el.position.x === 19 && el.position.y === 1) {\n      alert('>>> Level 2 completed <<<')\n      this.onComplete()\n    }\n  }\n\n  onAddElement(el) {\n    if(el.constructor.className === Interactive.className && el?.position.x === 5 && el?.position.y === 12) {\n      const layer = this.scene.children.getByName('layer_1')\n      const { tilemap: map } = layer\n      map.putTileAt(54, el.position.x, el.position.y)\n    }\n  }\n}\n\nexport default new Level2()\n","import Phaser from 'phaser'\nimport { TICK_TIME } from '../utils/constants'\n\nexport default class Rules {\n  constructor(scene) {\n    this.scene = scene\n    // gravity loop\n    this.timer = 0\n    this.worldTickFreq = TICK_TIME\n    scene.events.addListener(Phaser.Scenes.Events.UPDATE, (...props) => void this.onSceneUpdate(...props))\n\n    this.setUpPuseResumeGame()\n    this.setUpCameraFollowPlayer()\n    scene.events.on('levelcompleted', () => {\n      scene.cameras.main.fade(1000, 0, 0)\n      scene.cameras.main.once('camerafadeoutcomplete', () => {\n        this.scene.levels.next()\n        scene.cameras.main.fadeIn(1000, 0, 0)\n      })\n    })\n  }\n\n  setUpCameraFollowPlayer() {\n    this.scene.events.addListener(Phaser.Scenes.Events.UPDATE, () => {\n      const cam = this.scene.cameras.main\n      const layer = this.scene.children.getByName('layer_1')\n      const { tilemap: map } = layer\n      const {x, y} = this.scene.levels.current.getPlayerPos()\n      if (cam && map) {\n        var smoothFactor = 0.9;\n  \n        cam.scrollX = smoothFactor * cam.scrollX + (1 - smoothFactor) * (map.tileToWorldX(x) - cam.width * 0.5);\n        cam.scrollY = smoothFactor * cam.scrollY + (1 - smoothFactor) * (map.tileToWorldY(y) - cam.height * 0.5);\n      }\n    })\n  }\n\n  setUpPuseResumeGame() {\n    const pauseGame = () => {\n      this.scene.levels.current.pause()\n      this.scene.events.emit('game_paused')\n    }\n    const resumeGame = () => {\n      this.scene.levels.current.resume()\n      this.scene.events.emit('game_resumed')\n    }\n    this.scene.input.keyboard.on('keydown', event => {\n      if(event.key === 'Escape') {\n        const action = this.scene.levels.current.isPaused ? resumeGame : pauseGame\n        action()\n      }\n    })\n  }\n\n  onSceneUpdate(time, delta) {\n    this.timer += delta\n    if (this.timer >= this.worldTickFreq) {\n      while (this.timer > this.worldTickFreq) {\n          this.timer -= this.worldTickFreq\n      }\n      this.scene.levels.current.gravityLoop()\n    }\n  }\n}\n","export default class UI {\n  constructor(scene) {\n    this.scene = scene\n\n    this.scene.events.on('game_paused', () => alert('Game paused, press ESC to resume'))\n    this.scene.events.on('game_resumed', () => alert('Game resumes now'))\n  }\n}","import Phaser from 'phaser'\nimport { TILES_BY_SCREEN, TILE_SIZE, TICK_TIME } from '../utils/constants';\nimport LevelManager from '../components/LevelManager'\nimport Rules from '../components/Rules'\nimport UI from '../components/UI'\n\nconst SCALE = Math.round((window.innerWidth/TILES_BY_SCREEN * 100 / TILE_SIZE/100)*100)/100\n\nexport default class GameScene extends Phaser.Scene {\n  constructor () {\n    super('GameScene');\n  }\n\n  create(data = {}) {\n    this.data.set('custom_scale', SCALE)\n\n    this.game.scale.scaleMode = Phaser.Scale.RESIZE\n    this.handleScales()\n    this.createAnimations()\n    this.levels = new LevelManager(this, data.level)\n\n    this.cameras.main.fadeIn(1000, 0, 0, 0)\n    new Rules(this)\n    new UI(this)\n  }\n  \n  handleScales() {\n    const SCALE = this.data.get('custom_scale')\n    const scalables = new Map()\n    this.clearScalables = () => void scalables.clear()\n      this.removeFromScalables = el => scalables.delete(el)\n      this.addToScalables = (el, coords) => {\n        el.setScale(SCALE)\n        scalables.set(el, coords)\n      }\n      this.updateScale = scale => {\n        scalables.forEach((coords, el) => el?.setScale(scale))\n      }\n      window.addEventListener('resize', () => {\n        const scale = Math.round((window.innerWidth/TILES_BY_SCREEN * 100 / TILE_SIZE/100)*100)/100\n        const layer = this.scene.children.getByName('layer_1')\n        const { tilemap: map } = layer\n        layer.setScale(scale)\n        // this.children.list.forEach(el => {\n        //   if(el.type === 'TilemapLayer') {\n        //     el.setScale(scale)\n        //   }\n        // })\n        this.data.get('level').objects.forEach((rows, y) => {\n          rows.forEach((obj, x) => {\n            if(obj.alien) {\n              obj.alien.setScale(scale)\n              obj.alien.x = map.tileToWorldX(x)\n              obj.alien.y = map.tileToWorldY(y)\n            }\n          })\n        })\n        const camera = this.cameras.main\n        camera.setBounds(0, 0, layer.width * layer.scaleX, layer.height * layer.scaleY);\n      })\n  }\n\n  createAnimations() {\n    this.anims.create({\n        key: 'boulder_roll_right',\n        frames: this.anims.generateFrameNumbers('boulder', { frames: [ 0, 1, 2, 0 ] }),\n        frameRate: 12,\n        repeat: 0\n      })\n      this.anims.create({\n        key: 'boulder_roll_left',\n        frames: this.anims.generateFrameNumbers('boulder', { frames: [ 0, 2, 1, 0 ] }),\n        frameRate: 12,\n        repeat: 0\n      })\n      this.anims.create({\n        key: 'boulder_idle',\n        frames: this.anims.generateFrameNumbers('boulder', { frames: [ 0 ] }),\n        frameRate: 1,\n        repeat: 0\n      })\n      this.anims.create({\n        key: 'brave_idle',\n        frames: this.anims.generateFrameNumbers('brave', { frames: [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 2, 2, 2, 2, 2, 2, 2, 0 ] }),\n        frameRate: 4,\n        repeat: -1\n      })\n      this.anims.create({\n        key: 'brave_run',\n        frames: this.anims.generateFrameNumbers('brave', { frames: [ 3, 4, 5, 3 ] }),\n        frameRate: (1000/TICK_TIME) * 4,\n        repeat: 0\n      })\n  }\n}","import Phaser from 'phaser'\nimport Canvas from './libs/react-phaser-fiber/components/Canvas'\nimport MenuScene from './scenes/MenuScene'\nimport IntroScene from './scenes/IntroScene'\nimport GameScene from './scenes/GameScene'\n\nconst gameConfig = {\n  width: \"100%\",\n  height: \"100%\",\n  type: Phaser.AUTO,\n  backgroundColor: '#000000',\n  disableContextMenu: true,\n  pixelArt: true,\n  roundPixels: false,\n  scene: [MenuScene, IntroScene, GameScene]\n}\nfunction Game() {\n  return (\n    <Canvas args={gameConfig} />\n  );\n}\n\nexport default Game;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Game from './Game';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Game />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}