{"version":3,"sources":["utils/dbManager.js","libs/react-phaser-fiber/PhaserProvider.js","libs/react-phaser-fiber/components/RPFScene.js","libs/react-phaser-fiber/components/Canvas.js","utils/constants.js","utils/localization.js","components/objects/BaseObject.js","components/objects/GameObject.js","components/objects/Empty.js","components/objects/Explosion.js","components/objects/Destroyable.js","components/objects/Moveable.js","components/objects/Fallable.js","components/objects/Boulder.js","components/objects/Debris.js","components/objects/Pillar.js","components/levels/levelBase.js","components/levels/level_test.js","components/levels/level_2.js","components/levels/level_3.js","components/levels/level_4.js","components/levels/level_5.js","components/levels/level_6.js","components/levels/level_7.js","components/levels/level_8.js","components/levels/level_9.js","components/levels/level_10.js","components/levels/level_11.js","components/levels/level_finale.js","components/levels/Maze_1.js","components/DialogArrow/index.js","components/UIMenus.js","components/DialogOptions/index.js","components/Dialogs/index.js","components/UI.js","components/objects/Ground.js","components/objects/Character.js","components/objects/Jewel.js","components/objects/Enemy.js","components/objects/NPCharacter.js","components/objects/Player.js","components/objects/Wall.js","components/objects/Interactive.js","components/objects/Exit.js","components/objects/Barrel.js","components/objects/Mushroom.js","components/levels/level_1.js","scenes/LandingScene.js","scenes/MenuScene.js","scenes/ConfirmNewGameScene.js","utils/CRTShaderFX.js","scenes/IntroScene.js","utils/helpers.js","components/objects/Deco.js","components/LevelManager.js","components/Rules.js","scenes/GameScene.js","scenes/ConnectorScene.js","scenes/CreditsScene.js","libs/react-phaser-fiber/hooks/usePhaser.js","libs/react-phaser-fiber/components/GameObject.js","libs/react-phaser-fiber/components/Text.js","libs/react-phaser-fiber/components/Container.js","libs/react-phaser-fiber/components/Sprite.js","scenes/LevelResumeScene/LevelResumeMenu.js","scenes/LevelResumeScene/config.js","utils/GrayScalePipeline.js","libs/react-phaser-fiber/components/Scene.js","Game.js","reportWebVitals.js","index.js"],"names":["DB_NAME","DB_INITIAL_STATE","maxProgress","memDB","bootUp","stored","window","localStorage","getItem","JSON","parse","persist","setItem","stringify","get","key","eval","set","value","safeSet","reset","getLevels","Object","keys","map","k","includes","filter","Boolean","context","createContext","PhaserProvider","game","scene","sceneProps","children","useState","ready","setReady","useEffect","Provider","RPFScene","name","args","onCreate","config","this","preload","bind","data","create","Phaser","Scene","Canvas","forwardRef","canvasRef","fallbackRef","useRef","ref","setGame","activeScene","setActiveScene","scenes","React","Children","ch","props","callbacks","postBoot","forEach","sc","events","off","Scenes","Events","READY","once","RENDER","WAKE","UPDATE","TRANSITION_WAKE","TRANSITION_START","TRANSITION_OUT","TRANSITION_INIT","TRANSITION_COMPLETE","START","SLEEP","SHUTDOWN","RESUME","PRE_RENDER","PAUSE","on","CREATE","state","BOOT","Game","current","activeChildren","toArray","find","getScene","values","displayName","TICK_TIME","SCALE","Math","round","innerWidth","toString","PIXEL_NAME_BG","PIXEL_NAME","EMPTY","PLAYER","GROUND","BOULDER","PILLAR","WALL","ENEMY","JEWEL","BARREL","EXPLOSION","INTERACTION","MUSHROOM","BRO","DWARF","EXIT","ART","ART2","HANGING_2","HANGING_3","HANGING_4","HANGING_5","DEBRIS","DIRS","DOWN","UP","LEFT","RIGHT","BG_PIXEL_TO_TILEMAP_POSITION","PIXEL_TO_TILEMAP_POSITION","x","y","W","N","E","S","getDictionary","lang","dictionary_en","dictionary_es","translationGetters","en","es","translate","memoize","i18n","t","setI18nConfig","callback","a","locale","navigator","language","substring","languageTag","dictionary","translations","BaseObject","eventListeners","classes","proto","__proto__","undefined","constructor","className","push","givenClass","length","listClasses","eventName","listener","l","payload","GameObject","id","isRigid","isBreakable","isFlat","isPickable","isCrushable","level","power","strength","force","weight","position","alien","isMoveable","coords","Empty","isEmpty","Explosion","layer","getByName","tilemap","explosion","add","sprite","setOrigin","play","setScale","scaleX","tileToWorldX","tileToWorldY","Animations","ANIMATION_COMPLETE","destroy","replaceByEmpty","onNextTick","lvl","objects","Destroyable","inactive","el","onDestroyElement","Moveable","Fallable","isFalling","nextPos","destinationElement","isDestinationInBounds","getObjectAt","destinationIsEmpty","isDestinationEmpty","destinationIsCrushable","destinationInBounds","pathElement","pathClear","objectIsEmpty","restingElement","canRest","canFallDown","canRollTo","Boulder","isClass","visible","Debris","putTileAt","break_effect","depth","UI","tileToScreen","setFlipY","Pillar","Level","moveables","parallelMovables","interactiveElements","decorationElements","player","playerTimeoutId","focusElement","isPaused","queuedActions","countDiamonds","collectedDiamonds","countEnemies","killedEnemies","countShrooms","collectedShrooms","totalShroomsAmount","prevBest","preventDisplayDiamondsGoalAmount","unfinished","tickId","toRun","cb","phaserScene","pick_effect","enemy_die_effect","intOrder","r","c","element","Wall","setPosition","Ground","boulder","pillar","diamond","Jewel","order","dbManager","mushroom","Mushroom","barrel","Barrel","isMoving","Player","animIdle","follower","NPCharacter","isFollowing","leader","isLeading","enemy","Enemy","intElement","Exit","Interactive","onAddElement","addedToScene","dbData","comp","console","log","diamondsGoal","exit","block","exitBlock","setTimeout","emit","DB","idx","findIndex","e","splice","inParallelGravity","barrels","explode","parallelWorld","runScheduledActions","explodeLoop","o","sort","b","canFallLeft","canFallRight","moveObject","objectBelow","goBackToMainGravity","enemiesLoop","neighbour","newAnchor","nextDir","backToTrackDir","nextAnchorPos","helperDirCalc","anchorPosition","moveIntentDir","scanDirection","loop","clearTimeout","canMoveUp","canMoveDown","canMoveLeft","canPushLeft","pushLeft","canMoveRight","canPushRight","pushRight","animRunLeft","animRunRight","followerNextPos","isInteractivePosition","overrunBy","anims","currentAnim","isCloseEnough","playerLoop","pos","origin","isSwitch","runningOver","setObjectAt","move","Character","tweens","targets","duration","animRun","delay","onComplete","gravityLoop","pushingDirection","base","levels","restart","destroyBlock","emptyPlace","row","pause","levelData","rules","calcCompletion","newLevelData","storedData","ephemeral","warn","found","i","j","obj","xInBounds","yInBounds","range","intensity","disconnect","shakeCamera","probability","destroyObjectsInRange","reconnect","y1","y2","x1","x2","toDestroy","random","camera","cameras","main","fx","sound","shake","Promise","res","mv","LevelTest","input","keyboard","addListener","onKeyUp","event","showDialog1","showDialog2","showDialog3","showDialog4","participants","participantNames","conversation","who","text","options","hasPickaxe","LevelBase","Level2","light_beam","image","width","height","setScrollFactor","alpha","emitter","particles","createEmitter","min","max","setQuantity","setFrequency","setAngle","setSpeed","setGravityY","setGravityX","setLifespan","onChange","Level3","pickaxe","enemiesCount","Level4","countDownAfterQuakeUntilMessage","playEarthquake","onPlayerMoves","removeListener","onPlayerMove","Level5","enemiesDeadCount","dist","Distance","Snake","setAlpha","forEachTile","tile","leadingPath","dwarfRun","encounter","moveDwarf","Level6","diamondIdTriggerDwarfMove","interactiveTileCloseToExit","pageId","moveDwarfToExit","template","NUM","Level7","Level8","dwarf","broSprite","grayscalePipeline","tripMusic","firstVisit","renderer","pipelines","setPipeline","valume","showDialog1NoShroom","showDialog1Revisit","_canMove","canMove","theyCan","slot0","label","slot","onSelect","slot1","slot2","slot3","playTheTrip","animFadeOutLevel","moveCamera","animPlayerAndDwarf","animBroEntrance","vanishBro","animDwarfMoveCloseToPlayer","vanishDwarf","animFadeInLevel","restoreRegularGamePlay","ease","music","volume","stop","gray","completeDelay","onUpdate","tween","target","setLevelAlpha","layer_1","layer_1z2","layer_2","layer_0","level_background_art","Level9","Level10","Level11","LevelFinale","winningLoopRef","winningLoop","voidLevel","startVoid","voidLoop","autoDestroyTID","destroyMap","resetAutoVoidTimer","fill","die","onCharacterDie","nextMoveDir","LevelMaze1","isMaze","exitEye","lights","enable","setAmbientColor","light","addLight","setColor","setIntensity","time","addEvent","Geom","Ellipse","Random","callbackScope","repeat","m","preExit","updateLight","setRadius","eyeAnimation","remove","yoyo","ligthTorch","setTintFill","Arrow","make","tileWidth","tileHeight","tileset","addTilesetImage","createBlankLayer","getArrow","rotation","PI","UIMenus","ROW_HEIGHT","MARGIN_LEFT","MARGIN_TOP","optionsByPage","scrollIndex","isVisible","menuOptions","disabled","selectable","navigateToScene","drawSelectableOptions","Level1","_","n","toLocaleString","minimumIntegerDigits","_gems","lKey","_threats","_shrooms","_comp","perc","minimumFractionDigits","maximumFractionDigits","levelName","header","start","initOption","offsetX","offsetY","maxRows","FIRST_SELECTABLE_OPTION","currentOption","haveMorePages","isNaN","currentPage","floor","currentIndex","INIT_POS","pixelToScreen","ARROW_WIDTH","OFFSET_X","arrow","getArrowRight","tilemapLayer","arrowUp","getArrowUp","setVisible","arrowDown","getArrowDown","split","Array","join","lines","txt","fontFamily","fontSize","fontWeight","displayHeight","setShadow","drawOptionsPage","reducedOptions","newIndex","prevSelectedOpt","slice","nextSelectedOpt","from","list","textToPrint","DialogOptions","menuOptionsContainer","keyDownHandler","container","currentSlot","reduce","firstNonEmptySlotKey","drawOption","textObj","lineSpacing","displayWidth","graphics","fillStyle","color","fillTriangle","setArrowPositionBySlot","newSlotIdx","selectedOption","offset","Dialogs","tnContainer","participantSprites","currentDialogIndex","isShowing","isFullTextDisplayed","dialogOptions","showDialog","handleKeyDown","updateCharacterName","tIDs","alert","clearText","unmount","layers","prepareHUD","prepareText","mount","showMessage","onlyOnePageOption","moreThanOnePageOption","defaultPageOption","lastPageOption","show","message","hide","writeText","clearTint","setTint","p","tn","charName","setFlipX","drawWindow","w","h","align","setText","charPlaceholder","paragraphs","line","paragraphWords","shift","prevLine","nextWord","trim","unshift","timerId","letters","fastForward","putLetter","len","char","fullTextDisplayed","TILES","TOP_LEFT","TOP_MIDDLE","TOP_RIGHT","MIDDLE","BOTTOM_LEFT","BOTTOM_MIDDLE","BOTTOM_RIGHT","noScores","inGameMenu","setUpPuseResumeGame","mushroomsIcon","diamondsIcon","showPauseMenu","hidePauseMenu","rockHit","trunc","rockSlideHard","rockSlideSoft","rockHitSoft","gemHit","shroomPick","gemPick","coinPick","clearHit","deathByRockHit","levelComplete","drawScores","dialogs","skipAmount","hideDialog","resume","mushroomsScore","diamondsScore","diamondsScoreGoal","shroomsAmount","MT_MARGIN_RIGHT","D_MARGIN_LEFT","DT_MARGIN_RIGHT","test","diamondsAmount","scoreTileset","scoresLayer","msh","String","setData","scale","howMany","amount","getData","Number","targetPosX","showInGameMenu","existingLayer","drawMenuOptions","onKeyDown","connected","val","calculateGroundTileWithNeighbours","canBrakeNeighbour","isBrakingGround","DIR","nothingBesides","isPositionClear","isAboutToFall","canPush","pushed","animPushLeft","jumpIntoParallelGravity","animPushRight","onJewelPick","line1","debug","directionLine","setRotation","anchorLine","onEnemyKill","flipX","calcMoveIntentForLeader","animRunVariant","animName","torch","canMoveDir","dirVariant","pickaxeVariant","actionVariant","onInteractWith","reach","objectsToDestroyByExplostion","burntEl","burntWillBreak","explosionPlaceholder","onExplode","onMushroomPick","titlesMusic","BlurPostFX","renderTarget","fragShader","uniforms","set2f","set1f","Renderer","WebGL","Pipelines","PostFXPipeline","LandingScene","load","script","process","spritesheet","frameWidth","frameHeight","audio","sceneId","fade","setPostPipeline","CRTFilter","setBackgroundColor","scaleY","WebFont","custom","families","active","fadeIn","sys","showInitialMenu","MenuScene","showMainMenu","IntroScene","images","tiamat","sky","clouds","storm","ground","ground_high","ground_break","comet","people_climbing","people_paying","people_paying_high","people_descending","people_falling","people_jumping","texts","line2","line3","level_title","sounds","background_music","dramatic_music","earthquake","frames","generateFrameNumbers","createTextLine","_shadow","lineNumber","LINE_HEIGHT","LINE_REF","LINE_REF_FACTOR","XPOS","YPOS","abs","lineShadow","style","_setText","createFullscreenImage","hold","DELAY_TO_START","animPage","_shoadow","createAnimations","createSounds","createImages","createTextPlaceholders","playMusic","animEnterTiamat","animPage1","animEnterWorld","animPage2","animEnterPeople","animPage3","showFirstDialogs","animExitTiamat","animGroundTransition","showSecondDialogs","playDramaticMusic","animStormEnter","animEarthquake","animEnterFalling","animPage4","animPage5","animEnterJumping","exitMusic","animLevelTitle","quakesMusic","pan","Cameras","Scene2D","PAN_COMPLETE","textureToMapConfig","textures","getSourceImage","levelConfig","pixColor","getPixel","Display","Color","ComponentToHex","g","formatScore","total","formatComp","Deco","LEVELS","Maze1","getNextLevel","levelKey","nextLevel","LevelManager","currentLevelName","currentName","generateConfig","mapConfig","bgConfig","createMap","createBackground","connectToScene","ui","levelId","mazegenerator","cell","top","right","bottom","left","STARTING_ROW","rowIdx","isNotTopBufferSpace","pop","threeEmptyInARow","every","mapZ2","underlayMap","tilesetGates","tilesetZ2","underlaytileset","layer2","layerZ2","underlayer","bgTile","calculateWallTileWithNeighbours","isFlipX","POSITION_EXIT","tileKind","nextSprite","hanging","setBounds","zoom","Rules","timer","worldTickFreq","onSceneUpdate","setUpCameraFollowPlayer","result","onLevelStart","cam","getPlayerPos","smoothFactor","scrollX","scrollY","delta","gems","collectedGems","enemies","shrooms","colectedShrooms","GameScene","scaleMode","Scale","RESIZE","handleScales","cleanLevel","levelIndex","addEventListener","onResize","updatePositionsOnScale","frameRate","ConnectorScene","currentLevel","musicName","getMusicFromName","environmentMusic","getImageByName","img","showDialogLevel_cinematic_last_2","normalDayMusic","ConfirmNewGameScene","showConfirmNewGameMenu","usePhaser","useContext","setState","useLayoutEffect","s","scenesManager","getState","externalRef","type","addedToSceneForParent","dataParentRef","localRef","tId","applyProps","useCallback","_this","hasOwnProperty","GameObjects","ADDED_TO_SCENE","existing","Text","Container","onObjectAddedToScene","extractPhaserChildren","_children","cloneElement","Sprite","OptionsScene","selIndex","setSelIndex","showRowScore","setShowRowScore","refScene","v","formatFont","fontStyle","CONTAINER_TOP","CONTAINER_LEFT","MENU_OPTIONS_TOP","setStyle","replace","margin","sapcing","GrayScalePipeline","_gray","MultiPipeline","isActive","setActive","gameConfig","WEBGL","backgroundColor","disableContextMenu","pixelArt","roundPixels","CreditsScene","pipeline","plugins","global","plugin","FadePlugin","FlashPlugin","LevelResumeSceneConfig","LevelResumeMenu","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","version","document","getElementById"],"mappings":"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","file":"static/js/main.bcdca9ce.chunk.js","sourcesContent":["const DB_NAME = 'data'\nconst DB_INITIAL_STATE = {\n  maxProgress: 0\n  // level_1: {\n  //   diamonds: 5,\n  //   diamonds_picked: 0,\n  //   diamonds_to_complete: 4,\n  //   enemies: 0,\n  //   enemies_killed: 0,\n  //   comp: 0,\n  // },\n}\n\nlet memDB = DB_INITIAL_STATE\nconst bootUp = () => {\n  const stored = window.localStorage.getItem(DB_NAME) || ''\n  memDB = stored !== '' ? JSON.parse(stored) : DB_INITIAL_STATE\n  return memDB\n}\nconst persist = () => window.localStorage.setItem(DB_NAME, JSON.stringify(memDB))\n\nconst get = key => eval(`memDB.${key}`)\nconst set = (key, value) => {\n  switch(typeof value) {\n    case 'string':\n      safeSet(key, `\\`${value}\\``)\n      break\n    case 'number':\n    case 'boolean':\n      safeSet(key, value)\n      break\n    default:\n    case 'object':\n      safeSet(key, `JSON.parse(\\`${JSON.stringify(value)}\\`)`)\n      break\n  }\n  persist()\n}\nconst reset = () => {\n  memDB = {}\n  persist()\n}\n\nconst safeSet = (key, value) => eval(`memDB.${key} = ${value}`)\nconst getLevels = () => {\n  return Object.keys(memDB).map(k => k.includes('level_') ? memDB[k] : null).filter(Boolean)\n}\nbootUp()\nexport default {\n  get,\n  set,\n  reset,\n  getLevels,\n}\n","import { useState, createContext, useEffect } from 'react'\n\nexport const context = createContext()\n\nconst PhaserProvider = ({ game, scene, sceneProps, children }) => {\n  const [ready, setReady] = useState()\n  \n  // delay to let the context value to propagate before rendering children.\n  // this way children can implement usePhaser confident that objects returned are not null\n  useEffect(() => {\n    setReady(!!game && !!scene)\n  }, [game, scene])\n\n  return (\n    <context.Provider value={{ game, scene, sceneProps }}>\n      {\n        ready ? children : null\n      }\n    </context.Provider>\n  )\n}\n\nexport default PhaserProvider\n","import Phaser from \"phaser\";\n\nclass RPFScene extends Phaser.Scene {\n  constructor(name, args, onCreate) {\n    super(name);\n    this.onCreate = onCreate;\n    this.config = args\n  }\n  preload() {\n    if(this.config?.preload) {\n      this.config.preload.bind(this)()\n    }\n  }\n  create(data = {}) {\n    if(this.config?.create) {\n      this.config.create.bind(this)()\n    }\n    this.onCreate(data);\n  }\n}\n\nexport default RPFScene;\n","import Phaser from \"phaser\";\nimport React from \"react\";\nimport { useEffect, forwardRef, useRef, useState } from \"react\";\nimport PhaserProvider from \"../PhaserProvider\";\nimport RPFScene from \"./RPFScene\";\n\n/**\n * Creates a new Phaser.Game with given arguments.\n * triggers functions to store game into context\n */\nconst Canvas = forwardRef(({ args, children }, canvasRef) => {\n  const fallbackRef = useRef();\n  const ref = canvasRef || fallbackRef;\n  const [game, setGame] = useState();\n  const [ready, setReady] = useState();\n  const [activeScene, setActiveScene] = useState({});\n  // const [activeSceneProps, setActiveSceneProps] = useState(null);\n\n  useEffect(() => {\n    const scenes = React.Children.map(\n      children,\n      (ch) =>\n        new RPFScene(ch.props.name, ch.props.args, data => {\n          // setActiveSceneProps(data)\n          setActiveScene({ [ch.props.name]: data });\n        })\n    );\n    // args.scene = [...scenes, ...(args.scene || [])];\n    args.scene = [...(args.scene || []), ...scenes];\n    args.callbacks = {\n      postBoot: (game) => {\n        setGame(game);\n        setReady(true);\n        game.scene.scenes.forEach((sc) => {\n          sc.events.off(Phaser.Scenes.Events.READY);\n          sc.events.once(Phaser.Scenes.Events.READY, () => {\n            sc.events.off(Phaser.Scenes.Events.RENDER);\n            sc.events.once(Phaser.Scenes.Events.RENDER, () => {\n              // setActiveSceneKey(sc.scene.key);\n            });\n          });\n          sc.events.once(Phaser.Scenes.Events.WAKE, () => {\n            // console.log(Phaser.Scenes.Events.WAKE, sc.scene.key)\n          });\n          sc.events.once(Phaser.Scenes.Events.UPDATE, () => {\n            // console.log(Phaser.Scenes.Events.UPDATE, sc.scene.key)\n          });\n          sc.events.once(Phaser.Scenes.Events.TRANSITION_WAKE, () => {\n            // console.log(Phaser.Scenes.Events.TRANSITION_WAKE, sc.scene.key)\n          });\n          sc.events.once(Phaser.Scenes.Events.TRANSITION_START, () => {\n            // console.log(Phaser.Scenes.Events.TRANSITION_START, sc.scene.key)\n          });\n          sc.events.once(Phaser.Scenes.Events.TRANSITION_OUT, () => {\n            // console.log(Phaser.Scenes.Events.TRANSITION_OUT, sc.scene.key)\n          });\n          sc.events.once(Phaser.Scenes.Events.TRANSITION_INIT, () => {\n            // console.log(Phaser.Scenes.Events.TRANSITION_INIT, sc.scene.key)\n          });\n          sc.events.once(Phaser.Scenes.Events.TRANSITION_COMPLETE, () => {\n            // console.log(Phaser.Scenes.Events.TRANSITION_COMPLETE, sc.scene.key)\n          });\n          sc.events.once(Phaser.Scenes.Events.START, () => {\n            // console.log(Phaser.Scenes.Events.START, sc.scene.key)\n          });\n          sc.events.once(Phaser.Scenes.Events.SLEEP, () => {\n            // console.log(Phaser.Scenes.Events.SLEEP, sc.scene.key)\n          });\n          sc.events.once(Phaser.Scenes.Events.SHUTDOWN, () => {\n            // console.log(Phaser.Scenes.Events.SHUTDOWN, sc.scene.key)\n          });\n          sc.events.once(Phaser.Scenes.Events.RESUME, () => {\n            // console.log(Phaser.Scenes.Events.RESUME, sc.scene.key)\n          });\n          sc.events.once(Phaser.Scenes.Events.RENDER, () => {\n            // console.log(Phaser.Scenes.Events.RENDER, sc.scene.key)\n          });\n          sc.events.once(Phaser.Scenes.Events.READY, () => {\n            // console.log(Phaser.Scenes.Events.READY, sc.scene.key)\n          });\n          sc.events.once(Phaser.Scenes.Events.PRE_RENDER, () => {\n            // setActiveSceneKey(sc.scene.key);\n            // console.log(Phaser.Scenes.Events.PRE_RENDER, sc.scene.key);\n          });\n          sc.events.once(Phaser.Scenes.Events.PAUSE, () => {\n            // console.log(Phaser.Scenes.Events.PAUSE, sc.scene.key)\n          });\n          sc.events.on(Phaser.Scenes.Events.CREATE, () => {\n            setActiveScene(state => ({ [sc.scene.key]: state[sc.scene.key] }));\n            // setActiveSceneKey(sc.scene.key);\n          });\n          sc.events.once(Phaser.Scenes.Events.BOOT, () => {\n            // console.log(Phaser.Scenes.Events.BOOT, sc.scene.key)\n          });\n        });\n        // game.scene.scenes[0].events.once(Phaser.Scenes.Events.PRE_RENDER, (s) => {\n        //   game.scene.scenes[0].load.on(Phaser.Loader.Events.COMPLETE, () =>\n        //   setReady(true)\n        //   );\n        // });\n      },\n    };\n    const game = new Phaser.Game(args);\n    ref.current = game;\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  const activeChildren = React.Children.toArray(children).find((ch) => {\n    return ch.props.name === Object.keys(activeScene)[0];\n  });\n  \n  return ready ? (\n    <PhaserProvider scene={game.scene.getScene(Object.keys(activeScene)[0])} sceneProps={Object.values(activeScene)[0]} game={game}>{activeChildren}</PhaserProvider>\n  ) : null;\n});\n\nCanvas.displayName = \"Canvas\";\nexport default Canvas;\n","export const TICK_TIME = 250\nexport const PLAYER_TICK_TIME = TICK_TIME - 25\nexport const TILE_SIZE = 20\nexport const TILES_BY_SCREEN = 20\n\n// incorrectly, I set SCALE as a constant which is set at the moment this const is imported into modules.\n// since SCALE is dynamic based on screen size, I need to make it a functions to get called every time we need it.\n// it turns out that constant is used in 117 lines by 22 files. To avoid replacing all those occurence, I came out with this hack:\n// convert SCALE into a functions and overcharche it method toString so all the places where is used lik num + SCALE invokes\n// the calculation of scale each time.\n/* proof:\n  const SCALE = () => 25\n  SCALE() // outputs 25\n  SCALE // outputs function\n  SCALE.toString = SCALE\n  5 + SCALE // outputs 30\n*/\nexport const SCALE = () => Math.round((window.innerWidth/TILES_BY_SCREEN * 100 / TILE_SIZE/100)*100)/100\nSCALE.toString = SCALE\n\nexport const PIXEL_NAME_BG = {\n  TRANSPARENT: '00ff00',\n  BACKGROUND: '000000',\n  BG_TOP: 'ffffff',\n  BG_RIGHT: '00cc00',\n  BG_BOTTOM: '999999',\n  BG_LEFT: '0000cc',\n  BG_TOP_RIGHT: '00ff00',\n  BG_BOTTOM_RIGHT: '009900',\n  BG_BOTTOM_LEFT: '000099',\n  BG_TOP_LEFT: '0000ff',\n  BG_INSET_TOP_RIGHT: 'cc0000',\n  BG_INSET_BOTTOM_RIGHT: '660000',\n  BG_INSET_BOTTOM_LEFT: '990000',\n  BG_INSET_TOP_LEFT: 'ff0000',\n}\nexport const PIXEL_NAME = {\n  EMPTY: '000000',\n  PLAYER: 'ff00ff',\n  GROUND: '663300',\n  BOULDER: '999999',\n  PILLAR: '545454',\n  WALL: '0000ff',\n  ENEMY: 'ff0000',\n  JEWEL: 'ffff00',\n  BARREL: '00ffff',\n  EXPLOSION: 'ffffff',\n  INTERACTION: '00ff00',\n  MUSHROOM: '9900ff',\n  BRO: '22a5f6',\n  DWARF: 'f29900',\n  EXIT: '00cc00',\n  ART: '1d4ee1',\n  ART2: '000099',\n  HANGING_2: 'd2fca8',\n  HANGING_3: '7ea854',\n  HANGING_4: '547e2a',\n  HANGING_5: '2a5400',\n  DEBRIS: 'a82a2a'\n}\n\nexport const DIRS = {\n  DOWN: 'ArrowDown',\n  UP: 'ArrowUp',\n  LEFT: 'ArrowLeft',\n  RIGHT: 'ArrowRight',\n}\nexport const BG_PIXEL_TO_TILEMAP_POSITION = {\n  [PIXEL_NAME_BG.TRANSPARENT]: 81,\n  [PIXEL_NAME_BG.BACKGROUND]: 0,\n  [PIXEL_NAME_BG.BG_TOP]: 71,\n  [PIXEL_NAME_BG.BG_RIGHT]: 82,\n  [PIXEL_NAME_BG.BG_BOTTOM]: 91,\n  [PIXEL_NAME_BG.BG_LEFT]: 80,\n  [PIXEL_NAME_BG.BG_TOP_RIGHT]: 72,\n  [PIXEL_NAME_BG.BG_BOTTOM_RIGHT]: 92,\n  [PIXEL_NAME_BG.BG_BOTTOM_LEFT]: 90,\n  [PIXEL_NAME_BG.BG_TOP_LEFT]: 70,\n  [PIXEL_NAME_BG.BG_INSET_TOP_RIGHT]: 85,\n  [PIXEL_NAME_BG.BG_INSET_BOTTOM_RIGHT]: 83,\n  [PIXEL_NAME_BG.BG_INSET_BOTTOM_LEFT]: 84,\n  [PIXEL_NAME_BG.BG_INSET_TOP_LEFT]: 86,\n}\nexport const PIXEL_TO_TILEMAP_POSITION = {\n  [PIXEL_NAME.EMPTY]: 0,\n  [PIXEL_NAME.WALL]: 3,\n  [PIXEL_NAME.GROUND]: 2,\n  [PIXEL_NAME.ART]: 0,\n  [PIXEL_NAME.ART2]: 20,\n  [PIXEL_NAME.EXIT+'_1']: 18,\n  [PIXEL_NAME.EXIT+'_2']: 48,\n  [PIXEL_NAME.EXIT+'_3']: 88,\n  [PIXEL_NAME.DEBRIS]: 1,\n  calculateGroundTileWithNeighbours: (x, y, data) => {\n    const W = (data[x]||[])[y-1] === PIXEL_NAME.GROUND ? 'W' : '-'\n    const N = (data[x-1]||[])[y] === PIXEL_NAME.GROUND ? 'N' : '-'\n    const E = (data[x]||[])[y+1] === PIXEL_NAME.GROUND ? 'E' : '-'\n    const S = (data[x+1]||[])[y] === PIXEL_NAME.GROUND ? 'S' : '-'\n    switch(`${N}${E}${S}${W}`) {\n      case '----':\n        default:\n        return 2\n      case 'NESW':\n        return 51\n      case 'N---':\n        return 63\n      case '-E--':\n        return 44\n      case '--S-':\n        return 43\n      case '---W':\n        return 46\n      case 'NE--':\n        return 60\n      case '-ES-':\n        return 40\n      case '--SW':\n        return 42\n      case 'N--W':\n        return 62\n      case 'NES-':\n        return 50\n      case '-ESW':\n        return 41\n      case 'N-SW':\n        return 52\n      case 'NE-W':\n        return 61\n      case 'N-S-':\n        return 53\n      case '-E-W':\n        return 45\n    }\n  },\n  calculateWallTileWithNeighbours: (x, y, data) => {\n    const W = (data[x]||[])[y-1] === PIXEL_NAME.WALL || [PIXEL_NAME.ART, PIXEL_NAME.ART2].includes((data[x]||[])[y-1]) || [PIXEL_NAME.HANGING_2, PIXEL_NAME.HANGING_3, PIXEL_NAME.HANGING_4, PIXEL_NAME.HANGING_5].includes((data[x]||[])[y-1]) ? 'W' : '-'\n    const N = (data[x-1]||[])[y] === PIXEL_NAME.WALL || [PIXEL_NAME.ART, PIXEL_NAME.ART2].includes((data[x-1]||[])[y]) || [PIXEL_NAME.HANGING_2, PIXEL_NAME.HANGING_3, PIXEL_NAME.HANGING_4, PIXEL_NAME.HANGING_5].includes((data[x-1]||[])[y]) ? 'N' : '-'\n    const E = (data[x]||[])[y+1] === PIXEL_NAME.WALL || [PIXEL_NAME.ART, PIXEL_NAME.ART2].includes((data[x]||[])[y+1]) || [PIXEL_NAME.HANGING_2, PIXEL_NAME.HANGING_3, PIXEL_NAME.HANGING_4, PIXEL_NAME.HANGING_5].includes((data[x]||[])[y+1]) ? 'E' : '-'\n    const S = (data[x+1]||[])[y] === PIXEL_NAME.WALL || [PIXEL_NAME.ART, PIXEL_NAME.ART2].includes((data[x+1]||[])[y]) || [PIXEL_NAME.HANGING_2, PIXEL_NAME.HANGING_3, PIXEL_NAME.HANGING_4, PIXEL_NAME.HANGING_5].includes((data[x+1]||[])[y]) ? 'S' : '-'\n    switch(`${N}${E}${S}${W}`) {\n      case '----':\n        default:\n        return 3\n      case 'NESW':\n        return 21\n      case 'N---':\n        return 33\n      case '-E--':\n        return 14\n      case '--S-':\n        return 13\n      case '---W':\n        return 16\n      case 'NE--':\n        return 30\n      case '-ES-':\n        return 10\n      case '--SW':\n        return 12\n      case 'N--W':\n        return 32\n      case 'NES-':\n        return 20\n      case '-ESW':\n        return 11\n      case 'N-SW':\n        return 22\n      case 'NE-W':\n        return 31\n      case 'N-S-':\n        return 23\n      case '-E-W':\n        return 15\n    }\n  },\n  // Dirt earth\n  calculateWallTileWithNeighboursDirtEarth: (x, y, data) => {\n    const W = (data[x]||[])[y-1] === PIXEL_NAME.WALL ? 'W' : '-'\n    const N = (data[x-1]||[])[y] === PIXEL_NAME.WALL ? 'N' : '-'\n    const E = (data[x]||[])[y+1] === PIXEL_NAME.WALL ? 'E' : '-'\n    const S = (data[x+1]||[])[y] === PIXEL_NAME.WALL ? 'S' : '-'\n    switch(`${N}${E}${S}${W}`) {\n      case '----':\n        default:\n        return 2\n      case 'NESW':\n        return 51\n      case 'N---':\n        return 63\n      case '-E--':\n        return 44\n      case '--S-':\n        return 43\n      case '---W':\n        return 46\n      case 'NE--':\n        return 60\n      case '-ES-':\n        return 40\n      case '--SW':\n        return 42\n      case 'N--W':\n        return 62\n      case 'NES-':\n        return 50\n      case '-ESW':\n        return 41\n      case 'N-SW':\n        return 52\n      case 'NE-W':\n        return 61\n      case 'N-S-':\n        return 53\n      case '-E-W':\n        return 45\n    }\n  }\n}","// import * as Localization from 'expo-localization'\nimport memoize from 'lodash.memoize'\nimport i18n from 'i18n-js'\nimport dictionary_en from './dictionary_en.json'\nimport dictionary_es from './dictionary_es.json'\n\nconst getDictionary = (lang) => {\n  switch(lang) {\n    case 'en':\n    default:\n      return dictionary_en\n    case 'es':\n      return dictionary_es\n  }\n}\n\nconst translationGetters = {\n  en: () => getDictionary('en'),\n  es: () => getDictionary('es'),\n}\n\nexport const translate = memoize(\n  (key, config) => i18n.t(key, config),\n  (key, config) => (config ? key + JSON.stringify(config) : key),\n)\n\nexport const getLocale = () => i18n.locale\nexport const getDayRefFormat = (locale = getLocale()) => {\n  switch (locale) {\n    case 'es':\n      return 'DD [de] MMMM'\n    default:\n      return 'MMMM Do'\n  }\n}\n\n// in Spanish verbs in past participle are pluralizable meanwhile in English they aren't.\n// currently only en is not pluralizeble.\nexport const isPastParticiplePluralizable = (locale = getLocale()) =>\n  ({\n    en: false,\n    es: true,\n  }[locale])\n\nexport const setI18nConfig = async (callback) => {\n  // fallback if no available language fits\n  const fallback = 'en'\n\n  // const { locale: localeComplete } = await Localization.getLocalizationAsync()\n  let locale = navigator.language.substring(0, 2)\n\n  if (!Object.keys(translationGetters).includes(locale)) locale = fallback\n\n  const languageTag = 'es'// locale\n\n  const dictionary = await translationGetters[languageTag]()\n  // set i18n-js config\n  // clear translation cache\n  // if (translate.cache.clear) translate.cache.clear()\n  i18n.translations = { [languageTag]: dictionary }\n  i18n.locale = languageTag\n  callback(true)\n}\n","export default class BaseObject {\n  constructor() {\n    this.eventListeners = []\n    this.classes = [] // helper fot isClass matching\n  }\n\n  listClasses() {\n    let proto = this.__proto__\n    const classes = []\n    while(proto.constructor.className !== undefined) {\n      classes.push(proto.constructor.className)\n      proto = proto.__proto__\n    }\n    return classes\n  }\n\n  isClass(givenClass) {\n    if(this.classes.length === 0) {\n      this.classes = this.listClasses()\n    }\n    \n    return this.classes.includes(givenClass.className)\n    \n    // if(Class.className === 'Player') {\n    //   window.test = this\n    // }\n    // return this.constructor.className === Class.className\n  }\n  addEventListener(eventName, listener) {\n    this.eventListeners.push([eventName, listener])\n    return () => {\n      this.eventListeners = this.eventListeners.filter(l => l[1] !== listener)\n    }\n  }\n  dispatchEvent(eventName, payload) {\n    this.eventListeners.filter(l => l[0] === eventName).forEach(l => l(payload, this))\n  }\n}","import BaseObject from \"./BaseObject\"\n\nexport default class GameObject extends BaseObject {\n  constructor({ id, isRigid, isBreakable, isFlat, isPickable, isCrushable, level }) {\n    super()\n    this.id = id\n    // can't be moved nor affected by gravity\n    // wall, ground\n    this.isRigid = isRigid\n\n    // destroyable under circumstances like explosions\n    // ground, boulder, diamond\n    this.isBreakable = isBreakable\n\n    // rounded objects (like boulders and diamonds) above remain still\n    // character, ground, wall\n    this.isFlat = isFlat\n\n    // can be collected by characters\n    // diamond\n    this.isPickable = isPickable\n\n    // crush under pression\n    // character, enemies, dynamite, barrel\n    this.isCrushable = isCrushable\n\n    // energy to break things\n    this.power = 0\n\n    // how resistant to brake it is\n    this.strength = 0\n\n    // how hard can push\n    this.force = 0\n\n    // how much force can resist before move\n    this.weight = 0\n\n    this.level = level\n\n    this.position = null\n    this.alien = null\n    this.isMoveable = !this.isRigid\n  }\n\n  setPosition(coords) {\n    this.position = coords\n  }\n\n  canMove() {\n    return this.isMoveable\n  }\n  overrunBy(){}\n  runningOver(){}\n  canFallDown() { return false }\n  canFallLeft() { return false }\n  canFallRight() { return false }\n  addedToScene() {}\n  \n}\n\nGameObject.className = 'GameObject'\n","import BaseObject from \"./BaseObject\"\n\nexport default class Empty extends BaseObject {\n  constructor(id, level) {\n    super()\n    this.id = id\n    this.level = level\n    this.isEmpty = true\n  }\n  setPosition(coords) {\n    this.position = coords\n  }\n}\n\nEmpty.className = 'Empty'\n","import Phaser from 'phaser'\nimport GameObject from './GameObject'\nimport Empty from './Empty'\nimport { PIXEL_NAME, TICK_TIME } from '../../utils/constants'\n\nexport default class Explosion extends GameObject {\n  constructor(id, level) {\n    super({\n      id,\n      isRigid: false,\n      isBreakable: false,\n      isFlat: true,\n      isPickable: false,\n      isCrushable: false,\n      level\n    })\n    this.power = 10\n    this.strength = 10\n  }\n  setPosition(coords) {\n    super.setPosition(coords)\n    const { x, y } = coords\n    \n    const layer = this.level.scene.children.getByName('layer_1')\n    // when player dies and level is restarting but explosions still occuring, layer is null\n    if(!layer) return false\n\n    const { tilemap: map } = layer\n    \n    const explosion = this.level.scene.add.sprite(48, 16).setOrigin(0.125, 0.125).play('explosion_explode')\n    explosion.setScale(layer.scaleX)\n    explosion.x = map.tileToWorldX(x)\n    explosion.y = map.tileToWorldY(y)\n\n    // this.level.pause()\n    explosion.on(Phaser.Animations.Events.ANIMATION_COMPLETE, () => {\n      explosion.destroy()\n    })\n          \n    \n    this.alien = explosion\n\n    this.level.replaceByEmpty(this)\n    this.level.onNextTick((lvl) => {\n      // destroy explosion in the next tick or it will prevent the objects above it to wait for a 2nd tick to start falling\n      // this is bcs barrels explode with an offset of tick/2 but explosion places are reserved when barrel cruashes\n      // therefore the explosions takes 1 tick from half to half causing the object above to wait an extra tick\n\n      lvl.objects[y][x] = new Empty(PIXEL_NAME.EMPTY, this.level)\n      // lvl.replaceByEmpty(this)\n    })\n    \n  }\n}\n\nExplosion.className = 'Explosion'\n","import GameObject from './GameObject'\n\nexport default class Destroyable extends GameObject {\n  constructor(props) {\n    super(props)\n    this.inactive = false\n  }\n  overrunBy(el) {\n    if(el.power > this.strength) {\n      this.inactive = true\n      this.level.onDestroyElement(this)\n    }\n  }\n}\n\nDestroyable.className = 'Destroyable'\n","import Destroyable from './Destroyable'\n\nexport default class Moveable extends Destroyable {\n  move({ x, y }) {\n    super.setPosition({ x, y})\n    // this.isMoving = false\n  }\n}\n\nMoveable.className = 'Moveable'\n","import Moveable from './Moveable'\n\nexport default class Fallable extends Moveable {\n  constructor(props) {\n    super(props)\n    this.isFalling = 0 // increment on each loop that the element is falling\n  }\n\n  canFallDown() {\n    const nextPos = { x: this.position.x, y: this.position.y + 1 }\n    const destinationInBounds = this.level.isDestinationInBounds(nextPos.x, nextPos.y)\n    const destinationElement = destinationInBounds && this.level.getObjectAt(nextPos.x, nextPos.y)\n    const destinationIsEmpty = this.level.isDestinationEmpty(nextPos.x, nextPos.y)\n    const destinationIsCrushable = destinationElement.isCrushable && this.isFalling\n    const canFall = destinationIsEmpty || destinationIsCrushable\n\n    return canFall\n  }\n  canRollTo(x, y) {\n    const nextPos = { x, y }\n    const destinationInBounds = this.level.isDestinationInBounds(nextPos.x, nextPos.y)\n    const pathElement = destinationInBounds && this.level.getObjectAt(nextPos.x, this.position.y)\n    const pathClear = destinationInBounds && this.level.objectIsEmpty(pathElement)\n    const destinationElement = destinationInBounds && this.level.getObjectAt(nextPos.x, nextPos.y)\n    const destinationIsEmpty = this.level.objectIsEmpty(destinationElement)\n    const restingElement = destinationInBounds && this.level.getObjectAt(this.position.x, this.position.y + 1)\n    const canRest = !this.level.isDestinationEmpty(this.position.x, this.position.y + 1) && restingElement.isFlat\n    const canRoll = destinationInBounds && destinationIsEmpty && pathClear && !canRest && restingElement && !restingElement.isFalling\n\n    return canRoll\n  }\n  canFallRight() {\n    return !this.canFallDown() && this.canRollTo(this.position.x + 1, this.position.y + 1)\n  }\n  canFallLeft() {\n    return !this.canFallDown() && this.canRollTo(this.position.x - 1, this.position.y + 1)\n  }\n}\n\nFallable.className = 'Fallable'\n","import Explosion from './Explosion'\nimport Fallable from './Fallable'\n\nexport default class Boulder extends Fallable {\n  constructor(id, level) {\n    super({\n      id,\n      isRigid: false,\n      isBreakable: true,\n      isFlat: false,\n      isPickable: false,\n      isCrushable: false,\n      level\n    })\n    this.strength = 5\n  }\n\n  overrunBy(el) {\n    if(el.isClass(Explosion)) {\n      this.alien.visible = false\n      this.alien.destroy()\n      this.inactive = true\n    }\n  }\n}\nBoulder.className = 'Boulder'\n","import {\n  PIXEL_NAME,\n  PIXEL_TO_TILEMAP_POSITION,\n  SCALE,\n} from \"../../utils/constants\";\nimport Explosion from \"./Explosion\";\nimport GameObject from \"./GameObject\";\nimport Phaser from \"phaser\";\nimport UI from \"../UI\";\n\nexport default class Debris extends GameObject {\n  constructor(id, level) {\n    super({\n      id,\n      isRigid: true,\n      isBreakable: true,\n      isFlat: true,\n      isPickable: false,\n      isCrushable: false,\n      level,\n    });\n    this.strength = 9; // one less than explosion\n  }\n  overrunBy(el) {\n    if (el && el.isClass(Explosion)) {\n      const layer = this.level.scene.children.getByName(\"layer_1\");\n      const { tilemap: map } = layer;\n\n      map.putTileAt(\n        PIXEL_TO_TILEMAP_POSITION[PIXEL_NAME.EMPTY],\n        this.position.x,\n        this.position.y,\n        false,\n        \"layer_1\"\n      );\n    } else {\n      const layer = this.level.scene.children.getByName(\"layer_1\");\n      const { tilemap: map } = layer;\n\n      map.putTileAt(\n        PIXEL_TO_TILEMAP_POSITION[PIXEL_NAME.EMPTY],\n        this.position.x,\n        this.position.y,\n        false,\n        \"layer_1\"\n      );\n      // destroyed by earthquake\n      this.break_effect = this.level.scene.add\n        .sprite(48, 16)\n        .setOrigin(0, 0.25);\n      this.break_effect.setScale(SCALE);\n      this.break_effect.depth = 4;\n      this.break_effect.x = UI.tileToScreen(this.position.x);\n      this.break_effect.y = UI.tileToScreen(this.position.y);\n      this.break_effect.play(\"ground_disolves\");\n      this.break_effect.setFlipY(true);\n      this.break_effect.on(Phaser.Animations.Events.ANIMATION_COMPLETE, () => {\n        this.break_effect.destroy();\n      });\n    }\n  }\n}\n\nDebris.className = \"Debris\";\n","import Explosion from './Explosion'\nimport Fallable from './Fallable'\n\nexport default class Pillar extends Fallable {\n  constructor(id, level) {\n    super({\n      id,\n      isRigid: false,\n      isBreakable: true,\n      isFlat: true,\n      isPickable: false,\n      isCrushable: false,\n      level\n    })\n    this.strength = 5\n  }\n\n  overrunBy(el) {\n    if(el.constructor.className === Explosion.className) {\n      this.alien.visible = false\n      this.alien.destroy()\n      // this.alien = null\n      // this.level.onDestroyElement(this)\n    }\n  }\n}\nPillar.className = 'Pillar'\n","import Phaser from \"phaser\";\nimport {\n  TICK_TIME,\n  PLAYER_TICK_TIME,\n  PIXEL_NAME,\n  DIRS,\n  PIXEL_TO_TILEMAP_POSITION,\n  SCALE,\n} from \"../../utils/constants\";\nimport {\n  Player,\n  Boulder,\n  Wall,\n  Empty,\n  Ground,\n  Barrel,\n  Enemy,\n  Interactive,\n  Jewel,\n  Explosion,\n  Mushroom,\n  NPCharacter,\n  Exit,\n} from \"../objects\";\nimport Character from \"../objects/Character\";\nimport Debris from \"../objects/Debris\";\nimport Fallable from \"../objects/Fallable\";\nimport Pillar from \"../objects/Pillar\";\nimport DB from \"../../utils/dbManager\";\nimport UI from \"../UI\";\nimport dbManager from \"../../utils/dbManager\";\n\nclass Level {\n  constructor(config) {\n    this.config = config;\n    this.moveables = [];\n    this.parallelMovables = []; // used for gravity loop on falling objects until they rest\n    this.objects = [];\n    this.interactiveElements = {};\n    this.decorationElements = {};\n    this.scene = null;\n    this.player = null;\n    this.playerTimeoutId = 0;\n    this.focusElement = null; // what camera focus on\n    this.isPaused = false;\n    this.queuedActions = [];\n    // stats\n    this.countDiamonds = 0;\n    this.collectedDiamonds = 0;\n    this.countEnemies = 0;\n    this.killedEnemies = 0;\n    this.countShrooms = 0;\n    this.collectedShrooms = 0;\n    this.totalShroomsAmount = 0;\n    this.prevBest = 0;\n    // flags\n    this.preventDisplayDiamondsGoalAmount = false;\n    // unfinish flag\n    this.unfinished = true;\n    // loop identifier\n    this.tickId = 0;\n  }\n\n  onNextTick(listener) {\n    this.queuedActions.push(listener);\n  }\n  runScheduledActions(id) {\n    const toRun = this.queuedActions;\n    this.queuedActions = [];\n    toRun.forEach((cb) => cb(this));\n  }\n\n  connectToScene(phaserScene) {\n    this.scene = phaserScene;\n    const layer = this.scene.children.getByName(\"layer_1\");\n    const { tilemap: map } = layer;\n    if (this.objects.length) {\n      this.objects = [];\n    }\n\n    this.break_effect = this.scene.add.sprite(48, 16).setOrigin(0, 0.25);\n    this.break_effect.setScale(layer.scaleX);\n    this.break_effect.depth = 4;\n\n    this.pick_effect = this.scene.add.sprite(48, 16).setOrigin(0, 0.25);\n    this.pick_effect.setScale(layer.scaleX);\n    this.pick_effect.depth = 4;\n\n    this.enemy_die_effect = this.scene.add.sprite(48, 16).setOrigin(0, 0.25);\n    this.enemy_die_effect.setScale(layer.scaleX);\n    this.enemy_die_effect.depth = 4;\n\n    let intOrder = 0;\n    this.objects = this.config.map((r, y) =>\n      r.map((c, x) => {\n        // factory\n        let element;\n        switch (c) {\n          case PIXEL_NAME.WALL:\n            element = new Wall(c, this);\n            element.setPosition({ x, y });\n            break;\n          case PIXEL_NAME.DEBRIS:\n            element = new Debris(c, this);\n            element.setPosition({ x, y });\n            break;\n          case PIXEL_NAME.GROUND:\n            element = new Ground(c, this);\n            element.setPosition({ x, y });\n            break;\n          case PIXEL_NAME.BOULDER:\n            const boulder = this.scene.add\n              .sprite(48, 16)\n              .setOrigin(0, 0.25)\n              .play(\"boulder_idle\");\n            boulder.setScale(layer.scaleX);\n            boulder.x = map.tileToWorldX(x);\n            boulder.y = map.tileToWorldY(y);\n\n            element = new Boulder(c, this);\n            element.alien = boulder;\n            break;\n          case PIXEL_NAME.PILLAR:\n            const pillar = this.scene.add\n              .sprite(48, 16)\n              .setOrigin(0.05, 0.2)\n              .play(\"pillar_idle\");\n            pillar.setScale(layer.scaleX);\n            pillar.x = map.tileToWorldX(x);\n            pillar.y = map.tileToWorldY(y);\n\n            element = new Pillar(c, this);\n            element.alien = pillar;\n            break;\n          case PIXEL_NAME.JEWEL:\n            const diamond = this.scene.add\n              .sprite(48, 16)\n              .setOrigin(0.05, 0.2)\n              .play(\"diamond_idle\");\n            diamond.setScale(layer.scaleX);\n            diamond.x = map.tileToWorldX(x);\n            diamond.y = map.tileToWorldY(y);\n\n            this.countDiamonds++;\n\n            element = new Jewel(c, this);\n            element.order = this.countDiamonds;\n            element.alien = diamond;\n            break;\n          case PIXEL_NAME.MUSHROOM:\n            if (\n              dbManager.get(this.constructor.key) &&\n              dbManager.get(this.constructor.key).collectedShrooms !== 0\n            ) {\n              this.collectedShrooms = dbManager.get(\n                this.constructor.key\n              ).collectedShrooms;\n              element = new Empty(c, this);\n            } else {\n              const mushroom = this.scene.add\n                .sprite(48, 16)\n                .setOrigin(0, 0.25)\n                .play(\"mushroom_idle\");\n              mushroom.setScale(layer.scaleX);\n              mushroom.x = map.tileToWorldX(x);\n              mushroom.y = map.tileToWorldY(y);\n\n              element = new Mushroom(c, this);\n              element.alien = mushroom;\n            }\n            this.countShrooms++;\n            break;\n          case PIXEL_NAME.BARREL:\n            const barrel = this.scene.add\n              .sprite(48, 16)\n              .setOrigin(0, 0.2)\n              .play(\"barrel_idle\");\n            barrel.setScale(layer.scaleX);\n\n            barrel.x = map.tileToWorldX(x);\n            barrel.y = map.tileToWorldY(y);\n\n            element = new Barrel(c, this);\n            element.alien = barrel;\n            break;\n          case PIXEL_NAME.PLAYER:\n            const player = this.scene.add.sprite(48, 16).setOrigin(0, 0.25);\n            player.setScale(layer.scaleX);\n            player.x = map.tileToWorldX(x);\n            player.y = map.tileToWorldY(y) + 5;\n\n            player.name = \"brave\";\n            player.on(Phaser.Animations.Events.ANIMATION_COMPLETE, () => {\n              if (!player.isMoving && !player.inactive) {\n                player.play(\"brave_idle\");\n              }\n            });\n\n            element = new Player(c, this);\n            element.alien = player;\n            element.animIdle();\n\n            // add shortcut reference\n            this.player = element;\n            break;\n          case PIXEL_NAME.BRO:\n            const follower = this.scene.add.sprite(48, 16).setOrigin(0, 0.25);\n            follower.setScale(layer.scaleX);\n            follower.x = map.tileToWorldX(x);\n            follower.y = map.tileToWorldY(y);\n\n            follower.name = \"bro\";\n            follower.on(Phaser.Animations.Events.ANIMATION_COMPLETE, () => {\n              if (!follower.isMoving) {\n                follower.play(\"bro_idle\");\n              }\n            });\n\n            element = new NPCharacter(c, this, \"bro\");\n            element.alien = follower;\n            element.isFollowing = true;\n            element.animIdle();\n\n            // add shortcut reference\n            this.follower = element;\n            break;\n          case PIXEL_NAME.DWARF:\n            const leader = this.scene.add.sprite(48, 16).setOrigin(0, 0.25);\n            leader.setScale(layer.scaleX);\n            leader.x = map.tileToWorldX(x);\n            leader.y = map.tileToWorldY(y);\n\n            leader.name = \"dwarf\";\n            leader.on(Phaser.Animations.Events.ANIMATION_COMPLETE, () => {\n              if (!leader.isMoving) {\n                leader.play(\"dwarf_idle\");\n              }\n            });\n\n            element = new NPCharacter(c, this, \"dwarf\");\n            element.alien = leader;\n            // element.isFollowing = true\n            element.isLeading = true;\n            element.animIdle();\n\n            // add shortcut reference\n            this.leader = element;\n            break;\n          case PIXEL_NAME.ENEMY:\n            const enemy = this.scene.add\n              .sprite(48, 16)\n              .setOrigin(0.125, 0.125)\n              .play(\"bat_move\");\n            enemy.setScale(layer.scaleX);\n            enemy.x = map.tileToWorldX(x);\n            enemy.y = map.tileToWorldY(y);\n\n            this.countEnemies++;\n\n            element = new Enemy(c, this);\n            element.alien = enemy;\n            break;\n\n          case PIXEL_NAME.EXIT:\n          case PIXEL_NAME.INTERACTION:\n            const intElement =\n              c === PIXEL_NAME.EXIT\n                ? new Exit(c, this)\n                : new Interactive(c, this);\n            intElement.order = intOrder++;\n            this.interactiveElements[`${x}-${y}`] = intElement;\n            intElement.setPosition({ x, y });\n\n            // keep old hook when interactive element is added\n            this.onAddElement(intElement);\n            // instead of interactive element, add an empty element to the current position\n            element = new Empty(c, this);\n            break;\n          default:\n            element = new Empty(c, this);\n        }\n        element.setPosition({ x, y });\n        if (!this.objectIsEmpty(element) && !element.isRigid) {\n          this.moveables.push(element);\n        }\n        this.onAddElement(element);\n        if (!element.isClass(Empty)) {\n          element.addedToScene();\n        }\n        return element;\n      })\n    );\n\n    this.focusElement = this.player;\n\n    // unfinish flag\n    const dbData = dbManager.get(this.constructor.key);\n    this.unfinished = !dbData || (dbData && dbData.comp === 0);\n    console.log(this.unfinished);\n\n    if (this.diamondsGoal > 0) {\n      // draw exit block only on unfinished levels\n      if (this.unfinished) {\n        const exit = Object.values(this.interactiveElements).find((el) =>\n          el.isClass(Exit)\n        );\n        const block = this.scene.add\n          .sprite(48, 16)\n          .setOrigin(0, 0.25)\n          .play(\"exit_block\");\n        block.setScale(layer.scaleX);\n        block.x = map.tileToWorldX(exit.position.x - 2);\n        block.y = map.tileToWorldY(exit.position.y);\n\n        const exitBlock = new Wall(PIXEL_NAME.WALL, this);\n        exitBlock.setPosition({ x: exit.position.x - 2, y: exit.position.y });\n        exitBlock.alien = block;\n        this.objects[exit.position.y][exit.position.x - 2] = exitBlock;\n        exit.block = exitBlock;\n      }\n\n      // only level 6 needs to have diamonds goal but do not display it until a dialog happens\n      if (!this.preventDisplayDiamondsGoalAmount) {\n        setTimeout(() => {\n          this.scene.events.emit(\"score:diamond_goal_set\", this.diamondsGoal);\n        }, 1500);\n      }\n    }\n\n    // awaits for child level object set goals\n    this.onNextTick(() => {\n      if (!DB.get(this.constructor.key)) {\n        DB.set(this.constructor.key, {\n          countDiamonds: this.countDiamonds,\n          collectedDiamonds: this.collectedDiamonds,\n          countEnemies: this.countEnemies,\n          killedEnemies: this.killedEnemies,\n          countShrooms: this.countShrooms,\n          collectedShrooms: this.collectedShrooms,\n          comp: 0,\n          prevBest: this.prevBest,\n        });\n      }\n    });\n\n    // this.totalShroomsAmount = dbManager.getLevels().reduce((r, l) => r + l.collectedShrooms, 0);\n    this.totalShroomsAmount = dbManager.get(\"totalShroomsAmount\") || 0;\n  }\n\n  jumpIntoParallelGravity(el) {\n    const idx = this.moveables.findIndex((e) => e === el);\n    this.moveables.splice(idx, 1);\n    el.inParallelGravity = true;\n    this.parallelMovables.push(el);\n  }\n  goBackToMainGravity(el) {\n    // no way back when incative (like after explosion)\n    if (el.inactive) return false;\n\n    const idx = this.parallelMovables.findIndex((e) => e === el);\n    // nothing to move from parallel movables\n    if (idx === -1) return false;\n\n    this.parallelMovables.splice(idx, 1);\n    el.inParallelGravity = false;\n    this.moveables.push(el);\n  }\n  explodeLoop(barrels) {\n    barrels.forEach((el) => {\n      const canFallDown = el.canFallDown();\n      if (!canFallDown && el.isFalling) {\n        el.explode();\n      }\n    });\n  }\n  gravityLoop(parallelWorld) {\n    const moveables = parallelWorld || this.moveables;\n    if (this.isPaused) {\n      return;\n    }\n\n    if (!parallelWorld) {\n      this.runScheduledActions();\n    }\n\n    this.explodeLoop(moveables.filter((o) => o.isClass(Barrel)));\n    moveables\n      .sort((a, b) => a.position.y - b.position.y)\n\n      // .sort((a, b) => {\n      //   // move Barrels at the beginning of the movables list.\n      //   // if more than 1 Barrel, sort them by bottom to top: move first those in the bottom of the screen (higher y value)\n      //   if(a.isClass(Barrel) && b.isClass(Barrel)) {\n      //     // from bottom to top\n      //     return b.position.y - a.position.y\n      //   } else if(!a.isClass(Barrel) || b.isClass(Barrel)) {\n      //     return 1\n      //   } else if(a.isClass(Barrel) || !b.isClass(Barrel)) {\n      //     return -1\n      //   } else {\n      //     // from top to bottom\n      //     return a.position.y - b.position.y\n      //   }\n      // })\n      .forEach((el) => {\n        // if (el.beingPusehd) {\n        //   el.beingPusehd = false\n        //   return\n        // }\n        const canFallDown = el.canFallDown();\n        const canFallLeft = el.canFallLeft();\n        const canFallRight = el.canFallRight();\n        let nextPos;\n        if (canFallDown) {\n          nextPos = { x: el.position.x, y: el.position.y + 1 };\n        }\n        if (!canFallDown && canFallLeft) {\n          nextPos = { x: el.position.x - 1, y: el.position.y };\n          if (el.isFalling) {\n            nextPos.y++;\n          }\n        }\n        if (!canFallDown && !canFallLeft && canFallRight) {\n          nextPos = { x: el.position.x + 1, y: el.position.y };\n          if (el.isFalling) {\n            nextPos.y++;\n          }\n        }\n\n        if (nextPos) {\n          this.moveObject(el, nextPos);\n          if (\n            el.isFalling &&\n            (canFallLeft || canFallRight) &&\n            el.isClass(Jewel)\n          ) {\n            this.scene.events.emit(\"sounds:gem_hit\");\n          }\n          if (\n            el.isFalling &&\n            (canFallLeft || canFallRight) &&\n            (el.isClass(Boulder) || el.isClass(Pillar))\n          ) {\n            this.scene.events.emit(\"sounds:rock_hit_hard\");\n          }\n\n          el.isFalling++;\n        } else {\n          if (el.isFalling && (el.isClass(Boulder) || el.isClass(Pillar))) {\n            const objectBelow = this.getObjectAt(\n              el.position.x,\n              el.position.y + 1\n            );\n            if (objectBelow && objectBelow.isClass(Ground)) {\n              this.scene.events.emit(\"sounds:rock_hit_soft\");\n            } else {\n              this.scene.events.emit(\"sounds:rock_hit_hard\");\n            }\n          }\n          if (el.isFalling && el.isClass(Jewel)) {\n            this.scene.events.emit(\"sounds:gem_hit\");\n          }\n          // if (el.isFalling && el.isClass(Barrel)) {\n          //   el.explode();\n          // }\n\n          el.isFalling = 0;\n        }\n\n        if (!el.isFalling && el.inParallelGravity) {\n          this.goBackToMainGravity(el);\n        }\n      });\n\n    if (!parallelWorld) {\n      this.enemiesLoop();\n      // this.runScheduledActions();\n    }\n  }\n  enemiesLoop() {\n    if (this.isPaused) {\n      return;\n    }\n    let nextPos,\n      neighbour,\n      isDestinationEmpty,\n      isPerpToAnchor,\n      newAnchor,\n      nextDir,\n      backToTrackDir,\n      nextAnchorPos;\n\n    const helperDirCalc = (\n      enemy,\n      nextPos,\n      nextDir,\n      backToTrackDir,\n      nextAnchorPos\n    ) => {\n      neighbour = this.getObjectAt(nextPos.x, nextPos.y);\n      isDestinationEmpty =\n        this.objectIsEmpty(neighbour) ||\n        (neighbour && neighbour.isClass(Player)); // this.isDestinationEmpty(nextPos.x, nextPos.y)\n      // if (!isDestinationEmpty && !enemy.anchorPosition) {\n      //   enemy.anchorPosition = neighbour.position\n      //   enemy.moveIntentDir = nextDir\n      // }\n      if (isDestinationEmpty && neighbour && neighbour.isClass(Player)) {\n        this.moveObject(enemy, nextPos);\n      }\n      if (isDestinationEmpty) {\n        if (!enemy.anchorPosition) {\n          enemy.moveIntentDir = nextDir;\n          return;\n        }\n        isPerpToAnchor =\n          enemy.position.x === enemy.anchorPosition.x ||\n          enemy.position.y === enemy.anchorPosition.y;\n        // scenario 1: enemy is perpendicular to anchor\n        if (isPerpToAnchor) {\n          // updates anchor counter clockwise\n          newAnchor = this.getObjectAt(nextAnchorPos.x, nextAnchorPos.y);\n          if (\n            !this.objectIsEmpty(newAnchor) &&\n            !newAnchor.isFalling &&\n            !newAnchor.isClass(Player)\n          ) {\n            enemy.anchorPosition = newAnchor.position;\n          } else {\n            enemy.moveIntentDir = backToTrackDir;\n          }\n        }\n        this.moveObject(enemy, nextPos);\n      } else {\n        enemy.anchorPosition = !neighbour.isFalling ? neighbour.position : null;\n        enemy.moveIntentDir = nextDir;\n      }\n    };\n    this.moveables\n      .filter((el) => el.isClass(Enemy))\n      .forEach((enemy) => {\n        // potential path finding mechanism @see https://github.com/qiao/PathFinding.js\n        // if(!enemy.path) {\n        //   const grid = new window.PF.Grid(this.objects.map(row => row.map(el => el.isEmpty ? 0 : 1)));\n        //   enemy.pathfinder = new window.PF.AStarFinder();\n        //   const path = enemy.pathfinder.findPath(enemy.position.x, enemy.position.y, thi.player.position.x, this.player.position.y, grid);\n        // }\n        switch (enemy.moveIntentDir) {\n          case DIRS.UP:\n            nextPos = { x: enemy.position.x, y: enemy.position.y - 1 };\n            nextDir = enemy.scanDirection === \"CW\" ? DIRS.RIGHT : DIRS.LEFT;\n            backToTrackDir =\n              enemy.scanDirection === \"CW\" ? DIRS.LEFT : DIRS.RIGHT;\n            nextAnchorPos =\n              enemy.scanDirection === \"CW\"\n                ? { x: nextPos.x - 1, y: nextPos.y }\n                : { x: nextPos.x + 1, y: nextPos.y };\n            // nextAnchorPos = { x: nextPos.x + 1, y: nextPos.y }\n            helperDirCalc(\n              enemy,\n              nextPos,\n              nextDir,\n              backToTrackDir,\n              nextAnchorPos\n            );\n\n            break;\n          case DIRS.RIGHT:\n            nextPos = { x: enemy.position.x + 1, y: enemy.position.y };\n            nextDir = enemy.scanDirection === \"CW\" ? DIRS.DOWN : DIRS.UP;\n            backToTrackDir = enemy.scanDirection === \"CW\" ? DIRS.UP : DIRS.DOWN;\n            // nextDir = DIRS.UP\n            // backToTrackDir = DIRS.DOWN\n            nextAnchorPos =\n              enemy.scanDirection === \"CW\"\n                ? { x: nextPos.x, y: nextPos.y - 1 }\n                : { x: nextPos.x, y: nextPos.y + 1 };\n            // nextAnchorPos = { x: nextPos.x, y: nextPos.y + 1 }\n            helperDirCalc(\n              enemy,\n              nextPos,\n              nextDir,\n              backToTrackDir,\n              nextAnchorPos\n            );\n\n            break;\n          case DIRS.DOWN:\n            nextPos = { x: enemy.position.x, y: enemy.position.y + 1 };\n            nextDir = enemy.scanDirection === \"CW\" ? DIRS.LEFT : DIRS.RIGHT;\n            backToTrackDir =\n              enemy.scanDirection === \"CW\" ? DIRS.RIGHT : DIRS.LEFT;\n            // nextDir = DIRS.RIGHT\n            // backToTrackDir = DIRS.LEFT\n            nextAnchorPos =\n              enemy.scanDirection === \"CW\"\n                ? { x: nextPos.x + 1, y: nextPos.y }\n                : { x: nextPos.x - 1, y: nextPos.y };\n            // nextAnchorPos = { x: nextPos.x - 1, y: nextPos.y }\n            helperDirCalc(\n              enemy,\n              nextPos,\n              nextDir,\n              backToTrackDir,\n              nextAnchorPos\n            );\n\n            break;\n          case DIRS.LEFT:\n            nextPos = { x: enemy.position.x - 1, y: enemy.position.y };\n            nextDir = enemy.scanDirection === \"CW\" ? DIRS.UP : DIRS.DOWN;\n            backToTrackDir = enemy.scanDirection === \"CW\" ? DIRS.DOWN : DIRS.UP;\n            // nextDir = DIRS.DOWN\n            // backToTrackDir = DIRS.UP\n            nextAnchorPos =\n              enemy.scanDirection === \"CW\"\n                ? { x: nextPos.x, y: nextPos.y + 1 }\n                : { x: nextPos.x, y: nextPos.y - 1 };\n            // nextAnchorPos = { x: nextPos.x, y: nextPos.y - 1 }\n            helperDirCalc(\n              enemy,\n              nextPos,\n              nextDir,\n              backToTrackDir,\n              nextAnchorPos\n            );\n\n            break;\n\n          default:\n            break;\n        }\n        enemy.loop();\n      });\n  }\n  playerLoop() {\n    if (this.isPaused || this.player.inactive) {\n      return;\n    }\n    clearTimeout(this.playerTimeoutId);\n    const player = this.player;\n    const follower = this.follower;\n    const leader = this.leader;\n\n    const nextPos = { x: player.position.x, y: player.position.y };\n    switch (player.moveIntentDir) {\n      case DIRS.UP:\n        if (player.canMoveUp()) nextPos.y -= 1;\n        break;\n      case DIRS.DOWN:\n        if (player.canMoveDown()) nextPos.y += 1;\n        break;\n      case DIRS.LEFT:\n        if (player.canMoveLeft() || (player.canPushLeft() && player.pushLeft()))\n          nextPos.x -= 1;\n        break;\n      case DIRS.RIGHT:\n        if (\n          player.canMoveRight() ||\n          (player.canPushRight() && player.pushRight())\n        )\n          nextPos.x += 1;\n        break;\n      default:\n        break;\n    }\n    // if ((player.position.x !== nextPos.x || player.position.y !== nextPos.y)) {\n    if (\n      (player.position.x !== nextPos.x || player.position.y !== nextPos.y) &&\n      !player.isMoving\n    ) {\n      player.isMoving = true;\n      if (player.position.x < nextPos.x) {\n        player.animRunLeft();\n      }\n      if (player.position.x > nextPos.x) {\n        player.animRunRight();\n      }\n\n      // const isSwitch = nextPos.x === follower.position.x && nextPos.y === follower.position.y\n\n      this.scene.events.emit(\"player_moves\", nextPos);\n      // save last player position\n      const followerNextPos = player.position;\n      // move player\n      this.moveObject(player, nextPos);\n      // updates follower\n      if (follower && follower.isFollowing) {\n        follower.moveIntentDir =\n          follower.position.y < followerNextPos.y\n            ? DIRS.DOWN\n            : follower.moveIntentDir;\n        follower.moveIntentDir =\n          follower.position.y > followerNextPos.y\n            ? DIRS.UP\n            : follower.moveIntentDir;\n        if (follower.position.x < followerNextPos.x) {\n          follower.moveIntentDir = DIRS.RIGHT;\n          follower.animRunRight();\n        }\n        if (follower.position.x > followerNextPos.x) {\n          follower.moveIntentDir = DIRS.LEFT;\n          follower.animRunLeft();\n        }\n\n        this.moveObject(follower, followerNextPos);\n\n        if (follower.position.y < player.position.y) {\n          follower.alien.depth = 0;\n          player.alien.depth = 2;\n        } else {\n          player.alien.depth = 0;\n          follower.alien.depth = 2;\n        }\n      }\n    }\n\n    this.playerTimeoutId = setTimeout(() => {\n      if (!player.alien) {\n        return false;\n      }\n      player.isMoving = false;\n      player.animIdle();\n\n      // interactive detection\n      const isInteractivePosition =\n        this.interactiveElements[`${player.position.x}-${player.position.y}`];\n      if (isInteractivePosition) {\n        isInteractivePosition.overrunBy(player);\n      }\n\n      // follower animations\n      if (follower && player.alien.anims.currentAnim.key.includes(\"idle\")) {\n        follower.animIdle();\n      }\n\n      // leader animations\n      if (\n        leader ||\n        !leader?.isCloseEnough(player.position) ||\n        (leader?.isCloseEnough(player.position) &&\n          player.alien.anims.currentAnim.key.includes(\"idle\"))\n      ) {\n        leader?.animIdle();\n      }\n\n      // next loop\n      if (player.moveIntentDir !== \"\" && player.alien) {\n        this.playerLoop();\n      }\n    }, PLAYER_TICK_TIME);\n  }\n  // afterPlayerLoop(cb) {\n  //   this.afterPlayerLoopCallbacks.push(cb)\n  // }\n  moveObject(el, pos) {\n    const layer = this.scene.children.getByName(\"layer_1\");\n    if (!layer) {\n      return false;\n    }\n    const { tilemap: map } = layer;\n    const origin = { x: el.position.x, y: el.position.y };\n    // assume destination is occupeable\n    const destinationElement = this.getObjectAt(pos.x, pos.y);\n\n    const isSwitch =\n      [Player.className, NPCharacter.className].includes(\n        el.constructor.className\n      ) &&\n      [Player.className, NPCharacter.className].includes(\n        destinationElement.constructor.className\n      );\n\n    if (\n      (!this.objectIsEmpty(destinationElement) ||\n        destinationElement.isClass(Interactive) ||\n        destinationElement.isClass(Exit)) &&\n      !isSwitch\n    ) {\n      destinationElement.overrunBy(el);\n      el.runningOver(destinationElement);\n    }\n\n    if (el.inactive) return;\n\n    // verify not overriding Player when switch with follower\n    if (!isSwitch) {\n      // clear origin position\n      this.setObjectAt(origin.x, origin.y, new Empty(PIXEL_NAME.EMPTY, this));\n    }\n    // fill destination position\n    this.setObjectAt(pos.x, pos.y, el);\n\n    // updates element position\n    el.move(pos);\n    if (el.isClass(Character) && el.alien) {\n      // alien anim\n      this.scene.tweens.add({\n        targets: el.alien,\n        x: {\n          value: map.tileToWorldX(pos.x),\n          duration: el.isClass(Enemy) ? TICK_TIME : PLAYER_TICK_TIME,\n        },\n        y: {\n          value: map.tileToWorldY(pos.y) + (el.isClass(Player) ? 5 : 0), // offset 5 pixels for player to step a little lower\n          duration: el.isClass(Enemy) ? TICK_TIME : PLAYER_TICK_TIME,\n        },\n      });\n\n      el.animRun();\n      // el.alien?.play('brave_run')\n    }\n\n    // if(el.isClass(Jewel) || el.isClass(Mushroom)) {\n    //   // alien anim\n    //   this.scene.tweens.add({\n    //     targets: el.alien,\n    //     x: {\n    //       value: map.tileToWorldX(pos.x),\n    //       duration: TICK_TIME * 0.5,\n    //     },\n    //     y: {\n    //       value: map.tileToWorldY(pos.y),\n    //       delay: pos.x !== origin.x ? TICK_TIME * 0.5 : 0,\n    //       duration: pos.x !== origin.x ? TICK_TIME * 0.5 : TICK_TIME,\n    //     },\n    //     // duration: TICK_TIME,\n    //   });\n    // }\n    // if(el.isClass(Barrel)) {\n    //   // alien anim\n    //   this.scene.tweens.add({\n    //     targets: el.alien,\n    //     x: {\n    //       value: map.tileToWorldX(pos.x),\n    //       duration: TICK_TIME * 0.5,\n    //     },\n    //     y: {\n    //       value: map.tileToWorldY(pos.y),\n    //       delay: pos.x !== origin.x ? TICK_TIME * 0.5 : 0,\n    //       duration: pos.x !== origin.x ? TICK_TIME * 0.5 : TICK_TIME,\n    //     },\n    //     // duration: TICK_TIME,\n    //   });\n    // }\n    if (el.isClass(Fallable)) {\n      // alien anim\n      this.scene.tweens.add({\n        targets: el.alien,\n        x: {\n          value: map.tileToWorldX(pos.x),\n          duration: pos.y !== origin.y ? TICK_TIME * 0.5 : TICK_TIME,\n        },\n        y: {\n          value: map.tileToWorldY(pos.y),\n          delay: pos.x !== origin.x ? TICK_TIME * 0.5 : 0,\n          duration: pos.x !== origin.x ? TICK_TIME * 0.5 : TICK_TIME,\n        },\n        onComplete: () => {\n          if (el.inParallelGravity) {\n            this.gravityLoop([el]);\n          }\n        },\n        // duration: TICK_TIME,\n      });\n      // Slide sound and visual for Boulder\n      if (pos.x !== origin.x && el.isClass(Boulder)) {\n        el.alien.play(\n          pos.x > origin.x ? \"boulder_roll_right\" : \"boulder_roll_left\"\n        );\n        if (this.player.pushingDirection !== null) {\n          const base = this.getObjectAt(origin.x, origin.y + 1);\n          this.scene.events.emit(\n            `sounds:rock_slide_${base.isClass(Ground) ? \"soft\" : \"hard\"}`\n          );\n        }\n      }\n      // Slide sound and visual for Barrel\n      if (el.isClass(Barrel)) {\n        // is horizontal push and goes to a place with empty bottom neighbour (which means is going to fall)\n        // or is falling to sides (falling over a non flat object) in which case x and y are differents\n        if (\n          (pos.x !== origin.x &&\n            this.isDestinationEmpty(pos.x, origin.y + 1)) ||\n          (pos.x !== origin.x && pos.y !== origin.y)\n        ) {\n          el.alien.play(\n            pos.x > origin.x ? \"barrel_roll_right\" : \"barrel_roll_left\"\n          );\n        }\n        if (pos.x !== origin.x) {\n          this.scene.events.emit(\"sounds:rock_slide_soft\");\n        }\n      }\n      // Slide sound and visual for Pillar\n      if (el.isClass(Pillar)) {\n        // is horizontal push and goes to a place with empty bottom neighbour (which means is going to fall)\n        // or is falling to sides (falling over a non flat object) in which case x and y are differents\n        if (\n          (pos.x !== origin.x &&\n            this.isDestinationEmpty(pos.x, origin.y + 1)) ||\n          (pos.x !== origin.x && pos.y !== origin.y)\n        ) {\n          el.alien.play(\n            pos.x > origin.x ? \"pillar_roll_right\" : \"pillar_roll_left\"\n          );\n        }\n        if (pos.x !== origin.x) {\n          this.scene.events.emit(\"sounds:rock_slide_hard\");\n        }\n      }\n      // roll visual for Jewel\n      if (pos.x !== origin.x && el.isClass(Jewel)) {\n        el.alien.once(Phaser.Animations.Events.ANIMATION_COMPLETE, () => {\n          el.alien.play(\"diamond_idle\");\n        });\n        el.alien.play(\n          pos.x > origin.x ? \"diamond_roll_right\" : \"diamond_roll_left\"\n        );\n      }\n    }\n\n    // this.runScheduledActions()\n  }\n  pause() {\n    this.isPaused = true;\n    this.player.moveIntentDir = \"\";\n    this.player.animIdle();\n  }\n  resume() {\n    this.isPaused = false;\n    // resume parallel gravity\n    this.gravityLoop(this.parallelMovables);\n  }\n  destroy() {}\n  onCharacterDie(el) {\n    this.setObjectAt(\n      el.position.x,\n      el.position.y,\n      new Empty(PIXEL_NAME.EMPTY, this)\n    );\n    this.moveables = this.moveables.filter((e) => e !== el);\n    if (el.isClass(Player)) {\n      el.moveIntentDir = \"\";\n      // this.player = null\n      this.scene.levels.restart();\n    }\n  }\n  onJewelPick(el) {\n    this.setObjectAt(\n      el.position.x,\n      el.position.y,\n      new Empty(PIXEL_NAME.EMPTY, this)\n    );\n    this.moveables = this.moveables.filter((e) => e !== el);\n    this.collectedDiamonds++;\n    this.scene.events.emit(\"score:diamond_set\", this.collectedDiamonds);\n    if (this.diamondsGoal > 0 && this.diamondsGoal <= this.collectedDiamonds) {\n      this.destroyBlock();\n      // UI update\n      this.scene.events.emit(\"score:diamond_goal\");\n      this.scene.events.emit(\"sounds:coin\");\n    }\n  }\n  destroyBlock() {\n    // on goal reached\n    // remove exit block\n    const exit = Object.values(this.interactiveElements).find((el) =>\n      el?.isClass(Exit)\n    );\n    this.onDestroyElement(exit.block);\n    exit.block.alien.destroy();\n  }\n  onMushroomPick(el) {\n    this.setObjectAt(\n      el.position.x,\n      el.position.y,\n      new Empty(PIXEL_NAME.EMPTY, this)\n    );\n    this.moveables = this.moveables.filter((e) => e !== el);\n    this.collectedShrooms = +1;\n  }\n  onEnemyKill(el) {\n    this.killedEnemies++;\n  }\n  onDestroyElement(el) {\n    this.setObjectAt(\n      el.position.x,\n      el.position.y,\n      new Empty(PIXEL_NAME.EMPTY, this)\n    );\n    this.moveables = this.moveables.filter((e) => e !== el);\n    this.parallelMovables = this.parallelMovables.filter((e) => e !== el);\n  }\n  replaceByEmpty(el) {\n    const emptyPlace = new Empty(PIXEL_NAME.EMPTY, this);\n    emptyPlace.setPosition(el.position);\n    const objectInDestination = this.getObjectAt(el.position.x, el.position.y);\n    // validation to prevent emptying another object that take place before this method is called.\n    // happens in case of barrels exploding by fallable. Barrel has a half tick delay from overrun to explode.\n    // that half tick offset makes the place in the grid to get filled with the overruner object\n    if (objectInDestination === el) {\n      this.setObjectAt(el.position.x, el.position.y, emptyPlace);\n    }\n  }\n  onExplode(el) {\n    // moved into Barrel class\n  }\n  cleanLevel() {\n    this.scene.events.off(\"player_moves\");\n    this.scene.events.off(\"dialogue:hidden\");\n    this.scene.events.off(\"dialogue:message_shown\");\n    this.objects.forEach((row) =>\n      row.forEach((el) => {\n        if (el.alien) {\n          el.alien.destroy();\n          el.alien = null;\n        }\n      })\n    );\n  }\n  onComplete() {\n    this.pause();\n\n    const levelData = DB.get(this.constructor.key);\n\n    if (levelData) {\n      this.prevBest = levelData?.comp;\n    }\n    const comp = this.scene.rules.calcCompletion(\n      this.countDiamonds,\n      this.collectedDiamonds,\n      this.countEnemies,\n      this.killedEnemies,\n      this.countShrooms,\n      this.collectedShrooms\n    );\n    const newLevelData = {\n      countDiamonds: this.countDiamonds,\n      collectedDiamonds: this.collectedDiamonds,\n      countEnemies: this.countEnemies,\n      killedEnemies: this.killedEnemies,\n      countShrooms: this.countShrooms,\n      collectedShrooms: this.collectedShrooms,\n      comp,\n      prevBest: this.prevBest,\n    };\n    if (!levelData || (levelData && newLevelData.comp >= levelData.comp)) {\n      DB.set(this.constructor.key, newLevelData);\n    }\n    if(this.collectedShrooms > 0) {\n      // updates global shroom counter\n      DB.set(\n        \"totalShroomsAmount\",\n        this.totalShroomsAmount + this.collectedShrooms\n      );\n\n      // updates level shroom counts even if is not the best completion score\n      const storedData = DB.get(this.constructor.key);\n      // in case of shroom given the counter could be lower than 0\n      storedData.collectedShrooms = this.collectedShrooms < 0 ? 0 : this.collectedShrooms\n      DB.set(this.constructor.key, storedData);\n    }\n\n    this.scene.events.emit(\"levelcompleted\", newLevelData);\n  }\n  onInteractWith(el) {\n    if (el.ephemeral) {\n      this.interactiveElements[`${el.position.x}-${el.position.y}`] = null;\n    }\n  }\n  onAddElement(el) {\n    console.warn(`implement element added ${this.id}`);\n  }\n  getPlayerPos() {\n    return this.focusElement.position;\n  }\n  getConfigAt(x, y) {\n    return this.isDestinationInBounds(x, y) && this.config[y][x];\n  }\n  getCoords(id) {\n    const found = [];\n    for (let i = 0; i < this.config.length; i++) {\n      for (let j = 0; j < this.config[i].length; j++) {\n        if (this.config[i][j] === id) {\n          found.push({ x: j, y: i });\n        }\n      }\n    }\n    return found;\n  }\n  getObjectAt(x, y) {\n    return this.isDestinationInBounds(x, y) && this.objects[y][x];\n  }\n  setObjectAt(x, y, obj) {\n    this.objects[y][x] = obj;\n  }\n  isPositionClear(x, y) {\n    return this.getObjectAt(x, y).isEmpty;\n  }\n  isDestinationInBounds(x, y) {\n    const xInBounds = x < this.config[0].length && x >= 0;\n    const yInBounds = y < this.config.length && y >= 0;\n    return xInBounds && yInBounds;\n  }\n  objectIsEmpty(el) {\n    return el && el.isClass(Empty);\n  }\n  isDestinationEmpty(x, y) {\n    return this.getObjectAt(x, y).isEmpty;\n  }\n\n  async playEarthquake(range, intensity = 3) {\n    this.player.disconnect();\n    await this.shakeCamera(intensity);\n    const probability =\n      intensity === 4\n        ? 1\n        : intensity === 3\n        ? 0.75\n        : intensity === 2\n        ? 0.5\n        : 0.25;\n    this.destroyObjectsInRange(range, probability);\n    this.player.reconnect();\n  }\n\n  destroyObjectsInRange(range, probability) {\n    for (let y = range.y1; y < range.y2; y++) {\n      for (let x = range.x1; x <= range.x2; x++) {\n        // remove interactive in zone\n        if (this.interactiveElements[`${x}-${y}`]) {\n          this.interactiveElements[`${x}-${y}`] = null;\n        }\n        const toDestroy = this.getObjectAt(x, y);\n        const strengthEnough = Math.random() < probability;\n        if (\n          strengthEnough &&\n          toDestroy &&\n          (toDestroy.isClass(Ground) || toDestroy.isClass(Debris))\n        ) {\n          toDestroy.overrunBy();\n          this.onDestroyElement(toDestroy);\n        }\n      }\n    }\n  }\n\n  shakeCamera(intensity) {\n    const camera = this.scene.cameras.main;\n    this.fx = this.scene.sound.add(\"earthquake\");\n    const length = 2500;\n    const strength = 0.005 * intensity;\n    camera.shake(length, strength);\n    this.fx.play();\n\n    return new Promise((res) => {\n      setTimeout(res, length);\n    });\n  }\n\n  updatePositionsOnScale() {\n    const layer = this.scene.children.getByName(\"layer_1\");\n    const { tilemap: map } = layer;\n    this.moveables.forEach((mv) => {\n      if (mv.alien) {\n        mv.alien.setPosition(\n          map.tileToWorldX(mv.position.x),\n          map.tileToWorldY(mv.position.y)\n        );\n      }\n    });\n    // fix angel position\n    const exit = Object.values(this.interactiveElements).find((el) =>\n      el?.isClass(Exit)\n    );\n    exit.block?.alien.setPosition(\n      map.tileToWorldX(exit.position.x - 2),\n      map.tileToWorldY(exit.position.y)\n    );\n\n    Object.values(this.decorationElements).forEach((el) => {\n      el.alien.x = UI.tileToScreen(el.position.x);\n      el.alien.y = UI.tileToScreen(el.position.y);\n    });\n  }\n}\n\nexport default Level;\n","import LevelBase from \"./levelBase\";\nimport { Enemy, Exit, Ground, Interactive, NPCharacter, Player, Wall } from \"../objects\";\nimport { translate } from \"../../utils/localization\";\nimport { PIXEL_NAME, PIXEL_TO_TILEMAP_POSITION } from \"../../utils/constants\";\nimport Debris from \"../objects/Debris\";\n\nclass LevelTest extends LevelBase {\n  constructor() {\n    super();\n    this.name = \"The test\";\n    this.diamondsGoal = 9;\n  }\n\n  get id() {\n    return this.constructor.name;\n  }\n\n  connectToScene(scene) {\n    super.connectToScene(scene);\n    this.scene.input.keyboard.addListener(\"keyup\", this.onKeyUp.bind(this));\n\n  }\n\n  onKeyUp(event) {\n    if (event.key === \"1\") {\n      this.showDialog1();\n    }\n    if (event.key === \"2\") {\n      this.showDialog2();\n    }\n    if (event.key === \"3\") {\n      this.showDialog3();\n    }\n    if (event.key === \"4\") {\n      this.showDialog4();\n    }\n    if (event.key === \"5\") {\n      this.scene.events.emit(\"dialogue:updateCharacterName\");\n    }\n  }\n\n  showDialog1() {\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Mary\"],\n      participantNames: [\"Mary\"],\n      conversation: [\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_1.dialog_1.mary_say_1\")],\n          options: [],\n        },\n      ],\n    });\n  }\n\n  showDialog2() {\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Mary\", \"closeUp_Dwarf\"],\n      participantNames: [\"Mary\"],\n      conversation: [\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_1.dialog_1.mary_say_1\")],\n          options: [],\n        },\n      ],\n    });\n  }\n\n  showDialog3() {\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Mary\", \"closeUp_Marduk\", \"closeUp_Dwarf\"],\n      participantNames: [\"Mary\", \"Marduk\", \"Doc\"],\n      conversation: [\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_1.dialog_1.mary_say_1\")],\n          options: [],\n        },\n      ],\n    });\n  }\n\n  showDialog4() {\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\n        \"closeUp_Mary\",\n        \"closeUp_Marduk\",\n        \"closeUp_Dwarf\",\n        \"closeUp_Tiamat\",\n      ],\n      participantNames: [\"Mary\", \"Marduk\", \"Doc\", \"Tiamat\"],\n      conversation: [\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_1.dialog_1.mary_say_1\")],\n          options: [],\n        },\n      ],\n    });\n  }\n\n  onInteractWith(el) {\n    super.onInteractWith(el);\n\n    if (el.isClass(Exit)) {\n      this.onComplete();\n    }\n    if (el.isClass(Interactive)) {\n      // if(this.interactiveCounts === this.quakeTriggerIndex) {\n      //   const areaWidth = 17\n      //   const areaHeight = 11\n      //   this.playEarthquake({\n      //     x1: this.playerOriginPosition.x - areaWidth - 1,\n      //     x2: this.playerOriginPosition.x - 1,\n      //     y1: el.position.y - areaHeight,\n      //     y2: this.playerOriginPosition.y\n      //   }, 3);\n      // }\n      // this.interactiveCounts++\n    }\n  }\n\n  onAddElement(el) {\n    if (el.isClass(Player)) {\n      el.power = 1;\n      el.hasPickaxe = true;\n    }\n  }\n\n  // showDialog1() {\n  //   this.scene.events.emit('dialogue:show', {\n  //     participants: ['closeUp_Mary', 'closeUp_Dwarf'],\n  //     conversation: [\n  //       {\n  //         who: 'closeUp_Mary',\n  //         text: [translate('level_6.dialog_1.mary_say_1')],\n  //       },\n  //       {\n  //         who: 'closeUp_Dwarf',\n  //         text: [translate('level_6.dialog_1.dwarf_say_1')],\n  //       },\n  //       {\n  //         who: 'closeUp_Mary',\n  //         text: [translate('level_6.dialog_1.mary_say_2')],\n  //       },\n  //       {\n  //         who: 'closeUp_Dwarf',\n  //         text: [translate('level_6.dialog_1.dwarf_say_2')],\n  //       },\n  //       {\n  //         who: 'closeUp_Mary',\n  //         text: [translate('level_6.dialog_1.mary_say_3')],\n  //       },\n  //       {\n  //         who: 'closeUp_Dwarf',\n  //         text: [translate('level_6.dialog_1.dwarf_say_3')],\n  //       },\n  //       {\n  //         who: 'closeUp_Mary',\n  //         text: [translate('level_6.dialog_1.mary_say_4')],\n  //       },\n  //       {\n  //         who: 'closeUp_Dwarf',\n  //         text: [translate('level_6.dialog_1.dwarf_say_4')],\n  //       },\n  //       {\n  //         who: 'closeUp_Dwarf',\n  //         text: [translate('level_6.dialog_1.dwarf_say_5')],\n  //       },\n  //       {\n  //         who: 'closeUp_Mary',\n  //         text: [translate('level_6.dialog_1.mary_say_5')],\n  //       },\n  //     ]\n  //   })\n\n  //   this.scene.events.once('dialogue:hidden', () => {\n  //     this.player.disconnect()\n  //     this.dwarfRun = true\n  //     this.moveDwarf()\n  //   })\n  // }\n  // showDialog2() {\n  //   this.scene.events.emit('dialogue:show', {\n  //     participants: ['closeUp_Mary'],\n  //     conversation: [\n  //       {\n  //         who: 'closeUp_Mary',\n  //         text: [translate('level_6.dialog_2.mary_say_1')],\n  //       },\n  //     ],\n  //   })\n  // }\n\n  // moveDwarf() {\n  //   // hack to auto move dwarf until pos x is 10\n  //   if (this.dwarfRun) {\n  //     if (this.leader.position.x < 16) {\n  //       this.leader.onPlayerMoves(this.player.position);\n  //       this.onNextTick(() => {\n  //         this.leader.animIdle()\n  //         this.moveDwarf()\n  //       });\n  //     } else {\n  //       this.leader.animIdle()\n  //       // auto pilot off\n  //       this.player.reconnect()\n\n  //       // listen for player move until dwarf reach last position of path, then\n  //       // remove fix of dwarfRun and remove listener\n  //       const onPlayerMove = (() => {\n  //         if (this.leader.position.x >= 30) {\n  //           this.dwarfRun = false\n  //           this.scene.events.removeListener('player_moves', onPlayerMove)\n  //         }\n  //       }).bind(this)\n  //       this.scene.events.addListener('player_moves', onPlayerMove )\n  //     }\n  //   }\n  // }\n\n}\n\nLevelTest.key = 'level_test'\nexport default LevelTest;\n","import LevelBase from './levelBase'\nimport { Interactive, Exit, Jewel } from '../objects'\n// import { PIXEL_TO_TILEMAP_POSITION, PIXEL_NAME } from '../../utils/constants'\nimport { translate } from '../../utils/localization'\nimport { SCALE } from '../../utils/constants'\nimport UI from '../UI'\n\nclass Level2 extends LevelBase {\n  constructor() {\n    super()\n    this.name = 'The wise move'\n  }\n\n  get id() {\n    return this.constructor.name\n  }\n\n  connectToScene(scene) {\n    super.connectToScene(scene)\n    \n    if(this.unfinished) {\n      scene.events.once('levelstart', () => this.showDialog1())\n    }\n\n    let light_beam = this.scene.add.image(\n      this.scene.cameras.main.width / 2,\n      this.scene.cameras.main.height / 2,\n      \"light_beam\"\n    );\n    light_beam.x = UI.tileToScreen(14);\n    light_beam.y = UI.tileToScreen(0);\n    light_beam.setOrigin(0, 0);\n    light_beam.setScale(SCALE * 2);\n    light_beam.scaleX = SCALE * 2.4;\n    light_beam.setScrollFactor(1);\n    light_beam.depth = 4.5;\n    light_beam.alpha = 0.5;\n\n    var particles = scene.add.particles(\"spark\").setScale(SCALE);\n    var emitter = particles.createEmitter();\n    emitter.setPosition(\n      { min: UI.tileToScreen(5), max: UI.tileToScreen(7) },\n      { min: UI.tileToScreen(0.5), max: UI.tileToScreen(1) }\n    );\n    emitter.setQuantity(5);\n    emitter.setFrequency(20000);\n    emitter.setAngle({ min: 0, max: 360 });\n    emitter.setSpeed(5);\n    emitter.setGravityY(0.1);\n    emitter.setGravityX(0);\n    emitter.setLifespan({ min: 10000, max: 50000 });\n    emitter.alpha.onChange(0.5);\n  }\n\n  showDialog1() {\n    this.scene.events.emit('dialogue:show', {\n      participants: ['closeUp_Mary'],\n      participantNames: ['Mary'],\n      conversation: [\n        {\n          who: 'closeUp_Mary',\n          text: [\n            translate('level_2.dialog_1.mary_say_1')\n          ],\n          options: []\n        },\n      ]\n    })\n  }\n  showDialog2() {\n    this.scene.events.emit('dialogue:show', {\n      participants: ['closeUp_Mary'],\n      participantNames: ['Mary'],\n      conversation: [\n        {\n          who: 'closeUp_Mary',\n          text: [\n            translate('level_2.dialog_2.mary_say_1')\n          ],\n          options: []\n        },\n      ]\n    })\n  }\n\n  onInteractWith(el) {\n    super.onInteractWith(el)\n    \n    if(el.isClass(Exit)) {\n      this.onComplete()\n    }\n  }\n  onJewelPick(el) {\n    super.onJewelPick(el)\n    if(el.isClass(Jewel) && this.collectedDiamonds === 1 && this.unfinished) {\n      this.showDialog2()\n    }\n  }\n}\n\nLevel2.key = 'level_2'\nexport default Level2\n","import LevelBase from \"./levelBase\";\nimport { Enemy, Exit } from \"../objects\";\nimport { Interactive } from \"../objects\";\nimport { translate } from \"../../utils/localization\";\nimport {\n  PIXEL_NAME,\n  PIXEL_TO_TILEMAP_POSITION,\n  SCALE,\n} from \"../../utils/constants\";\nimport UI from \"../UI\";\n\nclass Level3 extends LevelBase {\n  constructor() {\n    super();\n    this.name = \"The tower\";\n    this.diamondsGoal = 0;\n  }\n\n  get id() {\n    return this.constructor.name;\n  }\n\n  connectToScene(scene) {\n    super.connectToScene(scene)\n\n    let light_beam = this.scene.add.image(\n      this.scene.cameras.main.width / 2,\n      this.scene.cameras.main.height / 2,\n      \"light_beam\"\n    );\n    light_beam.x = UI.tileToScreen(20);\n    light_beam.y = UI.tileToScreen(10);\n    light_beam.setOrigin(0, 0);\n    light_beam.setScale(SCALE * 2);\n    light_beam.scaleX = SCALE;\n    light_beam.setScrollFactor(1);\n    light_beam.depth = 4.5;\n    light_beam.alpha = 0.5;\n\n    var particles = scene.add.particles(\"spark\").setScale(SCALE);\n    var emitter = particles.createEmitter();\n    emitter.setPosition(\n      { min: UI.tileToScreen(6), max: UI.tileToScreen(7) },\n      { min: UI.tileToScreen(1), max: UI.tileToScreen(4) }\n    );\n    emitter.setQuantity(5);\n    emitter.setFrequency(20000);\n    emitter.setAngle({ min: 0, max: 360 });\n    emitter.setSpeed(5);\n    emitter.setGravityY(0.1);\n    emitter.setGravityX(0);\n    emitter.setLifespan({ min: 10000, max: 50000 });\n    emitter.alpha.onChange(0.5);\n  }\n\n  onInteractWith(el) {\n    super.onInteractWith(el);\n    if (el.isClass(Exit)) {\n      this.onComplete();\n    }\n    if (el.isClass(Interactive) && el.order === 1 && this.unfinished) {\n      this.showDialog1()\n    }\n    if (el.isClass(Interactive) && el.order === 2) {\n      const layer = this.scene.children.getByName(\"layer_1\");\n      const { tilemap: map } = layer;\n      this.player.power = 1;\n      this.player.hasPickaxe = true;\n      map.putTileAt(\n        PIXEL_TO_TILEMAP_POSITION[PIXEL_NAME.EMPTY],\n        el.position.x,\n        el.position.y,\n        false,\n        \"layer_1\"\n      );\n      el.alien.destroy();\n\n      if(this.unfinished) {\n        this.showDialog4();\n      }\n    }\n  }\n\n  showDialog1() {\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Mary\"],\n      participantNames: ['Mary'],\n      conversation: [\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_3.dialog_1.mary_say_1\")],\n          options: [],\n        },\n      ],\n    });\n  }\n  \n  showDialog4() {\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Mary\"],\n      participantNames: ['Mary'],\n      conversation: [\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_3.dialog_4.mary_say_1\")],\n        },\n      ],\n    });\n  }\n\n  onAddElement(el) {\n\n    // add pickaxe\n    if (el.isClass(Interactive) && el.order === 2) {\n      const layer = this.scene.children.getByName(\"layer_1\");\n      const { tilemap: map } = layer;\n      const pickaxe = this.scene.add\n        .sprite(48, 16)\n        .setOrigin(0, 0.25)\n        .play(\"pickaxe_idle\");\n      pickaxe.setScale(layer.scaleX);\n      pickaxe.x = map.tileToWorldX(el.position.x);\n      pickaxe.y = map.tileToWorldY(el.position.y);\n\n      el.alien = pickaxe;\n    }\n\n\n    if (el.isClass(Enemy)) {\n      // make second enemy to run ACW so boulder can make it escape from blast\n      if (this.enemiesCount === 1) {\n        el.scanDirection = \"ACW\";\n      }\n    }\n\n  }\n  \n}\n\nLevel3.key = 'level_3'\nexport default Level3;\n","import LevelBase from './levelBase'\nimport { Enemy, Exit, Player } from '../objects'\nimport { Interactive } from \"../objects\";\nimport { translate } from '../../utils/localization';\n\nclass Level4 extends LevelBase {\n  constructor() {\n    super()\n    this.name = 'The round'\n    this.enemiesCount = 0\n    // countdown to trigger dialog after n moves after the quake\n    this.countDownAfterQuakeUntilMessage = null\n\n    // this.onPlayerMoves.bind(this)\n  }\n\n  get id() {\n    return this.constructor.name\n  }\n\n  onInteractWith(el) {\n    super.onInteractWith(el)\n\n    // earthquake triggers\n    if ([0, 1, 2, 3, 4, 5, 6, 7].includes(el.order)) {\n      this.playEarthquake({ x1: el.position.x - 9,x2: el.position.x + 9, y1: el.position.y - 6, y2: el.position.y + 6 }, 1);\n\n      if(this.unfinished) {\n        this.countDownAfterQuakeUntilMessage = 4\n        this.scene.events.addListener('player_moves', this.onPlayerMoves, this )\n      }\n    }\n\n    if(el.isClass(Exit)) {\n      this.onComplete()\n    }\n  }\n  onPlayerMoves() {\n    if(this.countDownAfterQuakeUntilMessage !== null) {\n      this.countDownAfterQuakeUntilMessage--\n      if(this.countDownAfterQuakeUntilMessage === 0) {\n        this.showDialog1()\n\n        this.scene.events.removeListener('player_moves', this.onPlayerMove )\n      }\n    }\n  }\n\n  showDialog1() {\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Mary\"],\n      participantNames: [\"Mary\"],\n      conversation: [\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_4.dialog_1.mary_say_1\")],\n        },\n      ],\n    });\n  }\n  onAddElement(el) {\n    if(el.isClass(Player)) {\n      el.power = 1\n      el.hasPickaxe = true\n    }\n\n    if (el.isClass(Enemy)) {\n      this.enemiesCount++;\n      // make second enemy to run ACW so boulder can make it escape from blast\n      if (this.enemiesCount % 2 === 0) {\n        el.scanDirection = \"ACW\"\n      }\n    }\n  }\n\n}\n\nLevel4.key = 'level_4'\nexport default Level4\n","import Phaser from \"phaser\";\nimport LevelBase from \"./levelBase\";\nimport { Enemy, NPCharacter, Player } from \"../objects\";\nimport { Interactive } from \"../objects\";\nimport { translate } from \"../../utils/localization\";\n\nclass Level5 extends LevelBase {\n  constructor() {\n    super();\n    this.name = \"The encounter\";\n    this.enemiesDeadCount = 0;\n  }\n\n  get id() {\n    return this.constructor.name;\n  }\n\n  connectToScene(scene) {\n    super.connectToScene(scene);\n    \n    // removes dwarf if level was finished in the past\n    if (!this.unfinished) {\n      this.leader.alien.alpha = 0\n      this.replaceByEmpty(this.leader)\n    }\n  }\n  destroy() {\n    // this.scene.events.off('update', this.updateLight.bind(this))\n  }\n\n  updateLight() {\n    const layer = this.scene.children.getByName(\"layer_1\");\n    if (!layer) {\n      return true;\n    }\n    const map = layer.tilemap;\n    let origin = this.player.position;\n    this.moveables.forEach((el) => {\n      var dist = Phaser.Math.Distance.Snake(\n        origin.x,\n        origin.y,\n        el.position.x,\n        el.position.y\n      );\n\n      el.alien?.setAlpha(1 - 0.1 * dist);\n    });\n    map.forEachTile((tile) => {\n      var dist = Phaser.Math.Distance.Snake(origin.x, origin.y, tile.x, tile.y);\n\n      tile.setAlpha(1 - 0.1 * dist);\n    });\n  }\n\n  onInteractWith(el) {\n    if (el.order === 0) {\n      this.onComplete();\n    }\n  }\n  onAddElement(el) {\n    if (el.isClass(Player)) {\n      el.power = 1;\n      el.hasPickaxe = true;\n    }\n    if (el.isClass(NPCharacter)) {\n      el.leadingPath = [\n        { x: 8, y: 36 },\n        { x: 9, y: 36 },\n        { x: 10, y: 36 },\n        { x: 11, y: 36 },\n        { x: 11, y: 37 },\n        { x: 11, y: 38 },\n        { x: 11, y: 39 },\n        { x: 11, y: 40 },\n        { x: 12, y: 40 },\n        { x: 13, y: 40 },\n        { x: 14, y: 40 },\n        { x: 14, y: 39 },\n        { x: 14, y: 38 },\n        { x: 15, y: 38 },\n        { x: 16, y: 38 },\n        { x: 17, y: 38 },\n        { x: 18, y: 38 },\n        { x: 19, y: 38 },\n        { x: 20, y: 38 },\n        { x: 21, y: 38 },\n        { x: 22, y: 38 },\n        { x: 23, y: 38 },\n        { x: 24, y: 38 },\n        { x: 25, y: 38 },\n        { x: 26, y: 38 },\n        { x: 27, y: 38 },\n        { x: 28, y: 38 },\n        { x: 29, y: 38 },\n        { x: 30, y: 38 },\n      ];\n      el.isCloseEnough = () => this.dwarfRun;\n    }\n  }\n\n  onCharacterDie(el) {\n    super.onCharacterDie(el);\n    if (el.isClass(Enemy)) {\n      this.enemiesDeadCount++;\n\n      if (this.enemiesDeadCount === 1 && this.unfinished) {\n        // disconnect user\n        this.player.disconnect();\n      }\n      if (this.enemiesDeadCount === 2 && this.unfinished) {\n        // after killing the second enemy\n        this.encounter();\n      }\n    }\n  }\n\n  encounter() {\n    // move npc\n    this.dwarfRun = true;\n    this.onNextTick(this.moveDwarf.bind(this));\n    // show dialog\n  }\n\n  moveDwarf() {\n    // hack to auto move dwarf until pos x is 10\n    if (this.dwarfRun) {\n      if (this.leader.position.x < 11) {\n        this.leader.onPlayerMoves(this.player.position);\n        this.onNextTick(this.moveDwarf.bind(this));\n      } else {\n        if (!this.leader.alien.anims.currentAnim.key.includes(\"idle\")) {\n          this.leader?.animIdle();\n        }\n        this.player.reconnect();\n        this.showDialog1();\n      }\n    }\n  }\n\n  showDialog1() {\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Mary\", \"closeUp_Dwarf\"],\n      participantNames: [\"Mary\", \"???\"],\n      conversation: [\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_5.dialog_1.mary_say_1\")],\n        },\n        {\n          who: \"closeUp_Dwarf\",\n          text: [translate(\"level_5.dialog_1.dwarf_say_1\")],\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_5.dialog_1.mary_say_2\")],\n        },\n        {\n          who: \"closeUp_Dwarf\",\n          text: [translate(\"level_5.dialog_1.dwarf_say_2\")],\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_5.dialog_1.mary_say_3\")],\n        },\n      ],\n    });\n  }\n}\n\nLevel5.key = \"level_5\";\nexport default Level5;\n","import LevelBase from \"./levelBase\";\nimport { Exit, NPCharacter, Player } from \"../objects\";\nimport { translate } from \"../../utils/localization\";\nimport template from \"lodash.template\";\nimport UI from \"../UI\";\nimport { TICK_TIME } from \"../../utils/constants\";\n\nclass Level6 extends LevelBase {\n  constructor() {\n    super();\n    this.name = \"The deal\";\n    this.diamondsGoal = 10;\n    this.dwarfRun = false;\n    this.preventDisplayDiamondsGoalAmount = true;\n    this.diamondIdTriggerDwarfMove = 4;\n    this.exit = null;\n    this.interactiveTileCloseToExit = null;\n  }\n\n  get id() {\n    return this.constructor.name;\n  }\n\n  connectToScene(scene) {\n    super.connectToScene(scene);\n    if (this.unfinished) {\n      // erase method to animate exit destruction after talk to dwarf\n      this.destroyBlock = () => false;\n    } else {\n      // removes dwarf if level was finished in the past\n      this.leader.alien.alpha = 0;\n      this.replaceByEmpty(this.leader);\n    }\n  }\n\n  onInteractWith(el) {\n    super.onInteractWith(el);\n    // talk to Doc\n    if (el.order === 0 && this.unfinished) {\n      this.showDialog1();\n    }\n    // close to angel\n    if (el.order === 1 && this.unfinished) {\n      if (this.interactiveTileCloseToExit.ephemeral) {\n        // dwarf is not in front of the angel\n        this.showDialog2();\n      } else {\n        // talk to dwarf\n        // if(this.collectedDiamonds >= 2) {\n        if (this.collectedDiamonds >= this.diamondsGoal) {\n          this.showDialog3();\n        } else {\n          this.showDialog4();\n        }\n      }\n    }\n    if (el.isClass(Exit)) {\n      this.onComplete();\n    }\n  }\n\n  onAddElement(el) {\n    if (el.constructor.name === Player.name) {\n      el.power = 1;\n      el.hasPickaxe = true;\n    }\n\n    if (el.isClass(Exit)) {\n      this.exit = el;\n    }\n\n    // close to angel\n    if (el.order === 1) {\n      this.interactiveTileCloseToExit = el;\n    }\n\n    if (el.isClass(NPCharacter)) {\n      el.leadingPath = [\n        // 10, 8\n        { x: 10, y: 9 },\n        { x: 11, y: 9 },\n        { x: 12, y: 9 },\n        { x: 12, y: 10 },\n        { x: 12, y: 10 },\n        { x: 12, y: 10 },\n        { x: 13, y: 11 },\n        { x: 13, y: 11 },\n        { x: 13, y: 11 },\n        { x: 14, y: 12 },\n        { x: 15, y: 12 },\n        { x: 16, y: 12 },\n        { x: 17, y: 12 },\n        { x: 18, y: 12 },\n        { x: 18, y: 11 },\n        { x: 19, y: 11 },\n        { x: 20, y: 11 },\n        { x: 21, y: 11 },\n        { x: 22, y: 11 },\n        { x: 23, y: 11 },\n        { x: 24, y: 11 },\n        { x: 25, y: 11 },\n        { x: 26, y: 11 },\n        { x: 27, y: 11 },\n        { x: 28, y: 11 },\n        { x: 29, y: 11 },\n        { x: 30, y: 11 },\n      ];\n      el.isCloseEnough = () => this.dwarfRun;\n    }\n  }\n  onJewelPick(el) {\n    super.onJewelPick(el);\n    if (el.order === this.diamondIdTriggerDwarfMove) {\n      const nextPos = { x: this.exit.position.x - 3, y: this.exit.position.y };\n\n      // move dwarf hidding it while travels\n      this.leader.alien.alpha = 0;\n      this.moveObject(this.leader, nextPos);\n      setTimeout(() => {\n        this.leader.alien.alpha = 1;\n      }, 500);\n      // -----\n\n      if (\n        !this.interactiveElements[\n          `${this.interactiveTileCloseToExit.position.x}-${this.interactiveTileCloseToExit.position.y}`\n        ]\n      ) {\n        // restore erased interactive tile\n        this.interactiveTileCloseToExit.ephemeral = false;\n        this.interactiveElements[\n          `${this.interactiveTileCloseToExit.position.x}-${this.interactiveTileCloseToExit.position.y}`\n        ] = this.interactiveTileCloseToExit;\n      } else {\n        // make it permanent\n        this.interactiveTileCloseToExit.ephemeral = false;\n      }\n      console.log(this.interactiveTileCloseToExit);\n    }\n  }\n\n  showDialog1() {\n    this.scene.events.on(\"dialogue:hidden\", () => {\n      this.scene.events.emit(\"score:diamond_goal_set\", this.diamondsGoal);\n    });\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Mary\", \"closeUp_Dwarf\"],\n      participantNames: [\"Mary\", \"???\"],\n      conversation: [\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_6.dialog_1.mary_say_1\")],\n        },\n        {\n          who: \"closeUp_Dwarf\",\n          text: [translate(\"level_6.dialog_1.dwarf_say_1\")],\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_6.dialog_1.mary_say_2\")],\n        },\n        {\n          who: \"closeUp_Dwarf\",\n          text: [translate(\"level_6.dialog_1.dwarf_say_2\")],\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_6.dialog_1.mary_say_3\")],\n        },\n        {\n          who: \"closeUp_Dwarf\",\n          text: [translate(\"level_6.dialog_1.dwarf_say_3\")],\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_6.dialog_1.mary_say_4\")],\n        },\n        {\n          who: \"closeUp_Dwarf\",\n          text: [translate(\"level_6.dialog_1.dwarf_say_4\")],\n        },\n        {\n          who: \"closeUp_Dwarf\",\n          text: [translate(\"level_6.dialog_1.dwarf_say_5\")],\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_6.dialog_1.mary_say_5\")],\n        },\n      ],\n    });\n\n    this.scene.events.once(\"dialogue:hidden\", () => {\n      this.player.disconnect();\n      this.dwarfRun = true;\n      this.moveDwarf();\n    });\n  }\n  showDialog2() {\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Mary\"],\n      participantNames: [\"Mary\"],\n      conversation: [\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_6.dialog_2.mary_say_1\")],\n        },\n      ],\n    });\n  }\n  showDialog3() {\n    this.scene.events.on(\"dialogue:message_shown\", (pageId) => {\n      if (pageId === 2) {\n        this.scene.events.emit(\"dialogue:updateCharacterName\", {\n          key: \"closeUp_Dwarf\",\n          name: \"Doc\",\n        });\n      }\n    });\n    this.scene.events.on(\"dialogue:hidden\", () => {\n      // remove interactive tile\n      this.interactiveElements[\n        `${this.interactiveTileCloseToExit.position.x}-${this.interactiveTileCloseToExit.position.y}`\n      ] = null;\n\n      // anim dwarf and angel dismiss\n      this.scene.tweens.add({\n        targets: this.exit.block.alien,\n        x: UI.tileToScreen(this.exit.position.x),\n        duration: TICK_TIME * 2,\n        onComplete: () => this.exit.block.alien.destroy(),\n      });\n\n      this.player.disconnect();\n      this.dwarfRun = true;\n      this.leader.leadingPath = [\n        { x: this.leader.position.x + 1, y: this.leader.position.y },\n        { x: this.leader.position.x + 1, y: this.leader.position.y },\n        { x: this.leader.position.x + 2, y: this.leader.position.y },\n        { x: this.leader.position.x + 2, y: this.leader.position.y },\n        { x: this.leader.position.x + 3, y: this.leader.position.y },\n        { x: this.leader.position.x + 3, y: this.leader.position.y },\n      ];\n      this.moveDwarfToExit();\n    });\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Mary\", \"closeUp_Dwarf\"],\n      participantNames: [\"Mary\", \"???\"],\n      conversation: [\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_6.dialog_3.mary_say_1\")],\n        },\n        {\n          who: \"closeUp_Dwarf\",\n          text: [translate(\"level_6.dialog_3.dwarf_say_1\")],\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_6.dialog_3.mary_say_2\")],\n        },\n        {\n          who: \"closeUp_Dwarf\",\n          text: [translate(\"level_6.dialog_3.dwarf_say_2\")],\n        },\n      ],\n    });\n  }\n\n  showDialog4() {\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Mary\", \"closeUp_Dwarf\"],\n      participantNames: [\"Mary\", \"???\"],\n      conversation: [\n        {\n          who: \"closeUp_Dwarf\",\n          text: [\n            template(translate(\"level_6.dialog_4.dwarf_say_1\"))({\n              NUM: this.collectedDiamonds,\n            }),\n          ],\n        },\n      ],\n    });\n  }\n\n  moveDwarf() {\n    // hack to auto move dwarf until pos x is 10\n    if (this.dwarfRun) {\n      if (this.leader.position.x < 16) {\n        this.leader.onPlayerMoves(this.player.position);\n        this.onNextTick(() => {\n          this.leader.animIdle();\n          this.moveDwarf();\n        });\n      } else {\n        this.leader.animIdle();\n        // auto pilot off\n        this.player.reconnect();\n\n        // listen for player move until dwarf reach last position of path, then\n        // remove fix of dwarfRun and remove listener\n        const onPlayerMove = (() => {\n          if (this.leader.position.x >= 30) {\n            this.dwarfRun = false;\n            this.scene.events.removeListener(\"player_moves\", onPlayerMove);\n          }\n        }).bind(this);\n        this.scene.events.addListener(\"player_moves\", onPlayerMove);\n      }\n    }\n  }\n\n  moveDwarfToExit() {\n    // hack to auto move dwarf until pos x is 10\n    if (this.dwarfRun) {\n      if (this.leader.position.x < this.exit.position.x) {\n        this.leader.onPlayerMoves(this.player.position);\n        this.onNextTick(() => {\n          this.leader.animIdle();\n          this.moveDwarfToExit();\n        });\n      } else {\n        this.leader.animIdle();\n        // auto pilot off\n        this.player.reconnect();\n\n        // listen for player move until dwarf reach last position of path, then\n        // remove fix of dwarfRun and remove listener\n        // const onPlayerMove = (() => {\n        //   if (this.leader.position.x >= 30) {\n        //     this.dwarfRun = false\n        //     this.scene.events.removeListener('player_moves', onPlayerMove)\n        //   }\n        // }).bind(this)\n        // this.scene.events.addListener('player_moves', onPlayerMove )\n      }\n    }\n  }\n}\n\nLevel6.key = \"level_6\";\nexport default Level6;\n","\nimport LevelBase from \"./levelBase\";\nimport { Exit, Interactive, NPCharacter, Player } from \"../objects\";\n\nclass Level7 extends LevelBase {\n  constructor() {\n    super();\n    this.name = \"The dangerous chambers\";\n    this.diamondsGoal = 10;\n  }\n\n  get id() {\n    return this.constructor.name;\n  }\n\n  onInteractWith(el) {\n    super.onInteractWith(el);\n    \n    // earthquake triggers\n    if (el.isClass(Interactive) && !el.isClass(Exit)) {\n      this.playEarthquake({ x1: el.position.x - 3,x2: el.position.x + 6, y1: el.position.y - 10, y2: el.position.y }, 2);\n    }\n    if (el.isClass(Exit)) {\n      this.onComplete();\n    }\n  }\n\n  onAddElement(el) {\n    if (el.isClass(Player)) {\n      el.power = 1;\n      el.hasPickaxe = true;\n    }\n\n    // if (el.isClass(NPCharacter)) {\n    //   el.leadingPath = [\n    //     // 10, 8\n    //     { x: 10, y: 9 },\n    //     { x: 11, y: 9 },\n    //     { x: 12, y: 9 },\n    //     { x: 12, y: 10 },\n    //     { x: 12, y: 10 },\n    //     { x: 12, y: 10 },\n    //     { x: 13, y: 11 },\n    //     { x: 13, y: 11 },\n    //     { x: 13, y: 11 },\n    //     { x: 14, y: 12 },\n    //     { x: 15, y: 12 },\n    //     { x: 16, y: 12 },\n    //     { x: 17, y: 12 },\n    //     { x: 18, y: 12 },\n    //     { x: 18, y: 11 },\n    //     { x: 19, y: 11 },\n    //     { x: 20, y: 11 },\n    //     { x: 21, y: 11 },\n    //     { x: 22, y: 11 },\n    //     { x: 23, y: 11 },\n    //     { x: 24, y: 11 },\n    //     { x: 25, y: 11 },\n    //     { x: 26, y: 11 },\n    //     { x: 27, y: 11 },\n    //     { x: 28, y: 11 },\n    //     { x: 29, y: 11 },\n    //     { x: 30, y: 11 },\n    //   ];\n    //   el.isCloseEnough = () => this.dwarfRun;\n    // }\n  }\n\n  // showDialog1() {\n  //   this.scene.events.emit('dialogue:show', {\n  //     participants: ['closeUp_Mary', 'closeUp_Dwarf'],\n  //     conversation: [\n  //       {\n  //         who: 'closeUp_Mary',\n  //         text: [translate('level_6.dialog_1.mary_say_1')],\n  //       },\n  //       {\n  //         who: 'closeUp_Dwarf',\n  //         text: [translate('level_6.dialog_1.dwarf_say_1')],\n  //       },\n  //       {\n  //         who: 'closeUp_Mary',\n  //         text: [translate('level_6.dialog_1.mary_say_2')],\n  //       },\n  //       {\n  //         who: 'closeUp_Dwarf',\n  //         text: [translate('level_6.dialog_1.dwarf_say_2')],\n  //       },\n  //       {\n  //         who: 'closeUp_Mary',\n  //         text: [translate('level_6.dialog_1.mary_say_3')],\n  //       },\n  //       {\n  //         who: 'closeUp_Dwarf',\n  //         text: [translate('level_6.dialog_1.dwarf_say_3')],\n  //       },\n  //       {\n  //         who: 'closeUp_Mary',\n  //         text: [translate('level_6.dialog_1.mary_say_4')],\n  //       },\n  //       {\n  //         who: 'closeUp_Dwarf',\n  //         text: [translate('level_6.dialog_1.dwarf_say_4')],\n  //       },\n  //       {\n  //         who: 'closeUp_Dwarf',\n  //         text: [translate('level_6.dialog_1.dwarf_say_5')],\n  //       },\n  //       {\n  //         who: 'closeUp_Mary',\n  //         text: [translate('level_6.dialog_1.mary_say_5')],\n  //       },\n  //     ]\n  //   })\n\n  //   this.scene.events.once('dialogue:hidden', () => {\n  //     this.player.disconnect()\n  //     this.dwarfRun = true\n  //     this.moveDwarf()\n  //   })\n  // }\n  // showDialog2() {\n  //   this.scene.events.emit('dialogue:show', {\n  //     participants: ['closeUp_Mary'],\n  //     conversation: [\n  //       {\n  //         who: 'closeUp_Mary',\n  //         text: [translate('level_6.dialog_2.mary_say_1')],\n  //       },\n  //     ],\n  //   })\n  // }\n\n  // moveDwarf() {\n  //   // hack to auto move dwarf until pos x is 10\n  //   if (this.dwarfRun) {\n  //     if (this.leader.position.x < 16) {\n  //       this.leader.onPlayerMoves(this.player.position);\n  //       this.onNextTick(() => {\n  //         this.leader.animIdle()\n  //         this.moveDwarf()\n  //       });\n  //     } else {\n  //       this.leader.animIdle()\n  //       // auto pilot off\n  //       this.player.reconnect()\n\n  //       // listen for player move until dwarf reach last position of path, then\n  //       // remove fix of dwarfRun and remove listener\n  //       const onPlayerMove = (() => {\n  //         if (this.leader.position.x >= 30) {\n  //           this.dwarfRun = false\n  //           this.scene.events.removeListener('player_moves', onPlayerMove)\n  //         }\n  //       }).bind(this)\n  //       this.scene.events.addListener('player_moves', onPlayerMove )\n  //     }\n  //   }\n  // }\n}\n\nLevel7.key = 'level_7'\nexport default Level7;\n","import LevelBase from \"./levelBase\";\nimport { Empty, Exit, Interactive, NPCharacter, Player } from \"../objects\";\nimport { translate } from \"../../utils/localization\";\nimport UI from \"../UI\";\nimport { PIXEL_NAME, SCALE, TICK_TIME } from \"../../utils/constants\";\nimport template from 'lodash.template'\n\nclass Level8 extends LevelBase {\n  constructor() {\n    super();\n    this.name = \"The Sisyphean task\";\n    this.diamondsGoal = 40;\n    this.dwarf = null;\n    this.broSprite = null;\n    this.grayscalePipeline = null;\n    this.tripMusic = null\n    this.firstVisit = true\n  }\n\n  get id() {\n    return this.constructor.name;\n  }\n\n  connectToScene(scene) {\n    super.connectToScene(scene);\n    this.focusElement = this.player;\n    this.broSprite = this.scene.add.sprite(48, 16).setOrigin(0, 0.25);\n    this.broSprite.setScale(SCALE);\n    this.broSprite.play(\"bro_idle\");\n    this.broSprite.x = this.dwarf.alien.x + UI.tileToScreen(12);\n    this.broSprite.y = this.dwarf.alien.y;\n\n    this.grayscalePipeline = this.scene.renderer.pipelines.get(\"Gray\");\n    this.player.alien.setPipeline(this.grayscalePipeline);\n\n    this.tripMusic = this.scene.sound.add('swarf_chat_music', { loop: true, valume: 0 })\n  }\n\n  onInteractWith(el) {\n    super.onInteractWith(el);\n    // talk to Doc\n    if (el.order === 0) {\n      if(this.firstVisit) {\n        if(this.totalShroomsAmount > 0) {\n          this.showDialog1()\n        } else {\n          this.showDialog1NoShroom()\n        }\n      } else {\n        this.showDialog1Revisit()\n      }\n      this.firstVisit = false\n      // this.playTheTrip();\n    }\n    // if(el.order === 1) {\n    //   this.showDialog2()\n    // }\n    if (el.isClass(Exit)) {\n      this.onComplete();\n    }\n  }\n\n  onAddElement(el) {\n    if (el.isClass(Player)) {\n      el.power = 1;\n      el.hasPickaxe = true;\n      // hack to avoid overlap with Swarf\n      el._canMove = el.canMove;\n      el.canMove = (x, y) => {\n        const theyCan = el._canMove(x, y);\n        const neighbour = this.getObjectAt(x, y);\n        return theyCan && !neighbour.isClass(NPCharacter);\n      };\n    }\n\n    if(el.isClass(Interactive)) {\n      el.ephemeral = false\n    }\n\n    if (el.isClass(NPCharacter)) {\n      el.isCloseEnough = () => false;\n      this.dwarf = el;\n    }\n  }\n\n  showDialog1NoShroom() {\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Mary\", \"closeUp_Dwarf\"],\n      participantNames: [\"Mary\", \"Doc\"],\n      conversation: [\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_8.dialog_1_no_shrooms.mary_say_1\")],\n        },\n        {\n          who: \"closeUp_Dwarf\",\n          text: [translate(\"level_8.dialog_1_no_shrooms.dwarf_say_1\")],\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_8.dialog_1_no_shrooms.mary_say_2\")],\n        },\n        {\n          who: \"closeUp_Dwarf\",\n          text: [template(translate(\"level_8.dialog_1_no_shrooms.dwarf_say_2\"))({NUM: 5})],\n        },\n      ]\n    })\n  }\n  showDialog1Revisit() {\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Mary\", \"closeUp_Dwarf\"],\n      participantNames: [\"Mary\", \"Doc\"],\n      conversation: [\n        {\n          who: \"closeUp_Dwarf\",\n          text: [translate(\"level_8.dialog_1_repeat.dwarf_say_1\")],\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_8.dialog_1_repeat.mary_say_1\")],\n          options: {\n            slot0: {\n              label: translate(\"level_8.dialog_1_option.yes\"),\n              slot: 0,\n              onSelect: () => this.scene.events.emit(\"dialogue:nextPage\"),\n            },\n            slot1: {\n              label: translate(\"level_8.dialog_1_option.no\"),\n              slot: 1,\n              onSelect: () => this.scene.events.emit(\"dialogue:nextPage\", 1),\n            },\n            slot2: null,\n            slot3: null,\n          }\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_8.dialog_1_repeat.mary_say_2_yes\")],\n          options: {\n            slot2: null, // hide default NEXT option\n            slot3: {\n              label: translate(\"menu.dialog_options.close\"),\n              slot: 3,\n              onSelect: () => {\n                this.scene.events.emit(\"dialogue:hide\");\n                this.scene.events.once(\"dialogue:hidden\", () => {\n                  this.playTheTrip();\n                  this.scene.events.emit(\"score:mushroom_given\")\n                  this.collectedShrooms--\n                });\n              },\n            },\n          },\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_8.dialog_1_repeat.mary_say_2_no\")],\n        },\n      ]\n    })\n  }\n  showDialog1() {\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Mary\", \"closeUp_Dwarf\"],\n      participantNames: [\"Mary\", \"Doc\"],\n      conversation: [\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_8.dialog_1.mary_say_1\")],\n        },\n        {\n          who: \"closeUp_Dwarf\",\n          text: [translate(\"level_8.dialog_1.dwarf_say_1\")],\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_8.dialog_1.mary_say_2\")],\n          options: {\n            slot0: {\n              label: translate(\"level_8.dialog_1_option.yes\"),\n              slot: 0,\n              onSelect: () => this.scene.events.emit(\"dialogue:nextPage\"),\n            },\n            slot1: {\n              label: translate(\"level_8.dialog_1_option.no\"),\n              slot: 1,\n              onSelect: () => this.scene.events.emit(\"dialogue:nextPage\", 1),\n            },\n            slot2: null,\n            slot3: null,\n          },\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_8.dialog_1.mary_say_3_yes\")],\n          options: {\n            slot2: null, // hide default NEXT option\n            slot3: {\n              label: translate(\"menu.dialog_options.close\"),\n              slot: 3,\n              onSelect: () => {\n                this.scene.events.emit(\"dialogue:hide\");\n                this.scene.events.once(\"dialogue:hidden\", () => {\n                  this.playTheTrip();\n                  this.scene.events.emit(\"score:mushroom_given\")\n                  this.collectedShrooms--\n                });\n              },\n            },\n          },\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_8.dialog_1.mary_say_3_no\")],\n        },\n      ],\n    });\n  }\n\n  showDialog2() {\n    return new Promise((res) => {\n      this.scene.events.emit(\"dialogue:show\", {\n        participants: [\"closeUp_Dwarf\", \"closeUp_Marduk\"],\n        participantNames: [\"Doc\", \"Marduk\"],\n        conversation: [\n          {\n            who: \"closeUp_Dwarf\",\n            text: [translate(\"level_8.dialog_2.dwarf_say_1\")],\n          },\n          {\n            who: \"closeUp_Marduk\",\n            text: [translate(\"level_8.dialog_2.marduk_say_1\")],\n          },\n          {\n            who: \"closeUp_Dwarf\",\n            text: [translate(\"level_8.dialog_2.dwarf_say_2\")],\n          },\n          {\n            who: \"closeUp_Marduk\",\n            text: [translate(\"level_8.dialog_2.marduk_say_2\")],\n          },\n          {\n            who: \"closeUp_Dwarf\",\n            text: [translate(\"level_8.dialog_2.dwarf_say_3\")],\n          },\n          {\n            who: \"closeUp_Marduk\",\n            text: [translate(\"level_8.dialog_2.marduk_say_3\")],\n          },\n          {\n            who: \"closeUp_Dwarf\",\n            text: [translate(\"level_8.dialog_2.dwarf_say_4\")],\n          },\n          {\n            who: \"closeUp_Dwarf\",\n            text: [translate(\"level_8.dialog_2.dwarf_say_5\")],\n          },\n          {\n            who: \"closeUp_Marduk\",\n            text: [translate(\"level_8.dialog_2.marduk_say_4\")],\n          },\n          {\n            who: \"closeUp_Dwarf\",\n            text: [translate(\"level_8.dialog_2.dwarf_say_6\")],\n          },\n          {\n            who: \"closeUp_Dwarf\",\n            text: [translate(\"level_8.dialog_2.dwarf_say_7\")],\n          },\n        ],\n      });\n\n      this.scene.events.once(\"dialogue:hidden\", () => {\n        setTimeout(res, 500);\n      });\n    });\n  }\n\n  showDialog3() {\n    return new Promise((res) => {\n      this.scene.events.emit(\"dialogue:show\", {\n        participants: [\"closeUp_Mary\", \"closeUp_Dwarf\"],\n        participantNames: [\"Mary\", \"Doc\"],\n        conversation: [\n          {\n            who: \"closeUp_Mary\",\n            text: [translate(\"level_8.dialog_3.mary_say_1\")],\n          },\n          {\n            who: \"closeUp_Dwarf\",\n            text: [translate(\"level_8.dialog_3.dwarf_say_1\")],\n          },\n          {\n            who: \"closeUp_Mary\",\n            text: [translate(\"level_8.dialog_3.mary_say_2\")],\n          },\n          {\n            who: \"closeUp_Dwarf\",\n            text: [translate(\"level_8.dialog_3.dwarf_say_2\")],\n          },\n        ],\n      });\n      this.scene.events.once(\"dialogue:hidden\", () => {\n        setTimeout(res, 500);\n      });\n    });\n  }\n\n  async playTheTrip() {\n    this.player.disconnect();\n    await this.animFadeOutLevel();\n    await this.moveCamera();\n    this.animPlayerAndDwarf();\n    await this.animBroEntrance();\n\n    await this.showDialog2();\n    await this.vanishBro();\n    await this.animDwarfMoveCloseToPlayer();\n    await this.showDialog3();\n\n    await this.vanishDwarf()\n\n    await this.animFadeInLevel()\n\n    this.restoreRegularGamePlay()\n  }\n  \n  restoreRegularGamePlay() {\n    // remove interactive element\n    this.interactiveElements[`${this.player.position.x}-${this.player.position.y}`] = null\n    // remove dwarf presence in map\n    this.setObjectAt(\n      this.dwarf.position.x,\n      this.dwarf.position.y,\n      new Empty(PIXEL_NAME.EMPTY, this)\n    )\n\n    this.player.reconnect()\n    this.focusElement = this.player\n  }\n\n  vanishDwarf() {\n    return new Promise((res) => {\n      // reposition player sprite\n      this.scene.tweens.add({\n        targets: this.player.alien,\n        x: this.player.alien.x + UI.tileToScreen(2),\n        duration: 3000,\n        ease: \"Linear\",\n        onComplete: () => {\n        },\n      });\n      // grayscale NPC\n      this.scene.tweens.add({\n        targets: [this.dwarf.alien],\n        duration: 3000,\n        alpha: 0,\n        x: this.dwarf.alien.x + UI.tileToScreen(2),\n        onComplete: res\n      })\n\n      // music transition\n      this.scene.tweens.add({\n        targets: this.scene.rules.music,\n        volume: 1,\n        delay: 1500,\n        ease: 'Linear',\n        duration: 1000,\n      });\n      \n      this.scene.tweens.add({\n        targets: this.tripMusic,\n        volume: 0,\n        ease: 'Linear',\n        duration: 1000,\n        onComplete: () => this.tripMusic.stop()\n      });\n    })\n  }\n\n  vanishBro() {\n    return new Promise((res) => {\n      this.scene.tweens.add({\n        targets: this.broSprite,\n        duration: 2000,\n        alpha: 0,\n        onComplete: res\n      });\n    });\n  }\n\n  async animBroEntrance() {\n    return new Promise((res) => {\n      // move bro\n      this.scene.tweens.add({\n        targets: this.broSprite,\n        x: this.broSprite.x - UI.tileToScreen(10),\n        duration: TICK_TIME * 10,\n        ease: \"Linear\",\n        delay: TICK_TIME * 10,\n        onComplete: () => {\n          this.player.animIdle();\n          this.dwarf.animIdle();\n          this.dwarf.animRunRight();\n          res();\n        },\n      });\n    });\n  }\n\n  animDwarfMoveCloseToPlayer() {\n    return new Promise((res) => {\n      this.dwarf.animRunLeft();\n      this.dwarf.animRun();\n\n      // move player left and play run right\n      this.scene.tweens.add({\n        targets: this.dwarf.alien,\n        x: this.dwarf.alien.x - UI.tileToScreen(1),\n        duration: TICK_TIME,\n        ease: \"Linear\",\n        onComplete: () => {\n          this.dwarf.animIdle();\n          this.dwarf.animRunRight();\n          // colorize player\n          this.scene.tweens.add({\n            targets: this.grayscalePipeline,\n            duration: 1000,\n            gray: 0,\n            completeDelay: 1000,\n            onComplete: res,\n          });\n        },\n      });\n    });\n  }\n\n  animPlayerAndDwarf() {\n    this.dwarf.animRunRight();\n    this.dwarf.animRun();\n\n    // move player left and play run right\n    this.scene.tweens.add({\n      targets: this.player.alien,\n      x: this.player.alien.x - UI.tileToScreen(2),\n      duration: TICK_TIME * 2,\n      ease: \"Linear\",\n      onComplete: () => {\n        this.player.animRun();\n      },\n    });\n  }\n\n  async moveCamera() {\n    // replace focus element (currently the player) for a position object with the same values\n    this.focusElement = {\n      position: { x: this.player.position.x, y: this.player.position.y },\n    };\n    return new Promise((res) => {\n      this.scene.tweens.add({\n        targets: this.focusElement.position,\n        x: this.dwarf.position.x + 5,\n        ease: \"Linear\",\n        duration: 1000,\n        onComplete: () => {\n          res();\n          //   titlesMusic.pause()\n          //   scene.start(sceneId, props)\n        },\n      });\n    });\n    // return new Promise(res => {\n    //   setTimeout(() => {\n    //     this.focusElement = { position: {x: this.dwarf.position.x + UI.tileToScreen(5), y: this.dwarf.position.y}}\n    //     res()\n    //   }, 2000)\n    // })\n  }\n\n  async animFadeInLevel() {\n    return new Promise((res) => {\n      this.scene.tweens.add({\n        targets: { alpha: 0 },\n        alpha: 1,\n        ease: \"Linear\",\n        duration: 2000,\n        onUpdate: (tween, target) => {\n          this.setLevelAlpha(target.alpha);\n        },\n        onComplete: res,\n      });\n    })\n  }\n  async animFadeOutLevel() {\n    return new Promise((res) => {\n      this.scene.tweens.add({\n        targets: this.grayscalePipeline,\n        delay: 1000,\n        duration: 1000,\n        gray: 1,\n      });\n      this.scene.tweens.add({\n        targets: { alpha: 1 },\n        alpha: 0,\n        ease: \"Linear\",\n        duration: 1000,\n        onUpdate: (tween, target) => {\n          this.setLevelAlpha(target.alpha);\n        },\n        onComplete: res,\n      });\n      // music transition\n      this.scene.tweens.add({\n        targets: this.scene.rules.music,\n        volume: 0,\n        ease: 'Linear',\n        duration: 1000,\n      });\n      this.tripMusic.volume = 0\n      this.tripMusic.play()\n      this.scene.tweens.add({\n        targets: this.tripMusic,\n        volume: 1,\n        delay: 500,\n        ease: 'Linear',\n        duration: 1000,\n      });\n    });\n  }\n\n  setLevelAlpha(value) {\n    const layer_1 = this.scene.children.getByName(\"layer_1\");\n    const layer_1z2 = this.scene.children.getByName(\"layer_1z2\");\n    const layer_2 = this.scene.children.getByName(\"layer_2\");\n    const layer_0 = this.scene.children.getByName(\"layer_0\");\n    const level_background_art = this.scene.children.getByName(\n      \"level_background_art\"\n    );\n    layer_1.setAlpha(value);\n    layer_1z2.setAlpha(value);\n    layer_2.setAlpha(value);\n    layer_0.setAlpha(value);\n    level_background_art.setAlpha(value / 4);\n    this.objects.forEach((row) =>\n      row.forEach((el) => {\n        if (el.alien && !el.isClass(Player) && !el.isClass(NPCharacter)) {\n          el.alien.setAlpha(value);\n        }\n      })\n    );\n    Object.values(this.decorationElements).forEach((el) =>\n      el.alien.setAlpha(value)\n    );\n  }\n\n  //   this.scene.events.once('dialogue:hidden', () => {\n  //     this.player.disconnect()\n  //     this.dwarfRun = true\n  //     this.moveDwarf()\n  //   })\n  // }\n  // showDialog2() {\n  //   this.scene.events.emit('dialogue:show', {\n  //     participants: ['closeUp_Mary'],\n  //     conversation: [\n  //       {\n  //         who: 'closeUp_Mary',\n  //         text: [translate('level_6.dialog_2.mary_say_1')],\n  //       },\n  //     ],\n  //   })\n  // }\n\n  // moveDwarf() {\n  //   // hack to auto move dwarf until pos x is 10\n  //   if (this.dwarfRun) {\n  //     if (this.leader.position.x < 16) {\n  //       this.leader.onPlayerMoves(this.player.position);\n  //       this.onNextTick(() => {\n  //         this.leader.animIdle()\n  //         this.moveDwarf()\n  //       });\n  //     } else {\n  //       this.leader.animIdle()\n  //       // auto pilot off\n  //       this.player.reconnect()\n\n  //       // listen for player move until dwarf reach last position of path, then\n  //       // remove fix of dwarfRun and remove listener\n  //       const onPlayerMove = (() => {\n  //         if (this.leader.position.x >= 30) {\n  //           this.dwarfRun = false\n  //           this.scene.events.removeListener('player_moves', onPlayerMove)\n  //         }\n  //       }).bind(this)\n  //       this.scene.events.addListener('player_moves', onPlayerMove )\n  //     }\n  //   }\n  // }\n}\n\nLevel8.key = \"level_8\";\nexport default Level8;\n","import LevelBase from \"./levelBase\";\nimport { Exit, Player } from \"../objects\";\n\nclass Level9 extends LevelBase {\n  constructor() {\n    super();\n    this.name = \"The floodgates\";\n    this.diamondsGoal = 10;\n    // this.dwarfRun = false\n  }\n\n  get id() {\n    return this.constructor.name;\n  }\n\n  onInteractWith(el) {\n    super.onInteractWith(el)\n    \n    if (el.isClass(Exit)) {\n      this.onComplete();\n    }\n  }\n\n  onAddElement(el) {\n    if (el.constructor.name === Player.name) {\n      el.power = 1;\n      el.hasPickaxe = true;\n    }\n\n  }\n\n}\n\nLevel9.key = 'level_9'\nexport default Level9;\n","import LevelBase from \"./levelBase\";\nimport { Exit, Player } from \"../objects\";\n\nclass Level10 extends LevelBase {\n  constructor() {\n    super();\n    this.name = \"The typhoon\";\n    this.diamondsGoal = 10;\n    // this.dwarfRun = false\n  }\n\n  get id() {\n    return this.constructor.name;\n  }\n\n  onInteractWith(el) {\n    super.onInteractWith(el)\n    \n    if (el.isClass(Exit)) {\n      this.onComplete();\n    }\n  }\n\n  onAddElement(el) {\n    if (el.constructor.name === Player.name) {\n      el.power = 1;\n      el.hasPickaxe = true;\n    }\n\n  }\n\n}\n\nLevel10.key = 'level_10'\nexport default Level10;\n","import LevelBase from \"./levelBase\";\nimport { Exit, Player } from \"../objects\";\n\nclass Level11 extends LevelBase {\n  constructor() {\n    super();\n    this.name = \"The castle\";\n    this.diamondsGoal = 10;\n    // this.dwarfRun = false\n  }\n\n  get id() {\n    return this.constructor.name;\n  }\n\n  onInteractWith(el) {\n    super.onInteractWith(el)\n    \n    if (el.isClass(Exit)) {\n      this.onComplete();\n    }\n  }\n\n  onAddElement(el) {\n    if (el.constructor.name === Player.name) {\n      el.power = 1;\n      el.hasPickaxe = true;\n    }\n\n  }\n\n}\n\nLevel11.key = 'level_11'\nexport default Level11;\n","import LevelBase from './levelBase'\nimport { PIXEL_NAME, DIRS } from '../../utils/constants'\nimport { Player, Wall, Ground, Empty } from '../objects'\n\n\nclass LevelFinale extends LevelBase {\n  constructor() {\n    super()\n    this.name = 'The escape'\n\n    this.winningLoopRef = this.winningLoop.bind(this)\n  }\n\n  get id() {\n    return this.constructor.name\n  }\n\n  connectToScene(scene) {\n    super.connectToScene(scene)\n    this.voidLevel = scene.children.getByName('layer_1').tilemap.height - 1\n    this.fx = this.scene.sound.add('earthquake')\n    // scene.events.once('levelstart', () => {\n    //   scene.events.emit('dialogue:show', {\n    //     participants: ['closeUp_Mary', 'closeUp_Tiamat'],\n    //     conversation: [\n    //       {\n    //         who: 'closeUp_Tiamat',\n    //         text: [\n    //           \"STOP!!\",\n    //           \"I will destroy everything\",\n    //           \"if i have to.\",\n    //           \"you belong to me!!\",\n    //         ]\n    //       }\n    //     ]\n    //   })\n    // })\n    scene.events.on('update', this.winningLoopRef)\n    this.startVoid(scene)\n    \n  }\n  startVoid(phaserScene) {\n    const camera = phaserScene.cameras.main\n    setTimeout(() => {\n      camera.shake(2000, 0.005)\n      this.fx.play()\n    }, 1500)\n    // destroy ground up to 1 tiles before player\n  }\n  playerLoop() {\n    super.playerLoop()\n    this.voidLoop()\n  }\n  resetAutoVoidTimer() {\n    clearTimeout(this.autoDestroyTID)\n    this.autoDestroyTID = setTimeout(this.destroyMap.bind(this), 5000)\n  }\n  destroyMap() {\n    this.resetAutoVoidTimer()\n    const layer = this.scene.children.getByName('layer_1')\n    if(!layer) {\n      return false\n    }\n    const { tilemap: map } = layer\n    const camera = this.scene.cameras.main\n    const y = this.voidLevel\n    layer.fill(100, 0, y, map.width, 1)\n    this.objects[y].forEach((el, x) => {\n      if (el.constructor.name === Wall.name || el.constructor.name === Ground.name) {\n        this.objects[y][x] = new Empty(PIXEL_NAME.EMPTY, this)\n      }\n    })\n    \n    this.moveables = this.moveables.filter(el => {\n      if (el.position.y > this.voidLevel) {\n        el.alien?.destroy()\n        return false\n      }\n      return true\n    })\n\n    camera.shake(1000, 0.001)\n    this.fx.play()\n    this.voidLevel--\n\n    // eval death.\n    if (this.player.position.y > this.voidLevel) {\n      this.player.die()\n      this.onCharacterDie(this.player)\n    }\n  }\n  voidLoop() {\n    // detect player move direction\n    if (this.player.isMoving && this.player.nextMoveDir === DIRS.UP) {\n      this.resetAutoVoidTimer()\n      // if moves up\n      if(this.voidLevel - this.player.position.y > 8) {\n        // only detroy ground when more than 3 tiles of space\n        this.destroyMap()\n      }\n    } else if(this.player.isMoving && this.player.nextMoveDir !== '') {\n      // if moves sides or down\n      // destroy ground\n      this.destroyMap()      \n    }\n\n  }\n  destroy() {\n    this.scene.events.off('update', this.winningLoopRef)\n    this.fx.stop()\n    clearTimeout(this.autoDestroyTID)\n    \n  }\n\n  winningLoop() {\n    if(this.player.position.y < 5) {\n      clearTimeout(this.autoDestroyTID)\n      this.scene.events.off('update', this.winningLoopRef)\n      this.onComplete()\n    }\n  }\n\n  onAddElement(el) {\n    if(el.constructor.name === Player.name) {\n      el.power = 1\n      el.hasPickaxe = true\n    }\n  }\n}\n\nLevelFinale.key = 'level_finale'\nexport default LevelFinale\n","import Phaser from \"phaser\";\nimport LevelBase from \"./levelBase\";\nimport { Exit, Interactive, Player } from \"../objects\";\nimport { PIXEL_NAME, SCALE, TILE_SIZE } from \"../../utils/constants\";\n\nclass LevelMaze1 extends LevelBase {\n  constructor() {\n    super();\n    this.name = \"The Maze\";\n    this.isMaze = true;\n    this.exitEye = null\n  }\n\n  connectToScene(scene) {\n    super.connectToScene(scene);\n    //  Enable lights and set a dark ambient color\n    scene.lights.enable().setAmbientColor(0x000000);\n\n    //  Our spotlight. 100px radius and white in color.\n    this.light = scene.lights\n      .addLight(this.player.alien.x, this.player.alien.y, 1000)\n      .setColor(0xeaeaea)\n      .setIntensity(1.5);\n    scene.time.addEvent({\n      delay: 100,\n      callback: function () {\n        this.light.x = this.player.alien.x;\n        this.light.y = this.player.alien.y;\n        Phaser.Geom.Ellipse.Random(this.player.alien, this.light);\n      },\n      callbackScope: this,\n      repeat: -1,\n    });\n\n    scene.children.getByName(\"layer_1\").setPipeline(\"Light2D\");\n    scene.children.getByName(\"layer_2\").setPipeline(\"Light2D\");\n    scene.children.getByName(\"layer_1z2\").setPipeline(\"Light2D\");\n    this.moveables.forEach((m) => m.alien.setPipeline(\"Light2D\"));\n\n\n    const exit = Object.values(this.interactiveElements).find(el => el.isClass(Exit))\n    this.moveObject(this.player, {x: exit.position.x-3, y: exit.position.y+2});\n\n    const preExit = new Interactive(PIXEL_NAME.INTERACTION, this)\n    preExit.order = -1\n    this.interactiveElements[`${exit.position.x-2}-${exit.position.y}`] = preExit\n    preExit.setPosition({ x: exit.position.x-2, y: exit.position.y });\n\n\n    this.scene.events.on('player_moves',  this.updateLight.bind(this))\n  }\n\n  updateLight(nextPos) {\n    const exit = Object.values(this.interactiveElements).find(el => el.isClass(Exit))\n    if(!exit) return false\n    if(nextPos.x === exit.position.x-3 && nextPos.y === exit.position.y) {\n      this.light.setRadius(500)\n      this.light.setIntensity(1.3)\n\n      // remove alpha tween\n      if (this.eyeAnimation) {\n        this.exitEye.alpha = 0\n        this.eyeAnimation.remove()\n      }\n    }else if(nextPos.x === exit.position.x-2 && nextPos.y === exit.position.y) {\n      // this.light.setIntensity(1.3)\n      this.light.setRadius(250)\n      this.light.setIntensity(0.8)\n\n      // alpha tween from 0 to 0.5\n      if (this.eyeAnimation) {\n        this.eyeAnimation.remove()\n      }\n      this.exitEye.alpha = 0.1\n      this.eyeAnimation = this.scene.tweens.add({\n        targets: this.exitEye,\n        alpha: 0.2,\n        duration: 100,\n        yoyo: true,\n        repeat: -1,\n      })\n    }else if(nextPos.x === exit.position.x-1 && nextPos.y === exit.position.y) {\n      // this.light.setIntensity(1.3)\n      this.light.setIntensity(0.3)\n      this.light.setRadius(125)\n\n      // alpha tween from 0.5 to 1\n      if (this.eyeAnimation) {\n        this.eyeAnimation.remove()\n      }\n      this.exitEye.alpha = 0.3\n      this.eyeAnimation = this.scene.tweens.add({\n        targets: this.exitEye,\n        alpha: 0.5,\n        duration: 100,\n        yoyo: true,\n        repeat: -1,\n      })\n      \n    }else if(nextPos.x === exit.position.x && nextPos.y === exit.position.y) {\n      this.light.setIntensity(0.1)\n    } else if(this.light !== 1.5) {\n      this.light.setIntensity(1.5)\n      this.light.setRadius(1000)\n    }\n    // const layer = this.scene.children.getByName('layer_2')\n    // if(!layer) {\n    //   return true\n    // }\n    // const map = layer.tilemap\n    // let origin = this.player.position\n    // this.moveables.forEach(el => {\n    //   var dist = Phaser.Math.Distance.Snake(\n    //       origin.x,\n    //       origin.y,\n    //       el.position.x,\n    //       el.position.y\n    //   );\n\n    //   el.alien?.setAlpha(1 - 0.1 * dist);\n    // })\n    // layer.forEachTile((tile) => {\n    //   var dist = Phaser.Math.Distance.Snake(\n    //       origin.x,\n    //       origin.y,\n    //       tile.x,\n    //       tile.y\n    //   );\n\n    //   // tile.setAlpha(0.5);\n    //   tile.setAlpha(1 - 0.1 * dist);\n    // });\n\n  }\n\n  get id() {\n    return this.constructor.name;\n  }\n\n  onInteractWith(el) {\n    super.onInteractWith(el);\n    if (el.order === 0) {\n      this.onComplete();\n    }\n  }\n\n  onAddElement(el) {\n    if (el.isClass(Player)) {\n      el.power = 1;\n      el.hasPickaxe = false;\n      el.ligthTorch(); \n    }\n\n    if (el.isClass(Exit)) {\n      const layer = this.scene.children.getByName('layer_2')\n      const map = layer.tilemap\n\n      this.exitEye = this.scene.add\n        .sprite(48, 16, \"spark\")\n        .setOrigin(0.5, 0.5)\n      this.exitEye.setTintFill(0xD25400)\n      this.exitEye.setScale(layer.scaleX * 2, layer.scaleX * 4);\n      this.exitEye.x = map.tileToWorldX(el.position.x-0.5);\n      this.exitEye.y = map.tileToWorldY(el.position.y-0.4);\n      this.exitEye.depth = 100\n      this.exitEye.alpha = 0\n    }\n  }\n}\n\nLevelMaze1.key = 'maze_1'\nexport default LevelMaze1;\n","import { SCALE } from \"../../utils/constants\";\n\nclass Arrow {\n  constructor(scene) {\n    this.scene = scene;\n    // Creating a blank tilemap\n    this.map = this.scene.make.tilemap({ tileWidth: 20, tileHeight: 20, width: 3, height: 1 });\n  }\n\n  getArrow() {\n    const map = this.map\n    // addTilesetImage: function (tilesetName, key, tileWidth, tileHeight, tileMargin, tileSpacing, gid)\n    let tileset = map.addTilesetImage('arrows', 'hud-tiles', 20, 20, 1, 2);\n    let layer = map.createBlankLayer('layer_arrow', tileset);\n    layer.name = 'layer_arrow'\n    layer.depth = 15\n    layer.setScrollFactor(0)\n    layer.setScale(SCALE)\n    \n    return map.putTileAt(30, 0, 0);\n  }\n  \n  getArrowDown() {\n    const tile = this.getArrow()\n    return tile\n  }\n  getArrowRight() {\n    const tile = this.getArrow()\n    tile.rotation = -Math.PI/2\n    return tile\n  }\n  getArrowUp() {\n    const tile = this.getArrow()\n    tile.rotation = Math.PI\n    return tile\n  }\n  getArrowLeft() {\n    const tile = this.getArrow()\n    tile.rotation = Math.PI/2\n    return tile\n  }\n}\n\nexport default Arrow","import { SCALE } from \"../utils/constants\";\nimport LevelTest from \"../components/levels/level_test\";\nimport Level1 from \"../components/levels/level_1\";\nimport Level2 from \"../components/levels/level_2\";\nimport Level3 from \"../components/levels/level_3\";\nimport Level4 from \"../components/levels/level_4\";\nimport Level5 from \"../components/levels/level_5\";\nimport Level6 from \"../components/levels/level_6\";\nimport Level7 from \"../components/levels/level_7\";\nimport Level8 from \"../components/levels/level_8\";\nimport Level9 from \"../components/levels/level_9\";\nimport Level10 from \"../components/levels/level_10\";\nimport Level11 from \"../components/levels/level_11\";\nimport LevelFinale from \"../components/levels/level_finale\";\nimport LevelMaze1 from \"../components/levels/Maze_1\";\nimport UI from \"./UI\";\nimport { translate } from \"../utils/localization\";\nimport Arrow from \"./DialogArrow\";\nimport DB from \"../utils/dbManager\";\nimport dbManager from \"../utils/dbManager\";\n\nexport default class UIMenus {\n  constructor(scene) {\n    this.scene = scene;\n    this.ROW_HEIGHT = 0;\n    this.MARGIN_LEFT = 0;\n    this.MARGIN_TOP = 0;\n    this.options = [];\n    this.optionsByPage = [];\n    this.scrollIndex = 0;\n    this.isVisible = true;\n\n    window.scene = this.scene;\n  }\n  showConfirmNewGameMenu() {\n    const menuOptions = [\n      {\n        label: translate(\"menu.main.yes\"),\n        disabled: false,\n        selectable: true,\n        onSelect: () => {\n          this.scene.navigateToScene(\"IntroScene\");\n        },\n      },\n      {\n        label: translate(\"menu.main.no\"),\n        disabled: false,\n        selectable: true,\n        onSelect: () => this.scene.navigateToScene(\"LandingScene\"),\n      },\n    ];\n    const header = {\n      label: \"Start a new game and lost\\n\\nyour current progress?\",\n      disabled: false,\n      selectable: false,\n    };\n    this.drawSelectableOptions(header, menuOptions, 0, 1, 2);\n  }\n  showInitialMenu() {\n    const menuOptions = [\n      {\n        label: translate(\"menu.main.option_new\"),\n        disabled: false,\n        selectable: true,\n        onSelect: () => {\n          const level_1 = dbManager.get(Level1.key);\n          if (level_1) {\n            this.scene.navigateToScene(\"ConfirmNewGameScene\");\n          } else {\n            this.scene.navigateToScene(\"IntroScene\");\n          }\n        },\n      },\n      {\n        label: translate(\"menu.main.option_continue\"),\n        disabled: false,\n        selectable: true,\n        // onSelect: () => this.scene.navigateToScene(\"LevelResumeScene\", { level: Level3.key}),\n        onSelect: () => this.scene.navigateToScene(\"MenuScene\"),\n      },\n    ];\n    this.drawSelectableOptions(null, menuOptions);\n  }\n  showMainMenu() {\n    // const levelData = DB.get(Level1.key);\n    // const maxProgress = DB.get(\"maxProgress\") || 1;\n    // shorthand formatter\n    const _ = (n) =>\n      n.toLocaleString(\"en-US\", {\n        minimumIntegerDigits: 2,\n      });\n    const _gems = (lKey) => {\n      const levelData = DB.get(lKey);\n      return levelData\n        ? `${_(levelData.collectedDiamonds)}/${_(levelData.countDiamonds)}`\n        : \"__/__\";\n    };\n    const _threats = (lKey) => {\n      const levelData = DB.get(lKey);\n      return levelData\n        ? `${_(levelData.killedEnemies)}/${_(levelData.countEnemies)}`\n        : \"__/__\";\n    };\n    const _shrooms = (lKey) => {\n      const levelData = DB.get(lKey);\n      return levelData\n        ? `${_(levelData.collectedShrooms)}/${_(levelData.countShrooms)}`\n        : \"__/__\";\n    };\n    const _comp = (lKey) => {\n      const levelData = DB.get(lKey);\n      const perc = (levelData?.comp * 100).toLocaleString(\"en-US\", {\n        minimumFractionDigits: 0,\n        maximumFractionDigits: 0,\n      });\n      return levelData\n        ? `${perc <= 9 ? \"  \" : perc <= 99 ? \" \" : \"\"}${perc}%`\n        : \"100%\";\n    };\n    const menuOptions = [\n      {\n        label: `Ki    1     ${_gems(Level1.key)}     ${_threats(\n          Level1.key\n        )}     ${_shrooms(Level1.key)}   ${_comp(Level1.key)}`,\n        // label: \"Ki    1     __/__     __/__     __/__   100%\",\n        disabled: false && window.localStorage.getItem(\"level_1\") !== \"true\",\n        selectable: true,\n        onSelect: () =>\n          this.scene.navigateToScene(\"GameScene\", { levelName: Level1.key }),\n      },\n      {\n        label: \"Maze  1\",\n        disabled:\n          false && window.localStorage.getItem(\"level_maze_1\") !== \"true\",\n        selectable: true,\n        onSelect: () =>\n          this.scene.navigateToScene(\"GameScene\", {\n            levelName: LevelMaze1.key,\n          }),\n      },\n      {\n        label: `Ki    2     ${_gems(Level2.key)}     ${_threats(\n          Level2.key\n        )}     ${_shrooms(Level2.key)}   ${_comp(Level2.key)}`,\n        // label: \"Absu  2     __/__     __/__     __/__   100%\",\n        disabled: false && window.localStorage.getItem(\"level_2\") !== \"true\",\n        selectable: true,\n        onSelect: () =>\n          this.scene.navigateToScene(\"GameScene\", { levelName: Level2.key }),\n      },\n      {\n        label: `Ki    3     ${_gems(Level3.key)}     ${_threats(\n          Level3.key\n        )}     ${_shrooms(Level3.key)}   ${_comp(Level3.key)}`,\n        disabled: false && window.localStorage.getItem(\"level_3\") !== \"true\",\n        selectable: true,\n        onSelect: () =>\n          this.scene.navigateToScene(\"GameScene\", { levelName: Level3.key }),\n      },\n      {\n        label: `Ki    4     ${_gems(Level4.key)}     ${_threats(\n          Level4.key\n        )}     ${_shrooms(Level4.key)}   ${_comp(Level4.key)}`,\n        disabled: false && window.localStorage.getItem(\"level_4\") !== \"true\",\n        selectable: true,\n        onSelect: () =>\n          this.scene.navigateToScene(\"GameScene\", { levelName: Level4.key }),\n      },\n      {\n        label: `Ki    5     ${_gems(Level5.key)}     ${_threats(\n          Level5.key\n        )}     ${_shrooms(Level5.key)}   ${_comp(Level5.key)}`,\n        disabled: false && window.localStorage.getItem(\"level_5\") !== \"true\",\n        selectable: true,\n        onSelect: () =>\n          this.scene.navigateToScene(\"GameScene\", { levelName: Level5.key }),\n      },\n      {\n        label: `Ki    6     ${_gems(Level6.key)}     ${_threats(\n          Level6.key\n        )}     ${_shrooms(Level6.key)}   ${_comp(Level6.key)}`,\n        disabled: false && window.localStorage.getItem(\"level_6\") !== \"true\",\n        selectable: true,\n        onSelect: () =>\n          this.scene.navigateToScene(\"GameScene\", { levelName: Level6.key }),\n      },\n      {\n        label: `Ki    7     ${_gems(Level7.key)}     ${_threats(\n          Level7.key\n        )}     ${_shrooms(Level7.key)}   ${_comp(Level7.key)}`,\n        disabled: false && window.localStorage.getItem(\"level_7\") !== \"true\",\n        selectable: true,\n        onSelect: () =>\n          this.scene.navigateToScene(\"GameScene\", { levelName: Level7.key }),\n      },\n      {\n        label: `Ki    8     ${_gems(Level8.key)}     ${_threats(\n          Level8.key\n        )}     ${_shrooms(Level8.key)}   ${_comp(Level8.key)}`,\n        disabled: false && window.localStorage.getItem(\"level_8\") !== \"true\",\n        selectable: true,\n        onSelect: () =>\n          this.scene.navigateToScene(\"GameScene\", { levelName: Level8.key }),\n      },\n      {\n        label: `Ki    9     ${_gems(Level9.key)}     ${_threats(\n          Level9.key\n        )}     ${_shrooms(Level9.key)}   ${_comp(Level9.key)}`,\n        disabled: false && window.localStorage.getItem(\"level_9\") !== \"true\",\n        selectable: true,\n        onSelect: () =>\n          this.scene.navigateToScene(\"GameScene\", { levelName: Level9.key }),\n      },\n      {\n        label: `Ki   10     ${_gems(Level10.key)}     ${_threats(\n          Level10.key\n        )}     ${_shrooms(Level10.key)}   ${_comp(Level10.key)}`,\n        disabled: false && window.localStorage.getItem(\"level_10\") !== \"true\",\n        selectable: true,\n        onSelect: () =>\n          this.scene.navigateToScene(\"GameScene\", { levelName: Level10.key }),\n      },\n      {\n        label: `Ki   11     ${_gems(Level11.key)}     ${_threats(\n          Level11.key\n        )}     ${_shrooms(Level11.key)}   ${_comp(Level11.key)}`,\n        disabled: false && window.localStorage.getItem(\"level_11\") !== \"true\",\n        selectable: true,\n        onSelect: () =>\n          this.scene.navigateToScene(\"GameScene\", { levelName: Level11.key }),\n      },\n      {\n        label: \"Test  x     __/__     __/__     __/__   100%\",\n        disabled: false && window.localStorage.getItem(\"level_test\") !== \"true\",\n        selectable: true,\n        onSelect: () =>\n          this.scene.navigateToScene(\"GameScene\", {\n            levelName: LevelTest.key,\n          }),\n      },\n      // , {\n      //   label: 'Cinematic final',\n      //   disabled: false,\n      //   selectable: true,\n      //   onSelect: () => this.scene.navigateToScene('ConnectorScene', { id: 8, name: 'cinematic_last' } )\n      // }\n      // , {\n      //   label: 'Cinematic final',\n      //   disabled: false,\n      //   selectable: true,\n      //   onSelect: () => this.scene.navigateToScene('ConnectorScene', { id: 7, name: 'cinematic_escape' } )\n      // }\n    ];\n\n    const header = {\n      label: translate(\"menu.main.heading_scrore\"),\n      disabled: false,\n      selectable: false,\n    };\n\n    // last option selected by default\n    this.drawSelectableOptions(\n      header,\n      menuOptions,\n      menuOptions.length - 1,\n      null,\n      null,\n      11\n    );\n  }\n  showInGameMenu() {\n    const menuOptions = [\n      {\n        label: \"Restart level\",\n        disabled: false,\n        selectable: true,\n        onSelect: () => this.scene.levels.restart(),\n      },\n      {\n        label: \"Exit to menu\",\n        disabled: false,\n        selectable: true,\n        onSelect: () => this.scene.scene.start(\"MenuScene\"),\n      },\n    ];\n\n    this.drawSelectableOptions(null, menuOptions, 0, 4, 1);\n  }\n\n  drawSelectableOptions(\n    header,\n    options,\n    initOption,\n    offsetX,\n    offsetY,\n    maxRows = 5\n  ) {\n    this.options = options;\n\n    const FIRST_SELECTABLE_OPTION = options.findIndex((o) => o.selectable);\n\n    let currentOption = FIRST_SELECTABLE_OPTION;\n    if (initOption >= maxRows - 1) {\n      // must scroll options\n      if (initOption < this.options.length) {\n        this.scrollIndex = initOption - maxRows + 1;\n        const haveMorePages = this.scrollIndex + maxRows < this.options.length;\n        if (haveMorePages) {\n          this.scrollIndex = initOption - maxRows + 2;\n          // arrow points one before the last\n          currentOption = maxRows - 2;\n        } else {\n          // arrow points the last option\n          currentOption = maxRows - 1;\n        }\n        // and list scrolls up to that option\n      } else {\n        // latest option, arrow should point to that\n        currentOption = maxRows;\n        this.scrollIndex = initOption - maxRows;\n      }\n    } else if (!isNaN(initOption)) {\n      currentOption = initOption;\n    }\n\n    const currentPage = Math.floor(currentOption / maxRows) + 1;\n    let currentIndex = currentOption - Math.floor((currentPage - 1) * maxRows);\n\n    const INIT_POS = currentOption;\n    this.ROW_HEIGHT = UI.pixelToScreen(15);\n    this.MARGIN_LEFT = UI.tileToScreen(offsetX || 1);\n    const ARROW_WIDTH = UI.pixelToScreen(20);\n    const OFFSET_X = this.MARGIN_LEFT - ARROW_WIDTH;\n    this.MARGIN_TOP = UI.tileToScreen(offsetY || 2);\n\n    const arrow = new Arrow(this.scene).getArrowRight();\n    arrow.tilemapLayer.setPosition(\n      OFFSET_X,\n      this.MARGIN_TOP + this.ROW_HEIGHT * INIT_POS - this.ROW_HEIGHT / 2\n    );\n\n    const arrowUp = new Arrow(this.scene).getArrowUp();\n    arrowUp.tilemapLayer.setPosition(\n      UI.tileToScreen(19),\n      this.MARGIN_TOP - this.ROW_HEIGHT\n    );\n    arrowUp.setAlpha(this.scrollIndex === 0 ? 0.5 : 1);\n    arrowUp.setVisible(maxRows < this.options.length);\n\n    const arrowDown = new Arrow(this.scene).getArrowDown();\n    arrowDown.tilemapLayer.setPosition(\n      UI.tileToScreen(19),\n      this.MARGIN_TOP + this.ROW_HEIGHT * maxRows - this.ROW_HEIGHT\n    );\n    arrowDown.setAlpha(\n      this.scrollIndex + maxRows < this.options.length ? 1 : 0.5\n    );\n    arrowDown.setVisible(maxRows < this.options.length);\n\n    if (header) {\n      const label = [\n        ...header.label.split(\"\"),\n        ...Array(Math.max(0, 20 - header.label.length)).fill(\"\"),\n      ].join(\"\")\n      const lines = Math.round(label.length / 20)\n      const txt = this.scene.add\n        .text(\n          this.MARGIN_LEFT,\n          this.ROW_HEIGHT * -lines + this.MARGIN_TOP,\n          label,\n          {\n            fontFamily: \"Emulogic\",\n            fontSize: \"8px\",\n            fill: \"#aee0c8\",\n            fontWeight: \"regular\",\n          }\n        )\n        .setVisible(!header.disabled);\n      txt.displayHeight = 10 * SCALE;\n      txt.alpha = 1;\n      txt.depth = 16;\n      txt.name = \"header_text\";\n      txt.setScale(SCALE);\n      txt.setScrollFactor(0);\n      txt.setShadow(-1, 1);\n    }\n\n    this.drawOptionsPage(this.scrollIndex, maxRows, currentIndex);\n\n    this.scene.input.keyboard.on(\"keydown\", (event) => {\n      // break control for in game pause menu\n      if (!this.isVisible) return false;\n\n      const reducedOptions = this.optionsByPage;\n      let newIndex = false;\n      if (event.key === \"ArrowUp\") {\n        const isNextToFirstOption = currentIndex === 1;\n        const scrollOptions = isNextToFirstOption && this.scrollIndex > 0;\n        if (scrollOptions) {\n          this.scrollIndex--;\n          this.drawOptionsPage(this.scrollIndex, maxRows, currentIndex);\n        } else {\n          // move arrow\n          if (currentIndex > 0) {\n            newIndex = currentIndex - 1;\n          }\n        }\n      }\n\n      if (event.key === \"ArrowDown\") {\n        const isNextToLastOption = currentIndex === maxRows - 2;\n        const scrollOptions =\n          isNextToLastOption &&\n          this.scrollIndex + maxRows < this.options.length;\n        if (scrollOptions) {\n          this.scrollIndex++;\n          this.drawOptionsPage(this.scrollIndex, maxRows, currentIndex);\n        } else {\n          // move arrow\n          if (currentIndex < reducedOptions.length - 1) {\n            newIndex = currentIndex + 1;\n          }\n        }\n      }\n\n      if (\n        (event.key === \"ArrowDown\" || event.key === \"ArrowUp\") &&\n        newIndex !== false\n      ) {\n        arrow.tilemapLayer.setPosition(\n          OFFSET_X,\n          this.MARGIN_TOP + this.ROW_HEIGHT * newIndex - this.ROW_HEIGHT / 2\n        );\n        const prevSelectedOpt = this.scene.children.getByName(\n          `menu_text_${currentIndex}`\n        );\n        prevSelectedOpt.alpha =\n          prevSelectedOpt.text.slice(-4) === \"100%\" ? 1 : 0.5;\n        prevSelectedOpt.setColor(\"#aee0c8\");\n        const nextSelectedOpt = this.scene.children.getByName(\n          `menu_text_${newIndex}`\n        );\n        nextSelectedOpt.alpha = 1;\n        nextSelectedOpt.setColor(\"#fff\");\n        currentIndex = newIndex;\n      }\n\n      // up down arrows maintenance\n      arrowUp.setAlpha(this.scrollIndex === 0 ? 0.5 : 1);\n      arrowDown.setAlpha(\n        this.scrollIndex + maxRows < this.options.length ? 1 : 0.5\n      );\n\n      if (event.key === \"Enter\") {\n        if (!reducedOptions[currentIndex].disabled) {\n          reducedOptions[currentIndex].onSelect();\n        }\n      }\n    });\n  }\n\n  drawOptionsPage(from, length, current) {\n    // clean up\n    this.scene.children.list\n      .filter((el) => el.name.includes(\"menu_text\"))\n      .forEach((el) => el.destroy());\n    this.optionsByPage = this.options.slice(from, from + length);\n\n    this.optionsByPage.forEach((o, idx) => {\n      const textToPrint = [\n        ...o.label.split(\"\"),\n        ...Array(Math.max(0, 20 - o.label.length)).fill(\"\"),\n      ].join(\"\");\n      const txt = this.scene.add\n        .text(\n          this.MARGIN_LEFT,\n          this.ROW_HEIGHT * idx + this.MARGIN_TOP,\n          textToPrint,\n          {\n            fontFamily: \"Emulogic\",\n            fontSize: \"8px\",\n            fill: \"#aee0c8\",\n            fontWeight: \"regular\",\n          }\n        )\n        .setVisible(!o.disabled);\n      txt.alpha = textToPrint.slice(-4) === \"100%\" || idx === current ? 1 : 0.5;\n      txt.setColor(idx === current ? \"#fff\" : \"#aee0c8\");\n      txt.displayHeight = 10 * SCALE;\n      txt.depth = 16;\n      txt.name = `menu_text_${idx}`;\n      txt.setScale(SCALE);\n      txt.setScrollFactor(0);\n      txt.setShadow(-1, 1);\n    });\n  }\n}\n","import { SCALE } from '../../utils/constants'\nimport UI from '../UI'\n\nclass DialogOptions {\n  constructor(scene) {\n    this.scene = scene\n    this.options = []\n    this.menuOptionsContainer = null\n    this.keyDownHandler = this.keyDownHandler.bind(this)\n  }\n\n  mount() {\n    this.menuOptionsContainer = this.scene.add.container(0,0)\n    this.menuOptionsContainer.setScrollFactor(0)\n    this.currentSlot = 0\n    this.scene.input.keyboard.on(\"keydown\", this.keyDownHandler)\n  }\n  \n  unmount() {\n    this.scene.input.keyboard.off(\"keydown\", this.keyDownHandler)\n    this.menuOptionsContainer.destroy()\n  }\n\n  get visible() {\n    return this.menuOptionsContainer.visible\n  }\n\n  show(options = {}) {\n    this.menuOptionsContainer.setVisible(true)\n    this.options = Object.keys(options).reduce((r, k) => {\n      if(options[k] !== null) {\n        r[k] = options[k]\n      }\n      return r\n    }, {})\n    console.log(this.options);\n    const firstNonEmptySlotKey = Object.keys(this.options).sort()[0]\n    this.currentSlot = this.options[firstNonEmptySlotKey].slot\n    \n    this.menuOptionsContainer.depth = 20\n    this.menuOptionsContainer.setPosition(\n      UI.tileToScreen(4.5),\n      UI.tileToScreen(9),\n    )\n    const drawOption = (label = '', slot = 0) => {\n      const x = UI.tileToScreen(slot === 0 || slot === 1 ? 0 : 9)\n      const y = UI.tileToScreen(slot === 0 || slot === 2 ? 0.25 : 1)\n      const textObj = this.scene.add.text(\n        x,\n        y,\n        label,\n        {\n          fontFamily: 'GameGirl',\n          fontSize: \"8px\",\n          fill: \"#ffffff\",\n          lineSpacing: 2\n        }\n      )\n      textObj.setScale(SCALE)\n      textObj.displayHeight = UI.pixelToScreen(8)\n      textObj.displayWidth = UI.pixelToScreen(8 * label.length)\n      textObj.setShadow(-1,1)\n      this.menuOptionsContainer.add(textObj)\n    }\n    Object.values(this.options).forEach(o => drawOption(o.label, o.slot))\n    // drawOption(\"YES\", 0)\n    // drawOption(\"NO\", 1)\n    // drawOption(\"CLOSE\", 2)\n    // drawOption(\"STORY\", 3)\n    \n    this.arrow = this.scene.add.graphics({\n      fillStyle: { color: 0xffffff, alpha: 1 },\n    })\n    this.menuOptionsContainer.add(this.arrow)\n    this.arrow.fillTriangle(0, 0, 5, 5, 0, 10)\n    this.arrow.setScale(SCALE)\n    this.arrow.name = 'menu_arrow'\n    this.setArrowPositionBySlot(this.currentSlot)\n    // hide if no option\n    this.arrow.setVisible(this.options.length !== 0)\n\n  }\n  hide() {\n    while(this.menuOptionsContainer?.list.length) {\n      this.menuOptionsContainer?.list?.forEach(ch => ch.destroy())\n    }\n    // this.menuOptionsContainer?.list?.forEach((ch, idx) => ch.type !== 'Graphics' ? ch.destroy() : null)\n    this.menuOptionsContainer.setVisible(false)\n  }\n\n  keyDownHandler(event) {\n    if(!this.menuOptionsContainer.visible) { return }\n    let slot = this.currentSlot\n    if (event.key === \"ArrowUp\" && (slot === 1 || slot === 3)) {\n      const newSlotIdx = slot - 1\n      if (this.options[`slot${newSlotIdx}`]) {\n        this.currentSlot = newSlotIdx\n      }\n    }\n    if (event.key === \"ArrowLeft\") {\n      const newSlotIdx = slot - 2\n      if (this.options[`slot${newSlotIdx}`]) {\n        this.currentSlot = newSlotIdx\n      } else if(this.options[`slot${newSlotIdx - 1}`]) {\n        this.currentSlot = newSlotIdx - 1\n      }\n    }\n    if (event.key === \"ArrowRight\") {\n      const newSlotIdx = slot + 2\n      if (this.options[`slot${newSlotIdx}`]) {\n        this.currentSlot = newSlotIdx\n      } else if(this.options[`slot${newSlotIdx + 1}`]) {\n        this.currentSlot = newSlotIdx + 1\n      }\n    }\n    if (event.key === \"ArrowDown\" && (slot === 0 || slot === 2)) {\n      const newSlotIdx = slot + 1\n      if (this.options[`slot${newSlotIdx}`]) {\n        this.currentSlot = newSlotIdx\n      }\n    }\n\n    if(event.key === 'Enter') {\n      const selectedOption = Object.values(this.options).find(o => o.slot === this.currentSlot)\n      selectedOption?.onSelect()\n    } else {\n      this.setArrowPositionBySlot(this.currentSlot)\n    }\n  }\n\n  setArrowPositionBySlot(slot) {\n    const x = UI.tileToScreen(slot === 0 || slot === 1 ? 0 : 9)\n    const y = UI.tileToScreen(slot === 0 || slot === 2 ? 0.25 : 1)\n    const offset = UI.tileToScreen(0.5)\n\n    this.arrow.setPosition(x - offset , y)\n  }\n}\n\nexport default DialogOptions\n","import { TILE_SIZE, SCALE } from \"../../utils/constants\";\nimport { translate } from \"../../utils/localization\";\nimport DialogOptions from \"../DialogOptions\";\nimport UI from \"../UI\";\n\nconst TRANSITION_DURATION = 500;\nclass Dialogs {\n  constructor(scene) {\n    this.scene = scene;\n    this.tnContainer = null;\n    this.participantSprites = {};\n    this.conversation = {};\n    this.currentDialogIndex = 0;\n    this.isShowing = false;\n    this.isFullTextDisplayed = false;\n    this.dialogOptions = new DialogOptions(this.scene);\n    this.showDialog = this.showDialog.bind(this);\n    this.handleKeyDown = this.handleKeyDown.bind(this);\n    this.updateCharacterName = this.updateCharacterName.bind(this);\n    this.tIDs = []\n  }\n\n  mount() {\n    this.tIDs.push(\n      setTimeout(\n        () =>\n          this.scene.input.keyboard.addListener(\"keydown\", this.handleKeyDown),\n        TRANSITION_DURATION\n      )\n    )\n\n    // this.scene.events.on('dialogue:show', this.showDialog)\n    // this.scene.events.on('dialogue:hide', this.hideDialog)\n  }\n  unmount() {\n    this.tIDs.forEach(id => clearTimeout(id))\n    const l = this.scene.children.getByName(\"layer_hud\");\n    if (l) {\n      l.destroy();\n    }\n    const c = this.scene.children.getByName(\"dialog_tn_container\")\n    if (l) {\n      c.destroy();\n    }\n    // this.scene.input.keyboard.removeListener(\"keydown\", this.handleKeyDown);\n    // this.scene.events.off('dialogue:show', this.showDialog)\n  }\n\n  handleKeyDown(event) {\n    // enter when full text displayed (otherwise is fast forward) as options are hidden (otherwise is option selection)\n    if (\n      event.key === \"Enter\" &&\n      this.isFullTextDisplayed &&\n      !this.dialogOptions.visible\n    ) {\n      if (this.currentDialogIndex < this.conversation.length - 1) {\n        alert('next page');\n        // next page\n        // this.showMessage(this.conversation[++this.currentDialogIndex]);\n      } else {\n        this.scene.events.emit(\"dialogue:hide\");\n        // this.scene.input.keyboard.removeListener('keydown', onNextPage)\n      }\n    }\n  }\n\n  hideDialog() {\n    this.scene.input.keyboard.removeListener(\"keydown\", this.handleKeyDown);\n\n    const retVal = new Promise((res) => {\n      const map = this.scene.children.list.find(\n        (ch) => ch.name === \"layer_hud\"\n      ).tilemap;\n      this.clearText();\n      this.dialogOptions.unmount();\n      this.scene.tweens.add({\n        targets: [map.layers[0].tilemapLayer, this.tnContainer],\n        y: UI.tileToScreen(-7),\n        duration: 500,\n        ease: \"Back.In\",\n        onComplete: () => {\n          // this.scene.levels?.current?.resume()\n          this.isShowing = false;\n          res();\n        },\n      });\n    });\n\n    return retVal;\n  }\n\n  showDialog({ participants, participantNames = [], conversation }) {\n    this.isShowing = true;\n    this.conversation = conversation;\n    this.currentDialogIndex = 0;\n\n    // this.scene.levels?.current?.pause()\n    this.prepareHUD(participants, participantNames);\n    this.prepareText();\n\n    const map = this.scene.children.list.find(\n      (ch) => ch.name === \"layer_hud\"\n    ).tilemap;\n    map.layers[0].tilemapLayer.y = this.tnContainer.y = UI.tileToScreen(-8);\n\n    this.scene.tweens.add({\n      targets: [map.layers[0].tilemapLayer, this.tnContainer],\n      y: UI.tileToScreen(4),\n      duration: TRANSITION_DURATION,\n      ease: \"Cubic.Out\",\n      onComplete: () => {\n        this.dialogOptions.mount();\n        // let lastDialog = conversation.shift()\n\n        this.showMessage(this.conversation[this.currentDialogIndex]);\n      },\n    });\n  }\n\n  fullTextDisplayed() {\n    this.isFullTextDisplayed = true;\n    this.scene.events.emit('dialogue:message_shown', this.currentDialogIndex)\n    // show options\n    const onlyOnePageOption = {\n      slot1: {\n        label: translate(\"menu.dialog_options.close\"),\n        slot: 1,\n        onSelect: () => this.scene.events.emit(\"dialogue:hide\"),\n      },\n    }\n    const moreThanOnePageOption = {\n      slot1: {\n        label: translate(\"menu.dialog_options.story\"),\n        slot: 1,\n        // next page\n        onSelect: () =>\n          this.showMessage(this.conversation[++this.currentDialogIndex]),\n      },\n      slot3: {\n        label: translate(\"menu.dialog_options.close\"),\n        slot: 3,\n        onSelect: () => this.scene.events.emit(\"dialogue:hide\"),\n      },\n    };\n    const defaultPageOption = {\n      slot2: {\n        label: translate(\"menu.dialog_options.next\"),\n        slot: 2,\n        // next page\n        onSelect: () =>\n          this.showMessage(this.conversation[++this.currentDialogIndex]),\n      },\n      slot3: {\n        label: translate(\"menu.dialog_options.close\"),\n        slot: 3,\n        onSelect: () => this.scene.events.emit(\"dialogue:hide\"),\n      },\n    };\n    const lastPageOption = {\n      slot3: {\n        label: translate(\"menu.dialog_options.close\"),\n        slot: 3,\n        onSelect: () => this.scene.events.emit(\"dialogue:hide\"),\n      },\n    };\n    const options = {\n      ...(this.conversation.length === 1 ? onlyOnePageOption : {}),\n      ...(this.conversation.length > 1 && this.currentDialogIndex === 0 ? moreThanOnePageOption : {}),\n      ...(this.currentDialogIndex > 0 && \n      this.currentDialogIndex < this.conversation.length - 1\n        ? defaultPageOption\n        : {}),\n      ...(this.currentDialogIndex === this.conversation.length - 1 && this.conversation.length > 1\n        ? lastPageOption\n        : {}),\n      ...(this.conversation[this.currentDialogIndex].options || {}),\n    };\n    this.dialogOptions.show(options);\n  }\n\n  showMessage(message) {\n    this.clearText();\n    this.dialogOptions.hide();\n    this.writeText(message.text);\n    \n    const c = this.scene.children.getByName(\"dialog_tn_container\")\n    Object.keys(this.participantSprites).forEach((k) => {\n      if (k === message.who) {\n        // participantSprites[k].alpha = 1\n        this.participantSprites[k].clearTint();\n        c.list.find(el => el.name === `char_${k}_text_to_remove`).clearTint()\n      } else {\n        // participantSprites[k].alpha = 0.5\n        this.participantSprites[k].setTint(0x333333);\n        const txt = c.list.find(el => el.name === `char_${k}_text_to_remove`)\n        txt?.setTint(0x999999)\n      }\n    });\n  }\n\n  prepareHUD(participants, participantNames) {\n    // Creating a blank tilemap with dimensions matching the dungeon\n    const map = this.scene.make.tilemap({\n      tileWidth: 20,\n      tileHeight: 20,\n      width: 20,\n      height: 20,\n    });\n\n    // addTilesetImage: function (tilesetName, key, tileWidth, tileHeight, tileMargin, tileSpacing, gid)\n    let tileset = map.addTilesetImage(\"hud-tiles\", \"hud-tiles\", 20, 20, 1, 2);\n\n    let layer = map.createBlankLayer(\"layer_hud\", tileset);\n    layer.name = \"layer_hud\";\n    layer.depth = 5;\n    layer.setScrollFactor(0);\n    layer.setScale(SCALE);\n\n    // Fill with black tiles\n    // layer.fill(1)\n    let p, tn, charName;\n    this.tnContainer = this.scene.add.container(0, 0);\n    this.tnContainer.depth = 10;\n    this.tnContainer.name = 'dialog_tn_container'\n    // this.tnContainer.setScale(SCALE)\n    // this.tnContainer.y = -this.scene.renderer.height/2\n    switch (participants.length) {\n      case 2:\n        if (participants[1]) {\n          p = participants[1];\n          tn = this.scene.add\n            .sprite(0, 0)\n            .play(p)\n            .setOrigin(0, 0.25)\n            .setScale(SCALE);\n          tn.name = `${p}_tn_to_remove`;\n          tn.x = UI.tileToScreen(17) + UI.pixelToScreen(10);\n          tn.y = UI.tileToScreen(3) + UI.pixelToScreen(2);\n          tn.setScrollFactor(0);\n          tn.setFlipX(true);\n          this.tnContainer.add(tn);\n          this.participantSprites[p] = tn;\n        }\n\n        /// TN MIDDLE RIGHT\n        Dialogs.drawWindow(map, { w: 3, h: 2, x: 17, y: 3 });\n        // NAME\n        charName = this.scene.add.text(\n          tn.x - UI.tileToScreen(2) * 0.25,\n          tn.y + UI.tileToScreen(2) * 0.8,\n          participantNames[1] || '???',\n          {\n            fontFamily: 'GameGirl',\n            fill: \"#ffffff\",\n            align: 'right'\n          }\n        ).setScale(SCALE/2).setScrollFactor(0);\n        charName.name = `char_${p}_text_to_remove`;\n        this.tnContainer.add(charName)\n      // eslint-disable-next-line no-fallthrough\n      case 1:\n        if (participants[0]) {\n          p = participants[0];\n          tn = this.scene.add\n            .sprite(0, 0)\n            .play(p)\n            .setOrigin(0, 0.25)\n            .setScale(SCALE);\n          tn.name = `${p}_tn_to_remove`;\n          tn.x = UI.tileToScreen(0) + UI.pixelToScreen(12);\n          tn.y = UI.tileToScreen(3) + UI.pixelToScreen(2);\n          tn.setScrollFactor(0);\n          this.tnContainer.add(tn);\n          this.participantSprites[p] = tn;\n        }\n        /// TN MIDDLE LEFT\n        Dialogs.drawWindow(map, { w: 3, h: 2, x: 0, y: 3 });\n        // NAME\n        charName = this.scene.add.text(\n          tn.x - UI.tileToScreen(2) * 0.25,\n          tn.y + UI.tileToScreen(2) * 0.8,\n          participantNames[0] || '???',\n          {\n            fontFamily: 'GameGirl',\n            fill: \"#ffffff\",\n            align: 'right'\n          }\n        ).setScale(SCALE/2).setScrollFactor(0);\n        charName.name = `char_${p}_text_to_remove`;\n        this.tnContainer.add(charName)\n        break;\n      case 4:\n        /// TN LOWER RIGHT\n        if (participants[3]) {\n          p = participants[3];\n          tn = this.scene.add\n            .sprite(0, 0)\n            .play(p)\n            .setOrigin(0, 0.25)\n            .setScale(SCALE);\n          tn.name = `${p}_tn_to_remove`;\n          tn.x = UI.tileToScreen(17) + UI.pixelToScreen(10);\n          tn.y = UI.tileToScreen(4) + UI.pixelToScreen(2);\n          tn.setScrollFactor(0);\n          tn.setFlipX(true);\n          this.tnContainer.add(tn);\n          this.participantSprites[p] = tn;\n        }\n        Dialogs.drawWindow(map, { w: 3, h: 2, x: 17, y: 4 });\n        // NAME\n        charName = this.scene.add.text(\n          tn.x - UI.tileToScreen(2) * 0.25,\n          tn.y + UI.tileToScreen(2) * 0.8,\n          participantNames[3] || '???',\n          {\n            fontFamily: 'GameGirl',\n            fill: \"#ffffff\",\n            align: 'right'\n          }\n        ).setScale(SCALE/2).setScrollFactor(0);\n        charName.name = `char_${p}_text_to_remove`;\n        this.tnContainer.add(charName)\n      // eslint-disable-next-line no-fallthrough\n      case 3:\n        /// TN UPPER LEFT\n        if (participants[0]) {\n          p = participants[0];\n          tn = this.scene.add\n            .sprite(0, 0)\n            .play(p)\n            .setOrigin(0, 0.25)\n            .setScale(SCALE);\n          tn.name = `${p}_tn_to_remove`;\n          tn.x = UI.tileToScreen(0) + UI.pixelToScreen(12);\n          tn.y = UI.tileToScreen(0) + UI.pixelToScreen(2);\n          tn.setScrollFactor(0);\n          this.tnContainer.add(tn);\n          this.participantSprites[p] = tn;\n        }\n        Dialogs.drawWindow(map, { w: 3, h: 2, x: 0, y: 0 });\n        // NAME\n        charName = this.scene.add.text(\n          tn.x - UI.tileToScreen(2) * 0.25,\n          tn.y + UI.tileToScreen(2) * 0.8,\n          participantNames[0] || '???',\n          {\n            fontFamily: 'GameGirl',\n            fill: \"#ffffff\",\n            align: 'right'\n          }\n        ).setScale(SCALE/2).setScrollFactor(0);\n        charName.name = `char_${p}_text_to_remove`;\n        this.tnContainer.add(charName)\n\n        /// TN BOTTOM LEFT\n        if (participants[2]) {\n          p = participants[2];\n          tn = this.scene.add\n            .sprite(0, 0)\n            .play(p)\n            .setOrigin(0, 0.25)\n            .setScale(SCALE);\n          tn.name = `${p}_tn_to_remove`;\n          tn.x = UI.tileToScreen(0) + UI.pixelToScreen(12);\n          tn.y = UI.tileToScreen(4) + UI.pixelToScreen(2);\n          tn.setScrollFactor(0);\n          this.tnContainer.add(tn);\n          this.participantSprites[p] = tn;\n        }\n\n        Dialogs.drawWindow(map, { w: 3, h: 2, x: 0, y: 4 });\n        // NAME\n        charName = this.scene.add.text(\n          tn.x - UI.tileToScreen(2) * 0.25,\n          tn.y + UI.tileToScreen(2) * 0.8,\n          participantNames[2] || '???',\n          {\n            fontFamily: 'GameGirl',\n            fill: \"#ffffff\",\n            align: 'right'\n          }\n        ).setScale(SCALE/2).setScrollFactor(0);\n        charName.name = `char_${p}_text_to_remove`;\n        this.tnContainer.add(charName)\n\n        /// TN UPPER RIGHT\n        if (participants[1]) {\n          p = participants[1];\n          tn = this.scene.add\n            .sprite(0, 0)\n            .play(p)\n            .setOrigin(0, 0.25)\n            .setScale(SCALE);\n          tn.name = `${p}_tn_to_remove`;\n          tn.x = UI.tileToScreen(17) + UI.pixelToScreen(10);\n          tn.y = UI.tileToScreen(0) + UI.pixelToScreen(2);\n          tn.setScrollFactor(0);\n          tn.setFlipX(true);\n          this.tnContainer.add(tn);\n          this.participantSprites[p] = tn;\n        }\n        Dialogs.drawWindow(map, { w: 3, h: 2, x: 17, y: 0 });\n        // NAME\n        charName = this.scene.add.text(\n          tn.x - UI.tileToScreen(2) * 0.25,\n          tn.y + UI.tileToScreen(2) * 0.8,\n          participantNames[1] || '???',\n          {\n            fontFamily: 'GameGirl',\n            fill: \"#ffffff\",\n            align: 'right'\n          }\n        ).setScale(SCALE/2).setScrollFactor(0);\n        charName.name = `char_${p}_text_to_remove`;\n        this.tnContainer.add(charName)\n        break;\n      default:\n    }\n\n    Dialogs.drawWindow(map, { w: 14, h: 7, x: 3, y: 0 });\n  }\n\n  updateCharacterName(key='closeUp_Mary', name='???') {\n    const c = this.scene.children.getByName(\"dialog_tn_container\")\n    const charName = c.list.find(el => el.name === `char_${key}_text_to_remove`);\n    charName.setText(name)\n  }\n\n  prepareText() {\n    const textObj = this.scene.add.text(\n      UI.tileToScreen(3.5),\n      UI.tileToScreen(4.5),\n      \" \",\n      {\n        fontFamily: \"GameGirl\",\n        //  fontSize: \"8px\",\n        fill: \"#ffffff\",\n        lineSpacing: 2,\n        // wordWrap: { width: MAX_CHARS_BY_LINE * 8 }\n      }\n    );\n    textObj.setScrollFactor(0);\n    textObj.displayHeight = 10 * SCALE;\n    textObj.displayWidth = 10 * SCALE;\n    textObj.name = \"placeholder_text\";\n    textObj.depth = 10;\n    textObj.setShadow(-1, 1);\n  }\n\n  writeText(text) {\n    const charPlaceholder = this.scene.children.getByName(\"placeholder_text\");\n    this.isFullTextDisplayed = false;\n    // ===========\n    // prepare one big text with \\n by line of 26 char length\n    const MAX_CHARS_BY_LINE = 26;\n    const fullText = text.join(\"\"); // legacy for texts as array\n    const paragraphs = fullText.split(\"\\n\"); // respect \\n into text\n    const lines = [];\n    while (paragraphs.length) {\n      let line = \"\"; // new line\n      const paragraphWords = paragraphs.shift().split(\" \");\n      while (paragraphWords.length) {\n        const prevLine = line; // save current line\n        const nextWord = paragraphWords.shift();\n        line += nextWord + \" \"; // build new line\n        if (line.trim().length > MAX_CHARS_BY_LINE) {\n          // new line is bigger than mx char by line\n          lines.push(prevLine); // store prev line\n          paragraphWords.unshift(nextWord); // restore last word for next line\n          line = \"\";\n        }\n      }\n      lines.push(line);\n    }\n    let letters = lines.join(\"\\n\");\n    // ===========\n\n    let timerId;\n    const fastForward = () => {\n      clearTimeout(timerId);\n      putLetter(letters.length);\n    };\n    const putLetter = (len = 1) => {\n      const char = letters.substring(0, len);\n      letters = letters.substring(len);\n      charPlaceholder.setText(charPlaceholder.text + char);\n      if (letters.length) {\n        timerId = setTimeout(\n          () => putLetter(1),\n          [\".\", \"!\", \"?\"].includes(char) ? 500 : 50\n        );\n        this.tIDs.push(timerId)\n      } else {\n        this.scene.input.keyboard.off(\"keyup\", fastForward);\n        this.fullTextDisplayed();\n      }\n    };\n    putLetter();\n    this.tIDs.push(\n      setTimeout(() => this.scene.input.keyboard.once(\"keyup\", fastForward), 500)\n    )\n  }\n\n  clearText() {\n    this.scene.children.getByName(\"placeholder_text\").setText(\"\");\n    // this.scene.children.list.filter(el => el.name === 'placeholder_text').forEach(el => el.setText(\"\"))\n  }\n\n  static drawWindow(map, { w, h, x, y }) {\n    const THEME = 6;\n    const TILES = {\n      TOP_LEFT: 0 + THEME,\n      TOP_MIDDLE: 1 + THEME,\n      TOP_RIGHT: 2 + THEME,\n      LEFT: 10 + THEME,\n      MIDDLE: 11 + THEME,\n      RIGHT: 12 + THEME,\n      BOTTOM_LEFT: 20 + THEME,\n      BOTTOM_MIDDLE: 21 + THEME,\n      BOTTOM_RIGHT: 22 + THEME,\n    };\n    for (let j = 0; j < h; j++) {\n      for (let i = 0; i < w; i++) {\n        let tile;\n        if (i === 0 && j === 0) {\n          tile = TILES.TOP_LEFT;\n        }\n        if (i > 0 && i < w - 1 && j === 0) {\n          tile = TILES.TOP_MIDDLE;\n        }\n        if (i === w - 1 && j === 0) {\n          tile = TILES.TOP_RIGHT;\n        }\n\n        if (i === 0 && j > 0 && j < h - 1) {\n          tile = TILES.LEFT;\n        }\n        if (i > 0 && i < w - 1 && j > 0 && j < h - 1) {\n          tile = TILES.MIDDLE;\n        }\n        if (i === w - 1 && j > 0 && j < h - 1) {\n          tile = TILES.RIGHT;\n        }\n\n        if (i === 0 && j === h - 1) {\n          tile = TILES.BOTTOM_LEFT;\n        }\n        if (i > 0 && i < w - 1 && j === h - 1) {\n          tile = TILES.BOTTOM_MIDDLE;\n        }\n        if (i === w - 1 && j === h - 1) {\n          tile = TILES.BOTTOM_RIGHT;\n        }\n\n        map.putTileAt(tile, i + x, j + y);\n      }\n    }\n  }\n}\n\nexport default Dialogs;\n","import { SCALE, TILE_SIZE } from \"../utils/constants\";\nimport UIMenus from \"./UIMenus\";\nimport Dialogs from \"./Dialogs\";\nimport dbManager from \"../utils/dbManager\";\n\nexport default class UI {\n  constructor(scene, noScores) {\n    this.scene = scene;\n    this.inGameMenu = null;\n    this.setUpPuseResumeGame();\n    this.mushroomsIcon = null;\n    this.diamondsIcon = null;\n\n    this.scene.events.off(\"game_paused\");\n    this.scene.events.on(\"game_paused\", () => this.showPauseMenu());\n    this.scene.events.off(\"game_resumed\");\n    this.scene.events.on(\"game_resumed\", () => this.hidePauseMenu());\n\n    const rockHit1 = this.scene.sound.add(\"rock_hit\");\n    const rockHit2 = this.scene.sound.add(\"rock_hit2\");\n    const rockHit3 = this.scene.sound.add(\"rock_hit3\");\n    const rockHit = [rockHit1, rockHit2, rockHit3];\n    this.scene.events.off(\"sounds:rock_hit_hard\");\n    this.scene.events.on(\"sounds:rock_hit_hard\", () =>\n      rockHit[Math.trunc(Math.random() * 10) % 3].play()\n    );\n\n    const rockSlideHard1 = this.scene.sound.add(\"rock_slide_hard1\");\n    const rockSlideHard2 = this.scene.sound.add(\"rock_slide_hard2\");\n    const rockSlideHard3 = this.scene.sound.add(\"rock_slide_hard3\");\n    const rockSlideHard = [rockSlideHard1, rockSlideHard2, rockSlideHard3];\n    this.scene.events.off(\"sounds:rock_slide_hard\");\n    this.scene.events.on(\"sounds:rock_slide_hard\", () =>\n      rockSlideHard[Math.trunc(Math.random() * 10) % 3].play()\n    );\n\n    const rockSlideSoft1 = this.scene.sound.add(\"rock_slide_soft1\");\n    const rockSlideSoft2 = this.scene.sound.add(\"rock_slide_soft2\");\n    const rockSlideSoft3 = this.scene.sound.add(\"rock_slide_soft3\");\n    const rockSlideSoft = [rockSlideSoft1, rockSlideSoft2, rockSlideSoft3];\n    this.scene.events.off(\"sounds:rock_slide_soft\");\n    this.scene.events.on(\"sounds:rock_slide_soft\", () =>\n      rockSlideSoft[Math.trunc(Math.random() * 10) % 3].play()\n    );\n\n    const rockHitSoft = this.scene.sound.add(\"rock_hit_soft\");\n    this.scene.events.off(\"sounds:rock_hit_soft\");\n    this.scene.events.on(\"sounds:rock_hit_soft\", () => rockHitSoft.play());\n\n    const gemHit = this.scene.sound.add(\"gem_hit\");\n    this.scene.events.off(\"sounds:gem_hit\");\n    this.scene.events.on(\"sounds:gem_hit\", () => gemHit.play());\n\n    const explosion = this.scene.sound.add(\"explosion\");\n    this.scene.events.off(\"sounds:explosion\");\n    this.scene.events.on(\"sounds:explosion\", () => explosion.play());\n\n    const shroomPick = this.scene.sound.add(\"shroom_pick\");\n    this.scene.events.off(\"sounds:shroom_pick\");\n    this.scene.events.on(\"sounds:shroom_pick\", () => shroomPick.play());\n\n    const gemPick = this.scene.sound.add(\"gem_pick\");\n    this.scene.events.off(\"sounds:gem_pick\");\n    this.scene.events.on(\"sounds:gem_pick\", () => gemPick.play());\n\n    const coinPick = this.scene.sound.add(\"coin\");\n    this.scene.events.off(\"sounds:coin\");\n    this.scene.events.once(\"sounds:coin\", () => coinPick.play());\n\n    const clearHit1 = this.scene.sound.add(\"clear_hit1\");\n    const clearHit2 = this.scene.sound.add(\"clear_hit2\");\n    const clearHit3 = this.scene.sound.add(\"clear_hit3\");\n    const clearHit = [clearHit1, clearHit2, clearHit3];\n    this.scene.events.off(\"sounds:clear_hit\");\n    this.scene.events.on(\"sounds:clear_hit\", () =>\n      clearHit[Math.trunc(Math.random() * 10) % 3].play()\n    );\n\n    const deathByRockHit = this.scene.sound.add(\"death_by_rock\");\n    this.scene.events.off(\"sounds:death_by_rock_hit\");\n    this.scene.events.on(\"sounds:death_by_rock_hit\", () =>\n      deathByRockHit.play()\n    );\n\n    const levelComplete = this.scene.sound.add(\"level_complete\");\n    this.scene.events.off(\"sounds:level_complete\");\n    this.scene.events.on(\"sounds:level_complete\", () => levelComplete.play());\n    if (!noScores) {\n      this.drawScores();\n    }\n\n    this.dialogs = new Dialogs(this.scene);\n    this.scene.events.off(\"dialogue:show\");\n    this.scene.events.on(\"dialogue:show\", (props) => {\n      this.scene.levels?.current?.pause();\n      this.dialogs.mount();\n      this.dialogs.showDialog(props);\n    });\n    this.scene.events.off(\"dialogue:updateCharacterName\");\n    this.scene.events.on(\"dialogue:updateCharacterName\", async ({key, name}) => {\n      this.dialogs.updateCharacterName(key, name);\n    });\n    this.scene.events.off(\"dialogue:nextPage\");\n    this.scene.events.on(\"dialogue:nextPage\", async (skipAmount = 0) => {\n      console.log(this.dialogs.currentDialogIndex, this.dialogs.conversation);\n      this.dialogs.currentDialogIndex += skipAmount\n      console.log(this.dialogs.currentDialogIndex);\n      this.dialogs.showMessage(this.dialogs.conversation[++this.dialogs.currentDialogIndex])\n    });\n    this.scene.events.off(\"dialogue:hide\");\n    this.scene.events.on(\"dialogue:hide\", async () => {\n      await this.dialogs.hideDialog();\n      this.scene.events.emit(\"dialogue:hidden\");\n      this.dialogs.unmount();\n      this.scene.levels?.current?.resume();\n    });\n  }\n\n  destroy() {\n    this.mushroomsIcon.destroy();\n    this.diamondsIcon.destroy();\n    this.mushroomsScore.destroy();\n    this.diamondsScore.destroy();\n    this.diamondsScoreGoal.destroy();\n    this.scene.events.off(\"score:diamond_goal\");\n    this.scene.events.off(\"score:diamond_set\");\n    this.scene.events.off(\"score:diamond_goal_set\");\n    this.scene.events.off(\"score:mushroom_collected\");\n    this.scene.events.off(\"score:mushroom_given\");\n  }\n  onResize() {\n    const layer = this.scene.children.getByName(\"layer_scores\");\n    if(!layer) return false\n    const { tilemap: map } = layer;\n\n    this.mushroomsIcon.setPosition(\n      UI.tileToScreen(18),\n      UI.tileToScreen(1)\n    ).setScale(SCALE * 1.5)\n\n    const shroomsAmount = window.localStorage.getItem(\"shrooms\") || \"0\";\n    this.mushroomsScore.setPosition(\n      UI.tileToScreen(20) - this.MT_MARGIN_RIGHT,\n      // map.tileToWorldY(1)\n      UI.tileToScreen(1)\n    )\n    this.mushroomsScore.setScrollFactor(0);\n    this.mushroomsScore.displayHeight = 10 * SCALE;\n    this.mushroomsScore.displayWidth = shroomsAmount.length * 10 * SCALE;\n\n    this.diamondsIcon.setPosition(\n      UI.tileToScreen(1) + this.D_MARGIN_LEFT,\n      UI.tileToScreen(1)\n    ).setScale(SCALE * 1.5);\n\n\n    this.diamondsScoreGoal.setPosition(\n      UI.tileToScreen(3) - this.DT_MARGIN_RIGHT,\n      UI.tileToScreen(1)\n    )\n    this.diamondsScoreGoal.displayHeight = 8 * SCALE;\n    this.diamondsScoreGoal.displayWidth = 2 * 8 * SCALE;\n\n    this.diamondsScore.setPosition(\n      UI.tileToScreen(3) - this.DT_MARGIN_RIGHT,\n      UI.tileToScreen(1) - this.diamondsScoreGoal.test !== \"00\" ? UI.tileToScreen(0.5) : 0\n    )\n    this.diamondsScore.displayHeight = 10 * SCALE;\n    this.diamondsScore.displayWidth = this.diamondsAmount.length * 10 * SCALE;\n\n  }\n\n  hidePauseMenu() {\n    const layer = this.scene.children.list.find(\n      (el) => el.name === \"layer_pause_nenu\"\n    );\n    if (layer) {\n      layer.setVisible(false);\n      // flag to avoid options to work after menu is hidden\n      this.inGameMenu.isVisible = false;\n    }\n    this.scene.children.list\n      .filter((el) => el.name.includes(\"menu_text\"))\n      .forEach((el) => el.destroy());\n    this.scene.children.list\n      .filter((el) => el.name.includes(\"_tn_to_remove\"))\n      .forEach((el) => el.destroy());\n\n    // console.log(this.scene.children.list.filter(el => el.name.includes('layer_pause_nenu')));\n    this.scene.children.list\n      .filter((el) => el.name.includes(\"layer_arrow\"))\n      .forEach((el) => el.destroy());\n    // this.scene.children.list.filter(el => el.name.includes('layer_pause_nenu')).forEach(el => el.destroy())\n  }\n\n  drawScores() {\n    // Creating a blank tilemap with dimensions matching the dungeon\n    const map = this.scene.make.tilemap({\n      tileWidth: 20,\n      tileHeight: 20,\n      width: 20,\n      height: 20,\n    });\n    // addTilesetImage: function (tilesetName, key, tileWidth, tileHeight, tileMargin, tileSpacing, gid)\n    map.addTilesetImage(\"hud-tiles\", \"hud-tiles\", 20, 20, 1, 2);\n\n    let scoreTileset = map.addTilesetImage(\n      \"hud-tiles\",\n      \"hud-tiles\",\n      20,\n      20,\n      1,\n      2\n    );\n\n    let scoresLayer = map.createBlankLayer(\"layer_scores\", scoreTileset);\n    scoresLayer.name = \"layer_scores\";\n    scoresLayer.depth = 5;\n    scoresLayer.setScrollFactor(0);\n\n    scoresLayer.setScale(SCALE);\n    // LEFT\n\n    Dialogs.drawWindow(map, { w: 3, h: 2, x: 0, y: 0 });\n\n    // RIGHT\n    Dialogs.drawWindow(map, { w: 3, h: 2, x: 17, y: 0 });\n\n    // this.pickaxeScore = window.localStorage.getItem('pickaxe')\n    // const s = this.scene.add.sprite(\n    //   map.tileToWorldX(9) + 10 * SCALE,\n    //   map.tileToWorldY(0) + 10 * SCALE,\n    // ).play('closeUp_Pickaxe').setOrigin(0.1, 0.15).setScale(SCALE)\n    // s.depth = 6\n    // s.setScrollFactor(0)\n    // s.setVisible(this.pickaxeScore === 'true')\n\n    const msh = this.scene.add\n      .sprite(map.tileToWorldX(18), map.tileToWorldY(1))\n      .play(\"closeUp_Mushroom\")\n      .setOrigin(0.5, 0.5)\n      .setScale(SCALE * 1.5);\n    msh.depth = 6;\n    msh.name = \"score_img\";\n    msh.setScrollFactor(0);\n    this.mushroomsIcon = msh;\n\n    const MT_MARGIN_RIGHT_PX = 9;\n    this.MT_MARGIN_RIGHT = MT_MARGIN_RIGHT_PX * SCALE;\n    // const shroomsAmount = window.localStorage.getItem(\"shrooms\") || \"0\";\n    // console.log(dbManager.getLevels())\n    const shroomsAmount = dbManager.getLevels().reduce((r, l) => r + l.collectedShrooms, 0);\n    console.log(shroomsAmount);\n    this.mushroomsScore = this.scene.add.text(\n      map.tileToWorldX(20) - this.MT_MARGIN_RIGHT,\n      map.tileToWorldY(1),\n      String(shroomsAmount),\n      {\n        fontFamily: \"GameGirl\",\n        fill: \"#ffffff\",\n        align: \"right\",\n      }\n    );\n    this.mushroomsScore.setData('amount', shroomsAmount)\n    this.mushroomsScore.setOrigin(1, 0);\n    this.mushroomsScore.displayHeight = 10 * SCALE;\n    this.mushroomsScore.displayWidth = String(shroomsAmount).length * 10 * SCALE;\n    this.mushroomsScore.name = \"score_text_to_remove\";\n    this.mushroomsScore.depth = 6;\n    this.mushroomsScore.setScrollFactor(0);\n    this.mushroomsScore.setShadow(-1, 1);\n\n    const D_MARGIN_LEFT_PX = 0.5; //px\n    this.D_MARGIN_LEFT = D_MARGIN_LEFT_PX * SCALE;\n    const diamond = this.scene.add\n      .sprite(map.tileToWorldX(1) + this.D_MARGIN_LEFT, map.tileToWorldY(1))\n      .play(\"closeUp_Diamond\")\n      .setOrigin(0.5, 0.5)\n      .setScale(SCALE * 1.5);\n    diamond.depth = 6;\n    diamond.name = \"score_img\";\n    diamond.setScrollFactor(0);\n    this.diamondsIcon = diamond;\n\n    this.scene.events.once(\"score:diamond_goal\", () => {\n      this.scene.tweens.add({\n        targets: diamond,\n        scale: SCALE * 2,\n        ease: \"Linear\",\n        duration: 250,\n        yoyo: true,\n        // onComplete: () => {\n        //   this.music.stop()\n        // },\n      });\n    });\n\n    const DT_MARGIN_RIGHT_PX = 9;\n    this.DT_MARGIN_RIGHT = DT_MARGIN_RIGHT_PX * SCALE;\n    this.diamondsAmount = \"0\";\n    this.diamondsScore = this.scene.add.text(\n      map.tileToWorldX(3) - this.DT_MARGIN_RIGHT,\n      map.tileToWorldY(1),\n      // map.tileToWorldY(0.5),\n      this.diamondsAmount,\n      {\n        fontFamily: \"GameGirl\",\n        fill: \"#ffffff\",\n        align: \"right\",\n      }\n    );\n    this.diamondsScore.setOrigin(1, 0);\n    this.diamondsScore.displayHeight = 10 * SCALE;\n    this.diamondsScore.displayWidth = this.diamondsAmount.length * 10 * SCALE;\n    this.diamondsScore.name = \"score_text_to_remove\";\n    this.diamondsScore.depth = 6;\n    this.diamondsScore.setScrollFactor(0);\n    this.diamondsScore.setShadow(-1, 1);\n\n    this.diamondsScoreGoal = this.scene.add.text(\n      map.tileToWorldX(3) - this.DT_MARGIN_RIGHT,\n      map.tileToWorldY(1),\n      \"00\", // goal\n      {\n        fontFamily: \"GameGirl\",\n        fill: \"gold\",\n        align: \"right\",\n      }\n    );\n    this.diamondsScoreGoal.alpha = 0;\n    this.diamondsScoreGoal.setOrigin(1, 0);\n    this.diamondsScoreGoal.displayHeight = 8 * SCALE;\n    this.diamondsScoreGoal.displayWidth = 2 * 8 * SCALE;\n    this.diamondsScoreGoal.name = \"score_text_to_remove\";\n    this.diamondsScoreGoal.depth = 6;\n    this.diamondsScoreGoal.setScrollFactor(0);\n    this.diamondsScoreGoal.setShadow(-1, 1);\n\n    this.scene.events.on(\"score:mushroom_collected\", (howMany = 1) => {\n      const amount = this.mushroomsScore.getData('amount') + howMany\n      this.mushroomsScore.setText(amount);\n    });\n    this.scene.events.on(\"score:mushroom_given\", (howMany = 1) => {\n      const amount = Number(this.mushroomsScore.getData('amount')) - howMany\n      this.mushroomsScore.setText(String(amount));\n    });\n    window.scene = this.scene;\n\n    this.scene.events.on(\"score:diamond_set\", (amount) => {\n      this.diamondsAmount = amount\n      this.diamondsScore.setText(amount);\n    });\n\n    this.scene.events.once(\"score:diamond_goal_set\", (amount) => {\n      this.scene.tweens.add({\n        targets: this.diamondsScore,\n        y: UI.tileToScreen(0.5),\n        ease: \"Linear\",\n        duration: 250,\n        onComplete: () => {},\n      });\n      const targetPosX = this.diamondsScoreGoal.x;\n      this.diamondsScoreGoal.x += UI.tileToScreen(0.5);\n      this.diamondsScoreGoal.alpha = 0;\n      this.diamondsScoreGoal.setText(amount);\n      this.scene.tweens.add({\n        targets: this.diamondsScoreGoal,\n        x: targetPosX,\n        alpha: 1,\n        ease: \"Linear\",\n        duration: 250,\n        delay: 200,\n      });\n    });\n  }\n\n  drawMenuOptions(map) {\n    this.inGameMenu = new UIMenus(this.scene);\n    this.inGameMenu.showInGameMenu();\n  }\n\n  showPauseMenu() {\n    const existingLayer = this.scene.children.list.find(\n      (el) => el.name === \"layer_pause_nenu\"\n    );\n    // flag to avoid options to work after menu is hidden\n    if (existingLayer) {\n      existingLayer.setVisible(true);\n      this.drawMenuOptions();\n      this.inGameMenu.isVisible = true;\n      return true;\n    }\n\n    // Creating a blank tilemap with dimensions matching the dungeon\n    const map = this.scene.make.tilemap({\n      tileWidth: 20,\n      tileHeight: 20,\n      width: 20,\n      height: 20,\n    });\n    // addTilesetImage: function (tilesetName, key, tileWidth, tileHeight, tileMargin, tileSpacing, gid)\n    let tileset = map.addTilesetImage(\"hud-tiles\", \"hud-tiles\", 20, 20, 1, 2);\n\n    let layer = map.createBlankLayer(\"layer_pause_nenu\", tileset);\n    layer.name = \"layer_pause_nenu\";\n    layer.depth = 15;\n    layer.setScrollFactor(0);\n\n    layer.setScale(SCALE);\n\n    Dialogs.drawWindow(map, { w: 14, h: 3, x: 3, y: 0 });\n    this.drawMenuOptions(map);\n    this.inGameMenu.isVisible = true;\n  }\n\n  setUpPuseResumeGame() {\n    this.scene.input.keyboard.removeListener(\n      \"keydown\",\n      this.onKeyDown.bind(this)\n    );\n    this.scene.input.keyboard.addListener(\"keydown\", this.onKeyDown.bind(this));\n  }\n\n  onKeyDown(event) {\n    const pauseGame = () => {\n      this.scene.levels.current.pause();\n      this.scene.events.emit(\"game_paused\");\n    };\n    const resumeGame = () => {\n      this.scene.levels.current.resume();\n      this.scene.events.emit(\"game_resumed\");\n    };\n    if (event.key === \"Escape\" && !this.dialogs.isShowing && this.scene.levels.current.player.connected) {\n      const action = this.scene.levels.current.isPaused\n        ? resumeGame\n        : pauseGame;\n      action();\n    }\n  }\n\n  // HELPER\n  static tileToScreen(val = 0) {\n    return UI.pixelToScreen(val * TILE_SIZE);\n  }\n  static pixelToScreen(val = 0) {\n    return val * SCALE;\n  }\n}\n","import Phaser from 'phaser'\nimport { PIXEL_TO_TILEMAP_POSITION, PIXEL_NAME, SCALE } from '../../utils/constants'\nimport UI from '../UI'\nimport Destroyable from './Destroyable'\nimport Player from './Player'\n\nexport default class Ground extends Destroyable {\n  constructor(id, level) {\n    super({\n      id,\n      isRigid: true,\n      isBreakable: true,\n      isFlat: true,\n      isPickable: false,\n      isCrushable: false,\n      level\n    })\n    this.strength = 1\n  }\n\n  overrunBy(el) {\n    // assume is player who overruns ground\n    const layer = this.level.scene.children.getByName('layer_1')\n    // when player dies and level is restarting but explosions still occuring, layer is null\n    if(!layer) return false\n    const { tilemap: map } = layer\n    \n    map.putTileAt(-1, this.position.x, this.position.y, false, 'layer_1')\n\n    if(el && el.isClass(Player)) {\n      this.level.scene.events.emit('sounds:clear_hit')\n  \n      \n    } else {\n      // destroyed by explosion or earthquake\n      this.break_effect = this.level.scene.add.sprite(48, 16).setOrigin(0, 0.25);\n      this.break_effect.setScale(SCALE);\n      this.break_effect.depth = 4;\n      this.break_effect.x = UI.tileToScreen(this.position.x)\n      this.break_effect.y = UI.tileToScreen(this.position.y)\n      this.break_effect.play('ground_disolves')\n      this.break_effect.setFlipY(true)\n      this.break_effect.on(Phaser.Animations.Events.ANIMATION_COMPLETE, () => {\n        this.break_effect.destroy()\n      })\n      // this.level.scene.plugins.get('rexFade').fadeOutDestroy(this.alien, 2000);\n    }\n\n    // we need to run this after level.objects updates from level.moveObject.\n      // so we queue it for the next tick\n      this.level.onNextTick(level => {\n        // ** calcultate tile shape for each neighbour of removed tile **\n    \n        // cross neighbours coords offset (up, right, down, left)\n        const neighboursCoords = [[0, -1], [1, 0], [0, 1], [-1, 0]]\n        neighboursCoords.forEach(coords => {\n          // create a 3x3 matrix to pass to calculateGroundTileWithNeighbours\n          const data = Array(3).fill(0).map(() => Array(3).fill(0))\n    \n          // gets object from neighbour coordinate\n          const x = this.position.x + coords[0]\n          const y = this.position.y + coords[1]\n          const neighbour = level.getObjectAt(x, y)\n          \n          // check if neighbour and it is a ground\n          if (neighbour && neighbour.constructor.className === this.constructor.className) {\n            // build data based on current neighbour, setting ground pixel or 0 accordingly.\n            data[0][1] = level.getObjectAt(x, y-1)?.constructor.className === this.constructor.className ? PIXEL_NAME.GROUND : 0\n            data[1][0] = level.getObjectAt(x-1, y)?.constructor.className === this.constructor.className ? PIXEL_NAME.GROUND : 0\n            data[2][1] = level.getObjectAt(x, y+1)?.constructor.className === this.constructor.className ? PIXEL_NAME.GROUND : 0\n            data[1][2] = level.getObjectAt(x+1, y)?.constructor.className === this.constructor.className ? PIXEL_NAME.GROUND : 0\n    \n            // gets and updates tile\n            const tile = PIXEL_TO_TILEMAP_POSITION.calculateGroundTileWithNeighbours(1, 1, data)\n            map.putTileAt(tile, x, y, false, 'layer_1')\n          }\n        })\n      })\n  }\n}\n\nGround.className = 'Ground'\n","import Moveable from './Moveable'\nimport { DIRS } from '../../utils/constants'\nimport Ground from './Ground'\n\nexport default class Character extends Moveable {\n  constructor(id, level) {\n    super({\n      id,\n      isRigid: false,\n      isBreakable: true,\n      isFlat: true,\n      isPickable: false,\n      isCrushable: true,\n      level\n    })\n    this.pushingDirection = null\n  }\n\n  animRun() {}\n  \n  canMove(x, y) {\n    const neighbour = this.level.getObjectAt(x, y)\n    const emptyPlace = this.level.objectIsEmpty(neighbour)\n    const canBrakeNeighbour = neighbour?.isBreakable && this.power >= neighbour.strength\n    \n    this.isBrakingGround = canBrakeNeighbour && neighbour.isClass(Ground)\n\n    return emptyPlace || canBrakeNeighbour || neighbour.isPickable ? neighbour : false\n  }\n\n  canMoveDir(DIR) {\n    switch(DIR) {\n      case DIRS.UP: return this.canMoveUp()\n      case DIRS.DOWN: return this.canMoveDown()\n      case DIRS.LEFT: return this.canMoveLeft()\n      case DIRS.RIGHT: return this.canMoveRight()\n      default: return false\n    }\n  }\n\n  canMoveUp() {\n    return this.canMove(this.position.x, this.position.y - 1)\n  }\n  canMoveDown() {\n    return this.canMove(this.position.x, this.position.y + 1)\n  }\n  animPushRight() {\n  }\n  animPushLeft() {\n  }\n  canMoveLeft() {\n    return this.canMove(this.position.x - 1, this.position.y)\n  }\n  canPushLeft() {\n    const neighbour = this.level.getObjectAt(this.position.x - 1, this.position.y)\n    const nothingBesides = this.level.isPositionClear(this.position.x - 2, this.position.y)\n    const isAboutToFall = this.level.isPositionClear(this.position.x - 1, this.position.y + 1)\n    const canPush = neighbour?.isMoveable && nothingBesides && !isAboutToFall\n    return canPush\n  }\n  pushLeft() {\n    const neighbour = this.level.getObjectAt(this.position.x - 1, this.position.y)\n    const canMove = this.canMoveLeft()\n    const canPush = this.canPushLeft()\n    let pushed = false\n    if(!canMove && canPush) {\n      if(this.pushingDirection === DIRS.LEFT) {\n        this.animPushLeft()\n        pushed = true\n        this.level.moveObject(neighbour, { x: this.position.x - 2, y: this.position.y })\n        this.level.jumpIntoParallelGravity(neighbour)\n        // clears pushing dir to let a new loop to push again\n        this.pushingDirection = null\n      } else {\n        this.pushingDirection = DIRS.LEFT\n        this.animPushLeft()\n      }\n    }\n    return pushed\n  }\n\n  canMoveRight() {\n    return this.canMove(this.position.x + 1, this.position.y)\n  }\n  \n  canPushRight() {\n    const neighbour = this.level.getObjectAt(this.position.x + 1, this.position.y)\n    const nothingBesides = this.level.isPositionClear(this.position.x + 2, this.position.y)\n    const isAboutToFall = this.level.isPositionClear(this.position.x + 1, this.position.y + 1)\n    const canPush = neighbour?.isMoveable && nothingBesides && !isAboutToFall\n    return canPush\n  }\n  \n  pushRight() {\n    const neighbour = this.level.getObjectAt(this.position.x + 1, this.position.y)\n    const canMove = this.canMoveRight()\n    const canPush = this.canPushRight()\n    let pushed = false\n    if(!canMove && canPush) {\n      if(this.pushingDirection === DIRS.RIGHT) {\n        this.animPushRight()\n        this.level.moveObject(neighbour, { x: this.position.x + 2, y: this.position.y })\n        this.level.jumpIntoParallelGravity(neighbour)\n        // clears pushing dir to let a new loop to push again\n        this.pushingDirection = null\n        pushed = true\n      } else {\n        this.pushingDirection = DIRS.RIGHT\n        this.animPushRight()\n      }\n    }\n    return pushed\n  }\n}\n\nCharacter.className = 'Character'\n","import Explosion from './Explosion'\nimport Fallable from './Fallable'\nimport Player from './Player'\n\nexport default class Jewel extends Fallable {\n  constructor(id, level) {\n    super({\n      id,\n      isRigid: false,\n      isBreakable: true,\n      isFlat: false,\n      isPickable: true,\n      isCrushable: false,\n      level\n    })\n    this.strength = 4\n  }\n  overrunBy(el) {\n    if(el.isClass(Player)) {\n      this.alien.visible = false\n      this.level.onJewelPick(this)\n      this.level.scene.events.emit('sounds:gem_pick')\n    }\n\n    if(el.isClass(Explosion)) {\n      this.alien.visible = false\n      this.alien.destroy()\n    }\n  }\n}\n\nJewel.className = 'Jewel'\n","import Phaser from \"phaser\";\nimport Character from \"./Character\";\nimport Player from \"./Player\";\nimport Boulder from \"./Boulder\";\nimport { DIRS, SCALE, TILE_SIZE } from \"../../utils/constants\";\nimport UI from \"../UI\";\nimport Jewel from \"./Jewel\";\n\nexport default class Enemy extends Character {\n  constructor(id, level) {\n    super(id, level);\n    this.moveIntentDir = DIRS.UP;\n    this.scanDirection = \"CW\";\n    this.anchorPosition = null;\n    this.line1 = null;\n    this.debug = false;\n  }\n  \n  addedToScene() {\n    if (this.debug) {\n      this.directionLine = this.level.scene.add.line(\n        // obj position = tile with 0.5 offset\n        UI.tileToScreen(this.position.x) + UI.tileToScreen(1) / 2,\n        UI.tileToScreen(this.position.y) + UI.tileToScreen(1) / 2,\n        // start point of line\n        0,\n        0,\n        // end point of line\n        0,\n        -UI.tileToScreen(1),\n        0x0000ff\n      );\n      this.directionLine.setRotation(Math.PI / 2);\n      this.directionLine.width = 1; // keep it this size for rotation to properly apply\n      this.directionLine.height = 1; // keep it this size for rotation to properly apply\n      this.directionLine.setOrigin(0.5, 0.5);\n\n      this.anchorLine = this.level.scene.add.line(\n        // obj position = tile with 0.5 offset\n        UI.tileToScreen(this.position.x) + UI.tileToScreen(1) / 2,\n        UI.tileToScreen(this.position.y) + UI.tileToScreen(1) / 2,\n        // start point of line\n        0,\n        0,\n        // end point of line\n        0,\n        -UI.tileToScreen(1),\n        0x00ff00\n      );\n      this.anchorLine.setRotation(Math.PI / 2);\n      this.anchorLine.width = 1; // keep it this size for rotation to properly apply\n      this.anchorLine.height = 1; // keep it this size for rotation to properly apply\n      this.anchorLine.setOrigin(0.5, 0.5);\n    }\n  }\n  overrunBy(el) {\n    if (el.constructor.className !== Player.className) {\n      // this.alien.visible = false\n      // this.alien.alpha = 0.5\n      this.alien?.destroy();\n      this.line1?.destroy();\n      this.level.onCharacterDie(this);\n      this.level.onEnemyKill(this)\n    }\n    if (el.isClass(Boulder) || el.isClass(Jewel)) {\n      this.level.scene.events.emit(\"sounds:death_by_rock_hit\");\n    }\n\n    this.level.enemy_die_effect.x = this.alien.x;\n    this.level.enemy_die_effect.y = this.alien.y;\n    this.level.enemy_die_effect.play(\"enemy_dies\");\n  }\n  loop() {\n    if (this.moveIntentDir === DIRS.RIGHT && this.alien.flipX) {\n      this.alien.setFlipX(false);\n    }\n    if (this.moveIntentDir === DIRS.LEFT && !this.alien.flipX) {\n      this.alien.setFlipX(true);\n    }\n\n    if (this.debug) {\n      this.directionLine.setPosition(\n        UI.tileToScreen(this.position.x) + UI.tileToScreen(1) / 2,\n        UI.tileToScreen(this.position.y) + UI.tileToScreen(1) / 2\n      );\n      this.directionLine.setRotation(\n        this.moveIntentDir === DIRS.UP\n          ? 0\n          : this.moveIntentDir === DIRS.RIGHT\n          ? Math.PI / 2\n          : this.moveIntentDir === DIRS.DOWN\n          ? Math.PI\n          : (3 * Math.PI) / 2\n      );\n      if (this.anchorPosition) {\n        // console.log(this.anchorPosition);\n        this.anchorLine.setPosition(\n          UI.tileToScreen(this.position.x) + UI.tileToScreen(1) / 2,\n          UI.tileToScreen(this.position.y) + UI.tileToScreen(1) / 2\n        );\n\n        this.anchorLine.setRotation(\n          this.anchorPosition.y < this.position.y\n            ? 0\n            : this.anchorPosition.x > this.position.x\n            ? Math.PI / 2\n            : this.anchorPosition.y > this.position.y\n            ? Math.PI\n            : (3 * Math.PI) / 2\n        );\n      }\n    }\n  }\n}\n\nEnemy.className = \"Enemy\";\n","import Character from \"./Character\"\nimport Enemy from \"./Enemy\"\nimport Boulder from \"./Boulder\"\nimport { DIRS } from \"../../utils/constants\"\nimport Player from \"./Player\"\n\nexport default class NPCharacter extends Character {\n  constructor(id, level, name) {\n    super(id, level)\n    this.name = name\n    this.moveIntentDir = \"\"\n    this.isFollowing = false\n    this.isLeading = false\n    this.leadingPath = [{ x: 1, y: 7 }, { x: 1, y: 8 }, { x: 1, y: 9 }, { x: 1, y: 10 }, { x: 1, y: 11 }, { x: 1, y: 12 }\n      , { x: 2, y: 12 }, { x: 3, y: 12 }, { x: 3, y: 13 }, { x: 3, y: 14 }, { x: 3, y: 15 }, { x: 3, y: 16 }, { x: 3, y: 17 }, { x: 3, y: 18 }\n      , { x: 4, y: 18 }, { x: 5, y: 18 }, { x: 5, y: 17 }, { x: 5, y: 16 }, { x: 5, y: 15 }, { x: 5, y: 14 }\n      , { x: 6, y: 14 }, { x: 7, y: 14 }, { x: 8, y: 14 }, { x: 9, y: 14 }, { x: 10, y: 14 }, { x: 11, y: 14 }, { x: 12, y: 14 }, { x: 13, y: 14 }\n      , { x: 14, y: 14 }, { x: 15, y: 14 }, { x: 16, y: 14 }, { x: 17, y: 14 }, { x: 18, y: 14 }, { x: 19, y: 14 }, { x: 20, y: 14 }, { x: 21, y: 14 }]\n    level.scene.events.on('player_moves',  this.onPlayerMoves.bind(this))\n  }\n  \n  onPlayerMoves(nextPos) {\n    if(this.isCloseEnough(nextPos) && this.isLeading) {\n      if(this.leadingPath.length) {\n        const nextPos = this.leadingPath.shift()\n        this.calcMoveIntentForLeader(nextPos)\n        this.level.moveObject(this, nextPos)\n      }\n    }\n  }\n\n  isCloseEnough(pos) {\n    return (\n      // NORTH\n      (this.position.x === pos.x && this.position.y - 1 === pos.y) ||\n      // EAST\n      (this.position.x + 1 === pos.x && this.position.y === pos.y) ||\n      // SOUTH\n      (this.position.x === pos.x && this.position.y + 1 === pos.y) ||\n      // WEST\n      (this.position.x - 1 === pos.x && this.position.y === pos.y)\n    )\n  }\n  calcMoveIntentForLeader(nextPos) {\n    this.moveIntentDir = this.position.y < nextPos.y ? DIRS.DOWN : this.moveIntentDir\n    this.moveIntentDir = this.position.y > nextPos.y ? DIRS.UP : this.moveIntentDir\n    if (this.position.x < nextPos.x) {\n      this.moveIntentDir = DIRS.LEFT\n      this.animRunRight()\n    }\n    if (this.position.x > nextPos.x) {\n      this.moveIntentDir = DIRS.RIGHT\n      this.animRunLeft()\n    }\n\n    // this.moveObject(follower, followerNextPos)\n\n    // if(this.moveIntentDir === DIRS.UP) {\n    //   this.alien.depth = 20\n    //   player.alien.depth = 0\n    // } else {\n    //   player.alien.depth = 20\n    //   this.alien.depth = 0\n    // }\n  }\n\n  destroy() {\n    // animate die\n\n  }\n  animIdle() {\n    this.alien?.play(`${this.name}_idle`)\n  }\n\n  animRun() {\n    let animRunVariant = \"\"\n    if (this.moveIntentDir === DIRS.UP) {\n      animRunVariant = \"_up\"\n    }\n    if (this.moveIntentDir === DIRS.DOWN) {\n      animRunVariant = \"_down\"\n    }\n    const animName = `${this.name}_run${animRunVariant}`\n    if (this.alien.anims.currentAnim.key !== animName) {\n      this.alien.play(animName)\n    }\n  }\n  animRunLeft(){\n    this.alien.setFlipX(true)\n    this.alien.setOrigin(0.25, 0.25)\n  }\n  animRunRight(){\n    this.alien.setFlipX(false)\n    this.alien.setOrigin(0, 0.25)\n  }\n\n  die() {\n    this.inactive = true\n    this.alien.alpha = 0\n    this.level.scene.events.off('player_moves',  this.onPlayerMoves)\n    this.destroy()\n    // this.level.onCharacterDie(this)\n  }\n\n  overrunBy(el) {\n    if (el.constructor.className === Boulder.className) {\n      this.level.scene.events.emit(\"sounds:death_by_rock_hit\")\n    }\n    if (el.constructor.className !== Player.className) {\n      this.die()\n    }\n  }\n  runningOver(el) {\n    if (el.constructor.className === Enemy.className) {\n      this.die()\n    }\n    // this.isBrakingGround = el.constructor.className === Ground.className\n  }\n}\n\nNPCharacter.className = \"NPCharacter\"\n","import Phaser from 'phaser'\nimport Character from './Character'\nimport Enemy from './Enemy'\nimport Boulder from './Boulder'\nimport { DIRS } from '../../utils/constants'\nimport NPCharacter from './NPCharacter'\nimport Ground from './Ground'\nimport Jewel from './Jewel'\n\nexport default class Player extends Character {\n  constructor(id, level) {\n    super(id, level)\n    this.power = 0.5\n    this.moveIntentDir = ''\n    this.connected = true\n    this.torch = null\n\n    const scene = level.scene\n    scene.input.keyboard.removeListener('keydown', this.onKeyDown)\n    scene.input.keyboard.addListener('keydown', this.onKeyDown.bind(this))\n\n    scene.input.keyboard.removeListener('keyup', this.onKeyUp)\n    scene.input.keyboard.addListener('keyup', this.onKeyUp.bind(this))\n  }\n  disconnect() {\n    this.connected = false\n    this.moveIntentDir = ''\n    if(!this.inactive) {\n      this.animIdle()\n    }\n  }\n  reconnect() {\n    this.connected = true\n  }\n  onKeyUp(event) {\n    if (this.moveIntentDir === event.key && this.connected) {\n      this.moveIntentDir = ''\n      this.pushingDirection = null\n    }\n  }\n  onKeyDown(event) {\n    if(!event.repeat && [DIRS.UP, DIRS.DOWN, DIRS.LEFT, DIRS.RIGHT].includes(event.key) && this.connected) {\n      this.moveIntentDir = event.key;\n      // calls loop to avoid delay between key press and visual movement at the begining of next loop\n      if(!this.isMoving) {\n        this.level.playerLoop()\n      }\n    }\n  }\n  destroy() {\n    \n  }\n  animIdle() {\n    const animName = this.hasPickaxe ? 'brave_idle_pickaxe' : 'brave_idle'\n    if((this.moveIntentDir === '' || !this.canMoveDir(this.moveIntentDir)) && !this.inactive) {\n      this.alien?.play(animName)\n      this.alien?.setFlipX(false)\n      this.alien?.setOrigin(0, 0.25)\n\n      this.torch?.play('torch_idle')\n      this.torch?.setFlipX(false)\n      this.torch?.setOrigin(0, 0.25)\n    }\n  }\n  animPushRight() {\n    this.alien?.play('brave_push')\n    this.alien.setFlipX(false)\n    this.alien.setOrigin(0, 0.25)\n\n    this.torch?.play('torch_push')\n    this.torch?.setFlipX(false)\n    this.torch?.setOrigin(0, 0.25)\n  }\n  animPushLeft() {\n    this.alien?.play('brave_push')\n    this.alien.setFlipX(true)\n    this.alien.setOrigin(0.25, 0.25)\n\n    this.torch?.play('torch_push')\n    this.torch?.setFlipX(true)\n    this.torch?.setOrigin(0.25, 0.25)\n  }\n  animRun() {\n    let dirVariant = ''\n    let pickaxeVariant = ''\n    let actionVariant = '_run'\n    let character = 'brave'\n    if(this.moveIntentDir === DIRS.UP) {\n      dirVariant = '_up'\n    }\n    if(this.moveIntentDir === DIRS.DOWN) {\n      dirVariant = '_down'\n    }\n    if(this.isBrakingGround) {\n      actionVariant = '_break'\n    }\n    if(this.hasPickaxe) {\n      pickaxeVariant = '_pickaxe'\n      if(dirVariant === '' && this.isBrakingGround && Math.random() > 0.5) {\n        pickaxeVariant = pickaxeVariant + '_alt'\n      }\n    }\n\n    const animName = character + actionVariant + pickaxeVariant + dirVariant\n\n\n    if(this.alien.anims.currentAnim.key !== animName && !this.inactive) {\n      this.alien.play(animName)\n\n      // if(actionVariant.includes('run')) {\n        this.torch?.play('torch_run' + dirVariant)\n      // }\n      // if(actionVariant.includes('break')) {\n      //   this.torch?.play('torch_break' + dirVariant)\n      // }\n    }\n\n  }\n  // these 2 method are probably switched.\n  // animRunRight is called when player runs left and viceversa\n  animRunRight(){\n    this.alien.setFlipX(true)\n    this.alien.setOrigin(0.25, 0.25)\n    this.torch?.setFlipX(true)\n    this.torch?.setOrigin(0.25, 0.25)\n  }\n  animRunLeft(){\n    this.alien.setOrigin(0, 0.25)\n    this.alien.setFlipX(false)\n    this.torch?.setFlipX(false)\n    this.torch?.setOrigin(0, 0.25)\n  }\n\n  die() {\n    this.inactive = true\n    // this.disconnect()\n    const scene = this.level.scene\n    scene.input.keyboard.off('keydown')\n    scene.input.keyboard.off('keyup')\n    // animate die\n    this.level.onCharacterDie(this)\n    this.alien.play('brave_dies')\n    this.alien.on(Phaser.Animations.Events.ANIMATION_COMPLETE, () => {\n      this.destroy()\n      this.alien.alpha = 0\n    })\n  }\n\n  overrunBy(el) {\n    if (el.constructor.className === Boulder.className) {\n      this.level.scene.events.emit('sounds:death_by_rock_hit')\n    }\n    \n    if (el.constructor.className !== NPCharacter.className) {\n      this.die()\n    }\n  }\n  runningOver(el) {\n    if(el.isClass(Enemy)) {\n      this.die()\n    }\n    \n    if(el.isClass(Ground)) {\n      const layer = this.level.scene.children.getByName('layer_1')\n      const { tilemap: map } = layer\n      this.level.break_effect.x = map.tileToWorldX(el.position.x)\n      this.level.break_effect.y = map.tileToWorldY(el.position.y)\n      this.level.break_effect.play('ground_breaks')\n    }\n    if(el.isClass(Jewel)) {\n      const layer = this.level.scene.children.getByName('layer_1')\n      const { tilemap: map } = layer\n      this.level.pick_effect.x = map.tileToWorldX(el.position.x)\n      this.level.pick_effect.y = map.tileToWorldY(el.position.y)\n      this.level.pick_effect.play('jewel_pick')\n    }\n  }\n\n  ligthTorch() {\n    this.torch = this.level.scene.add.sprite(48, 16).setOrigin(0, 0.25)\n    this.torch.setScale(this.alien.scaleX)\n    this.torch.depth = 4.5 // .5 higher than player when has follower\n    this.torch.play('torch_idle')\n    this.level.scene.time.addEvent({\n      delay: 10,\n      callback: function ()\n      {\n        this.torch.x = this.alien?.x\n        this.torch.y = this.alien?.y\n      },\n      callbackScope: this,\n      repeat: -1\n    })\n  }\n}\n\nPlayer.className = 'Player'\n","import GameObject from './GameObject'\n\nexport default class Wall extends GameObject {\n  constructor(id, level) {\n    super({\n      id,\n      isRigid: true,\n      isBreakable: false,\n      isFlat: true,\n      isPickable: false,\n      isCrushable: false,\n      level\n    })\n    this.strength = 20\n  }\n}\n\nWall.className = 'Wall'\n","import Empty from './Empty'\nimport Player from './Player'\n\nexport default class Interactive extends Empty {\n  constructor(id, level) {\n    super(id, level)\n    this.ephemeral = true\n  }\n  overrunBy(el) {\n    if (el.isClass(Player)) {\n      this.level.onInteractWith(this)\n    }\n  }\n}\n\nInteractive.className = 'Interactive'\n","import Interactive from \"./Interactive\"\n\nexport default class Exit extends Interactive {\n}\n\nExit.className = 'Exit'\n","import { PIXEL_NAME, TICK_TIME } from '../../utils/constants'\nimport Empty from './Empty'\nimport Explosion from './Explosion'\nimport Fallable from './Fallable'\n\nexport default class Barrel extends Fallable {\n  constructor(id, level) {\n    super({\n      id,\n      isRigid: false,\n      isBreakable: true,\n      isFlat: true,\n      isPickable: false,\n      isCrushable: true,\n      level\n    })\n    this.reach = 1\n    this.strength = 5\n    this.objectsToDestroyByExplostion = []\n  }\n  explode() {\n    this.alien?.destroy()\n\n    // remove barrel\n    this.level.moveables = this.level.moveables.filter((e) => e !== this);\n    this.level.parallelMovables = this.level.parallelMovables.filter((e) => e !== this);\n    this.level.replaceByEmpty(this);\n\n    // freeze explosion places so objects can not move before the explosion triggers\n    for (let x = this.position.x - this.reach; x <= this.position.x + this.reach; x++) {\n      for (\n        let y = this.position.y - this.reach;\n        y <= this.position.y + this.reach;\n        y++\n      ) {\n        const burntEl = this.level.getObjectAt(x, y);\n        const burntWillBreak =\n          burntEl.isBreakable && (burntEl.strength || 0) < 10 // explosion.power\n        if (burntWillBreak && !this.level.objectIsEmpty(burntEl)) {\n          this.objectsToDestroyByExplostion.push(burntEl)\n          if(burntEl.isClass(Fallable)) {\n            // prevent to keep moving by removing it from movables\n            this.level.moveables = this.level.moveables.filter((e) => e !== burntEl);\n            this.level.parallelMovables = this.level.parallelMovables.filter((e) => e !== burntEl);\n          }\n        }\n        if (burntWillBreak || this.level.objectIsEmpty(burntEl)) {\n          // complete explosion matrix with empty elements to replace them later with explosion objects\n          const explosionPlaceholder = new Explosion(PIXEL_NAME.EXPLOSION, this.level)\n          // const explosionPlaceholder = new Empty(PIXEL_NAME.EMPTY, this.level)\n          // explosionPlaceholder.isEmpty = false\n          explosionPlaceholder.setPosition({ x, y })\n          this.level.setObjectAt(x, y, explosionPlaceholder);\n          this.objectsToDestroyByExplostion.push(explosionPlaceholder)\n        }\n      }\n    }\n    // setTimeout(() => this.level.onExplode(this), TICK_TIME/2)\n    setTimeout(() => this.onExplode(), TICK_TIME/2)\n    \n    this.level.scene.events.emit('sounds:explosion')\n    this.level.scene.cameras.main.shake(500, 0.003)\n  }\n\n  onExplode() {\n    const lvl = this.level\n    this.objectsToDestroyByExplostion.forEach(burntEl => {\n        \n      const explosion = new Explosion(PIXEL_NAME.EXPLOSION, lvl);\n      if(!burntEl.isClass(Explosion)) {\n        burntEl.overrunBy(explosion);\n        lvl.onDestroyElement(burntEl);\n      }\n    })\n    this.level.onNextTick(lvl => {\n      // this.objectsToDestroyByExplostion.forEach(burntEl => {\n        \n      //   const explosion = new Explosion(PIXEL_NAME.EXPLOSION, lvl);\n      //   if(!burntEl.isClass(Explosion)) {\n      //     burntEl.overrunBy(explosion);\n      //     lvl.onDestroyElement(burntEl);\n      //   }\n      // })\n    })\n  }\n  overrunBy() {\n    this.explode()\n    // setTimeout(() => this.explode(), TICK_TIME/2)\n  }\n}\nBarrel.className = 'Barrel'\n\n","import Explosion from './Explosion'\nimport Fallable from './Fallable'\nimport Player from './Player'\n\nexport default class Mushroom extends Fallable {\n  constructor(id, level) {\n    super({\n      id,\n      isRigid: false,\n      isBreakable: true,\n      isFlat: false,\n      isPickable: true,\n      isCrushable: false,\n      level\n    })\n    this.strength = 4\n  }\n  overrunBy(el) {\n    if(el.isClass(Player)) {\n      this.alien.visible = false\n      this.level.onMushroomPick(this)\n      this.level.scene.events.emit('sounds:shroom_pick')\n      this.level.scene.events.emit('score:mushroom_collected')\n    }\n\n    if(el.isClass(Explosion)) {\n      this.alien.visible = false\n      this.alien.destroy()\n    }\n  }\n}\n\nMushroom.className = 'Mushroom'\n","import { SCALE } from \"../../utils/constants\";\nimport dbManager from \"../../utils/dbManager\";\nimport { translate } from \"../../utils/localization\";\nimport { Exit, Interactive } from \"../objects\";\nimport UI from \"../UI\";\nimport LevelBase from \"./levelBase\";\n\nclass Level1 extends LevelBase {\n  constructor() {\n    super();\n    this.name = \"The beginning\";\n  }\n\n  get id() {\n    return this.constructor.key;\n  }\n\n  connectToScene(scene) {\n    super.connectToScene(scene);\n\n    if(this.unfinished) {\n      scene.events.once(\"levelstart\", () => this.showDialog1());\n    }\n\n    let light_beam = this.scene.add.image(\n      this.scene.cameras.main.width / 2,\n      this.scene.cameras.main.height / 2,\n      \"light_beam\"\n    );\n    light_beam.x = UI.tileToScreen(14);\n    light_beam.y = UI.tileToScreen(1);\n    light_beam.setOrigin(0, 0);\n    light_beam.setScale(SCALE * 2);\n    light_beam.scaleX = SCALE * 2.4;\n    light_beam.setScrollFactor(1);\n    light_beam.depth = 4.5;\n    light_beam.alpha = 0.5;\n\n    var particles = scene.add.particles(\"spark\").setScale(SCALE);\n    var emitter = particles.createEmitter();\n    emitter.setPosition(\n      { min: UI.tileToScreen(5), max: UI.tileToScreen(7) },\n      { min: UI.tileToScreen(0.5), max: UI.tileToScreen(1) }\n    );\n    emitter.setQuantity(5);\n    emitter.setFrequency(20000);\n    emitter.setAngle({ min: 0, max: 360 });\n    emitter.setSpeed(5);\n    emitter.setGravityY(0.1);\n    emitter.setGravityX(0);\n    emitter.setLifespan({ min: 10000, max: 50000 });\n    emitter.alpha.onChange(0.5);\n  }\n\n  showDialog1() {\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Mary\"],\n      participantNames: [\"Mary\"],\n      conversation: [\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_1.dialog_1.mary_say_1\")],\n          options: [],\n        },\n      ],\n    });\n  }\n  showDialog2() {\n    this.scene.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Mary\"],\n      participantNames: [\"Mary\"],\n      conversation: [\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"level_1.dialog_2.mary_say_1\")],\n          options: [],\n        },\n      ],\n    });\n  }\n\n  onInteractWith(el) {\n    super.onInteractWith(el);\n    if (el.isClass(Exit)) {\n      this.onComplete();\n    }\n    if (el.isClass(Interactive) && el.order === 0 && this.unfinished) {\n      this.showDialog2();\n    }\n  }\n}\nLevel1.key = \"level_1\";\nexport default Level1;\n","import Phaser from 'phaser'\nimport Level1 from '../components/levels/level_1';\nimport Level2 from '../components/levels/level_2';\nimport Level3 from '../components/levels/level_3';\nimport Level4 from '../components/levels/level_4';\nimport Level5 from '../components/levels/level_5';\nimport Level6 from '../components/levels/level_6';\nimport Level7 from '../components/levels/level_7';\nimport Level8 from '../components/levels/level_8';\nimport Level9 from '../components/levels/level_9';\nimport Level10 from '../components/levels/level_10';\nimport Level11 from '../components/levels/level_11';\nimport LevelFinale from '../components/levels/level_finale';\nimport LevelTest from '../components/levels/level_test';\nimport LevelMaze1 from '../components/levels/Maze_1';\nimport UIMenus from '../components/UIMenus';\nimport { SCALE } from '../utils/constants'\nimport CRTFilter from '../utils/CRTShaderFX'\nimport { translate } from '../utils/localization';\n\nlet titlesMusic\nexport default class LandingScene extends Phaser.Scene {\n  constructor () {\n    super('LandingScene');\n  }\n\n  preload () {\n    const txt = this.add.text(80 * SCALE, (121) * SCALE + 20 * SCALE,\n    translate('menu.main.loading_message'),\n\n    // https://en.wikipedia.org/wiki/Sumerian_language\n\n    // 𒉆  𒅗𒈠    𒋛𒀀𒋛𒀀𒂠       𒂊𒀝\n    // nam  inim-ma  diri-diri-še3  e-ak\n    // acted unspeakably\n\n    // 𒄑𒆵𒆠𒁕   𒁮𒄩𒊏    𒂊𒁕𒀝\n    // ummaki-da  dam-ḫa-ra  e-da-ak\n\n\n      {\n        fontFamily: 'GameGirl',\n        fontSize: \"40px\",\n        fill: \"#ffffff\",\n      }\n    ).setShadow(-1,1)\n  \n    txt.setScale(SCALE)\n    this.load.script('webfont', 'https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js');\n    // this.load.image('main-tiles', process.env.PUBLIC_URL + '/assets/tilemaps/tilemap_20x20.png');\n    this.load.image('main-tiles', process.env.PUBLIC_URL + '/assets/tilemaps/world1_tiles_20x20.png');\n    this.load.image('gates-tiles', process.env.PUBLIC_URL + '/assets/tilemaps/gates_tilemap_20x20.png');\n    this.load.image('hud-tiles', process.env.PUBLIC_URL + '/assets/tilemaps/hud_tilemap_20x20.png');\n    this.load.image('_level_2', process.env.PUBLIC_URL + '/assets/maps/test.png');\n    this.load.image(LevelTest.name, process.env.PUBLIC_URL + '/assets/maps/level_test.png');\n    this.load.image(`${LevelTest.name}_bg`, process.env.PUBLIC_URL + '/assets/maps/level_1_bg.png');\n    this.load.image(Level1.name, process.env.PUBLIC_URL + '/assets/maps/level_1.png');\n    this.load.image(`${Level1.name}_bg`, process.env.PUBLIC_URL + '/assets/maps/level_1_bg.png');\n    this.load.image(Level2.name, process.env.PUBLIC_URL + '/assets/maps/level_2.png');\n    this.load.image(`${Level2.name}_bg`, process.env.PUBLIC_URL + '/assets/maps/level_2_bg.png');\n    this.load.image(Level3.name, process.env.PUBLIC_URL + '/assets/maps/level_3.png');\n    this.load.image(`${Level3.name}_bg`, process.env.PUBLIC_URL + '/assets/maps/level_3_bg.png');\n    this.load.image(Level4.name, process.env.PUBLIC_URL + '/assets/maps/level_4.png');\n    this.load.image(`${Level4.name}_bg`, process.env.PUBLIC_URL + '/assets/maps/level_4_bg.png');\n    this.load.image(Level5.name, process.env.PUBLIC_URL + '/assets/maps/level_5.png');\n    this.load.image(`${Level5.name}_bg`, process.env.PUBLIC_URL + '/assets/maps/level_5_bg.png');\n    this.load.image(Level6.name, process.env.PUBLIC_URL + '/assets/maps/level_6.png');\n    this.load.image(`${Level6.name}_bg`, process.env.PUBLIC_URL + '/assets/maps/level_6_bg.png');\n    this.load.image(Level7.name, process.env.PUBLIC_URL + '/assets/maps/level_7.png');\n    this.load.image(`${Level7.name}_bg`, process.env.PUBLIC_URL + '/assets/maps/level_7_bg.png');\n    this.load.image(Level8.name, process.env.PUBLIC_URL + '/assets/maps/level_8.png');\n    this.load.image(`${Level8.name}_bg`, process.env.PUBLIC_URL + '/assets/maps/level_7_bg.png');\n    this.load.image(Level9.name, process.env.PUBLIC_URL + '/assets/maps/level_9.png');\n    this.load.image(`${Level9.name}_bg`, process.env.PUBLIC_URL + '/assets/maps/level_7_bg.png');\n    this.load.image(Level10.name, process.env.PUBLIC_URL + '/assets/maps/level_10.png');\n    this.load.image(`${Level10.name}_bg`, process.env.PUBLIC_URL + '/assets/maps/level_7_bg.png');\n    this.load.image(Level11.name, process.env.PUBLIC_URL + '/assets/maps/level_11.png');\n    this.load.image(`${Level11.name}_bg`, process.env.PUBLIC_URL + '/assets/maps/level_7_bg.png');\n    this.load.image(LevelFinale.name, process.env.PUBLIC_URL + '/assets/maps/level_finale.png');\n    this.load.image('Stage1_bg', process.env.PUBLIC_URL + '/assets/images/stage_1_bg_art.png');\n    this.load.image('IntroTiamat', process.env.PUBLIC_URL + '/assets/images/intro_tiamat.png');\n    this.load.image('IntroSky', process.env.PUBLIC_URL + '/assets/images/intro_sky.png');\n    this.load.image('IntroClouds', process.env.PUBLIC_URL + '/assets/images/intro_clouds.png');\n    this.load.image('IntroGround', process.env.PUBLIC_URL + '/assets/images/intro_ground.png');\n    this.load.image('IntroGroundHigh', process.env.PUBLIC_URL + '/assets/images/intro_ground_high.png');\n    this.load.image('IntroGroundBreak', process.env.PUBLIC_URL + '/assets/images/intro_ground_break.png');\n    this.load.image('IntroComet', process.env.PUBLIC_URL + '/assets/images/intro_comet.png');\n    this.load.image('IntroPeopleClimbing', process.env.PUBLIC_URL + '/assets/images/intro_people_climbing.png');\n    this.load.image('IntroPeoplePraying', process.env.PUBLIC_URL + '/assets/images/intro_people_praying.png');\n    this.load.image('IntroPeoplePrayingHigh', process.env.PUBLIC_URL + '/assets/images/intro_people_praying_high.png');\n    this.load.image('IntroPeopleDescending', process.env.PUBLIC_URL + '/assets/images/intro_people_descending.png');\n    this.load.image('IntroPeopleFalling', process.env.PUBLIC_URL + '/assets/images/intro_people_falling.png');\n    this.load.image('IntroPeopleJumping', process.env.PUBLIC_URL + '/assets/images/intro_people_jumping.png');\n    this.load.image('IntroStorm', process.env.PUBLIC_URL + '/assets/images/intro_storm.png');\n    this.load.image('Prologue', process.env.PUBLIC_URL + '/assets/images/Prologue.png');\n    this.load.image('thechild', process.env.PUBLIC_URL + '/assets/images/thechild.png');\n    this.load.image('theworld', process.env.PUBLIC_URL + '/assets/images/theworld.png');\n    this.load.image('Tiamat', process.env.PUBLIC_URL + '/assets/images/Tiamat.png');\n    this.load.image('Cover', process.env.PUBLIC_URL + '/assets/images/cover.png');\n    this.load.image('Bossfight', process.env.PUBLIC_URL + '/assets/images/Bossfight.png');\n    this.load.image('Bossfighthands', process.env.PUBLIC_URL + '/assets/images/Bossfighthands.png');\n    this.load.image('spark', process.env.PUBLIC_URL + '/assets/sprites/flare_blue.png');\n    this.load.image('light_beam', process.env.PUBLIC_URL + '/assets/sprites/light_beam.png');\n    this.load.spritesheet('boulder', process.env.PUBLIC_URL + '/assets/sprites/boulder_sprite.png', { frameWidth: 26, frameHeight: 26 });\n    this.load.spritesheet('explosion', process.env.PUBLIC_URL + '/assets/sprites/explosion_sprite.png', { frameWidth: 26, frameHeight: 26 });\n    this.load.spritesheet('torch', process.env.PUBLIC_URL + '/assets/sprites/torch_sprite.png', { frameWidth: 26, frameHeight: 26 });\n    this.load.spritesheet('brave', process.env.PUBLIC_URL + '/assets/sprites/brave_sprite.png', { frameWidth: 26, frameHeight: 26 });\n    this.load.spritesheet('bro', process.env.PUBLIC_URL + '/assets/sprites/bro_sprite.png', { frameWidth: 26, frameHeight: 26 });\n    this.load.spritesheet('dwarf', process.env.PUBLIC_URL + '/assets/sprites/dwarf_sprite.png', { frameWidth: 26, frameHeight: 26 });\n    this.load.spritesheet('gate', process.env.PUBLIC_URL + '/assets/sprites/gate_sprite.png', { frameWidth: 26, frameHeight: 26 });\n    this.load.spritesheet('bat', process.env.PUBLIC_URL + '/assets/sprites/bat_sprite.png', { frameWidth: 26, frameHeight: 26 });\n    this.load.spritesheet('pickables', process.env.PUBLIC_URL + '/assets/sprites/pickables_sprite.png', { frameWidth: 26, frameHeight: 26 });\n    this.load.spritesheet('closeUp', process.env.PUBLIC_URL + '/assets/sprites/close_up_sprite.png', { frameWidth: 40, frameHeight: 40 });\n    this.load.spritesheet('closeUpItems', process.env.PUBLIC_URL + '/assets/sprites/close_up_sprite.png', { frameWidth: 20, frameHeight: 20 });\n    this.load.audio('credits', process.env.PUBLIC_URL + '/assets/audio/Score/Opening Credits_.mp3');\n    this.load.audio('opening_peace', process.env.PUBLIC_URL + '/assets/audio/Score/NormalDay.mp3');\n    this.load.audio('opening_quakes', process.env.PUBLIC_URL + '/assets/audio/Score/Earthquakes+Tiamat.mp3');\n    this.load.audio('credits', process.env.PUBLIC_URL + '/assets/audio/Score/NormalDay.mp3');\n    this.load.audio('levels_surface', process.env.PUBLIC_URL + '/assets/audio/Score/1st 7 Levels.mp3');\n    this.load.audio('swarf_chat_music', process.env.PUBLIC_URL + '/assets/audio/Score/MushroomDwarfDialogue(loop).mp3');\n    this.load.audio('generic_chat_music', process.env.PUBLIC_URL + '/assets/audio/Score/GenericDialogue(loop).mp3');\n    this.load.audio('escape_music', process.env.PUBLIC_URL + '/assets/audio/Score/BossBattle_EscapeTheVoid!(loop).mp3');\n    this.load.audio('rock_hit', process.env.PUBLIC_URL + '/assets/audio/SFX/RockHit.mp3');\n    this.load.audio('rock_hit2', process.env.PUBLIC_URL + '/assets/audio/SFX/RockHit2.mp3');\n    this.load.audio('rock_hit3', process.env.PUBLIC_URL + '/assets/audio/SFX/RockHit3.wav');\n    this.load.audio('rock_hit_soft', process.env.PUBLIC_URL + '/assets/audio/SFX/RockHitSoft.mp3');\n    this.load.audio('explosion', process.env.PUBLIC_URL + '/assets/audio/SFX/MidSizeExplosion.mp3');\n    this.load.audio('clear_hit1', process.env.PUBLIC_URL + '/assets/audio/SFX/PickaxeClearingGround1.mp3');\n    this.load.audio('clear_hit2', process.env.PUBLIC_URL + '/assets/audio/SFX/PickaxeClearingGround2.mp3');\n    this.load.audio('clear_hit3', process.env.PUBLIC_URL + '/assets/audio/SFX/PickaxeClearingGround3.mp3');\n    this.load.audio('rock_slide_hard1', process.env.PUBLIC_URL + '/assets/audio/SFX/RockSlideHard1.mp3');\n    this.load.audio('rock_slide_hard2', process.env.PUBLIC_URL + '/assets/audio/SFX/RockSlideHard2.mp3');\n    this.load.audio('rock_slide_hard3', process.env.PUBLIC_URL + '/assets/audio/SFX/RockSlideHard3.mp3');\n    this.load.audio('rock_slide_soft1', process.env.PUBLIC_URL + '/assets/audio/SFX/RockSlideSoft1.mp3');\n    this.load.audio('rock_slide_soft2', process.env.PUBLIC_URL + '/assets/audio/SFX/RockSlideSoft2.mp3');\n    this.load.audio('rock_slide_soft3', process.env.PUBLIC_URL + '/assets/audio/SFX/RockSlideSoft3.mp3');\n    this.load.audio('coin', process.env.PUBLIC_URL + '/assets/audio/SFX/CoinSound.mp3');\n    this.load.audio('gem_hit', process.env.PUBLIC_URL + '/assets/audio/SFX/GemHitRock.mp3');\n    this.load.audio('shroom_pick', process.env.PUBLIC_URL + '/assets/audio/SFX/MushroomPickUp.mp3');\n    this.load.audio('gem_pick', process.env.PUBLIC_URL + '/assets/audio/SFX/DiamondPickUp.mp3');\n    this.load.audio('death_by_rock', process.env.PUBLIC_URL + '/assets/audio/SFX/DeathByRock.mp3')\n    this.load.audio('level_complete', process.env.PUBLIC_URL + '/assets/audio/SFX/Level Finish.mp3')\n    this.load.audio('earthquake', process.env.PUBLIC_URL + '/assets/audio/SFX/Earthquake.mp3')\n    // this.load.on(Phaser.Loader.Events.PROGRESS, console.log)\n  }\n\n  navigateToScene(sceneId, props = {}) {\n    this.cameras.main.fade(500, 0, 0, 0)\n    this.tweens.add({  \n      targets: titlesMusic,\n      volume: 0,\n      ease: 'Linear',\n      duration: 500,\n      onComplete: () => {\n        titlesMusic.pause()\n        console.log(sceneId);\n        this.scene.start(sceneId, props)\n      },\n    });\n  }\n\n  create() {\n    this.cameras.main.setPostPipeline(CRTFilter);\n    // this.cameras.main.setBackgroundColor(\"#486859\")\n    this.cameras.main.setBackgroundColor(\"#000\")\n\n    let image = this.add.image(this.cameras.main.width / 2, this.cameras.main.height / 2, 'Cover')\n    // let image = this.add.image(this.cameras.main.width / 2, this.cameras.main.height / 3, 'Cover')\n    let scaleX = this.cameras.main.width / image.width\n    let scaleY = this.cameras.main.height / image.height\n    let scale = Math.min(scaleX, scaleY)\n    image.setOrigin(0.5, 0.5)\n    image.setScale(scale).setScrollFactor(0)\n    // image.setScale(scale * 1.5).setScrollFactor(0)\n    image.name = 'background_art'\n\n    \n\n\n    // off-line version\n    // this.cameras.main.fadeIn(500, 0, 0, 0)\n    // this.events.emit('scene_ready', this.sys.config)\n    // const menu = new UIMenus(this)\n    // menu.showInitialMenu()\n    // titlesMusic = this.sound.add('credits', { loop: true });\n    // return false\n\n    titlesMusic = this.sound.add('credits', { loop: true });\n    window.WebFont.load({\n      custom: {\n          families: [ 'GameGirl', 'Emulogic' ]\n      },\n      active: () => {\n        this.cameras.main.fadeIn(500, 0, 0, 0)\n        this.events.emit('scene_ready', this.sys.config)\n\n        titlesMusic = this.sound.add('credits', { loop: true });\n        // titlesMusic.play()\n        \n        // this.events.once(Phaser.Scenes.Events.WAKE, () => console.log(Phaser.Scenes.Events.WAKE))\n        // this.events.once(Phaser.Scenes.Events.UPDATE, () => console.log(Phaser.Scenes.Events.UPDATE))\n        // this.events.once(Phaser.Scenes.Events.TRANSITION_WAKE, () => console.log(Phaser.Scenes.Events.TRANSITION_WAKE))\n        // this.events.once(Phaser.Scenes.Events.TRANSITION_START, () => console.log(Phaser.Scenes.Events.TRANSITION_START))\n        // this.events.once(Phaser.Scenes.Events.TRANSITION_OUT, () => console.log(Phaser.Scenes.Events.TRANSITION_OUT))\n        // this.events.once(Phaser.Scenes.Events.TRANSITION_INIT, () => console.log(Phaser.Scenes.Events.TRANSITION_INIT))\n        // this.events.once(Phaser.Scenes.Events.TRANSITION_COMPLETE, () => console.log(Phaser.Scenes.Events.TRANSITION_COMPLETE))\n        // this.events.once(Phaser.Scenes.Events.START, () => console.log(Phaser.Scenes.Events.START))\n        // this.events.once(Phaser.Scenes.Events.SLEEP, () => console.log(Phaser.Scenes.Events.SLEEP))\n        // this.events.once(Phaser.Scenes.Events.SHUTDOWN, () => console.log(Phaser.Scenes.Events.SHUTDOWN))\n        // this.events.once(Phaser.Scenes.Events.RESUME, () => console.log(Phaser.Scenes.Events.RESUME))\n        // this.events.once(Phaser.Scenes.Events.RENDER, () => console.log(Phaser.Scenes.Events.RENDER))\n        // this.events.once(Phaser.Scenes.Events.READY, () => console.log(Phaser.Scenes.Events.READY))\n        // this.events.once(Phaser.Scenes.Events.PRE_RENDER, () => console.log(Phaser.Scenes.Events.PRE_RENDER))\n        // this.events.once(Phaser.Scenes.Events.PAUSE, () => console.log(Phaser.Scenes.Events.PAUSE))\n        // this.events.once(Phaser.Scenes.Events.CREATE, () => console.log(Phaser.Scenes.Events.CREATE))\n        // this.events.once(Phaser.Scenes.Events.BOOT, () => console.log(Phaser.Scenes.Events.BOOT))\n\n        // let currentOption = 0\n\n        // const arrow = this.add.graphics({ fillStyle: { color: 0xffffff, alpha: 1 } })\n        // arrow.fillTriangle(0, 0, 5, 5, 0, 10).setPosition(70 * SCALE, 27 * SCALE)\n        // // arrow.setPosition(70 * SCALE, ((12 * newOption) + 2) * SCALE)\n        // arrow.setScale(SCALE)\n        \n        const menu = new UIMenus(this)\n        menu.showInitialMenu()\n        \n\n        // menuOptions.forEach((o, idx) => {\n        //   const txt = this.add.text(80 * SCALE, (14 * idx + 1) * SCALE + 20 * SCALE,\n        //     o.label,\n        //     {\n        //       fontFamily: 'GameGirl',\n        //       // fontSize: \"14px\",\n        //       fill: \"#ffffff\",\n        //     }\n        //   ).setVisible(!o.disabled)\n        //   txt.displayHeight = 10 * SCALE\n        //   txt.setScale(SCALE)\n        //   // txt.displayWidth = idx * 10 * SCALE\n\n        // })\n\n        // this.input.keyboard.on('keydown', event => {\n        //   let newOption = false\n        //   if (event.key === 'ArrowUp') {\n        //     newOption = currentOption > 0 ? currentOption - 1 : menuOptions.length - 1\n        //   }\n        //   if (event.key === 'ArrowDown') {\n        //     newOption = currentOption < menuOptions.length - 1 ? currentOption + 1 : 0\n        //   }\n        //   if(newOption !== false && !menuOptions[newOption].disabled) {\n        //     const INIT_OFFSET = 27 * SCALE\n        //     arrow.setPosition(70 * SCALE, (14 * newOption) * SCALE + INIT_OFFSET)\n        //     currentOption = newOption\n        //   }\n        //   if (event.key === 'Enter') {\n        //     if(!menuOptions[currentOption].disabled) {\n        //       menuOptions[currentOption].onSelect()\n        //     }\n        //   }\n        // })\n      }\n    })\n  }\n}\n","import Phaser from \"phaser\";\nimport UIMenus from \"../components/UIMenus\";\nimport { SCALE } from \"../utils/constants\";\nimport CRTFilter from \"../utils/CRTShaderFX\";\nimport dbManager from \"../utils/dbManager\";\n\nlet titlesMusic;\nexport default class MenuScene extends Phaser.Scene {\n  constructor() {\n    super(\"MenuScene\");\n  }\n\n  preload() {}\n\n  navigateToScene(sceneId, props = {}) {\n    this.cameras.main.fade(500, 0, 0, 0);\n    this.tweens.add({\n      targets: titlesMusic,\n      volume: 0,\n      ease: \"Linear\",\n      duration: 500,\n      onComplete: () => {\n        titlesMusic.pause();\n        this.scene.start(sceneId, props);\n      },\n    });\n  }\n\n  create() {\n    this.cameras.main.setPostPipeline(CRTFilter);\n    this.cameras.main.setBackgroundColor(\"#486859\");\n\n    let image = this.add.image(\n      this.cameras.main.width / 2,\n      // this.cameras.main.width / 2,\n      this.cameras.main.height / 2,\n      // this.cameras.main.height / 3,\n      \"Stage1_bg\"\n    );\n    let scaleX = this.cameras.main.width / image.width;\n    let scaleY = this.cameras.main.height / image.height;\n    let scale = Math.max(scaleX, scaleY);\n    image.setScale(scale * 1.5).setScrollFactor(0);\n    image.name = \"background_art\";\n\n    // //  Enable lights and set a dark ambient color\n    // this.lights.enable().setAmbientColor(0x333333);\n    // image.setPipeline(\"Light2D\");\n    // //  Our spotlight. 100px radius and white in color.\n    // var light = this.lights\n    //   .addLight(180, 80, 200)\n    //   .setColor(0xffffff)\n    //   .setIntensity(2);\n    // //  Track the pointer\n    // this.input.on(\"pointermove\", function (pointer) {\n    //   light.x = pointer.x;\n    //   light.y = pointer.y;\n    // });\n\n    // var flash = this.plugins.get('rexFlash').add(part);\n    // flash.flash()\n\n    // var particles = this.add.particles('spark').setScale(SCALE);\n\n    // var emitter = particles.createEmitter();\n\n    // emitter.setPosition(10*SCALE, 10*SCALE);\n    // emitter.setSpeed(20);\n    // // emitter.setBlendMode(Phaser.BlendModes.ADD);\n\n    // off-line version\n    // this.cameras.main.fadeIn(500, 0, 0, 0);\n    // this.events.emit(\"scene_ready\", this.sys.config);\n    // const mainMenu = new UIMenus(this);\n    // mainMenu.showMainMenu();\n    // titlesMusic = this.sound.add(\"credits\", { loop: true });\n    // return false\n\n    titlesMusic = this.sound.add(\"credits\", { loop: true });\n\n    window.WebFont.load({\n      custom: {\n        families: [\"GameGirl\"],\n      },\n      active: () => {\n        this.cameras.main.fadeIn(500, 0, 0, 0);\n        this.events.emit(\"scene_ready\", this.sys.config);\n\n        titlesMusic = this.sound.add(\"credits\", { loop: true });\n\n        // titlesMusic.play();\n\n        // this.events.once(Phaser.Scenes.Events.WAKE, () => console.log(Phaser.Scenes.Events.WAKE))\n        // this.events.once(Phaser.Scenes.Events.UPDATE, () => console.log(Phaser.Scenes.Events.UPDATE))\n        // this.events.once(Phaser.Scenes.Events.TRANSITION_WAKE, () => console.log(Phaser.Scenes.Events.TRANSITION_WAKE))\n        // this.events.once(Phaser.Scenes.Events.TRANSITION_START, () => console.log(Phaser.Scenes.Events.TRANSITION_START))\n        // this.events.once(Phaser.Scenes.Events.TRANSITION_OUT, () => console.log(Phaser.Scenes.Events.TRANSITION_OUT))\n        // this.events.once(Phaser.Scenes.Events.TRANSITION_INIT, () => console.log(Phaser.Scenes.Events.TRANSITION_INIT))\n        // this.events.once(Phaser.Scenes.Events.TRANSITION_COMPLETE, () => console.log(Phaser.Scenes.Events.TRANSITION_COMPLETE))\n        // this.events.once(Phaser.Scenes.Events.START, () => console.log(Phaser.Scenes.Events.START))\n        // this.events.once(Phaser.Scenes.Events.SLEEP, () => console.log(Phaser.Scenes.Events.SLEEP))\n        // this.events.once(Phaser.Scenes.Events.SHUTDOWN, () => console.log(Phaser.Scenes.Events.SHUTDOWN))\n        // this.events.once(Phaser.Scenes.Events.RESUME, () => console.log(Phaser.Scenes.Events.RESUME))\n        // this.events.once(Phaser.Scenes.Events.RENDER, () => console.log(Phaser.Scenes.Events.RENDER))\n        // this.events.once(Phaser.Scenes.Events.READY, () => console.log(Phaser.Scenes.Events.READY))\n        // this.events.once(Phaser.Scenes.Events.PRE_RENDER, () => console.log(Phaser.Scenes.Events.PRE_RENDER))\n        // this.events.once(Phaser.Scenes.Events.PAUSE, () => console.log(Phaser.Scenes.Events.PAUSE))\n        // this.events.once(Phaser.Scenes.Events.CREATE, () => console.log(Phaser.Scenes.Events.CREATE))\n        // this.events.once(Phaser.Scenes.Events.BOOT, () => console.log(Phaser.Scenes.Events.BOOT))\n\n        this.input.keyboard.off(\"keydown\");\n        this.input.keyboard.on(\"keydown\", (event) => {\n          if (event.key === \"Escape\") {\n            this.navigateToScene(\"LandingScene\");\n          }\n        });\n\n        const mainMenu = new UIMenus(this);\n        mainMenu.showMainMenu();\n      },\n    });\n  }\n}\n","import Phaser from \"phaser\";\nimport UIMenus from \"../components/UIMenus\";\nimport { SCALE } from \"../utils/constants\";\nimport CRTFilter from \"../utils/CRTShaderFX\";\nimport dbManager from \"../utils/dbManager\";\n\nlet titlesMusic;\nexport default class ConfirmNewGameScene extends Phaser.Scene {\n  constructor() {\n    super(\"ConfirmNewGameScene\");\n  }\n\n  preload() {}\n\n  navigateToScene(sceneId, props = {}) {\n    this.cameras.main.fade(500, 0, 0, 0);\n    this.tweens.add({\n      targets: titlesMusic,\n      volume: 0,\n      ease: \"Linear\",\n      duration: 500,\n      onComplete: () => {\n        titlesMusic.pause();\n        this.scene.start(sceneId, props);\n      },\n    });\n  }\n\n  create() {\n    this.cameras.main.setPostPipeline(CRTFilter);\n    this.cameras.main.setBackgroundColor(\"#486859\");\n\n    let image = this.add.image(\n      this.cameras.main.width / 2,\n      this.cameras.main.height / 3,\n      \"Bossfight\"\n    );\n    let scaleX = this.cameras.main.width / image.width;\n    let scaleY = this.cameras.main.height / image.height;\n    let scale = Math.max(scaleX, scaleY);\n    image.setScale(scale * 1.5).setScrollFactor(0);\n    image.name = \"background_art\";\n\n    // //  Enable lights and set a dark ambient color\n    // this.lights.enable().setAmbientColor(0x333333);\n    // image.setPipeline(\"Light2D\");\n    // //  Our spotlight. 100px radius and white in color.\n    // var light = this.lights\n    //   .addLight(180, 80, 200)\n    //   .setColor(0xffffff)\n    //   .setIntensity(2);\n    // //  Track the pointer\n    // this.input.on(\"pointermove\", function (pointer) {\n    //   light.x = pointer.x;\n    //   light.y = pointer.y;\n    // });\n\n    // var flash = this.plugins.get('rexFlash').add(part);\n    // flash.flash()\n\n    // var particles = this.add.particles('spark').setScale(SCALE);\n\n    // var emitter = particles.createEmitter();\n\n    // emitter.setPosition(10*SCALE, 10*SCALE);\n    // emitter.setSpeed(20);\n    // // emitter.setBlendMode(Phaser.BlendModes.ADD);\n\n    // off-line version\n    // this.cameras.main.fadeIn(500, 0, 0, 0);\n    // this.events.emit(\"scene_ready\", this.sys.config);\n    // const mainMenu = new UIMenus(this);\n    // mainMenu.showMainMenu();\n    // titlesMusic = this.sound.add(\"credits\", { loop: true });\n    // return false\n\n    titlesMusic = this.sound.add(\"credits\", { loop: true });\n\n    window.WebFont.load({\n      custom: {\n        families: [\"GameGirl\"],\n      },\n      active: () => {\n        this.cameras.main.fadeIn(500, 0, 0, 0);\n        this.events.emit(\"scene_ready\", this.sys.config);\n\n        titlesMusic = this.sound.add(\"credits\", { loop: true });\n\n        // titlesMusic.play();\n\n        // this.events.once(Phaser.Scenes.Events.WAKE, () => console.log(Phaser.Scenes.Events.WAKE))\n        // this.events.once(Phaser.Scenes.Events.UPDATE, () => console.log(Phaser.Scenes.Events.UPDATE))\n        // this.events.once(Phaser.Scenes.Events.TRANSITION_WAKE, () => console.log(Phaser.Scenes.Events.TRANSITION_WAKE))\n        // this.events.once(Phaser.Scenes.Events.TRANSITION_START, () => console.log(Phaser.Scenes.Events.TRANSITION_START))\n        // this.events.once(Phaser.Scenes.Events.TRANSITION_OUT, () => console.log(Phaser.Scenes.Events.TRANSITION_OUT))\n        // this.events.once(Phaser.Scenes.Events.TRANSITION_INIT, () => console.log(Phaser.Scenes.Events.TRANSITION_INIT))\n        // this.events.once(Phaser.Scenes.Events.TRANSITION_COMPLETE, () => console.log(Phaser.Scenes.Events.TRANSITION_COMPLETE))\n        // this.events.once(Phaser.Scenes.Events.START, () => console.log(Phaser.Scenes.Events.START))\n        // this.events.once(Phaser.Scenes.Events.SLEEP, () => console.log(Phaser.Scenes.Events.SLEEP))\n        // this.events.once(Phaser.Scenes.Events.SHUTDOWN, () => console.log(Phaser.Scenes.Events.SHUTDOWN))\n        // this.events.once(Phaser.Scenes.Events.RESUME, () => console.log(Phaser.Scenes.Events.RESUME))\n        // this.events.once(Phaser.Scenes.Events.RENDER, () => console.log(Phaser.Scenes.Events.RENDER))\n        // this.events.once(Phaser.Scenes.Events.READY, () => console.log(Phaser.Scenes.Events.READY))\n        // this.events.once(Phaser.Scenes.Events.PRE_RENDER, () => console.log(Phaser.Scenes.Events.PRE_RENDER))\n        // this.events.once(Phaser.Scenes.Events.PAUSE, () => console.log(Phaser.Scenes.Events.PAUSE))\n        // this.events.once(Phaser.Scenes.Events.CREATE, () => console.log(Phaser.Scenes.Events.CREATE))\n        // this.events.once(Phaser.Scenes.Events.BOOT, () => console.log(Phaser.Scenes.Events.BOOT))\n\n        this.input.keyboard.off(\"keydown\");\n        this.input.keyboard.on(\"keydown\", (event) => {\n          if (event.key === \"Escape\") {\n            this.navigateToScene(\"LandingScene\");\n          }\n        });\n\n        const mainMenu = new UIMenus(this);\n        mainMenu.showConfirmNewGameMenu();\n        // mainMenu.showMainMenu();\n      },\n    });\n  }\n}\n","import Phaser from \"phaser\";\nconst fragShader = `\n#define SHADER_NAME BLUR_FS\n\nprecision mediump float;\n\n//\"in\" attributes from our vertex shader\nvarying vec2 outTexCoord;\n\n//declare uniforms\nuniform sampler2D uMainSampler;\nuniform float uResolution;\nuniform float radius;\nuniform vec2 dir;\n\nvoid main()\n{\n    //this will be our RGBA sum\n    vec4 sum = vec4(0.0);\n\n    //our original texcoord for this fragment\n    vec2 tc = outTexCoord;\n\n    //the amount to blur, i.e. how far off center to sample from\n    //1.0 -> blur by one pixel\n    //2.0 -> blur by two pixels, etc.\n    float blur = radius/uResolution;\n\n    //the direction of our blur\n    //(1.0, 0.0) -> x-axis blur\n    //(0.0, 1.0) -> y-axis blur\n    float hstep = dir.x;\n    float vstep = dir.y;\n\n    //apply blurring, using a 9-tap filter with predefined gaussian weights\",\n\n    sum += texture2D(uMainSampler, vec2(tc.x - 4.0*blur*hstep, tc.y - 4.0*blur*vstep)) * 0.0162162162;\n    sum += texture2D(uMainSampler, vec2(tc.x - 3.0*blur*hstep, tc.y - 3.0*blur*vstep)) * 0.0540540541;\n    sum += texture2D(uMainSampler, vec2(tc.x - 2.0*blur*hstep, tc.y - 2.0*blur*vstep)) * 0.1216216216;\n    sum += texture2D(uMainSampler, vec2(tc.x - 1.0*blur*hstep, tc.y - 1.0*blur*vstep)) * 0.1945945946;\n\n    sum += texture2D(uMainSampler, vec2(tc.x, tc.y)) * 0.2270270270;\n\n    sum += texture2D(uMainSampler, vec2(tc.x + 1.0*blur*hstep, tc.y + 1.0*blur*vstep)) * 0.1945945946;\n    sum += texture2D(uMainSampler, vec2(tc.x + 2.0*blur*hstep, tc.y + 2.0*blur*vstep)) * 0.1216216216;\n    sum += texture2D(uMainSampler, vec2(tc.x + 3.0*blur*hstep, tc.y + 3.0*blur*vstep)) * 0.0540540541;\n    sum += texture2D(uMainSampler, vec2(tc.x + 4.0*blur*hstep, tc.y + 4.0*blur*vstep)) * 0.0162162162;\n\n    //discard alpha for our simple demo,return\n    gl_FragColor =  vec4(sum.rgb, 1.0);\n}\n`;\n\nconst fragCRTShader = `\n  #ifdef GL_ES\n      precision highp float;\n  #endif\n\n  #define PI 3.1415926538\n\n  // Samplers\n  varying vec2 outTexCoord;\n  uniform sampler2D uMainSampler;\n\n  // Parameters\n  uniform vec2 curvature;\n  uniform vec2 screenResolution;\n  uniform vec2 scanLineOpacity;\n  uniform float vignetteOpacity;\n  uniform float brightness;\n  uniform float vignetteRoundness;\n\n\n  vec2 curveRemapUV(vec2 uv)\n  {\n      // as we near the edge of our screen apply greater distortion using a sinusoid.\n\n      uv = uv * 2.0 - 1.0;\n  vec2 offset = abs(uv.yx) / vec2(curvature.x, curvature.y);\n  uv = uv + uv * offset * offset;\n  uv = uv * 0.5 + 0.5;\n      return uv;\n  }\n\n  vec4 scanLineIntensity(float uv, float resolution, float opacity)\n  {\n      float intensity = sin(uv * resolution * PI * 2.0);\n      intensity = ((0.5 * intensity) + 0.5) * 0.9 + 0.1;\n      return vec4(vec3(pow(intensity, opacity)), 1.0);\n  }\n\n  vec4 vignetteIntensity(vec2 uv, vec2 resolution, float opacity, float roundness)\n  {\n      float intensity = uv.x * uv.y * (1.0 - uv.x) * (1.0 - uv.y);\n      return vec4(vec3(clamp(pow((resolution.x / roundness) * intensity, opacity), 0.0, 1.0)), 1.0);\n  }\n\n  void main(void) \n  {\n      vec2 remappedUV = curveRemapUV(vec2(outTexCoord.x, outTexCoord.y));\n      vec4 baseColor = texture2D(uMainSampler, remappedUV);\n\n      baseColor *= vignetteIntensity(remappedUV, screenResolution, vignetteOpacity, vignetteRoundness);\n\n      baseColor *= scanLineIntensity(remappedUV.x, screenResolution.y, scanLineOpacity.x);\n      baseColor *= scanLineIntensity(remappedUV.y, screenResolution.x, scanLineOpacity.y);\n\n      baseColor *= vec4(vec3(brightness), 1.0);\n\n      if (remappedUV.x < 0.0 || remappedUV.y < 0.0 || remappedUV.x > 1.0 || remappedUV.y > 1.0){\n          gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n      } else {\n          gl_FragColor = baseColor;\n      }\n  }\n`;\n\nexport default class BlurPostFX extends Phaser.Renderer.WebGL.Pipelines.PostFXPipeline\n{\n    constructor (game)\n    {\n        // super({game})\n        super({\n            game,\n            renderTarget: true,\n            fragShader: fragCRTShader,\n            // uniforms: [\n            //     'uProjectionMatrix',\n            //     'uMainSampler',\n            //     'uResolution',\n            //     'radius',\n            //     'dir'\n            // ]\n            uniforms: [\n                // 'uProjectionMatrix',\n                'uMainSampler',\n                'curvature',\n                'screenResolution',\n                'scanLineOpacity',\n                'vignetteOpacity',\n                'brightness',\n                'vignetteRoundness',\n            ]\n        });\n        this.set2f(\"curvature\", 6.0, 100.0);\n        // this.set2f(\"curvature\", 6.0, 6.0);\n        // this.set2f(\"screenResolution\", 320, 240);\n        this.set2f(\"screenResolution\", 640, 480);\n        this.set2f(\"scanLineOpacity\", 0.5, 0.5);\n        this.set1f(\"vignetteOpacity\", 0.5);\n        this.set1f(\"vignetteRoundness\", 1.0)\n        this.set1f(\"brightness\", 1.5);\n    }\n\n    onPreRender () \n    {\n        // const r = Math.abs(2 * Math.sin(this.game.loop.time * 10))\n        // this.set1f('uResolution', this.renderer.width);\n        // this.set1f('radius', r);\n        // this.set2f('dir', 1.0, 1.0);\n\n    }\n}","import Phaser from \"phaser\";\nimport { SCALE, TILES_BY_SCREEN, TILE_SIZE } from \"../utils/constants\";\nimport CRTFilter from \"../utils/CRTShaderFX\";\nimport UI from \"../components/UI\";\nimport { translate } from \"../utils/localization\";\nimport Level1 from \"../components/levels/level_1\";\nimport dbManager from \"../utils/dbManager\";\n\nexport default class IntroScene extends Phaser.Scene {\n  constructor() {\n    super(\"IntroScene\");\n\n    // intro images\n    this.images = {\n      tiamat: null,\n      sky: null,\n      clouds: null,\n      storm: null,\n      ground: null,\n      ground_high: null,\n      ground_break: null,\n      comet: null,\n      people_climbing: null,\n      people_paying: null,\n      people_paying_high: null,\n      people_descending: null,\n      people_falling: null,\n      people_jumping: null,\n    };\n    this.texts = {\n      line1: null,\n      line2: null,\n      line3: null,\n      level_title: null,\n    };\n    this.sounds = {\n      background_music: null,\n      dramatic_music: null,\n      earthquake: null,\n    };\n  }\n\n  preload() {\n    dbManager.reset()\n  }\n\n  createAnimations() {\n    this.anims.create({\n      key: \"closeUp_Mary\",\n      frames: this.anims.generateFrameNumbers(\"closeUp\", { frames: [0] }),\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"closeUp_Marduk\",\n      frames: this.anims.generateFrameNumbers(\"closeUp\", { frames: [1] }),\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"closeUp_Dwarf\",\n      frames: this.anims.generateFrameNumbers(\"closeUp\", { frames: [2] }),\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"closeUp_Tiamat\",\n      frames: this.anims.generateFrameNumbers(\"closeUp\", { frames: [5] }),\n      repeat: 0,\n    });\n    // this.anims.create({\n    //   key: 'closeUp_Pickaxe',\n    //   frames:this.anims.generateFrameNumbers('closeUpItems', { frames: [ 6 ] }),\n    //   repeat: 0,\n    // })\n    // this.anims.create({\n    //   key: 'closeUp_Mushroom',\n    //   frames:this.anims.generateFrameNumbers('closeUpItems', { frames: [ 7 ] }),\n    //   repeat: 0,\n    // })\n  }\n  createSounds() {\n    this.sounds.background_music = this.sound.add(\"opening_peace\", {\n      loop: true,\n    });\n    this.sounds.dramatic_music = this.sound.add(\"opening_quakes\", {\n      loop: true,\n    });\n    this.sounds.earthquake = this.sound.add(\"earthquake\");\n  }\n  createTextPlaceholders() {\n    this.texts.line1 = this.createTextLine(-4);\n    this.texts.line2 = this.createTextLine(-3);\n    this.texts.line3 = this.createTextLine(-2);\n\n    this.texts.level_title = this.createTextLine(0);\n    this.texts.level_title.setPosition(this.cameras.main.width / 2, this.cameras.main.height / 2)\n    this.texts.level_title._shadow.setPosition(this.cameras.main.width / 2, this.cameras.main.height / 2)\n    this.texts.level_title.setOrigin(0.5, 0.5)\n    this.texts.level_title._shadow.setOrigin(0.5, 0.5)\n    this.texts.level_title.alpha = 0\n    this.texts.level_title._shadow.alpha = 0\n    this.texts.level_title.setText(translate('stage_1.title'))\n  }\n  createTextLine(lineNumber) {\n    const LINE_HEIGHT = 10 * SCALE;\n    const LINE_REF = lineNumber < 0 ? this.cameras.main.height : 0;\n    const LINE_REF_FACTOR = lineNumber < 0 ? -1 : 1;\n    const XPOS = 2 * SCALE;\n    const YPOS =\n      LINE_REF + Math.abs(LINE_HEIGHT * lineNumber) * LINE_REF_FACTOR;\n    const lineShadow = this.add\n      .text(80, 10, \"\", {\n        fontFamily: \"GameGirl\",\n        fontSize: \"10px\",\n        fill: \"#ffffff\",\n      })\n      .setScale(SCALE)\n      .setPosition(XPOS, YPOS);\n\n    lineShadow.displayHeight = LINE_HEIGHT;\n    const line = this.add\n      .text(lineShadow.x + 5, lineShadow.y - 5, \"\", lineShadow.style)\n      .setScale(SCALE);\n    line.displayHeight = lineShadow.displayHeight\n    lineShadow.setTint(0x333333);\n\n    // line.setData('shadow', lineShadow)\n    line._setText = line.setText;\n    line._shadow = lineShadow;\n    line.setText = (txt) => {\n      line._shadow.setText(txt);\n      line._setText(txt);\n    };\n\n    return line;\n  }\n  createImages() {\n    this.images.sky = this.createFullscreenImage(\"IntroSky\");\n    this.images.clouds = this.createFullscreenImage(\"IntroClouds\");\n    this.images.tiamat = this.createFullscreenImage(\"IntroTiamat\");\n    this.images.ground = this.createFullscreenImage(\"IntroGround\");\n    this.images.comet = this.createFullscreenImage(\"IntroComet\");\n    this.images.storm = this.createFullscreenImage(\"IntroStorm\");\n    this.images.ground_high = this.createFullscreenImage(\"IntroGroundHigh\");\n    this.images.ground_break = this.createFullscreenImage(\"IntroGroundBreak\");\n    this.images.people_climbing = this.createFullscreenImage(\n      \"IntroPeopleClimbing\"\n    );\n    this.images.people_falling =\n      this.createFullscreenImage(\"IntroPeopleFalling\");\n    this.images.people_paying =\n      this.createFullscreenImage(\"IntroPeoplePraying\");\n    this.images.people_paying_high = this.createFullscreenImage(\n      \"IntroPeoplePrayingHigh\"\n    );\n    this.images.people_descending = this.createFullscreenImage(\n      \"IntroPeopleDescending\"\n    );\n    this.images.people_jumping =\n      this.createFullscreenImage(\"IntroPeopleJumping\");\n  }\n  createFullscreenImage(name) {\n    let image = this.add.image(\n      this.cameras.main.width / 2,\n      this.cameras.main.height / 2,\n      name\n    );\n    image.setScale(SCALE).setScrollFactor(0);\n    image.alpha = 0;\n    return image;\n  }\n\n  async animEnterTiamat(duration) {\n    return new Promise((res) => {\n      this.tweens.add({\n        targets: this.images.tiamat,\n        alpha: 1,\n        // scale: scale,\n        duration,\n        ease: \"Linear\",\n        onComplete: res,\n      });\n    });\n  }\n  async animExitTiamat(duration) {\n    return new Promise((res) => {\n      this.tweens.add({\n        targets: this.images.tiamat,\n        alpha: 0,\n        duration,\n        ease: \"Linear\",\n        onComplete: res,\n      });\n    });\n  }\n  async animEnterWorld() {\n    return new Promise((res) => {\n      this.tweens.add({\n        targets: this.images.sky,\n        // scale: scale,\n        alpha: 1,\n        duration: 2500,\n        ease: \"Linear\",\n        // onComplete: res\n      });\n      this.tweens.add({\n        targets: this.images.clouds,\n        // scale: scale,\n        alpha: 1,\n        delay: 3000,\n        duration: 2500,\n        ease: \"Linear\",\n        // onComplete: res\n      });\n      this.tweens.add({\n        targets: this.images.comet,\n        // scale: scale,\n        alpha: 1,\n        delay: 6000,\n        duration: 2500,\n        ease: \"Linear\",\n        // onComplete: res\n      });\n      this.tweens.add({\n        targets: this.images.ground,\n        // scale: scale,\n        alpha: 1,\n        delay: 9000,\n        duration: 2500,\n        ease: \"Linear\",\n        onComplete: res,\n      });\n    });\n  }\n  async animEnterPeople() {\n    const DELAY_TO_START = 3000;\n    return new Promise((res) => {\n      this.tweens.add({\n        targets: this.images.people_climbing,\n        delay: DELAY_TO_START,\n        alpha: 1,\n        duration: 1000,\n        yoyo: true,\n        hold: 1000,\n        ease: \"Linear\",\n        // onComplete: res\n      });\n      this.tweens.add({\n        targets: this.images.people_paying,\n        // scale: scale,\n        alpha: 1,\n        delay: DELAY_TO_START + 2000,\n        duration: 1000,\n        ease: \"Linear\",\n        onComplete: res,\n      });\n    });\n  }\n  async animGroundTransition() {\n    return new Promise((res) => {\n      this.tweens.add({\n        targets: [this.images.people_paying, this.images.ground],\n        alpha: 0,\n        duration: 1000,\n        ease: \"Linear\",\n      });\n      this.tweens.add({\n        targets: [this.images.people_paying_high, this.images.ground_high],\n        alpha: 1,\n        // delay: 1000,\n        duration: 1000,\n        ease: \"Linear\",\n      });\n      // anim people\n      this.tweens.add({\n        targets: [this.images.people_paying_high],\n        alpha: 0,\n        delay: 2000,\n        duration: 1000,\n        ease: \"Linear\",\n      });\n      this.tweens.add({\n        targets: [this.images.people_descending],\n        alpha: 1,\n        delay: 2000,\n        duration: 1000,\n        ease: \"Linear\",\n        completeDelay: 2000,\n        onComplete: res,\n      });\n    });\n  }\n  async animPage(duration) {\n    return new Promise((res) => {\n      this.texts.line1.alpha =\n        this.texts.line2.alpha =\n        this.texts.line3.alpha =\n          0;\n\n      this.tweens.add({\n        targets: [\n          this.texts.line1,\n          this.texts.line1._shadow,\n          this.texts.line2,\n          this.texts.line2._shadow,\n          this.texts.line3,\n          this.texts.line3._shadow,\n        ],\n        alpha: 1,\n        duration: 1000,\n        completeDelay: duration, // delay before onComplete\n        onComplete: () => {\n          this.tweens.add({\n            targets: [\n              this.texts.line1,\n              this.texts.line1._shadow,\n              this.texts.line2,\n              this.texts.line2._shadow,\n              this.texts.line3,\n              this.texts.line3._shadow,\n            ],\n            alpha: 0,\n            duration: 1000,\n            onComplete: res,\n          });\n        },\n      });\n    });\n  }\n  async animPage1(duration) {\n    this.texts.line1.setText(translate(\"intro.story_page_1.line_1\"));\n    this.texts.line2.setText(translate(\"intro.story_page_1.line_2\"));\n\n    return this.animPage(duration);\n  }\n  async animPage2(duration) {\n    this.texts.line1.setText(translate(\"intro.story_page_2.line_1\"));\n    this.texts.line2.setText(translate(\"intro.story_page_2.line_2\"));\n    this.texts.line3.setText(translate(\"intro.story_page_2.line_3\"));\n\n    return this.animPage(duration);\n  }\n  async animPage3(duration) {\n    this.texts.line1.setText(translate(\"intro.story_page_3.line_1\"));\n    this.texts.line2.setText(translate(\"intro.story_page_3.line_2\"));\n    this.texts.line3.setText(translate(\"intro.story_page_3.line_3\"));\n\n    return this.animPage(duration);\n  }\n  async animPage4(duration) {\n    // this.texts.line1.setPosition(0, 0)\n    this.texts.line1.setText(translate(\"intro.story_page_4.line_1\"));\n    this.texts.line2.setText(translate(\"intro.story_page_4.line_2\"));\n    this.texts.line3.setText(\"\");\n    return this.animPage(duration);\n  }\n  async animPage5(duration) {\n    this.texts.line1.setText(translate(\"intro.story_page_5.line_1\"));\n    this.texts.line2.setText(translate(\"intro.story_page_5.line_2\"));\n    this.texts.line3.setText(\"\");\n    return this.animPage(duration);\n  }\n  async animEarthquake() {\n    this.cameras.main.shake(2000, 0.005);\n    this.sounds.earthquake.play();\n  }\n  async animStormEnter() {\n    return new Promise((res) => {\n      this.tweens.add({\n        targets: [this.images.storm],\n        alpha: 1,\n        // delay: 2000,\n        duration: 2000,\n        ease: \"Linear\",\n        completeDelay: 2000,\n        onComplete: () => {\n          // hide underlay elements so later we can anim storm fade out to black\n          this.images.clouds.alpha = 0\n          this.images.comet.alpha = 0\n          this.images.ground.alpha = 0\n          this.images.sky.alpha = 0\n          res()\n        },\n      });\n    });\n  }\n  async animEnterFalling() {\n    return new Promise((res) => {\n      this.tweens.add({\n        targets: [this.images.ground_high, this.images.people_descending],\n        alpha: 0,\n        delay: 1000,\n        duration: 1000,\n        ease: \"Linear\",\n      });\n      this.tweens.add({\n        targets: [this.images.ground_break, this.images.people_falling],\n        alpha: 1,\n        delay: 1000,\n        duration: 1000,\n        ease: \"Linear\",\n        completeDelay: 2000,\n        onComplete: res,\n      });\n    });\n  }\n\n  async animEnterJumping() {\n    return new Promise((res) => {\n      this.tweens.add({\n        targets: [this.images.people_falling],\n        alpha: 0,\n        delay: 1000,\n        duration: 1000,\n        ease: \"Linear\",\n      });\n      this.tweens.add({\n        targets: [this.images.people_jumping],\n        alpha: 1,\n        delay: 1000,\n        duration: 1000,\n        ease: \"Linear\",\n        completeDelay: 5000,\n        onComplete: res,\n      });\n    });\n  }\n  async animLevelTitle() {\n    return new Promise((res) => {\n      this.tweens.add({\n        targets: [\n          this.images.people_jumping,\n          this.images.ground_break,\n          this.images.storm,\n        ],\n        alpha: 0,\n        delay: 1000,\n        duration: 1000,\n        ease: \"Linear\",\n      });\n      this.tweens.add({\n        targets: [this.texts.level_title, this.texts.level_title._shoadow],\n        alpha: 1,\n        delay: 1000,\n        duration: 1000,\n        ease: \"Linear\",\n        completeDelay: 5000,\n        onComplete: res,\n      });\n    });\n  }\n  playMusic() {\n    this.sounds.background_music.play();\n  }\n  playDramaticMusic() {\n    this.tweens.add({\n      targets: this.sounds.background_music,\n      volume: 0,\n      duration: 500,\n      completeDelay: 1000, // delay before onComplete\n      onComplete: () => {\n        this.sounds.background_music.stop();\n        this.sounds.dramatic_music.play();\n        // this.showThirdDialogs()\n      },\n    });\n  }\n  exitMusic() {\n    this.tweens.add({\n      targets: this.sounds.dramatic_music,\n      volume: 0,\n      duration: 1500,\n      onComplete: () => {\n        this.sounds.dramatic_music.stop();\n      },\n    });\n  }\n  async create() {\n    this.cameras.main.setPostPipeline(CRTFilter);\n    new UI(this, true);\n\n    this.createAnimations();\n    this.createSounds();\n    this.createImages();\n    this.createTextPlaceholders();\n\n    // animations\n\n    this.playMusic();\n    this.animEnterTiamat(5000);\n    await this.animPage1(8000)\n\n    this.animEnterWorld();\n    await this.animPage2(8000)\n    this.animEnterPeople();\n    await this.animPage3(8000)\n\n    await this.showFirstDialogs()\n\n    await this.animExitTiamat(5000);\n    await this.animGroundTransition();\n    await this.showSecondDialogs();\n\n    this.playDramaticMusic();\n    await this.animStormEnter();\n\n    this.animEarthquake();\n    this.animEnterFalling();\n    await this.animPage4(4000);\n\n    this.animPage5(6000);\n    await this.animEnterJumping();\n\n    this.exitMusic();\n    await this.animLevelTitle();\n\n    this.cameras.main.fade(1000, 0, 0, 0);\n    this.cameras.main.once(\n      \"camerafadeoutcomplete\",\n      () => this.scene.start(\"GameScene\", { levelName: Level1.name })\n    );\n  }\n\n  showFirstDialogs() {\n    this.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Mary\", \"closeUp_Tiamat\", \"closeUp_Marduk\"],\n      participantNames: ['Mary', 'Tiamat', 'Marduk'],\n      conversation: [\n        {\n          who: \"closeUp_Tiamat\",\n          text: [translate(\"intro.dialog_1.tiamat_say_1\")],\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"intro.dialog_1.mary_say_1\")],\n        },\n        {\n          who: \"closeUp_Tiamat\",\n          text: [translate(\"intro.dialog_1.tiamat_say_2\")],\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"intro.dialog_1.mary_say_2\")],\n        },\n        {\n          who: \"closeUp_Tiamat\",\n          text: [translate(\"intro.dialog_1.tiamat_say_3\")],\n        },\n        {\n          who: \"closeUp_Marduk\",\n          text: [translate(\"intro.dialog_1.marduk_say_1\")],\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"intro.dialog_1.mary_say_3\")],\n        },\n        {\n          who: \"closeUp_Tiamat\",\n          text: [translate(\"intro.dialog_1.tiamat_say_4\")],\n        },\n        {\n          who: \"closeUp_Tiamat\",\n          text: [translate(\"intro.dialog_1.tiamat_say_5\")],\n        },\n        {\n          who: \"closeUp_Tiamat\",\n          text: [translate(\"intro.dialog_1.tiamat_say_6\")],\n        },\n      ],\n    });\n\n    // hack to get control after dialogue close\n    return new Promise((res) => {\n      this.levels = {\n        current: {\n          pause: () => false,\n          resume: () => {\n            setTimeout(res, 1000);\n          },\n        },\n      };\n    });\n  }\n\n  showSecondDialogs() {\n    this.events.emit(\"dialogue:show\", {\n      participants: [\"closeUp_Mary\", \"closeUp_Marduk\"],\n      participantNames: ['Mary', 'Marduk'],\n      conversation: [\n        {\n          who: \"closeUp_Marduk\",\n          text: [translate(\"intro.dialog_2.marduk_say_1\")],\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"intro.dialog_2.mary_say_1\")],\n        },\n        {\n          who: \"closeUp_Marduk\",\n          text: [translate(\"intro.dialog_2.marduk_say_2\")],\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"intro.dialog_2.mary_say_2\")],\n        },\n        {\n          who: \"closeUp_Marduk\",\n          text: [translate(\"intro.dialog_2.marduk_say_3\")],\n        },\n        {\n          who: \"closeUp_Mary\",\n          text: [translate(\"intro.dialog_2.mary_say_3\")],\n        },\n        {\n          who: \"closeUp_Marduk\",\n          text: [translate(\"intro.dialog_2.marduk_say_4\")],\n        },\n      ],\n    });\n    // hack to get control after dialogue close\n    return new Promise((res) => {\n      this.levels = {\n        current: {\n          pause: () => false,\n          resume: () => {\n            setTimeout(res, 1000);\n          },\n        },\n      };\n    });\n  }\n\n  showThirdDialogs() {\n    // hack to get control after dialogue close\n    this.levels = {\n      current: {\n        pause: () => false,\n        resume: () => {\n          this.tweens.add({\n            targets: this.quakesMusic,\n            volume: 0,\n            duration: 500,\n            completeDelay: 500,\n            onComplete: () => {\n              this.scene.start(\"GameScene\", { level: 1 });\n            },\n          });\n        },\n      },\n    };\n\n    this.events.emit(\"dialogue:show\", {\n      participants: [],\n      conversation: [\n        {\n          who: \"\",\n          text: [\"- A fissure opens up\", \"beneath Marduk and he\", \"falls into\"],\n        },\n        {\n          who: \"\",\n          text: [\"- Mary rolls her eyes\", \"and jumps in after\"],\n        },\n      ],\n    });\n  }\n  animateIntro() {\n    this.cameras.main.pan(\n      this.renderer.width,\n      this.renderer.height / 2,\n      2000,\n      \"Sine.easeInOut\"\n    );\n    this.cameras.main.once(Phaser.Cameras.Scene2D.Events.PAN_COMPLETE, () => {\n      this.cameras.main.shake(2000, 0.02);\n      this.tweens.add({\n        targets: this.children.getByName(\"dark\"),\n        y: -this.renderer.height * 0.3,\n        duration: 2000,\n      });\n      this.tweens.add({\n        targets: this.children.getByName(\"partner\"),\n        y: this.renderer.height,\n        delay: 2000,\n        duration: 2000,\n        ease: \"Sine.in\",\n      });\n      this.tweens.add({\n        targets: this.children.getByName(\"player\"),\n        y: this.renderer.height,\n        x: {\n          value: this.children.getByName(\"player\").x + 150,\n          duration: 1000,\n          ease: \"Cubic.easeOut\",\n        },\n        delay: 4000,\n        duration: 2000,\n        ease: \"Back.easeInOut\",\n        onComplete: () => {\n          this.cameras.main.fade(1000, 0, 0, 0);\n          this.cameras.main.once(\n            \"camerafadeoutcomplete\",\n            () => void this.scene.start(\"GameScene\", { level: 1 })\n          );\n        },\n      });\n    });\n  }\n}\n","import Phaser from \"phaser\";\nimport dbManager from \"./dbManager\";\n\nexport const textureToMapConfig = (textures, id) => {\n  const texture = textures.get(id);\n  const image = texture.getSourceImage();\n  const levelConfig = Array(image.height)\n    .fill(\"000000\")\n    .map(() => Array(image.width).fill(\"000000\"));\n  for (let j = 0; j < image.width; j++) {\n    for (let i = 0; i < image.height; i++) {\n      const pixColor = textures.getPixel(j, i, id);\n      const key = `${Phaser.Display.Color.ComponentToHex(\n        pixColor.r\n      )}${Phaser.Display.Color.ComponentToHex(\n        pixColor.g\n      )}${Phaser.Display.Color.ComponentToHex(pixColor.b)}`;\n      levelConfig[i][j] = key;\n    }\n  }\n  return levelConfig;\n};\n\nconst _ = (n) =>\n  n.toLocaleString(\"en-US\", {\n    minimumIntegerDigits: 2,\n  });\n\nexport const formatScore = (value, total) =>\n  typeof total == 'number' ? `${_(value)}/${_(total)}` : \"__/__\";\n\nexport const formatComp = (value) => {\n  const perc = (value * 100).toLocaleString(\"en-US\", {\n    minimumFractionDigits: 0,\n    maximumFractionDigits: 0,\n  });\n  return value\n    ? ` ${perc <= 9 ? \"  \" : perc <= 99 ? \" \" : \"\"}${perc}%`\n    : \"   0%\";\n};\n\nexport const drawGemsScore = (lKey) => {\n  const levelData = dbManager.get(lKey);\n  return formatScore(levelData?.collectedDiamonds, levelData?.countDiamonds);\n};\nexport const drawThreatsScore = (lKey) => {\n  const levelData = dbManager.get(lKey);\n  return formatScore(levelData?.killedEnemies, levelData?.countEnemies);\n};\nexport const drawShroomsScore = (lKey) => {\n  const levelData = dbManager.get(lKey);\n  return formatScore(levelData?.collectedShrooms, levelData?.countShrooms);\n};\nexport const drawCompScore = (lKey) => {\n  const levelData = dbManager.get(lKey);\n  return formatComp(levelData?.comp);\n};\n","import Destroyable from \"./Destroyable\"\n\nexport default class Deco extends Destroyable {\n  \n}","import { BG_PIXEL_TO_TILEMAP_POSITION, PIXEL_NAME, PIXEL_TO_TILEMAP_POSITION } from '../utils/constants'\nimport LevelTest from './levels/level_test'\nimport Level1 from './levels/level_1'\nimport Level2 from './levels/level_2'\nimport Level3 from './levels/level_3'\nimport Level4 from './levels/level_4'\nimport Level5 from './levels/level_5'\nimport Level6 from './levels/level_6'\nimport Level7 from './levels/level_7'\nimport Level8 from './levels/level_8'\nimport Level9 from './levels/level_9'\nimport Level10 from './levels/level_10'\nimport Level11 from './levels/level_11'\nimport Maze1 from './levels/Maze_1'\nimport LevelFinale from './levels/level_finale'\nimport mazegenerator from 'generate-maze'\nimport { textureToMapConfig } from '../utils/helpers'\nimport Deco from './objects/Deco'\n\nexport const LEVELS = [\n  '',\n  LevelTest,\n  Level1,\n  'cinematic_1',\n  Maze1,\n  Level2,\n  Level3,\n  Level4,\n  Level5,\n  'cinematic_escape',\n  Level6,\n  Level7,\n  Level8,\n  Level9,\n  Level10,\n  Level11,\n  LevelFinale,\n  'cinematic_last',\n]\n\nexport const getNextLevel = levelKey => {\n  let currentIndex = LEVELS.findIndex(l => l.key === levelKey)\n  let nextLevel\n  do {\n    currentIndex++\n    nextLevel = LEVELS[currentIndex]\n  } while(typeof nextLevel === 'string' || currentIndex > LEVELS.length)\n\n  return nextLevel.key\n}\n\nexport default class LevelManager {\n  constructor(scene, currentLevelName = '') {\n    this.currentName = currentLevelName\n    this.currentIndex = LEVELS.findIndex(l => l.id === this.currentName)\n    this.scene = scene\n    this.start()\n  }\n  \n  start() {\n    console.log('STARTS', this);\n    const Level = LEVELS.find(l => l.key === this.currentName)\n    this.current = new Level()\n    const [mapConfig, bgConfig] = this.generateConfig()\n    this.current.config = mapConfig\n    this.current.bgConfig = bgConfig\n    this.map = this.createMap()\n    this.createBackground()\n    this.current.connectToScene(this.scene)\n    this.current.pause()\n    this.scene.cameras.main.once('camerafadeincomplete', () => {\n      this.current.resume()\n      this.scene.events.emit('levelstart')\n    })\n  }\n  restart() {\n    this.scene.cameras.main.fade(500, 0, 0, 0)\n    this.scene.cameras.main.once('camerafadeoutcomplete', () => {\n      this.scene.events.off('player_moves')\n      this.current.destroy()\n      this.scene.children.list.forEach(ch => {\n        ch.destroy()\n      })\n      this.scene.rules.destroy()\n      this.scene.ui.destroy()\n      this.scene.scene.restart({ levelName: this.currentName })\n      \n    })\n  }\n\n  next() {\n    // destroy and unload\n    this.currentIndex += 1\n    if(typeof LEVELS[this.currentIndex] === 'string' && LEVELS[this.currentIndex].includes('cinematic')) {\n      this.scene.scene.start('ConnectorScene', { id: this.currentIndex, name: LEVELS[this.currentIndex]})\n    } else if (LEVELS[this.currentIndex]) {\n      this.start()\n    } else {\n      this.scene.scene.start('MenuScene')\n    }\n\n  }\n\n  generateConfig() {\n    const scene = this.scene\n    const levelId = this.current.constructor.name\n    \n    let levelConfig\n    let bgConfig\n    if(this.current.isMaze) {\n      // Generate a maze\n      // Width == 8, height == 4, maze edges are closed, using random seed \n      const MAZE_WIDTH = 40\n      const MAZE_HEIGHT = 10\n      const STARTING_ROW = 3 // move 3 blocks down to avoid hud overlap\n      levelConfig = Array(2*MAZE_HEIGHT + STARTING_ROW +1 ).fill('000000').map(r => Array(2*MAZE_WIDTH+1).fill('000000'))\n      const maze = mazegenerator(MAZE_WIDTH, MAZE_HEIGHT, true)\n      maze.forEach(row => {\n        row.forEach(cell => {\n          const j = 2 * cell.x + 1\n          const i = 2 * cell.y + 1 + STARTING_ROW\n          // top\n          levelConfig[i-1][j] = cell.top ? PIXEL_NAME.WALL : PIXEL_NAME.EMPTY\n          if(cell.top) {\n            levelConfig[i-1][j+1] = PIXEL_NAME.WALL\n            levelConfig[i-1][j-1] = PIXEL_NAME.WALL\n          }\n          // right\n          levelConfig[i][j+1] = cell.right ? PIXEL_NAME.WALL : PIXEL_NAME.EMPTY\n          if(cell.right) {\n            levelConfig[i+1][j+1] = PIXEL_NAME.WALL\n            levelConfig[i-1][j+1] = PIXEL_NAME.WALL\n          }\n          // bottom\n          levelConfig[i+1][j] = cell.bottom ? PIXEL_NAME.WALL : PIXEL_NAME.EMPTY\n          if(cell.bottom) {\n            levelConfig[i+1][j+1] = PIXEL_NAME.WALL\n            levelConfig[i+1][j-1] = PIXEL_NAME.WALL\n          }\n          // left\n          levelConfig[i][j-1] = cell.left ? PIXEL_NAME.WALL : PIXEL_NAME.EMPTY\n          if(cell.left) {\n            levelConfig[i+1][j-1] = PIXEL_NAME.WALL\n            levelConfig[i-1][j-1] = PIXEL_NAME.WALL\n          }\n          // center\n          levelConfig[i][j] = PIXEL_NAME.EMPTY\n        })\n      })\n      levelConfig[STARTING_ROW][1] = PIXEL_NAME.PLAYER\n      // levelConfig[STARTING_ROW-1][levelConfig[0].length - 2] = PIXEL_NAME.PLAYER\n      levelConfig[STARTING_ROW+1][1] = PIXEL_NAME.BRO\n      levelConfig[STARTING_ROW+3][1] = PIXEL_NAME.DWARF\n\n      // try to set an exit\n      const rowIdx = levelConfig.findIndex((r) => {\n          // ignores 3 top spaces saved for HUD\n          const lastColTile = r.slice(-1).pop()\n          \n          const isNotTopBufferSpace = lastColTile !== PIXEL_NAME.EMPTY\n          // gets last 2 position skiping last one (column) that is always a wall\n          const lastThreeBeforLastTile = r.slice(-4, -1)\n          // const tileIsEmpty = lastThreeBeforLastTile[2] === PIXEL_NAME.EMPTY\n          // const emptyPrecededByEmpty = tileIsEmpty && lastThreeBeforLastTile[0] === PIXEL_NAME.EMPTY\n          const threeEmptyInARow = lastThreeBeforLastTile.every(t => t === PIXEL_NAME.EMPTY)\n          // finds first row with 2 consecutive empty spaces into the maze\n          return isNotTopBufferSpace && threeEmptyInARow\n        })\n      \n      levelConfig[rowIdx][levelConfig[0].length - 1] = PIXEL_NAME.EXIT\n    } else {\n      levelConfig = textureToMapConfig(scene.textures, levelId)\n      bgConfig = textureToMapConfig(scene.textures, `${levelId}_bg`)\n    }\n    return [levelConfig, bgConfig]\n  }\n  createBackground() {\n    let image = this.scene.add.image(0, 0, 'Stage1_bg')\n    let scaleX = this.scene.cameras.main.width / image.width\n    let scaleY = this.scene.cameras.main.height / image.height\n    let scale = Math.max(scaleX, scaleY)\n    image.setOrigin(0, 0)\n    image.setScale(scale * 1.5).setScrollFactor(0.1)\n    image.name = 'level_background_art'\n    image.depth = -2\n  }\n\n  createMap() {\n    const scene = this.scene\n    const levelData = this.current\n    const SCALE = scene.data.get('custom_scale')\n    const camera = this.scene.cameras.main\n\n    let map = this.map\n    let mapZ2 = this.mapZ2\n    let underlayMap = this.underlayMap\n    if(map && map.scene) {\n      map.destroy()\n      mapZ2.destroy()\n      underlayMap.destroy()\n    }\n\n    // Creating a blank tilemap with dimensions matching the dungeon\n    map = scene.make.tilemap({ tileWidth: 20, tileHeight: 20, width: levelData.config[0].length, height: levelData.config.length });\n    mapZ2 = scene.make.tilemap({ tileWidth: 20, tileHeight: 20, width: levelData.config[0].length, height: levelData.config.length });\n    underlayMap = scene.make.tilemap({ tileWidth: 20, tileHeight: 20, width: levelData.config[0].length, height: levelData.config.length });\n\n    window.map = map\n    // addTilesetImage: function (tilesetName, key, tileWidth, tileHeight, tileMargin, tileSpacing, gid)\n    let tileset = map.addTilesetImage('tiles', 'main-tiles', 20, 20, 1, 2);\n    let tilesetGates = map.addTilesetImage('tiles-gates', 'gates-tiles', 20, 20, 1, 2);\n    let tilesetZ2 = mapZ2.addTilesetImage('tiles-z2', 'gates-tiles', 20, 20, 1, 2);\n    let underlaytileset = underlayMap.addTilesetImage('under-tiles', 'main-tiles', 20, 20, 1, 2);\n\n    let layer = map.createBlankLayer('layer_1', tileset);\n    layer.name = 'layer_1'\n    layer.depth = 0\n    let layer2 = map.createBlankLayer('layer_2', tilesetGates);\n    layer2.name = 'layer_2'\n    layer2.depth = 0\n\n    let layerZ2 = mapZ2.createBlankLayer('layer_1z2', tilesetZ2);\n    layerZ2.name = 'layer_1z2'\n    layerZ2.depth = 5\n\n    let underlayer = underlayMap.createBlankLayer('layer_0', underlaytileset);\n    underlayer.name = 'layer_0'\n    underlayer.depth = -1\n    \n    layer.setScale(SCALE)\n    layer2.setScale(SCALE)\n    layerZ2.setScale(SCALE)\n    underlayer.setScale(SCALE)\n    underlayer.setScrollFactor(0.95)\n\n    levelData.config.forEach((row, x) => {\n      row.forEach((el, y) => {\n        let tile = el\n        if(levelData.bgConfig) {\n          let bgTile = levelData.bgConfig[x][y]\n          underlayMap.putTileAt(BG_PIXEL_TO_TILEMAP_POSITION[bgTile], y, x)\n        }\n\n        if (\n          [\n            PIXEL_NAME.WALL,\n            PIXEL_NAME.DEBRIS,\n            PIXEL_NAME.GROUND,\n            PIXEL_NAME.ART,\n            PIXEL_NAME.ART2,\n            PIXEL_NAME.EXIT,\n          ].includes(tile)\n        ) {\n          if (tile === PIXEL_NAME.WALL) {\n            if(this.current.isMaze) {\n              tile = 1\n            } else {\n              tile = PIXEL_TO_TILEMAP_POSITION.calculateWallTileWithNeighbours(x, y, levelData.config)\n            }\n            map.putTileAt(tile, y, x, false, 'layer_1')\n          } else if (tile === PIXEL_NAME.DEBRIS) {\n            map.putTileAt(PIXEL_TO_TILEMAP_POSITION[tile], y, x, false, 'layer_1')\n            // map.putTileAt(1, y, x, false, 'layer_1')\n          } else if (tile === PIXEL_NAME.GROUND) {\n            tile = PIXEL_TO_TILEMAP_POSITION.calculateGroundTileWithNeighbours(x, y, levelData.config)\n            map.putTileAt(tile, y, x, false, 'layer_1')\n          } else if ([PIXEL_NAME.ART, PIXEL_NAME.ART2].includes(tile)) {\n            map.putTileAt(21, y, x, false, 'layer_1')\n            // two consecutives art tiles means flix horizontal\n            const isFlipX = [PIXEL_NAME.ART, PIXEL_NAME.ART2].includes(levelData.config[x][y+1])\n            const isFlipFlag = [PIXEL_NAME.ART, PIXEL_NAME.ART2].includes(levelData.config[x][y-1])\n            if(isFlipFlag) return false\n            if(isFlipX) {\n              map.putTileAt(21, y + 1, x, false, 'layer_1')\n\n              map.putTileAt(PIXEL_TO_TILEMAP_POSITION[tile] + 3, y-1, x, false, 'layer_2').setFlipX(true)\n              map.putTileAt(PIXEL_TO_TILEMAP_POSITION[tile] + 2, y, x, false, 'layer_2').setFlipX(true)\n              map.putTileAt(PIXEL_TO_TILEMAP_POSITION[tile] + 1, y+1, x, false, 'layer_2').setFlipX(true)\n              map.putTileAt(PIXEL_TO_TILEMAP_POSITION[tile], y+2, x, false, 'layer_2').setFlipX(true)\n              \n              map.putTileAt(PIXEL_TO_TILEMAP_POSITION[tile] + 10 + 3, y-1, x + 1, false, 'layer_2').setFlipX(true)\n              map.putTileAt(PIXEL_TO_TILEMAP_POSITION[tile] + 10 + 2, y, x + 1, false, 'layer_2').setFlipX(true)\n              map.putTileAt(PIXEL_TO_TILEMAP_POSITION[tile] + 10 + 1, y+1, x + 1, false, 'layer_2').setFlipX(true)\n              map.putTileAt(PIXEL_TO_TILEMAP_POSITION[tile] + 10, y+2, x + 1, false, 'layer_2').setFlipX(true)\n            } else {\n              map.putTileAt(PIXEL_TO_TILEMAP_POSITION[tile], y, x, false, 'layer_2')\n              map.putTileAt(PIXEL_TO_TILEMAP_POSITION[tile] + 1, y + 1, x, false, 'layer_2')\n              map.putTileAt(PIXEL_TO_TILEMAP_POSITION[tile] + 2, y + 2, x, false, 'layer_2')\n              map.putTileAt(PIXEL_TO_TILEMAP_POSITION[tile] + 3, y + 3, x, false, 'layer_2')\n              \n              map.putTileAt(PIXEL_TO_TILEMAP_POSITION[tile] + 10, y, x + 1, false, 'layer_2')\n              map.putTileAt(PIXEL_TO_TILEMAP_POSITION[tile] + 10 + 1, y + 1, x + 1, false, 'layer_2')\n              map.putTileAt(PIXEL_TO_TILEMAP_POSITION[tile] + 10 + 2, y + 2, x + 1, false, 'layer_2')\n              map.putTileAt(PIXEL_TO_TILEMAP_POSITION[tile] + 10 + 3, y + 3, x + 1, false, 'layer_2')\n            }\n          } else if (tile === PIXEL_NAME.EXIT) {\n            const POSITION_EXIT = PIXEL_TO_TILEMAP_POSITION[tile + '_1']\n            // entrance behind user\n            map.putTileAt(POSITION_EXIT - 3, y - 1, x, false, 'layer_2')\n            // entrance behind and above user\n            // remove original tile\n            map.putTileAt(PIXEL_TO_TILEMAP_POSITION[PIXEL_NAME.EMPTY] - 10 - 4, y - 2, x - 1, false, 'layer_1')\n            map.putTileAt(POSITION_EXIT - 10 - 4, y - 2, x - 1, false, 'layer_2')\n            // entrance behind and below user\n            map.putTileAt(POSITION_EXIT - 4, y - 2, x, false, 'layer_2')\n            /**\n             * 1 2 3\n             * 4 5 6\n             * 7 8 9\n             */\n            // 1\n            mapZ2.putTileAt(POSITION_EXIT - 10 - 2, y - 2, x - 1)\n            // 2\n            map.putTileAt(PIXEL_TO_TILEMAP_POSITION[PIXEL_NAME.EMPTY] - 10 - 1, y - 1, x - 1, false, 'layer_1')\n            mapZ2.putTileAt(POSITION_EXIT - 10 - 1, y - 1, x - 1)\n            // 3\n            mapZ2.putTileAt(POSITION_EXIT - 10, y, x - 1)\n            // 4\n            mapZ2.putTileAt(POSITION_EXIT - 2, y - 2, x)\n            // 5\n            mapZ2.putTileAt(POSITION_EXIT - 1, y - 1, x)\n            // 6\n            mapZ2.putTileAt(POSITION_EXIT, y, x)\n            // 7\n            mapZ2.putTileAt(POSITION_EXIT + 10 - 2 , y - 2, x + 1)\n            // 8\n            mapZ2.putTileAt(POSITION_EXIT + 10 - 1, y - 1, x + 1)\n            // 9\n            mapZ2.putTileAt(POSITION_EXIT + 10, y, x + 1)\n          }\n        } else if ([PIXEL_NAME.HANGING_2, PIXEL_NAME.HANGING_3, PIXEL_NAME.HANGING_4, PIXEL_NAME.HANGING_5].includes(tile)) {\n          // place a wall in layer_1\n          const tileKind = PIXEL_TO_TILEMAP_POSITION.calculateWallTileWithNeighbours(x, y, levelData.config)\n          map.putTileAt(tileKind, y, x, false, 'layer_1')\n          levelData.config[x][y] = PIXEL_NAME.WALL\n\n          \n          // place 1st hanging sprite in depth = 5\n          let pos = { x: y, y: x } // inverse pos due to config loop: cols by row\n          let nextSprite = 'liana_start'\n          let hanging = this.scene.add.sprite(48, 16)\n          .setOrigin(0, 0.2)\n          .play(nextSprite)\n          hanging.setScale(layer.scaleX)\n          hanging.x = map.tileToWorldX(pos.x)\n          hanging.y = map.tileToWorldY(pos.y)\n          hanging.depth = 5\n\n          let element = new Deco(tile, this.current)\n          element.position = {...pos}\n          element.alien = hanging\n          levelData.decorationElements[`${pos.x}-${pos.y}`] = element\n          \n\n          // place hanging 2nd sprite\n          pos.y++\n          if([PIXEL_NAME.HANGING_3, PIXEL_NAME.HANGING_4, PIXEL_NAME.HANGING_5].includes(tile)) {\n            nextSprite = 'liana_middle'\n          } else {\n            nextSprite = 'liana_end'\n          }\n          hanging = this.scene.add.sprite(48, 16)\n          .setOrigin(0, 0.2)\n          .play(nextSprite)\n          hanging.setScale(layer.scaleX)\n          hanging.x = map.tileToWorldX(pos.x)\n          hanging.y = map.tileToWorldY(pos.y)\n          hanging.depth = 5\n\n          element = new Deco(tile, this.current)\n          element.position = {...pos}\n          element.alien = hanging\n          levelData.decorationElements[`${pos.x}-${pos.y}`] = element\n\n          // place hanging 3rd sprite?\n          if([PIXEL_NAME.HANGING_3, PIXEL_NAME.HANGING_4, PIXEL_NAME.HANGING_5].includes(tile)) {\n            pos.y++\n            nextSprite = PIXEL_NAME.HANGING_3 === tile ? 'liana_end' : 'liana_middle'\n\n            hanging = this.scene.add.sprite(48, 16)\n            .setOrigin(0, 0.2)\n            .play(nextSprite)\n            hanging.setScale(layer.scaleX)\n            hanging.x = map.tileToWorldX(pos.x)\n            hanging.y = map.tileToWorldY(pos.y)\n            hanging.depth = 5\n\n            element = new Deco(tile, this.current)\n            element.position = {...pos}\n            element.alien = hanging\n            levelData.decorationElements[`${pos.x}-${pos.y}`] = element\n          }\n          \n\n          // place hanging 4th sprite\n          if([PIXEL_NAME.HANGING_4, PIXEL_NAME.HANGING_5].includes(tile)) {\n            pos.y++\n            nextSprite = PIXEL_NAME.HANGING_4 === tile ? 'liana_end' : 'liana_middle'\n            hanging = this.scene.add.sprite(48, 16)\n            .setOrigin(0, 0.2)\n            .play(nextSprite)\n            hanging.setScale(layer.scaleX)\n            hanging.x = map.tileToWorldX(pos.x)\n            hanging.y = map.tileToWorldY(pos.y)\n            hanging.depth = 5\n\n            element = new Deco(tile, this.current)\n            element.position = {...pos}\n            element.alien = hanging\n            levelData.decorationElements[`${pos.x}-${pos.y}`] = element\n          }\n\n          // place hanging 5th sprite\n          if([PIXEL_NAME.HANGING_5].includes(tile)) {\n            pos.y++\n            nextSprite = 'liana_end'\n            hanging = this.scene.add.sprite(48, 16)\n            .setOrigin(0, 0.2)\n            .play(nextSprite)\n            hanging.setScale(layer.scaleX)\n            hanging.x = map.tileToWorldX(pos.x)\n            hanging.y = map.tileToWorldY(pos.y)\n            hanging.depth = 5\n\n            element = new Deco(tile, this.current)\n            element.position = {...pos}\n            element.alien = hanging\n            levelData.decorationElements[`${pos.x}-${pos.y}`] = element\n          }\n\n        } else {\n          if(!levelData.bgConfig) {\n            map.putTileAt(PIXEL_TO_TILEMAP_POSITION[PIXEL_NAME.EMPTY], y, x, false, 'layer_1')\n          }\n        }\n      })\n    })\n\n    // set up camera\n    camera.setBounds(0, 0, layer.width * layer.scaleX, layer.height * layer.scaleY);\n    camera.zoom = 1\n\n    this.underlayMap = underlayMap\n    this.mapZ2 = mapZ2\n    return map\n  }\n}","import Phaser from 'phaser'\nimport { TICK_TIME } from '../utils/constants'\nimport LevelFinale from './levels/level_finale'\n\nexport default class Rules {\n  constructor(scene) {\n    this.scene = scene\n    // gravity loop\n    this.timer = 0\n    this.worldTickFreq = TICK_TIME\n    // scene.events.removeListener(Phaser.Scenes.Events.UPDATE, this.onSceneUpdate)\n    scene.events.on(Phaser.Scenes.Events.UPDATE, this.onSceneUpdate.bind(this))\n\n    // this.setUpPuseResumeGame()\n    this.setUpCameraFollowPlayer()\n    scene.events.off('levelcompleted')\n    scene.events.on('levelcompleted', result => {\n      scene.events.emit('sounds:level_complete')\n      scene.tweens.add({\n        targets: this.music,\n        volume: 1,\n        ease: 'Linear',\n        duration: 500,\n        onComplete: () => {\n          this.music.stop()\n        },\n      });\n      scene.cameras.main.fade(3000, 0, 0)\n      scene.cameras.main.once('camerafadeoutcomplete', () => {\n        scene.scene.start('LevelResumeScene', { level: scene.levels.current.constructor.key, ...result  })\n        // scene.levels.current.cleanLevel()\n        // scene.levels.next()\n        // scene.cameras.main.fadeIn(1000, 0, 0)\n      })\n    })\n    scene.events.removeListener('levelstart', this.onLevelStart.bind(this))\n    scene.events.addListener('levelstart', this.onLevelStart.bind(this))\n  }\n  destroy() {\n    this.music?.stop()\n    // this.music.destroy()\n    this.scene.events.off(Phaser.Scenes.Events.UPDATE)\n    this.scene.events.off('levelstart')\n  }\n  onLevelStart() {\n    if(this.scene.levels.current.id === LevelFinale.key) {\n      this.music = this.scene.sound.add('escape_music', { loop: true, valume: 0 })\n      \n    }else {\n      this.music = this.scene.sound.add('levels_surface', { loop: true, valume: 0 })\n      // const lvlKey = this.scene.levels.current.id\n      // if(lvlKey.includes('level_') || lvlKey.includes('maze_')) {\n      // }\n    }\n    this.music.play()\n    // music.volume = 0\n    this.scene.tweens.add({  \n      targets: this.music,\n      volume: 1,\n      ease: 'Linear',\n      duration: 500,\n      onComplete: () => {\n      //   titlesMusic.pause()\n      //   scene.start(sceneId, props)\n      },\n    });\n  }\n\n  setUpCameraFollowPlayer() {\n    this.scene.events.addListener(Phaser.Scenes.Events.UPDATE, () => {\n      const cam = this.scene.cameras.main\n      const layer = this.scene.children.getByName('layer_1')\n      if (!layer) {\n        return false\n      }\n      const { tilemap: map } = layer\n      const {x, y} = this.scene.levels.current.getPlayerPos()\n      if (cam && map) {\n        var smoothFactor = 0.99;\n  \n        const scrollX = smoothFactor * cam.scrollX + (1 - smoothFactor) * (map.tileToWorldX(x) - cam.width * 0.5);\n        const scrollY = smoothFactor * cam.scrollY + (1 - smoothFactor) * (map.tileToWorldY(y) - cam.height * 0.5);\n\n        cam.scrollX = Math.round(scrollX)\n        cam.scrollY = Math.round(scrollY)\n      }\n    })\n  }\n\n  onSceneUpdate(time, delta) {\n    this.timer += delta\n    if (this.timer >= this.worldTickFreq) {\n      while (this.timer > this.worldTickFreq) {\n          this.timer -= this.worldTickFreq\n      }\n      this.scene.levels.current.gravityLoop()\n    }\n  }\n\n  calcCompletion(gems, collectedGems, enemies, killedEnemies, shrooms, colectedShrooms) {\n    const levelCompleted = 1\n    const comp = (collectedGems + killedEnemies + colectedShrooms + levelCompleted) / (gems + enemies + shrooms + levelCompleted)\n    return Math.round(comp * 100) / 100\n  }\n}\n","import Phaser from \"phaser\";\nimport {\n  TILES_BY_SCREEN,\n  TILE_SIZE,\n  TICK_TIME,\n  SCALE,\n} from \"../utils/constants\";\nimport LevelManager from \"../components/LevelManager\";\nimport Rules from \"../components/Rules\";\nimport UI from \"../components/UI\";\nimport CRTFilter from \"../utils/CRTShaderFX\"\n\nexport default class GameScene extends Phaser.Scene {\n  constructor() {\n    super(\"GameScene\");\n  }\n\n  create(data = {}) {\nconsole.log('CREATES GAME SCENE', data);\n    this.cameras.main.setPostPipeline(CRTFilter);\n    this.data.set(\"custom_scale\", SCALE);\n\n    this.game.scale.scaleMode = Phaser.Scale.RESIZE;\n    this.handleScales();\n    this.createAnimations();\n    if (this.levels?.current) {\n      this.levels.current.cleanLevel();\n    }\n    this.levels = new LevelManager(this, data.levelName, data.levelIndex);\n\n    this.cameras.main.fadeIn(1000, 0, 0, 0);\n    this.rules = new Rules(this);\n    this.ui = new UI(this);\n    this.events.on(Phaser.Scenes.Events.SHUTDOWN, () => {\n      this.rules.destroy();\n      this.ui.destroy();\n    });\n  }\n\n  handleScales() {\n    // const SCALE = this.data.get(\"custom_scale\");\n    // const scalables = new Map();\n    // this.clearScalables = () => scalables.clear();\n    // this.removeFromScalables = (el) => scalables.delete(el);\n    // this.addToScalables = (el, coords) => {\n    //   el.setScale(SCALE);\n    //   scalables.set(el, coords);\n    // };\n    // this.updateScale = (scale) => {\n    //   scalables.forEach((coords, el) => el?.setScale(scale));\n    // };\n\n    window.addEventListener(\"resize\", () => {\n      const scale =\n        Math.round(\n          (((window.innerWidth / TILES_BY_SCREEN) * 100) / TILE_SIZE / 100) *\n            100\n        ) / 100;\n      this.children.list.forEach((ch) => {\n        ch.setScale(scale);\n      });\n\n      this.ui.onResize()\n\n      const layer = this.children.getByName(\"layer_1\");\n      if (!layer) {\n        return false;\n      }\n      this.levels?.current.updatePositionsOnScale();\n      \n      const camera = this.cameras.main;\n      camera.setBounds(\n        0,\n        0,\n        layer.width * layer.scaleX,\n        layer.height * layer.scaleY\n      );\n    });\n  }\n\n  createAnimations() {\n    this.anims.create({\n      key: \"boulder_roll_right\",\n      frames: this.anims.generateFrameNumbers(\"boulder\", {\n        frames: [7, 10, 8, 7],\n      }),\n      frameRate: (1000 / TICK_TIME) * 4,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"boulder_roll_left\",\n      frames: this.anims.generateFrameNumbers(\"boulder\", {\n        frames: [7, 8, 10, 7],\n      }),\n      frameRate: (1000 / TICK_TIME) * 4,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"diamond_roll_right\",\n      frames: this.anims.generateFrameNumbers(\"boulder\", {\n        frames: [55, 56, 57, 60, 61, 62, 63, 54],\n      }),\n      frameRate: (1000 / TICK_TIME) * 8,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"diamond_roll_left\",\n      frames: this.anims.generateFrameNumbers(\"boulder\", {\n        frames: [63, 62, 61, 60, 57, 56, 55, 54],\n      }),\n      frameRate: (1000 / TICK_TIME) * 8,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"boulder_idle\",\n      frames: this.anims.generateFrameNumbers(\"boulder\", { frames: [7] }),\n      frameRate: 1,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"barrel_idle\",\n      frames: this.anims.generateFrameNumbers(\"boulder\", { frames: [70] }),\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"barrel_roll_right\",\n      frames: this.anims.generateFrameNumbers(\"boulder\", {\n        frames: [71, 76, 77, 70],\n      }),\n      frameRate: (1000 / TICK_TIME) * 3,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"barrel_roll_left\",\n      frames: this.anims.generateFrameNumbers(\"boulder\", {\n        frames: [77, 76, 71, 70],\n      }),\n      frameRate: (1000 / TICK_TIME) * 3,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"pillar_idle\",\n      frames: this.anims.generateFrameNumbers(\"boulder\", { frames: [66] }),\n      frameRate: 1,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"pillar_roll_right\",\n      frames: this.anims.generateFrameNumbers(\"boulder\", {\n        frames: [67, 68, 69, 66],\n      }),\n      frameRate: (1000 / TICK_TIME) * 3,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"pillar_roll_left\",\n      frames: this.anims.generateFrameNumbers(\"boulder\", {\n        frames: [69, 68, 67, 66],\n      }),\n      frameRate: (1000 / TICK_TIME) * 3,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"liana_start\",\n      frames: this.anims.generateFrameNumbers(\"boulder\", { frames: [72] }),\n      frameRate: (1000 / TICK_TIME) * 3,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"liana_middle\",\n      frames: this.anims.generateFrameNumbers(\"boulder\", { frames: [78] }),\n      frameRate: (1000 / TICK_TIME) * 3,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"liana_end\",\n      frames: this.anims.generateFrameNumbers(\"boulder\", { frames: [84] }),\n      frameRate: (1000 / TICK_TIME) * 3,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"explosion_explode\",\n      frames: this.anims.generateFrameNumbers(\"explosion\", {\n        frames: [0, 1, 2, 3, 4, 5, 6, 7],\n      }),\n      frameRate: (1000 / TICK_TIME) * 4,\n      repeat: 0,\n    });\n\n    this.anims.create({\n      key: \"diamond_idle\",\n      frames: this.anims.generateFrameNumbers(\"boulder\", {\n        frames: [\n          54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54,\n          54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54,\n          54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54,\n          54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 58, 59, 64, 65,\n          54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54,\n          54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54,\n          54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54,\n          54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54,\n        ],\n      }),\n      frameRate: (1000 / TICK_TIME) * 4,\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"mushroom_idle\",\n      frames: this.anims.generateFrameNumbers(\"pickables\", { frames: [3] }),\n      frameRate: 1,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"pickaxe_idle\",\n      frames: this.anims.generateFrameNumbers(\"pickables\", { frames: [6] }),\n      frameRate: 1,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"brave_idle\",\n      frames: this.anims.generateFrameNumbers(\"brave\", {\n        frames: [\n          0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 2, 2, 2, 2, 2, 2, 2, 0,\n        ],\n      }),\n      frameRate: 4,\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"brave_idle_pickaxe\",\n      frames: this.anims.generateFrameNumbers(\"brave\", {\n        frames: [\n          32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 33, 33, 33, 32, 34, 34, 34,\n          34, 34, 34, 34, 32,\n        ],\n      }),\n      frameRate: 4,\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"brave_run\",\n      frames: this.anims.generateFrameNumbers(\"brave\", {\n        frames: [8, 9, 10, 11, 12, 13, 14, 15],\n      }),\n      frameRate: (1000 / TICK_TIME) * 2.5, // magic number that make smooth run and full frames in about 2 cycles\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"brave_run_up\",\n      frames: this.anims.generateFrameNumbers(\"brave\", {\n        frames: [56, 57, 58, 59, 60, 61, 62, 63],\n      }),\n      frameRate: (1000 / TICK_TIME) * 2.5,\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"brave_run_pickaxe_up\",\n      frames: this.anims.generateFrameNumbers(\"brave\", {\n        frames: [56, 57, 58, 59, 60, 61, 62, 63],\n      }),\n      frameRate: (1000 / TICK_TIME) * 2.5,\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"brave_run_down\",\n      frames: this.anims.generateFrameNumbers(\"brave\", {\n        frames: [64, 65, 66, 67, 68, 69, 70, 71],\n      }),\n      frameRate: (1000 / TICK_TIME) * 2.5,\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"brave_run_pickaxe_down\",\n      frames: this.anims.generateFrameNumbers(\"brave\", {\n        frames: [72, 73, 74, 75, 76, 77, 78, 79],\n      }),\n      frameRate: (1000 / TICK_TIME) * 2.5,\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"brave_run_pickaxe\",\n      frames: this.anims.generateFrameNumbers(\"brave\", {\n        frames: [16, 17, 18, 19, 20, 21, 22, 23],\n      }),\n      frameRate: (1000 / TICK_TIME) * 2.5,\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"brave_break_pickaxe\",\n      frames: this.anims.generateFrameNumbers(\"brave\", {\n        frames: [40, 41, 41, 42, 43],\n      }),\n      frameRate: (1000 / TICK_TIME) * 5,\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"brave_break_pickaxe_up\",\n      frames: this.anims.generateFrameNumbers(\"brave\", {\n        frames: [44, 45, 45, 46, 47],\n      }),\n      frameRate: (1000 / TICK_TIME) * 5,\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"brave_break_pickaxe_down\",\n      frames: this.anims.generateFrameNumbers(\"brave\", {\n        frames: [52, 53, 53, 54, 55],\n      }),\n      frameRate: (1000 / TICK_TIME) * 5,\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"brave_break_pickaxe_alt\",\n      frames: this.anims.generateFrameNumbers(\"brave\", {\n        frames: [48, 49, 49, 50, 51],\n      }),\n      frameRate: (1000 / TICK_TIME) * 5,\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"brave_push\",\n      frames: this.anims.generateFrameNumbers(\"brave\", {\n        frames: [24, 24, 24, 24, 25, 26, 27],\n      }),\n      frameRate: (1000 / TICK_TIME) * 4,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"brave_dies\",\n      frames: this.anims.generateFrameNumbers(\"brave\", {\n        frames: [28, 29, 30, 31, 30, 31],\n      }),\n      frameRate: (1000 / TICK_TIME) * 3.5,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"torch_idle\",\n      frames: this.anims.generateFrameNumbers(\"torch\", {\n        frames: [0, 1, 2, 3],\n      }),\n      frameRate: (1000 / TICK_TIME) * 2.5,\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"torch_run\",\n      frames: this.anims.generateFrameNumbers(\"torch\", {\n        frames: [8, 9, 10, 11, 12, 13, 14, 15],\n      }),\n      frameRate: (1000 / TICK_TIME) * 2.5,\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"torch_run_up\",\n      frames: this.anims.generateFrameNumbers(\"torch\", {\n        frames: [56, 57, 58, 59, 60, 61, 62, 63],\n      }),\n      frameRate: (1000 / TICK_TIME) * 2.5,\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"torch_run_down\",\n      frames: this.anims.generateFrameNumbers(\"torch\", {\n        frames: [64, 65, 66, 67, 68, 69, 70, 71],\n      }),\n      frameRate: (1000 / TICK_TIME) * 2.5,\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"torch_push\",\n      frames: this.anims.generateFrameNumbers(\"torch\", {\n        frames: [24, 25, 26, 27, 24, 25, 26],\n      }),\n      frameRate: (1000 / TICK_TIME) * 2.5,\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"torch_break_pickaxe\",\n      frames: this.anims.generateFrameNumbers(\"torch\", {\n        frames: [40, 41, 41, 42, 43],\n      }),\n      frameRate: (1000 / TICK_TIME) * 5,\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"bat_move\",\n      frames: this.anims.generateFrameNumbers(\"boulder\", {\n        frames: [18, 19, 20, 21, 22, 23, 24],\n      }),\n      frameRate: (1000 / TICK_TIME) * 3,\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"ground_breaks\",\n      frames: this.anims.generateFrameNumbers(\"boulder\", {\n        frames: [30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40],\n      }),\n      frameRate: (1000 / TICK_TIME) * 3,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"ground_disolves\",\n      frames: this.anims.generateFrameNumbers(\"boulder\", {\n        frames: [32, 33, 34, 35, 36, 37, 38, 39, 40],\n      }),\n      frameRate: (1000 / TICK_TIME) * 3,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"jewel_pick\",\n      frames: this.anims.generateFrameNumbers(\"boulder\", {\n        frames: [42, 43, 44, 45, 46, 40],\n      }),\n      frameRate: (1000 / TICK_TIME) * 3,\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"enemy_dies\",\n      frames: this.anims.generateFrameNumbers(\"boulder\", {\n        frames: [47, 48, 49, 50, 51, 52, 40],\n      }),\n      frameRate: (1000 / TICK_TIME) * 3,\n      repeat: 0,\n    });\n\n    this.anims.create({\n      key: \"closeUp_Mary\",\n      frames: this.anims.generateFrameNumbers(\"closeUp\", { frames: [0] }),\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"closeUp_Marduk\",\n      frames: this.anims.generateFrameNumbers(\"closeUp\", { frames: [1] }),\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"closeUp_Dwarf\",\n      frames: this.anims.generateFrameNumbers(\"closeUp\", { frames: [2] }),\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"closeUp_Tiamat\",\n      frames: this.anims.generateFrameNumbers(\"closeUp\", { frames: [5] }),\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"closeUp_Pickaxe\",\n      frames: this.anims.generateFrameNumbers(\"closeUpItems\", { frames: [6] }),\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"closeUp_Mushroom\",\n      frames: this.anims.generateFrameNumbers(\"closeUpItems\", { frames: [8] }),\n      repeat: 0,\n    });\n    this.anims.create({\n      key: \"closeUp_Diamond\",\n      frames: this.anims.generateFrameNumbers(\"closeUpItems\", { frames: [7] }),\n      repeat: 0,\n    });\n    // Bro\n    this.anims.create({\n      key: \"bro_idle\",\n      frames: this.anims.generateFrameNumbers(\"bro\", {\n        frames: [\n          0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 2, 2, 2, 2, 2, 2, 2, 0, 0, 0, 1, 1,\n          1, 1, 1, 1, 0, 0, 0, 2, 2, 2, 0, 0, 1, 1, 1, 0,\n        ],\n      }),\n      frameRate: 4,\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"bro_run\",\n      frames: this.anims.generateFrameNumbers(\"bro\", {\n        frames: [8, 9, 10, 11, 12, 13, 14, 15],\n      }),\n      frameRate: (1000 / TICK_TIME) * 2.5, // magic number that make smooth run and full frames in about 2 cycles\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"bro_run_up\",\n      frames: this.anims.generateFrameNumbers(\"bro\", {\n        frames: [56, 57, 58, 59, 60, 61, 62, 63],\n      }),\n      frameRate: (1000 / TICK_TIME) * 2.5,\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"bro_run_down\",\n      frames: this.anims.generateFrameNumbers(\"bro\", {\n        frames: [64, 65, 66, 67],\n      }),\n      frameRate: (1000 / TICK_TIME) * 4,\n      repeat: -1,\n    });\n    // Shmebulock\n    this.anims.create({\n      key: \"dwarf_idle\",\n      frames: this.anims.generateFrameNumbers(\"dwarf\", {\n        frames: [\n          0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 2, 2, 2, 2, 2, 2, 2, 0,\n        ],\n      }),\n      frameRate: 4,\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"dwarf_run\",\n      frames: this.anims.generateFrameNumbers(\"dwarf\", {\n        frames: [8, 9, 10, 11, 12, 13, 14, 15],\n      }),\n      frameRate: (1000 / TICK_TIME) * 2.5, // magic number that make smooth run and full frames in about 2 cycles\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"dwarf_run_up\",\n      frames: this.anims.generateFrameNumbers(\"dwarf\", {\n        frames: [56, 57, 58, 59, 60, 61, 62, 63],\n      }),\n      frameRate: (1000 / TICK_TIME) * 2.5,\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"dwarf_run_down\",\n      frames: this.anims.generateFrameNumbers(\"dwarf\", {\n        frames: [64, 65, 66, 67],\n      }),\n      frameRate: (1000 / TICK_TIME) * 4,\n      repeat: -1,\n    });\n    this.anims.create({\n      key: \"exit_block\",\n      frames: this.anims.generateFrameNumbers(\"boulder\", {\n        frames: [0, 1, 2, 3, 4, 5],\n      }),\n      frameRate: (1000 / TICK_TIME) * 2.5,\n      repeat: -1,\n    });\n  }\n}\n","import Phaser from 'phaser'\nimport { SCALE, TILES_BY_SCREEN, TILE_SIZE } from '../utils/constants'\nimport CRTFilter from '../utils/CRTShaderFX'\nimport UI from '../components/UI'\n\nexport default class ConnectorScene extends Phaser.Scene {\n  constructor () {\n    super('ConnectorScene');\n  }\n  \n  preload () {\n    \n  }\n\n  createAnimations() {\n    this.anims.create({\n      key: 'closeUp_Mary',\n      frames:this.anims.generateFrameNumbers('closeUp', { frames: [ 0 ] }),\n      repeat: 0,\n    })\n    this.anims.create({\n      key: 'closeUp_Marduk',\n      frames:this.anims.generateFrameNumbers('closeUp', { frames: [ 1 ] }),\n      repeat: 0,\n    })\n    this.anims.create({\n      key: 'closeUp_Dwarf',\n      frames:this.anims.generateFrameNumbers('closeUp', { frames: [ 2 ] }),\n      repeat: 0,\n    })\n    this.anims.create({\n      key: 'closeUp_Tiamat',\n      frames:this.anims.generateFrameNumbers('closeUp', { frames: [ 3 ] }),\n      repeat: 0,\n    })\n  }\n  getMusicFromName(name) {\n    switch(name) {\n      case 'cinematic_1':\n        return 'swarf_chat_music'\n      default:\n        return 'generic_chat_music'\n    }\n  }\n  \n  getImageByName(name) {\n    let image, scaleX, scaleY, scale\n    switch(name) {\n      default:\n      case 'cinematic_1':\n        image = this.add.image(this.cameras.main.width / 2, this.cameras.main.height / 1.5, 'Tiamat')\n        scaleX = this.cameras.main.width / image.width\n        scaleY = this.cameras.main.height / image.height\n        scale = Math.max(scaleX, scaleY)\n        image.setScale(scale * 4).setScrollFactor(0)\n        break\n      case 'cinematic_last':\n        image = this.add.image(this.cameras.main.width /2, this.cameras.main.height/2, 'Tiamat')\n        scaleX = this.cameras.main.width / image.width\n        scaleY = this.cameras.main.height / image.height\n        scale = Math.max(scaleX, scaleY)\n        image.setScale(scale).setScrollFactor(0)\n        break\n      case 'cinematic_last_2':\n        image = this.add.image(this.cameras.main.width /2, this.cameras.main.height/2, 'thechild')\n        scaleX = this.cameras.main.width / image.width\n        scaleY = this.cameras.main.height / image.height\n        scale = Math.max(scaleX, scaleY)\n        image.setScale(scale).setScrollFactor(0)\n        break\n    }\n    return image\n  }\n  create({id, name}) {\n    this.currentLevel = id\n    this.createAnimations()\n    const musicName = this.getMusicFromName(name)\n    this.environmentMusic = this.sound.add(musicName, { loop: true });\n    this.environmentMusic.play();\n\n    new UI(this, true)\n\n    this.cameras.main.setPostPipeline(CRTFilter);\n    let image = this.getImageByName(name)\n    image.name = 'background_art'\n\n    this[`showDialogLevel_${name}`]()\n    \n  }\n  showDialogLevel_cinematic_escape() {\n    // hack to get control after dialogue close\n    this.levels = {\n      current: {\n        pause: () => false,\n        resume: () => {\n          setTimeout(() => {\n            this.environmentMusic.stop()\n            // this.environmentMusic.destroy()\n            this.cameras.main.fade(1000, 0, 0, 0)\n            this.cameras.main.once('camerafadeoutcomplete', () => void this.scene.start('GameScene', { level: this.currentLevel + 1 }))\n          }, 1000);\n        }\n      }\n    }\n\n    this.events.emit('dialogue:show', {\n      participants: ['closeUp_Marduk', 'closeUp_Mary'],\n      conversation: [\n        {\n          who: 'closeUp_Marduk',\n          text: [\n            \"Do you feel it Mary?\",\n            \"Do you feel her presence\",\n            \"below?\",\n          ]\n        },\n        {\n          who: 'closeUp_Mary',\n          text: [\n             \"I do... But what\",\n             \"does it mean?\",\n          ]\n        },\n        {\n          who: 'closeUp_Marduk',\n          text: [\n             \"That I do not know... But\",\n             \"it does not portend well.\",\n             \"I have learned so much in\",\n             \"so little time. Mary...I\",\n             \"can’t recognize the man\",\n             \"I once was. I felt\",\n             \"bound by obligation,\",\n             \"I was trapped, Mary.\"\n          ]\n        },\n        {\n          who: 'closeUp_Mary',\n          text: [\n             \"It is time, Marduk\",\n             \"we have to escape\",\n             \"from here before\",\n             \"Tiamat stops us\",\n             \" \",\n             \"go!!!\"\n          ]\n        },\n      ]\n    })\n\n  }\n\n  showDialogLevel_cinematic_last_2() {\n    // hack to get control after dialogue close\n    this.levels = {\n      current: {\n        pause: () => {\n          this.tweens.add({\n            targets: this.children.getByName('background_art'),\n            alpha: 0,\n            duration: 500,\n            onComplete: () => {\n              const img = this.getImageByName('cinematic_last_2')\n              img.alpha = 0\n              this.tweens.add({\n                targets: img,\n                alpha: 1,\n                duration: 500,\n              })\n            }\n          })\n        },\n        resume: () => {\n          setTimeout(() => {\n            this.tweens.add({\n              targets:this.environmentMusic,\n              valume: 0,\n              duration: 500,\n            })\n            \n            this.cameras.main.fade(1000, 0, 0, 0)\n            this.cameras.main.once('camerafadeoutcomplete', () => void this.scene.start('CreditsScene'))\n          }, 1000);\n        }\n      }\n    }\n    this.events.emit('dialogue:show', {\n      participants: ['closeUp_Marduk', 'closeUp_Dwarf'],\n      conversation: [\n        {\n          who: 'closeUp_Dwarf',\n          text: [\n             \"That's not how things work\",\n             \"where I come from. Marduk,\",\n             \"You have been preparing\",\n             \"for this moment since\",\n             \"your life began. Do you\",\n             \"have the courage to\",\n             \"forge your own destiny?\",\n          ]\n        },\n      ]\n    })\n    \n  }\n  showDialogLevel_cinematic_last() {\n    // hack to get control after dialogue close\n    this.levels = {\n      current: {\n        pause: () => false,\n        resume: () => {\n          setTimeout(() => {\n            this.showDialogLevel_cinematic_last_2()\n            // this.cameras.main.fade(1000, 0, 0, 0)\n            // this.cameras.main.once('camerafadeoutcomplete', () => void this.scene.start('GameScene', { level: this.currentLevel + 1 }))\n          }, 1000);\n        }\n      }\n    }\n\n    this.events.emit('dialogue:show', {\n      participants: ['closeUp_Marduk', 'closeUp_Tiamat'],\n      conversation: [\n        {\n          who: 'closeUp_Marduk',\n          text: [\n            \"How could you do this? We\",\n            \"are your creations. This\",\n            \"is your land. How could\",\n            \"you lie to us!?\",\n            \"Why have you forsaken us?\",\n          ]\n        },\n        {\n          who: 'closeUp_Tiamat',\n          text: [\n            \"Life is a cycle. The\",\n            \"catalyst comet is a part\",\n            \"of this cycle: I did not\",\n            \"lie when I said the Comet\",\n            \"was the source of the\",\n            \"earthquakes.\",\n          ]\n        },\n        {\n          who: 'closeUp_Tiamat',\n          text: [\n             \"However: I am a force of\",\n             \"this world. It is through\",\n             \"my actions that things\",\n             \"occur. I am bound to the\",\n             \"will of the comet: for\",\n             \"truly we are one. I am\",\n             \"nature: and this...is\",\n             \"within my nature.\",\n          ]\n        },\n        {\n          who: 'closeUp_Tiamat',\n          text: [\n             \"I may have created\",\n             \"everything, yet still:\",\n             \"there was a natural order\",\n             \"to life that preceded me.\",\n          ]\n        },\n        {\n          who: 'closeUp_Tiamat',\n          text: [\n             \"You are finite in your\",\n             \"perspective Marduk.\",\n             \"Death signifies new\",\n             \"beginnings.\",\n             \" \",\n             \"This is Destiny.\",\n          ]\n        },\n        {\n          who: 'closeUp_Marduk',\n          text: [\n             \"Who would accept a fate\",\n             \"such as this? We have done\",\n             \"no wrong. We worship and\",\n             \"revere you. We are your\",\n             \"children! Would you\",\n             \"really destroy us?\",\n          ]\n        },\n        {\n          who: 'closeUp_Tiamat',\n          text: [\n            \"The end was written\",\n            \"in the beginning.\",\n            \"Fate cannot be rewritten.\"\n          ]\n        },\n      ]\n    })\n  }\n  showDialogLevel_cinematic_1() {\n    // hack to get control after dialogue close\n    this.levels = {\n      current: {\n        pause: () => false,\n        resume: () => {\n          setTimeout(() => {\n            this.tweens.add({\n              targets: this.environmentMusic,\n              volume: 0,\n              duration: 500,\n            })\n            this.cameras.main.fade(1000, 0, 0, 0)\n            this.cameras.main.once('camerafadeoutcomplete', () => void this.scene.start('GameScene', { level: this.currentLevel + 1 }))\n          }, 1000);\n        }\n      }\n    }\n    this.events.emit('dialogue:show', {\n      participants: ['closeUp_Mary', 'closeUp_Marduk', 'closeUp_Dwarf'],\n      conversation: [\n        {\n          who: 'closeUp_Mary',\n          text: [\n            \"There you are! I was\",\n            \"worried about you!\",\n            \"Are you okay?\",\n          ]\n        },\n        {\n          who: 'closeUp_Marduk',\n          text: [\n            \"- marduk has been crying -\",\n            \"Thank Tiamat You’re here!\",\n            \"I made a mistake. I ate\",\n            \"one of the mushrooms. I\",\n            \"don’t feel well…I think I\",\n            \"broke my leg falling from\",\n            \"the surface.\",\n          ]\n        },\n        {\n          who: 'closeUp_Mary',\n          text: [\n            \"Are you going to\",\n            \"throw up!?\",\n            \"Can you stand?\",\n          ]\n        },{\n          who: 'closeUp_Marduk',\n          text: [\n            \"No….I don’t think so.\",\n          ]\n        },\n        {\n          who: 'closeUp_Mary',\n          text: [\n            \"What are we going to do\",\n            \"with you.\",\n          ]\n        },\n        {\n          who: 'closeUp_Dwarf',\n          text: [\n            \"You know…..there's\",\n            \"nothing wrong with being\",\n            \"sad or afraid. It’s\",\n            \"nature's way of guiding\",\n            \"us towards a brighter\",\n            \"future.\",\n          ]\n        },\n        {\n          who: 'closeUp_Marduk',\n          text: [\n            \"WHAT ON EARTH IS THAT!?\",\n            \"Don’t patronize me foul\",\n            \"beast.\",\n          ]\n        },\n        {\n          who: 'closeUp_Mary',\n          text: [\n            \"You really need to learn\",\n            \"when to shut your mouth.\",\n            \"Marduk. You have become\",\n            \"rude & foul tempered.\",\n          ]\n        },\n        {\n          who: 'closeUp_Dwarf',\n          text: [\n            \"I mean he’s right.\",\n            \"I am a monster.\",\n            \"I'm... different.\"\n          ]\n        },\n        {\n          who: 'closeUp_Mary',\n          text: [\n            \"You don’t seem like\",\n            \"a monster to me.\",\n          ]\n        },\n        {\n          who: 'closeUp_Dwarf',\n          text: [\n            \"That’s because we're\",\n            \"going to make a deal\"\n          ]\n        },\n        {\n          who: 'closeUp_Marduk',\n          text: [\n            \"I don’t make deals with...\",\n            \"your kind...\",\n          ]\n        },\n        {\n          who: 'closeUp_Dwarf',\n          text: [\n            \"But You Will...in time...\",\n            \"things change. People grow.\",\n            \"Even you Marduk. I think\",\n            \"we could be great friends.\",\n            \"In Fact. It Is Prophecy\",\n          ]\n        }\n      ]\n    }) \n  }\n}\n","import Phaser from 'phaser'\nimport { SCALE, TILES_BY_SCREEN, TILE_SIZE } from '../utils/constants'\nimport CRTFilter from '../utils/CRTShaderFX'\nimport UI from '../components/UI'\n\nexport default class IntroScene extends Phaser.Scene {\n  constructor () {\n    super('CreditsScene');\n  }\n\n  create() {\n    this.normalDayMusic = this.sound.add('opening_peace', { loop: true })\n    this.normalDayMusic.play();\n\n    this.cameras.main.setPostPipeline(CRTFilter);\n    let image = this.add.image(this.cameras.main.width / 2, this.cameras.main.height / 2, 'theworld')\n    let scaleX = this.cameras.main.width / image.width\n    let scaleY = this.cameras.main.height / image.height\n    let scale = Math.max(scaleX, scaleY)\n    image.setScale(scale).setScrollFactor(0)\n    image.name = 'background_art'\n    image.alpha = 0\n    this.tweens.add({\n      targets: image,\n      alpha: 1,\n      duration: 5000,\n    })\n    const line1 = this.add.text(80, 10, \"THE END\",\n      {\n        fontFamily: 'GameGirl',\n        fontSize: \"10px\",\n        fill: \"#ffffff\",\n      }\n    ).setScale(scaleX * 2).setPosition(2 * scaleX, this.cameras.main.height - 20 * 4 * scaleY).setShadow(-1,1)\n    line1.displayHeight = 10 * scaleY\n    const line2 = this.add.text(80, 10, \"Thanks for playing\",\n      {\n        fontFamily: 'GameGirl',\n        fontSize: \"10px\",\n        fill: \"#ffffff\",\n      }\n    ).setScale(scaleX * 0.9).setPosition(2 * scaleX, this.cameras.main.height - 10 * 3 * scaleY).setShadow(-1,1)\n    line2.displayHeight = 10 * scaleY\n  }\n}","import { useLayoutEffect, useState, useContext } from \"react\";\nimport Phaser from \"phaser\";\nimport { context } from \"../PhaserProvider\";\n\nconst usePhaser = () => {\n  const { game, scene, sceneProps } = useContext(context);\n  const getState = (game, scene) => {\n    game.scene.scenes.forEach((s) => {\n      s.events.off(Phaser.Scenes.Events.READY);\n      s.events.once(Phaser.Scenes.Events.READY, () => {\n        s.events.off(Phaser.Scenes.Events.RENDER);\n        s.events.once(Phaser.Scenes.Events.RENDER, () => {\n          setState({\n            ...s,\n            camera: s.cameras.main,\n            cameras: s.cameras,\n            scene: s,\n          });\n        });\n      });\n    });\n    return {\n      game,\n      scene, // current scene based on last scene that called RPFScene.create\n      sceneProps, // current scene data recieved into scene.create method\n      camera: scene.cameras.main,\n      cameras: scene.cameras,\n      scenes: game.scene.scenes,\n      scenesManager: game.scene,\n    };\n  };\n  const [state, setState] = useState({});\n  useLayoutEffect(() => {\n     if (scene) {\n       setState(getState(game, scene))\n     }\n  }, [game, scene])\n\n  return state;\n};\nexport default usePhaser;\n","import React, { useEffect, forwardRef, useRef, useCallback, useLayoutEffect } from 'react'\nimport Phaser from 'phaser'\nimport usePhaser from '../hooks/usePhaser'\n\nconst GameObject = forwardRef(({\n  args,\n  type = 'Shape',\n  addedToScene = () => {},\n  addedToSceneForParent = () => {},\n  children,\n  dataParentRef,\n  ...props\n}, externalRef) => {\n  const { scene } = usePhaser()\n  const localRef = useRef()\n  const tId = useRef()\n  const ref = externalRef || localRef\n  \n  const applyProps = useCallback((_this, p) => {\n    Object.keys(p).forEach(k => {\n      if(_this?.hasOwnProperty(k) || _this?.__proto__.hasOwnProperty(k)) {\n        if(typeof _this[k] === 'function') {\n          _this[k](p[k])\n        } else {\n          _this[k] = p[k]\n        }\n      }\n    })\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props])\n  \n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useLayoutEffect(() => applyProps(ref.current, props), [props])\n  \n  // IMPORTANT: keep this as useEffect so this code runs after render\n  // that way we have all Phaser listeners settled once the objects are created\n  useEffect(() => {\n    if (scene) {\n      // new object\n      const obj = new Phaser.GameObjects[type](scene, ...args)\n      \n      // makes Rect aware of the new object\n      ref.current = obj\n      \n      // listen to added-to-scne event\n      obj.once(Phaser.GameObjects.Events.ADDED_TO_SCENE, () => {\n        // convenient callback for event as object property\n        addedToScene(obj)\n        \n        // calls parent container callback (if present)\n        addedToSceneForParent(obj)\n\n        // update Phaser with React props\n        applyProps(obj, props)\n      })\n\n      // offset execution to let object creation propagate on refs before being added to de scene\n      tId.current = setTimeout(() => {\n        // adds object to scene\n        scene.add.existing(obj)\n      })\n      \n    }\n\n    return () => {\n      ref?.current?.destroy()\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [scene])\n\n  useEffect(() =>{\n    return () => {\n      clearTimeout(tId.current)\n  }}, [])\n\n  return <>{children}</>\n})\nGameObject.displayName = `GameObject`;\nexport default GameObject\n","import { useEffect, forwardRef, useRef } from 'react'\nimport GameObject from './GameObject'\n\nconst Text = forwardRef(({\n  args,\n  children,\n  ...props\n}, externalRef) => {\n\n  const localRef = useRef()\n  const ref = externalRef || localRef\n\n  useEffect(() => {\n    if (typeof children === 'string') {\n      ref.current?.setText(children)\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [children])\n\n  return (\n    <GameObject\n      ref={ref}\n      type=\"Text\"\n      args={[\n        args?.[0] ?? props.x,\n        args?.[1] ?? props.y,\n        typeof children === 'string' ? children : args?.[2] ?? \"\",\n        args?.[3] ?? props.style\n      ]}\n      {...props}\n    />\n  )\n})\nText.displayName = 'Text'\nexport default Text\n","import React, {\n  Children,\n  useLayoutEffect,\n  useEffect,\n  cloneElement,\n  createRef,\n} from \"react\";\nimport { forwardRef, useRef } from \"react\";\nimport Phaser from \"phaser\";\nimport usePhaser from \"../hooks/usePhaser\";\nimport GameObject from \"./GameObject\";\n\nconst Container = forwardRef(\n  (\n    { args = [0, 0], addedToScene = () => {}, children, ...props },\n    externalRef\n  ) => {\n    const localRef = useRef();\n    const ref = externalRef || localRef;\n\n    const onObjectAddedToScene = (obj) => {\n      ref.current.add(obj);\n    };\n    const extractPhaserChildren = (_children) => {\n      return Children.toArray(_children).map((ch) => {\n        if (String(ch.type).includes(\"react.fragment\")) {\n          return cloneElement(ch, {\n            children: extractPhaserChildren(ch.props.children),\n          });\n        }\n        return cloneElement(ch, {\n          addedToSceneForParent: onObjectAddedToScene,\n        });\n      })\n    };\n    // console.log(Children.toArray(children));\n    return (\n      <GameObject ref={ref} type=\"Container\" args={args} {...props}>\n        {/* Inject dataParentRef to children */}\n        {extractPhaserChildren(children)}\n      </GameObject>\n    );\n  }\n);\n\nContainer.displayName = \"Container\";\nexport default Container;\n","import { forwardRef, useRef } from 'react'\nimport GameObject from './GameObject'\n\nconst Sprite = forwardRef(({\n  args,\n  children,\n  ...props\n}, externalRef) => {\n\n  const localRef = useRef()\n  const ref = externalRef || localRef\n\n  return (\n    <GameObject\n      ref={ref}\n      type=\"Sprite\"\n      args={args}\n      {...props}\n    />\n  )\n})\n\nSprite.displayName = 'Sprite'\nexport default Sprite\n","import { useRef, Fragment, useState, useCallback, useEffect } from \"react\";\nimport UI from \"../../components/UI\";\nimport Text from \"../../libs/react-phaser-fiber/components/Text\";\nimport Container from \"../../libs/react-phaser-fiber/components/Container\";\nimport usePhaser from \"../../libs/react-phaser-fiber/hooks/usePhaser\";\nimport { SCALE } from \"../../utils/constants\";\nimport Sprite from \"../../libs/react-phaser-fiber/components/Sprite\";\nimport dbManager from \"../../utils/dbManager\";\nimport {\n  drawCompScore,\n  drawGemsScore,\n  drawShroomsScore,\n  drawThreatsScore,\n  formatComp,\n  formatScore,\n} from \"../../utils/helpers\";\nimport { translate } from \"../../utils/localization\";\nimport { getNextLevel } from \"../../components/LevelManager\";\n\nconst OptionsScene = () => {\n  const { game, scene, sceneProps } = usePhaser();\n  const [selIndex, setSelIndex] = useState(0);\n  const [showRowScore, setShowRowScore] = useState(0);\n  // const [results, setResults] = useState(null);\n  const [options] = useState([\n    translate('menu.main.score_op_next'),\n    translate('menu.main.score_op_repeat'),\n    translate('menu.main.score_op_exit')\n  ]);\n  const tId = useRef();\n  const refScene = useRef();\n\n  const keyDownHandler = useCallback(\n    (event) => {\n      if (event.key === \"Escape\") {\n        game.scene.start(\"LandingScene\");\n      }\n      if (event.key === \"ArrowDown\" && selIndex < options.length - 1) {\n        setSelIndex((idx) => idx + 1);\n      }\n      if (event.key === \"ArrowUp\" && selIndex > 0) {\n        setSelIndex((idx) => idx - 1);\n      }\n      if (event.key === \"Enter\") {\n        switch(selIndex) {\n          default:\n          case 0:\n            scene.scene.start('GameScene', { levelName: getNextLevel(sceneProps?.level) })\n            break\n          case 1:\n            scene.scene.start('GameScene', { levelName: sceneProps?.level })\n            break\n          case 2:\n            scene.scene.start('MenuScene')\n            break\n        }\n      }\n    },\n    [game, scene, selIndex, options, sceneProps]\n  );\n\n  useEffect(() => {\n    scene?.input.keyboard.addListener(\"keydown\", keyDownHandler);\n\n    return () =>\n      scene?.input.keyboard.removeListener(\"keydown\", keyDownHandler);\n  }, [scene, keyDownHandler]);\n\n  useEffect(() => {\n    refScene.current = scene\n    scene?.anims.create({\n      key: \"arrow_menu\",\n      frames: scene.anims.generateFrameNumbers(\"hud\", { frames: [30] }),\n      repeat: 0,\n    });\n  }, [scene]);\n\n  // useEffect(() => {\n  //   if (sceneProps) {\n  //     const data = dbManager.get(sceneProps.level);\n  //     // console.log(sceneProps);\n  //     setResults({\n  //       ...data,\n  //     });\n  //   }\n  // }, [sceneProps]);\n\n  useEffect(() => {\n    if (showRowScore < 5) {\n      tId.current = setTimeout(() => setShowRowScore((v) => v + 1), 800);\n    }\n    return () => clearTimeout(tId.current);\n  }, [showRowScore]);\n\n  useEffect(() =>{\n    return () => {\n      clearTimeout(tId.current)\n      refScene.current.input.keyboard.off(\"keydown\");\n  }}, [])\n\n  const formatFont = (txt) => {\n    txt.displayHeight = 10 * SCALE;\n    txt.depth = 16;\n    txt.name = \"header_text\";\n    txt.setScale(SCALE);\n    txt.setScrollFactor(0);\n    txt.setShadow(-1, 1);\n  };\n  const fontStyle = {\n    fontFamily: \"Emulogic\",\n    fontSize: \"8px\",\n    fill: \"#aee0c8\",\n    fontWeight: \"regular\",\n  };\n\n  const CONTAINER_TOP = UI.tileToScreen(1);\n  const CONTAINER_LEFT = UI.tileToScreen(5);\n\n  const MARGIN_LEFT = UI.tileToScreen(1);\n  const LINE_HEIGHT = UI.tileToScreen(0.75);\n  const MENU_OPTIONS_TOP = UI.tileToScreen(7);\n\n  return (\n    <Container x={CONTAINER_LEFT} y={CONTAINER_TOP}>\n      <Text\n        x={MARGIN_LEFT}\n        y={0}\n        setStyle={fontStyle}\n        addedToScene={formatFont}\n      >\n        {`KI - ${translate('menu.main.chamber')} ${sceneProps?.level.replace('level_', '')} -`}\n      </Text>\n      {showRowScore > 0 && (\n        <Fragment key=\"gems_score\">\n          <Text\n            x={MARGIN_LEFT}\n            y={LINE_HEIGHT * 2}\n            setStyle={fontStyle}\n            alpha={\n              sceneProps?.collectedDiamonds < sceneProps?.countDiamonds ? 0.8 : 1\n            }\n            addedToScene={formatFont}\n          >\n            {translate('menu.main.score_gems')}\n          </Text>\n          <Text\n            x={MARGIN_LEFT + UI.tileToScreen(6)}\n            y={LINE_HEIGHT * 2}\n            setStyle={fontStyle}\n            alpha={\n              sceneProps?.collectedDiamonds < sceneProps?.countDiamonds ? 0.8 : 1\n            }\n            addedToScene={formatFont}\n          >\n            {formatScore(sceneProps?.collectedDiamonds, sceneProps?.countDiamonds)}\n          </Text>\n        </Fragment>\n      )}\n      {showRowScore > 1 && (\n        <Fragment key=\"enemies_score\">\n          <Text\n            x={MARGIN_LEFT}\n            y={LINE_HEIGHT * 3}\n            setStyle={fontStyle}\n            alpha={sceneProps?.killedEnemies < sceneProps?.countEnemies ? 0.8 : 1}\n            addedToScene={formatFont}\n          >\n            {translate('menu.main.score_enemies')}\n          </Text>\n          <Text\n            x={MARGIN_LEFT + UI.tileToScreen(6)}\n            y={LINE_HEIGHT * 3}\n            setStyle={fontStyle}\n            alpha={sceneProps?.killedEnemies < sceneProps?.countEnemies ? 0.8 : 1}\n            addedToScene={formatFont}\n          >\n            {formatScore(sceneProps?.killedEnemies, sceneProps?.countEnemies)}\n          </Text>\n        </Fragment>\n      )}\n      {showRowScore > 2 && (\n        <Fragment key=\"shrooms_score\">\n          <Text\n            x={MARGIN_LEFT}\n            y={LINE_HEIGHT * 4}\n            setStyle={fontStyle}\n            alpha={sceneProps?.collectedShrooms < sceneProps?.countShrooms ? 0.8 : 1}\n            addedToScene={formatFont}\n          >\n            {translate('menu.main.score_shrooms')}\n          </Text>\n          <Text\n            x={MARGIN_LEFT + UI.tileToScreen(6)}\n            y={LINE_HEIGHT * 4}\n            setStyle={fontStyle}\n            alpha={sceneProps?.collectedShrooms < sceneProps?.countShrooms ? 0.8 : 1}\n            addedToScene={formatFont}\n          >\n            {formatScore(sceneProps?.collectedShrooms, sceneProps?.countShrooms)}\n          </Text>\n        </Fragment>\n      )}\n\n      <Text\n        x={MARGIN_LEFT}\n        y={LINE_HEIGHT * 4.75}\n        setStyle={fontStyle}\n        addedToScene={formatFont}\n      >\n        --------------------\n      </Text>\n      {showRowScore > 3 && (\n        <Fragment key=\"total_score\">\n          <Text\n            x={MARGIN_LEFT}\n            y={LINE_HEIGHT * 5.5}\n            setStyle={fontStyle}\n            alpha={sceneProps?.comp <= sceneProps?.prevBest ? 0.8 : 1}\n            addedToScene={formatFont}\n          >\n            {translate('menu.main.score_comp')}\n          </Text>\n          <Text\n            x={MARGIN_LEFT + UI.tileToScreen(6)}\n            y={LINE_HEIGHT * 5.5}\n            setStyle={fontStyle}\n            alpha={sceneProps?.comp <= sceneProps?.prevBest ? 0.8 : 1}\n            addedToScene={formatFont}\n          >\n            {formatComp(sceneProps?.comp)}\n          </Text>\n        </Fragment>\n      )}\n      {showRowScore > 4 && (\n        <Fragment key=\"best_score\">\n          <Text\n            x={MARGIN_LEFT}\n            y={LINE_HEIGHT * 6.5}\n            setStyle={{\n              ...fontStyle,\n              fill: sceneProps?.prevBest >= sceneProps?.comp ? \"#aee0c8\" : \"#ffd700\",\n            }}\n            addedToScene={formatFont}\n          >\n            {translate('menu.main.score_best')}\n          </Text>\n          <Text\n            x={MARGIN_LEFT + UI.tileToScreen(6)}\n            y={LINE_HEIGHT * 6.5}\n            setStyle={{\n              ...fontStyle,\n              fill: sceneProps?.prevBest >= sceneProps?.comp ? \"#aee0c8\" : \"#ffd700\",\n            }}\n            addedToScene={formatFont}\n          >\n            {formatComp(Math.max(sceneProps?.prevBest, sceneProps?.comp))}\n          </Text>\n        </Fragment>\n      )}\n      {options.map((label, idx) => (\n        <Fragment key={`row_${idx}`}>\n          {selIndex === idx && (\n            <Sprite\n              args={[100, 100, \"arrow\"]}\n              x={MARGIN_LEFT - UI.tileToScreen(1.3)}\n              y={MENU_OPTIONS_TOP + LINE_HEIGHT * idx + UI.tileToScreen(0.15)}\n              addedToScene={(el) =>\n                el\n                  .play(\"arrow_menu\")\n                  .setRotation(-Math.PI / 2)\n                  .setScale(SCALE)\n                  .setOrigin(0.5, 0)\n              }\n            />\n          )}\n          <Text\n            alpha={selIndex === idx ? 1 : 0.5}\n            args={[\n              MARGIN_LEFT,\n              MENU_OPTIONS_TOP + LINE_HEIGHT * idx,\n              label,\n              {\n                fontFamily: \"Emulogic\",\n                fontSize: \"8px\",\n                fill: \"#aee0c8\",\n                fontWeight: \"regular\",\n              },\n            ]}\n            addedToScene={formatFont}\n          />\n        </Fragment>\n      ))}\n    </Container>\n  );\n};\n\nexport default OptionsScene;\n","import CRTFilter from '../../utils/CRTShaderFX'\n\nconst config = {\n  preload() {\n    // this is scene binded by RPF\n    this.load.spritesheet(\n      \"hud\",\n      process.env.PUBLIC_URL + \"/assets/tilemaps/hud_tilemap_20x20.png\",\n      { frameWidth: 20, frameHeight: 20, margin: 1, sapcing: 2 }\n    );\n  },\n  create() {\n    this.cameras.main.setPostPipeline(CRTFilter);\n  }\n};\n\nexport default config\n","import Phaser from \"phaser\";\n\nconst fragShader = `\nprecision mediump float;\n\nuniform sampler2D uMainSampler[%count%];\nuniform float gray;\n\nvarying vec2 outTexCoord;\nvarying float outTexId;\nvarying vec4 outTint;\nvarying vec2 fragCoord;\n\nvoid main()\n{\n    vec4 texture;\n\n    %forloop%\n\n    gl_FragColor = texture;\n    gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126 * gl_FragColor.r + 0.7152 * gl_FragColor.g + 0.0722 * gl_FragColor.b), gray);\n}\n`;\n\nexport default class GrayScalePipeline extends Phaser.Renderer.WebGL.Pipelines.MultiPipeline {\n  constructor(game) {\n    super({\n      game,\n      fragShader,\n      uniforms: [\"uProjectionMatrix\", \"uMainSampler\", \"gray\"],\n    });\n\n    this._gray = 0;\n  }\n\n  onPreRender() {\n    this.set1f(\"gray\", this._gray);\n  }\n\n  get gray() {\n    return this._gray;\n  }\n\n  set gray(value) {\n    this._gray = value;\n  }\n}\n","import { useEffect, useState } from \"react\";\nimport usePhaser from \"../hooks/usePhaser\";\n\nconst Scene = ({ name, children }) => {\n  const [isActive, setActive] = useState(false);\n  const { game, scene } = usePhaser();\n  \n  useEffect(() => {\n    if (game?.scene.isActive(name) && scene) {\n      setActive(true);\n    }\n  }, [game, name, scene]);\n\n  return isActive ? children : null;\n};\n\nexport default Scene;\n","import Phaser from \"phaser\";\nimport Canvas from \"./libs/react-phaser-fiber/components/Canvas\";\nimport LandingScene from \"./scenes/LandingScene\";\nimport MenuScene from \"./scenes/MenuScene\";\nimport IntroScene from \"./scenes/IntroScene\";\nimport GameScene from \"./scenes/GameScene\";\nimport ConnectorScene from \"./scenes/ConnectorScene\";\nimport CreditsScene from \"./scenes/CreditsScene\";\nimport ConfirmNewGameScene from \"./scenes/ConfirmNewGameScene\";\nimport LevelResumeMenu from './scenes/LevelResumeScene/LevelResumeMenu'\nimport LevelResumeSceneConfig from './scenes/LevelResumeScene/config'\nimport CRTFilter from \"./utils/CRTShaderFX\";\nimport GrayScalePipeline from \"./utils/GrayScalePipeline\"\nimport { setI18nConfig } from \"./utils/localization\";\nimport { useEffect, useState } from \"react\";\nimport FadePlugin from \"phaser3-rex-plugins/plugins/fade-plugin.js\";\nimport FlashPlugin from \"phaser3-rex-plugins/plugins/flash-plugin.js\";\nimport Scene from \"./libs/react-phaser-fiber/components/Scene\";\n\nconst gameConfig = {\n  width: \"100%\",\n  height: \"100%\",\n  type: Phaser.WEBGL,\n  backgroundColor: \"#000000\",\n  disableContextMenu: true,\n  pixelArt: true,\n  roundPixels: false,\n  scene: [\n    LandingScene,\n    MenuScene,\n    IntroScene,\n    GameScene,\n    ConnectorScene,\n    CreditsScene,\n    ConfirmNewGameScene,\n  ],\n  pipeline: { CRTFilter, 'Gray': GrayScalePipeline, 'GrayAlt': GrayScalePipeline },\n  plugins: {\n    global: [\n      {\n        key: \"rexFade\",\n        plugin: FadePlugin,\n        start: true,\n      },\n      {\n        key: \"rexFlash\",\n        plugin: FlashPlugin,\n        start: true,\n      },\n    ],\n  },\n};\n\n\nfunction Game() {\n  const [ready, setReady] = useState();\n  useEffect(() => {\n    setI18nConfig(() => setReady(true));\n  }, []);\n  return ready ? (\n    <Canvas args={gameConfig}>\n      <Scene name=\"LevelResumeScene\" args={LevelResumeSceneConfig}>\n        <LevelResumeMenu />\n      </Scene>\n    </Canvas>\n  ) : null;\n}\n\nexport default Game;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Game from './Game';\nimport reportWebVitals from './reportWebVitals';\nimport config from '../package.json'\nReactDOM.render(\n  <React.StrictMode>\n    <Game />\n    <div style={{\n      position: 'absolute',\n      bottom: 0,\n      right: 0,\n      fontSize: 10,\n      color: 'gray'\n    }}>v{config.version}</div>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}