(this.webpackJsonplostcartridgejam3=this.webpackJsonplostcartridgejam3||[]).push([[0],{14:function(e){e.exports=JSON.parse('{"name":"lostcartridgejam3","version":"0.2.0","private":true,"homepage":"https://cosmitar.github.io/lostcartridgejam3Game","dependencies":{"@testing-library/jest-dom":"^5.11.4","@testing-library/react":"^11.1.0","@testing-library/user-event":"^12.1.10","gh-pages":"^3.2.3","phaser":"^3.55.2","react":"^17.0.2","react-dom":"^17.0.2","react-scripts":"4.0.3","web-vitals":"^1.0.1"},"scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","predeploy":"npm run build","deploy":"gh-pages -b master -r https://github.com/Cosmitar/lostcartridgejam3Game.git -d build"},"eslintConfig":{"extends":["react-app","react-app/jest"]},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]}}')},19:function(e,t,i){},22:function(e,t,i){"use strict";i.r(t);var a,s,n,o=i(7),r=i.n(o),l=i(13),c=i.n(l),u=(i(19),i(4)),h=i.n(u),m=i(11),d=i(8),p=Object(o.createContext)(),v=function(e){var t=e.game,i=e.children,a=Object(o.useState)(),s=Object(m.a)(a,2),n=s[0],r=s[1];return Object(o.useEffect)((function(){r(!!t)}),[t]),Object(d.jsx)(p.Provider,{value:{game:t},children:n?i:null})},f=Object(o.forwardRef)((function(e,t){var i=e.args,a=e.children,s=Object(o.useRef)(),n=t||s,r=Object(o.useState)(),l=Object(m.a)(r,2),c=l[0],u=l[1],p=Object(o.useState)(),f=Object(m.a)(p,2),y=f[0],g=f[1];return i.callbacks={postBoot:function(e){u(e),e.scene.scenes[0].events.once(h.a.Scenes.Events.PRE_RENDER,(function(t){e.scene.scenes[0].load.on(h.a.Loader.Events.COMPLETE,(function(){return g(!0)}))}))}},Object(o.useEffect)((function(){var e=new h.a.Game(i);n.current=e}),[]),y?Object(d.jsx)(v,{game:c,children:a}):null})),y=i(0),g=i(1),b=i(3),T=i(2),k=i(10),w=250,_=Math.round(window.innerWidth/20*100/20/100*100)/100,A={EMPTY:"000000",PLAYER:"ff00ff",GROUND:"663300",BOULDER:"999999",WALL:"0000ff",ENEMY:"ff0000",JEWEL:"ffff00",BARREL:"00ffff",EXPLOSION:"ffffff",INTERACTION:"00ff00",MUSHROOM:"9900ff"},x={DOWN:"ArrowDown",UP:"ArrowUp",LEFT:"ArrowLeft",RIGHT:"ArrowRight"},j=(a={},Object(k.a)(a,A.EMPTY,0),Object(k.a)(a,A.WALL,1),Object(k.a)(a,A.GROUND,2),Object(k.a)(a,"calculateWallTileWithNeighbours",(function(e,t,i){var a=(i[e]||[])[t-1]===A.WALL?"W":"-",s=(i[e-1]||[])[t]===A.WALL?"N":"-",n=(i[e]||[])[t+1]===A.WALL?"E":"-",o=(i[e+1]||[])[t]===A.WALL?"S":"-";switch("".concat(s).concat(n).concat(o).concat(a)){case"----":default:return 3;case"NESW":return 31;case"N---":return 40;case"-E--":return 26;case"--S-":return 18;case"---W":return 28;case"NE--":return 41;case"-ES-":return 19;case"--SW":return 21;case"N--W":return 43;case"NES-":return 30;case"-ESW":return 20;case"N-SW":return 32;case"NE-W":return 42;case"N-S-":return 29;case"-E-W":return 27}})),Object(k.a)(a,"calculateWallTileWithNeighboursDirtEarth",(function(e,t,i){var a=(i[e]||[])[t-1]===A.WALL?"W":"-",s=(i[e-1]||[])[t]===A.WALL?"N":"-",n=(i[e]||[])[t+1]===A.WALL?"E":"-",o=(i[e+1]||[])[t]===A.WALL?"S":"-";switch("".concat(s).concat(n).concat(o).concat(a)){case"----":default:return 1;case"NESW":return 23;case"N---":return 36;case"-E--":return 15;case"--S-":return 14;case"---W":return 17;case"NE--":return 33;case"-ES-":return 11;case"--SW":return 13;case"N--W":return 35;case"NES-":return 22;case"-ESW":return 12;case"N-SW":return 24;case"NE-W":return 34;case"N-S-":return 25;case"-E-W":return 16}})),a),O=function(e){Object(b.a)(i,e);var t=Object(T.a)(i);function i(e){var a;return Object(y.a)(this,i),(a=t.call(this,{game:e,renderTarget:!0,fragShader:"\n  #ifdef GL_ES\n      precision highp float;\n  #endif\n\n  #define PI 3.1415926538\n\n  // Samplers\n  varying vec2 outTexCoord;\n  uniform sampler2D uMainSampler;\n\n  // Parameters\n  uniform vec2 curvature;\n  uniform vec2 screenResolution;\n  uniform vec2 scanLineOpacity;\n  uniform float vignetteOpacity;\n  uniform float brightness;\n  uniform float vignetteRoundness;\n\n\n  vec2 curveRemapUV(vec2 uv)\n  {\n      // as we near the edge of our screen apply greater distortion using a sinusoid.\n\n      uv = uv * 2.0 - 1.0;\n  vec2 offset = abs(uv.yx) / vec2(curvature.x, curvature.y);\n  uv = uv + uv * offset * offset;\n  uv = uv * 0.5 + 0.5;\n      return uv;\n  }\n\n  vec4 scanLineIntensity(float uv, float resolution, float opacity)\n  {\n      float intensity = sin(uv * resolution * PI * 2.0);\n      intensity = ((0.5 * intensity) + 0.5) * 0.9 + 0.1;\n      return vec4(vec3(pow(intensity, opacity)), 1.0);\n  }\n\n  vec4 vignetteIntensity(vec2 uv, vec2 resolution, float opacity, float roundness)\n  {\n      float intensity = uv.x * uv.y * (1.0 - uv.x) * (1.0 - uv.y);\n      return vec4(vec3(clamp(pow((resolution.x / roundness) * intensity, opacity), 0.0, 1.0)), 1.0);\n  }\n\n  void main(void) \n  {\n      vec2 remappedUV = curveRemapUV(vec2(outTexCoord.x, outTexCoord.y));\n      vec4 baseColor = texture2D(uMainSampler, remappedUV);\n\n      baseColor *= vignetteIntensity(remappedUV, screenResolution, vignetteOpacity, vignetteRoundness);\n\n      baseColor *= scanLineIntensity(remappedUV.x, screenResolution.y, scanLineOpacity.x);\n      baseColor *= scanLineIntensity(remappedUV.y, screenResolution.x, scanLineOpacity.y);\n\n      baseColor *= vec4(vec3(brightness), 1.0);\n\n      if (remappedUV.x < 0.0 || remappedUV.y < 0.0 || remappedUV.x > 1.0 || remappedUV.y > 1.0){\n          gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n      } else {\n          gl_FragColor = baseColor;\n      }\n  }\n",uniforms:["uMainSampler","curvature","screenResolution","scanLineOpacity","vignetteOpacity","brightness","vignetteRoundness"]})).set2f("curvature",6,6),a.set2f("screenResolution",320,240),a.set2f("scanLineOpacity",.5,.5),a.set1f("vignetteOpacity",.5),a.set1f("vignetteRoundness",1),a.set1f("brightness",1.5),a}return Object(g.a)(i,[{key:"onPreRender",value:function(){}}]),i}(h.a.Renderer.WebGL.Pipelines.PostFXPipeline),S=function(e){Object(b.a)(i,e);var t=Object(T.a)(i);function i(){return Object(y.a)(this,i),t.call(this,"MenuScene")}return Object(g.a)(i,[{key:"preload",value:function(){this.add.text(80*_,121*_+20*_,"LOADING.... PLEASE WAIT",{fontFamily:"GameGirl",fontSize:"10px",fill:"#ffffff"}).setScale(_),this.load.script("webfont","https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js"),this.load.image("main-tiles","/lostcartridgejam3Game/assets/tilemaps/tilemap_20x20.png"),this.load.image("hud-tiles","/lostcartridgejam3Game/assets/tilemaps/hud_tilemap_20x20.png"),this.load.image("_level_2","/lostcartridgejam3Game/assets/maps/test.png"),this.load.image("level_1","/lostcartridgejam3Game/assets/maps/level_1.png"),this.load.image("level_2","/lostcartridgejam3Game/assets/maps/level_2.png"),this.load.image("level_3","/lostcartridgejam3Game/assets/maps/level_3.png"),this.load.image("level_4","/lostcartridgejam3Game/assets/maps/level_4.png"),this.load.image("level_5","/lostcartridgejam3Game/assets/maps/level_5.png"),this.load.image("level_6","/lostcartridgejam3Game/assets/maps/level_6.png"),this.load.image("Prologue","/lostcartridgejam3Game/assets/images/Prologue.png"),this.load.image("thechild","/lostcartridgejam3Game/assets/images/thechild.png"),this.load.image("theworld","/lostcartridgejam3Game/assets/images/theworld.png"),this.load.image("Tiamat","/lostcartridgejam3Game/assets/images/Tiamat.png"),this.load.image("Bossfight","/lostcartridgejam3Game/assets/images/Bossfight.png"),this.load.image("Bossfighthands","/lostcartridgejam3Game/assets/images/Bossfighthands.png"),this.load.spritesheet("boulder","/lostcartridgejam3Game/assets/sprites/boulder_sprite.png",{frameWidth:26,frameHeight:26}),this.load.spritesheet("brave","/lostcartridgejam3Game/assets/sprites/brave_sprite.png",{frameWidth:26,frameHeight:26}),this.load.spritesheet("bat","/lostcartridgejam3Game/assets/sprites/bat_sprite.png",{frameWidth:26,frameHeight:26}),this.load.spritesheet("pickables","/lostcartridgejam3Game/assets/sprites/pickables_sprite.png",{frameWidth:26,frameHeight:26}),this.load.spritesheet("closeUp","/lostcartridgejam3Game/assets/sprites/close_up_sprite.png",{frameWidth:26,frameHeight:26}),this.load.audio("credits","/lostcartridgejam3Game/assets/audio/Score/Opening Credits_.mp3"),this.load.audio("opening_peace","/lostcartridgejam3Game/assets/audio/Score/NormalDay.mp3"),this.load.audio("opening_quakes","/lostcartridgejam3Game/assets/audio/Score/Earthquakes+Tiamat.mp3"),this.load.audio("credits","/lostcartridgejam3Game/assets/audio/Score/NormalDay.mp3"),this.load.audio("levels_surface","/lostcartridgejam3Game/assets/audio/Score/1st 7 Levels.mp3"),this.load.audio("swarf_chat_music","/lostcartridgejam3Game/assets/audio/Score/MushroomDwarfDialogue(loop).mp3"),this.load.audio("generic_chat_music","/lostcartridgejam3Game/assets/audio/Score/GenericDialogue(loop).mp3"),this.load.audio("escape_music","/lostcartridgejam3Game/assets/audio/Score/BossBattle_EscapeTheVoid!(loop).mp3"),this.load.audio("rock_hit","/lostcartridgejam3Game/assets/audio/SFX/RockHit.mp3"),this.load.audio("rock_hit2","/lostcartridgejam3Game/assets/audio/SFX/RockHit2.mp3"),this.load.audio("rock_hit3","/lostcartridgejam3Game/assets/audio/SFX/RockHit3.wav"),this.load.audio("clear_hit1","/lostcartridgejam3Game/assets/audio/SFX/PickaxeClearingGround1.mp3"),this.load.audio("clear_hit2","/lostcartridgejam3Game/assets/audio/SFX/PickaxeClearingGround2.mp3"),this.load.audio("clear_hit3","/lostcartridgejam3Game/assets/audio/SFX/PickaxeClearingGround3.mp3"),this.load.audio("gem_hit","/lostcartridgejam3Game/assets/audio/SFX/GemHitRock.mp3"),this.load.audio("shroom_pick","/lostcartridgejam3Game/assets/audio/SFX/MushroomPickUp.mp3"),this.load.audio("gem_pick","/lostcartridgejam3Game/assets/audio/SFX/DiamondPickUp.mp3"),this.load.audio("death_by_rock","/lostcartridgejam3Game/assets/audio/SFX/DeathByRock.mp3"),this.load.audio("level_complete","/lostcartridgejam3Game/assets/audio/SFX/Level Finish.mp3"),this.load.audio("earthquake","/lostcartridgejam3Game/assets/audio/SFX/Earthquake.mp3")}},{key:"navigateToScene",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.cameras.main.fade(500,0,0,0),this.tweens.add({targets:s,volume:0,ease:"Linear",duration:500,onComplete:function(){s.pause(),t.scene.start(e,i)}})}},{key:"create",value:function(){var e=this;this.cameras.main.setPostPipeline(O),this.cameras.main.setBackgroundColor("#486859");var t=this.add.image(this.cameras.main.width/2,this.cameras.main.height/3,"Bossfight"),i=this.cameras.main.width/t.width,a=this.cameras.main.height/t.height,n=Math.max(i,a);t.setScale(1.5*n).setScrollFactor(0),t.name="background_art",window.WebFont.load({custom:{families:["GameGirl"]},active:function(){e.cameras.main.fadeIn(500,0,0,0),e.events.emit("scene_ready",e.sys.config),(s=e.sound.add("credits",{loop:!0})).play();var t=0,i=e.add.graphics({fillStyle:{color:16777215,alpha:1}});i.fillTriangle(0,0,5,5,0,10).setPosition(70*_,20*_),i.setScale(_);var a=[{label:"New Game",disabled:!1,onSelect:function(){return e.navigateToScene("IntroScene")}},{label:"Level 1",disabled:!1,onSelect:function(){return e.navigateToScene("GameScene",{level:1})}},{label:"Level 2",disabled:!1,onSelect:function(){return e.navigateToScene("GameScene",{level:3})}},{label:"Level 3",disabled:!1,onSelect:function(){return e.navigateToScene("GameScene",{level:4})}},{label:"Level 4",disabled:!1,onSelect:function(){return e.navigateToScene("GameScene",{level:5})}},{label:"Level 5",disabled:!1,onSelect:function(){return e.navigateToScene("GameScene",{level:6})}},{label:"Level 6",disabled:!1,onSelect:function(){return e.navigateToScene("GameScene",{level:8})}}];a.forEach((function(t,i){var a=e.add.text(80*_,(12*i+1)*_+20*_,t.label,{fontFamily:"GameGirl",fontSize:"10px",fill:"#ffffff"}).setVisible(!t.disabled);a.displayHeight=10*_,a.setScale(_)})),e.input.keyboard.on("keydown",(function(e){var s=!1;"ArrowUp"===e.key&&(s=t>0?t-1:a.length-1),"ArrowDown"===e.key&&(s=t<a.length-1?t+1:0),!1===s||a[s].disabled||(i.setPosition(70*_,(12*s+2)*_+20*_),t=s),"Enter"===e.key&&(a[t].disabled||a[t].onSelect())}))}})}}]),i}(h.a.Scene),M={},N=function(){function e(t,i){var a=this;Object(y.a)(this,e),this.scene=t,this.scene.events.off("game_paused"),this.scene.events.on("game_paused",(function(){return a.showPauseMenu()})),this.scene.events.off("game_resumed"),this.scene.events.on("game_resumed",(function(){return a.hidePauseMenu()}));var s=[this.scene.sound.add("rock_hit"),this.scene.sound.add("rock_hit2"),this.scene.sound.add("rock_hit3")];this.scene.events.off("sounds:rock_hit"),this.scene.events.on("sounds:rock_hit",(function(){return s[Math.floor(10*Math.random())%3].play()}));var o=this.scene.sound.add("gem_hit");this.scene.events.off("sounds:gem_hit"),this.scene.events.on("sounds:gem_hit",(function(){return o.play()}));var r=this.scene.sound.add("shroom_pick");this.scene.events.off("sounds:shroom_pick"),this.scene.events.on("sounds:shroom_pick",(function(){return r.play()}));var l=this.scene.sound.add("gem_pick");this.scene.events.off("sounds:gem_pick"),this.scene.events.on("sounds:gem_pick",(function(){return l.play()}));var c=[this.scene.sound.add("clear_hit1"),this.scene.sound.add("clear_hit2"),this.scene.sound.add("clear_hit3")];this.scene.events.off("sounds:clear_hit"),this.scene.events.on("sounds:clear_hit",(function(){return c[Math.floor(10*Math.random())%3].play()}));var u=this.scene.sound.add("death_by_rock");this.scene.events.once("sounds:death_by_rock_hit",(function(){return u.play()}));var h=this.scene.sound.add("level_complete");this.scene.events.off("sounds:level_complete"),this.scene.events.on("sounds:level_complete",(function(){return h.play()})),i||this.drawScores(),this.scene.events.off("dialogue:show"),this.scene.events.on("dialogue:show",(function(e){var t,i,s=e.participants,o=void 0===s?["closeUp_Mary","closeUp_Dwarf","closeUp_Marduk","closeUp_Tiamat"]:s,r=e.conversation,l=void 0===r?[{who:"closeUp_Mary",text:["abcdefghijklmnopqrstuvwx","Hi, I'm Mary","citizen of sumaria"]},{who:"closeUp_Marduk",text:["Hi, my name is marduk","I am a man","and I don\u2019t need your","help."]},{who:"closeUp_Dwarf",text:["Hello","you can Call Me M.D","The Medical Doctor and","Mushroom Dwarf!"]},{who:"closeUp_Tiamat",text:["you all know me","pray before you godess","<< tiamat >>."]}]:r;null===(t=a.scene.levels)||void 0===t||null===(i=t.current)||void 0===i||i.pause(),a.prepareHUD(o),a.prepareText();var c=a.scene.children.list.find((function(e){return"layer_hud"===e.name})).tilemap;c.layers[0].tilemapLayer.y=n.y=-c.tileToWorldY(5),a.scene.tweens.add({targets:[c.layers[0].tilemapLayer,n],y:c.tileToWorldY(9),duration:500,ease:"Cubic.Out",onComplete:function(){var e=l.shift(),t=function t(s){var n=a.scene.children.getByName("placeholder_text").text.length===e.text.join("\n").length;"Enter"===s.key&&n&&(l.length?(e=l.shift(),i(e)):(a.scene.events.emit("dialogue:hide"),a.scene.input.keyboard.removeListener("keydown",t)))},i=function(e){a.clearText(),a.writeText(e.text),l.length?a.showMoreIndicator():a.hideMoreIndicator(),Object.keys(M).forEach((function(t){t===e.who?M[t].clearTint():M[t].setTint(3355443)})),a.scene.input.keyboard.removeListener("keydown",t),a.scene.input.keyboard.addListener("keydown",t)};i(e)}})})),this.scene.events.off("dialogue:hide"),this.scene.events.on("dialogue:hide",(function(){var e=a.scene.children.list.find((function(e){return"layer_hud"===e.name})).tilemap;a.clearText(),a.scene.tweens.add({targets:[e.layers[0].tilemapLayer,n],y:-e.tileToWorldY(5),duration:500,ease:"Back.In",onComplete:function(){var e,t;null===(e=a.scene.levels)||void 0===e||null===(t=e.current)||void 0===t||t.resume()}})}))}return Object(g.a)(e,[{key:"showMoreIndicator",value:function(){this.scene.children.list.find((function(e){return"layer_hud"===e.name})).tilemap.putTileAt(66,15,6)}},{key:"hideMoreIndicator",value:function(){this.scene.children.list.find((function(e){return"layer_hud"===e.name})).tilemap.putTileAt(67,15,6)}},{key:"prepareText",value:function(){var e=this.scene.children.list.find((function(e){return"layer_hud"===e.name})).tilemap,t=10*_,i=this.scene.add.text(e.tileToWorldX(4)-t,e.tileToWorldY(5)-t," ",{fontFamily:"GameGirl",fontSize:"90px",fill:"#ffffff"});i.displayHeight=10*_,i.displayWidth=10*_,i.name="placeholder_text",i.depth=10}},{key:"writeText",value:function(e){var t,i=this,a=this.scene.children.getByName("placeholder_text"),s=e.join("\n"),n=function(){clearTimeout(t),o(s.length)},o=function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=s.substr(0,i);s=s.substr(i),a.setText(a.text+n),s.length&&(t=setTimeout((function(){return e(1)}),[".","!","?"].includes(n)?500:50))};o(),setTimeout((function(){return i.scene.input.keyboard.once("keyup",n)}),500)}},{key:"clearText",value:function(){this.scene.children.getByName("placeholder_text").text=""}},{key:"destroy",value:function(){this.mushroomsScore.destroy(),this.diamondsScore.destroy(),this.scene.events.off("score:diamond_collected"),this.scene.events.off("score:mushroom_collected")}},{key:"prepareHUD",value:function(e){var t=this.scene.children.getByName("layer_hud");t&&t.destroy();var i,a,s=this.scene.make.tilemap({tileWidth:20,tileHeight:20,width:20,height:20}),o=s.addTilesetImage("hud-tiles","hud-tiles",20,20,1,2),r=s.createBlankLayer("layer_hud",o);switch(r.name="layer_hud",r.depth=5,r.setScrollFactor(0),r.setScale(_),(n=this.scene.add.container(0,0)).depth=10,e.length){case 2:e[1]&&(i=e[1],(a=this.scene.add.sprite(0,0).play(i).setOrigin(0,.25).setScale(1.5*_)).name="".concat(i,"_tn_to_remove"),a.x=s.tileToWorldX(17)+10*_,a.y=s.tileToWorldY(3)+2*_,a.setFlipX(!0),n.add(a),M[i]=a),s.putTileAt(0,17,2),s.putTileAt(1,18,2),s.putTileAt(2,19,2),s.putTileAt(11,17,3),s.putTileAt(12,18,3),s.putTileAt(13,19,3),s.putTileAt(22,17,4),s.putTileAt(23,18,4),s.putTileAt(24,19,4);case 1:e[0]&&(i=e[0],(a=this.scene.add.sprite(0,0).play(i).setOrigin(0,.25).setScale(1.5*_)).name="".concat(i,"_tn_to_remove"),a.x=s.tileToWorldX(0)+12*_,a.y=s.tileToWorldY(3)+2*_,n.add(a),M[i]=a),s.putTileAt(0,0,2),s.putTileAt(1,1,2),s.putTileAt(2,2,2),s.putTileAt(11,0,3),s.putTileAt(12,1,3),s.putTileAt(13,2,3),s.putTileAt(22,0,4),s.putTileAt(23,1,4),s.putTileAt(24,2,4);break;case 4:e[3]&&(i=e[3],(a=this.scene.add.sprite(0,0).play(i).setOrigin(0,.25).setScale(1.5*_)).name="".concat(i,"_tn_to_remove"),a.x=s.tileToWorldX(17)+10*_,a.y=s.tileToWorldY(5)+2*_,a.setFlipX(!0),n.add(a),M[i]=a),s.putTileAt(0,17,4),s.putTileAt(1,18,4),s.putTileAt(2,19,4),s.putTileAt(11,17,5),s.putTileAt(12,18,5),s.putTileAt(13,19,5),s.putTileAt(22,17,6),s.putTileAt(23,18,6),s.putTileAt(24,19,6);case 3:e[0]&&(i=e[0],(a=this.scene.add.sprite(0,0).play(i).setOrigin(0,.25).setScale(1.5*_)).name="".concat(i,"_tn_to_remove"),a.x=s.tileToWorldX(0)+12*_,a.y=s.tileToWorldY(1)+2*_,n.add(a),M[i]=a),s.putTileAt(0,0,0),s.putTileAt(1,1,0),s.putTileAt(2,2,0),s.putTileAt(11,0,1),s.putTileAt(12,1,1),s.putTileAt(13,2,1),s.putTileAt(22,0,2),s.putTileAt(23,1,2),s.putTileAt(24,2,2),e[2]&&(i=e[2],(a=this.scene.add.sprite(0,0).play(i).setOrigin(0,.25).setScale(1.5*_)).name="".concat(i,"_tn_to_remove"),a.x=s.tileToWorldX(0)+12*_,a.y=s.tileToWorldY(5)+2*_,n.add(a),M[i]=a),s.putTileAt(0,0,4),s.putTileAt(1,1,4),s.putTileAt(2,2,4),s.putTileAt(11,0,5),s.putTileAt(12,1,5),s.putTileAt(13,2,5),s.putTileAt(22,0,6),s.putTileAt(23,1,6),s.putTileAt(24,2,6),e[1]&&(i=e[1],(a=this.scene.add.sprite(0,0).play(i).setOrigin(0,.25).setScale(1.5*_)).name="".concat(i,"_tn_to_remove"),a.x=s.tileToWorldX(17)+10*_,a.y=s.tileToWorldY(1)+2*_,a.setFlipX(!0),n.add(a),M[i]=a),s.putTileAt(0,17,0),s.putTileAt(1,18,0),s.putTileAt(2,19,0),s.putTileAt(11,17,1),s.putTileAt(12,18,1),s.putTileAt(13,19,1),s.putTileAt(22,17,2),s.putTileAt(23,18,2),s.putTileAt(24,19,2)}s.putTileAt(0,3,0),s.putTileAt(1,4,0),s.putTileAt(1,5,0),s.putTileAt(1,6,0),s.putTileAt(1,7,0),s.putTileAt(1,8,0),s.putTileAt(1,9,0),s.putTileAt(1,10,0),s.putTileAt(1,11,0),s.putTileAt(1,12,0),s.putTileAt(1,13,0),s.putTileAt(1,14,0),s.putTileAt(1,15,0),s.putTileAt(2,16,0),s.putTileAt(11,3,1),s.putTileAt(12,4,1),s.putTileAt(12,5,1),s.putTileAt(12,6,1),s.putTileAt(12,7,1),s.putTileAt(12,8,1),s.putTileAt(12,9,1),s.putTileAt(12,10,1),s.putTileAt(12,11,1),s.putTileAt(12,12,1),s.putTileAt(12,13,1),s.putTileAt(12,14,1),s.putTileAt(12,15,1),s.putTileAt(13,16,1),s.putTileAt(11,3,2),s.putTileAt(12,4,2),s.putTileAt(12,5,2),s.putTileAt(12,6,2),s.putTileAt(12,7,2),s.putTileAt(12,8,2),s.putTileAt(12,9,2),s.putTileAt(12,10,2),s.putTileAt(12,11,2),s.putTileAt(12,12,2),s.putTileAt(12,13,2),s.putTileAt(12,14,2),s.putTileAt(12,15,2),s.putTileAt(13,16,2),s.putTileAt(11,3,3),s.putTileAt(12,4,3),s.putTileAt(12,5,3),s.putTileAt(12,6,3),s.putTileAt(12,7,3),s.putTileAt(12,8,3),s.putTileAt(12,9,3),s.putTileAt(12,10,3),s.putTileAt(12,11,3),s.putTileAt(12,12,3),s.putTileAt(12,13,3),s.putTileAt(12,14,3),s.putTileAt(12,15,3),s.putTileAt(13,16,3),s.putTileAt(11,3,4),s.putTileAt(12,4,4),s.putTileAt(12,5,4),s.putTileAt(12,6,4),s.putTileAt(12,7,4),s.putTileAt(12,8,4),s.putTileAt(12,9,4),s.putTileAt(12,10,4),s.putTileAt(12,11,4),s.putTileAt(12,12,4),s.putTileAt(12,13,4),s.putTileAt(12,14,4),s.putTileAt(12,15,4),s.putTileAt(13,16,4),s.putTileAt(11,3,5),s.putTileAt(12,4,5),s.putTileAt(12,5,5),s.putTileAt(12,6,5),s.putTileAt(12,7,5),s.putTileAt(12,8,5),s.putTileAt(12,9,5),s.putTileAt(12,10,5),s.putTileAt(12,11,5),s.putTileAt(12,12,5),s.putTileAt(12,13,5),s.putTileAt(12,14,5),s.putTileAt(12,15,5),s.putTileAt(13,16,5),s.putTileAt(22,3,6),s.putTileAt(23,4,6),s.putTileAt(23,5,6),s.putTileAt(23,6,6),s.putTileAt(23,7,6),s.putTileAt(23,8,6),s.putTileAt(23,9,6),s.putTileAt(23,10,6),s.putTileAt(23,11,6),s.putTileAt(23,12,6),s.putTileAt(23,13,6),s.putTileAt(23,14,6),s.putTileAt(23,15,6),s.putTileAt(24,16,6)}},{key:"hidePauseMenu",value:function(){var e=this.scene.children.list.find((function(e){return"layer_pause_nenu"===e.name}));e&&e.setVisible(!1),this.scene.children.list.filter((function(e){return"menu_text"===e.name})).forEach((function(e){return e.destroy()})),this.scene.children.list.filter((function(e){return e.name.includes("_tn_to_remove")})).forEach((function(e){return e.destroy()}))}},{key:"drawScores",value:function(){var e=this,t=this.scene.make.tilemap({tileWidth:20,tileHeight:20,width:20,height:20});t.addTilesetImage("hud-tiles","hud-tiles",20,20,1,2);var i=t.addTilesetImage("hud-tiles","hud-tiles",20,20,1,2),a=t.createBlankLayer("layer_scores",i);a.name="layer_scores",a.depth=5,a.setScrollFactor(0),a.setScale(_),t.putTileAt(3,0,0),t.putTileAt(4,1,0),t.putTileAt(5,2,0),t.putTileAt(14,0,1),t.putTileAt(15,1,1),t.putTileAt(16,2,1),t.putTileAt(3,17,0),t.putTileAt(4,18,0),t.putTileAt(5,19,0),t.putTileAt(14,17,1),t.putTileAt(15,18,1),t.putTileAt(16,19,1),this.pickaxeScore=window.localStorage.getItem("pickaxe");var s=this.scene.add.sprite(t.tileToWorldX(9)+10*_,t.tileToWorldY(0)+10*_).play("closeUp_Pickaxe").setOrigin(.1,.15).setScale(_);s.depth=6,s.setScrollFactor(0),s.setVisible("true"===this.pickaxeScore);var n=this.scene.add.sprite(t.tileToWorldX(17)+3*_*1.5,t.tileToWorldY(0)+5*_).play("closeUp_Mushroom").setOrigin(.1,.15).setScale(1.5*_);n.depth=6,n.setScrollFactor(0);var o=window.localStorage.getItem("shrooms")||"0";this.mushroomsScore=this.scene.add.text(t.tileToWorldX(19)+3*_*1.5-10*o.length*_+8*_,t.tileToWorldY(1),o,{fontFamily:"GameGirl",fontSize:"90px",fill:"#ffffff",align:"right"}),this.mushroomsScore.displayHeight=10*_,this.mushroomsScore.displayWidth=10*o.length*_,this.mushroomsScore.name="score_text_to_remove",this.mushroomsScore.depth=6,this.mushroomsScore.setScrollFactor(0);var r=this.scene.add.sprite(t.tileToWorldX(0)+3*_*1.5,t.tileToWorldY(0)+5*_).play("closeUp_Diamond").setOrigin(.1,.15).setScale(1.5*_);r.depth=6,r.setScrollFactor(0);var l=window.localStorage.getItem("diamonds")||"0";this.diamondsScore=this.scene.add.text(t.tileToWorldX(2)+3*_*1.5-10*l.length*_+8*_,t.tileToWorldY(1),l,{fontFamily:"GameGirl",fontSize:"90px",fill:"#ffffff",align:"right"}),this.diamondsScore.displayHeight=10*_,this.diamondsScore.displayWidth=10*l.length*_,this.diamondsScore.name="score_text_to_remove",this.diamondsScore.depth=6,this.diamondsScore.setScrollFactor(0),this.scene.events.on("score:mushroom_collected",(function(){e.scene.children.getByName("layer_scores").tilemap;var t=Number(window.localStorage.getItem("shrooms")||0)+1;window.localStorage.setItem("shrooms",t),e.mushroomsScore.setText(t)})),window.scene=this.scene,this.scene.events.on("score:diamond_collected",(function(){e.scene.children.getByName("layer_scores").tilemap;var t=Number(window.localStorage.getItem("diamonds")||0)+1;window.localStorage.setItem("diamonds",t),e.diamondsScore.setText(t)}))}},{key:"drawMenuOptions",value:function(e){var t=this,i=0,a=this.scene.add.graphics({fillStyle:{color:16777215,alpha:1}});a.fillTriangle(0,1,5,6,0,11).setPosition(e.tileToWorldX(4)-10*_,e.tileToWorldY(1)),a.setScale(_),a.depth=16,a.name="menu_text";var s=[{label:"Restart level",disabled:!1,onSelect:function(){return t.scene.levels.restart()}},{label:"Exit to menu",disabled:!1,onSelect:function(){return t.scene.scene.start("MenuScene")}}];s.forEach((function(i,a){i.label.split("").forEach((function(i,s){var n=t.scene.add.text(e.tileToWorldX(4+s)-10*s*_,e.tileToWorldY(1+a),i,{fontFamily:"GameGirl",fontSize:"90px",fill:"#ffffff"});n.displayHeight=10*_,n.displayWidth=10*_,n.depth=16,n.name="menu_text"}))}));this.scene.input.keyboard.once("keydown",(function n(o){var r=!1;"ArrowUp"===o.key&&(r=i>0?i-1:s.length-1),"ArrowDown"===o.key&&(r=i<s.length-1?i+1:0),!1!==r&&(a.setPosition(e.tileToWorldX(4)-10*_,e.tileToWorldY(r+1)),i=r),"Enter"===o.key?s[i].disabled||(t.hidePauseMenu(),t.scene.levels.current.isPaused&&s[i].onSelect()):t.scene.input.keyboard.once("keydown",n)}))}},{key:"showPauseMenu",value:function(){var e=this.scene.children.list.find((function(e){return"layer_pause_nenu"===e.name}));if(e)return e.setVisible(!0),this.drawMenuOptions(e.tilemap),!0;var t=this.scene.make.tilemap({tileWidth:20,tileHeight:20,width:20,height:20}),i=t.addTilesetImage("hud-tiles","hud-tiles",20,20,1,2),a=t.createBlankLayer("layer_pause_nenu",i);a.name="layer_pause_nenu",a.depth=15,a.setScrollFactor(0),a.setScale(_),t.putTileAt(0,3,0),t.putTileAt(1,4,0),t.putTileAt(1,5,0),t.putTileAt(1,6,0),t.putTileAt(1,7,0),t.putTileAt(1,8,0),t.putTileAt(1,9,0),t.putTileAt(1,10,0),t.putTileAt(1,11,0),t.putTileAt(1,12,0),t.putTileAt(1,13,0),t.putTileAt(1,14,0),t.putTileAt(1,15,0),t.putTileAt(2,16,0),t.putTileAt(11,3,1),t.putTileAt(12,4,1),t.putTileAt(12,5,1),t.putTileAt(12,6,1),t.putTileAt(12,7,1),t.putTileAt(12,8,1),t.putTileAt(12,9,1),t.putTileAt(12,10,1),t.putTileAt(12,11,1),t.putTileAt(12,12,1),t.putTileAt(12,13,1),t.putTileAt(12,14,1),t.putTileAt(12,15,1),t.putTileAt(13,16,1),t.putTileAt(11,3,2),t.putTileAt(12,4,2),t.putTileAt(12,5,2),t.putTileAt(12,6,2),t.putTileAt(12,7,2),t.putTileAt(12,8,2),t.putTileAt(12,9,2),t.putTileAt(12,10,2),t.putTileAt(12,11,2),t.putTileAt(12,12,2),t.putTileAt(12,13,2),t.putTileAt(12,14,2),t.putTileAt(12,15,2),t.putTileAt(13,16,2),t.putTileAt(11,3,3),t.putTileAt(12,4,3),t.putTileAt(12,5,3),t.putTileAt(12,6,3),t.putTileAt(12,7,3),t.putTileAt(12,8,3),t.putTileAt(12,9,3),t.putTileAt(12,10,3),t.putTileAt(12,11,3),t.putTileAt(12,12,3),t.putTileAt(12,13,3),t.putTileAt(12,14,3),t.putTileAt(12,15,3),t.putTileAt(13,16,3),t.putTileAt(11,3,4),t.putTileAt(12,4,4),t.putTileAt(12,5,4),t.putTileAt(12,6,4),t.putTileAt(12,7,4),t.putTileAt(12,8,4),t.putTileAt(12,9,4),t.putTileAt(12,10,4),t.putTileAt(12,11,4),t.putTileAt(12,12,4),t.putTileAt(12,13,4),t.putTileAt(12,14,4),t.putTileAt(12,15,4),t.putTileAt(13,16,4),t.putTileAt(11,3,5),t.putTileAt(12,4,5),t.putTileAt(12,5,5),t.putTileAt(12,6,5),t.putTileAt(12,7,5),t.putTileAt(12,8,5),t.putTileAt(12,9,5),t.putTileAt(12,10,5),t.putTileAt(12,11,5),t.putTileAt(12,12,5),t.putTileAt(12,13,5),t.putTileAt(12,14,5),t.putTileAt(12,15,5),t.putTileAt(13,16,5),t.putTileAt(22,3,6),t.putTileAt(23,4,6),t.putTileAt(23,5,6),t.putTileAt(23,6,6),t.putTileAt(23,7,6),t.putTileAt(23,8,6),t.putTileAt(23,9,6),t.putTileAt(23,10,6),t.putTileAt(23,11,6),t.putTileAt(23,12,6),t.putTileAt(23,13,6),t.putTileAt(23,14,6),t.putTileAt(23,15,6),t.putTileAt(24,16,6),this.drawMenuOptions(t)}}]),e}(),I=function(e){Object(b.a)(i,e);var t=Object(T.a)(i);function i(){return Object(y.a)(this,i),t.call(this,"IntroScene")}return Object(g.a)(i,[{key:"preload",value:function(){window.localStorage.setItem("diamonds",0),window.localStorage.setItem("shrooms",0),window.localStorage.setItem("level_1","false"),window.localStorage.setItem("level_2","false"),window.localStorage.setItem("level_3","false"),window.localStorage.setItem("level_4","false"),window.localStorage.setItem("level_5","false"),window.localStorage.setItem("level_6","false")}},{key:"createAnimations",value:function(){this.anims.create({key:"closeUp_Mary",frames:this.anims.generateFrameNumbers("closeUp",{frames:[0]}),repeat:0}),this.anims.create({key:"closeUp_Marduk",frames:this.anims.generateFrameNumbers("closeUp",{frames:[1]}),repeat:0}),this.anims.create({key:"closeUp_Dwarf",frames:this.anims.generateFrameNumbers("closeUp",{frames:[2]}),repeat:0}),this.anims.create({key:"closeUp_Tiamat",frames:this.anims.generateFrameNumbers("closeUp",{frames:[3]}),repeat:0}),this.anims.create({key:"closeUp_Pickaxe",frames:this.anims.generateFrameNumbers("closeUp",{frames:[4]}),repeat:0}),this.anims.create({key:"closeUp_Mushroom",frames:this.anims.generateFrameNumbers("closeUp",{frames:[5]}),repeat:0})}},{key:"create",value:function(){var e=this;this.createAnimations(),this.normalDayMusic=this.sound.add("opening_peace",{loop:!0}),this.normalDayMusic.play(),this.quakesMusic=this.sound.add("opening_quakes",{loop:!0});new N(this,!0);this.cameras.main.setPostPipeline(O);var t=this.add.image(this.cameras.main.width/2,this.cameras.main.height/2,"Prologue"),i=this.cameras.main.width/t.width,a=this.cameras.main.height/t.height,s=Math.max(i,a);t.setScale(1.5*s).setScrollFactor(0),t.name="background_art",this.tweens.add({targets:t,scale:s,duration:1e4,ease:"Linear"});var n=this.add.text(80,10,"",{fontFamily:"GameGirl",fontSize:"10px",fill:"#ffffff"}).setScale(.9*i).setPosition(2*i,this.cameras.main.height-40*a);n.displayHeight=10*a;var o=this.add.text(80,10,"",{fontFamily:"GameGirl",fontSize:"10px",fill:"#ffffff"}).setScale(.9*i).setPosition(2*i,this.cameras.main.height-30*a);o.displayHeight=10*a;var r=this.add.text(80,10,"",{fontFamily:"GameGirl",fontSize:"10px",fill:"#ffffff"}).setScale(.9*i).setPosition(2*i,this.cameras.main.height-20*a);r.displayHeight=10*a,n.alpha=o.alpha=r.alpha=0,n.setText("In the beginning: There was nothing,"),o.setText("except for the goddess tiamat"),this.tweens.add({targets:[n,o,r],alpha:1,duration:1e3}),setTimeout((function(){e.tweens.add({targets:[n,o,r],alpha:0,duration:1e3,onComplete:function(){n.setText("she formed the world as she pleased"),o.setText("Giving life to the sumarian people,"),r.setText("creating them in her image"),e.tweens.add({targets:[n,o,r],alpha:1,duration:1e3})}})}),8e3),setTimeout((function(){e.tweens.add({targets:[n,o,r],alpha:0,duration:1e3,onComplete:function(){n.setText("The ancient land of Sumaria. An"),o.setText("eternal paradise where immortal"),r.setText("beings live in infinite harmony"),e.tweens.add({targets:[n,o,r],alpha:1,duration:1e3,onComplete:function(){setTimeout((function(){e.tweens.add({targets:[n,o,r],alpha:0,duration:1e3,onComplete:function(){e.showFirstDialogs()}})}),8e3)}})}})}),16e3)}},{key:"showFirstDialogs",value:function(){var e=this;this.levels={current:{pause:function(){return!1},resume:function(){setTimeout((function(){e.showSecondDialogs()}),1e3)}}},this.events.emit("dialogue:show",{participants:["closeUp_Mary","closeUp_Tiamat","closeUp_Marduk"],conversation:[{who:"closeUp_Tiamat",text:["My beloved: why do you","call for me?"]},{who:"closeUp_Mary",text:["Our lord. A mysterious","comet dashes across the","sky. Our land has been","ravaged by monstrous","quakes, mysterious holes","have been appearing,","those who fall in never","return. Please my lady,","calm the earth. Let us","rest in peace."]},{who:"closeUp_Tiamat",text:["The Catalyst Comet.","C/1995 O1 It appears once","every 2,533 years. I do","not control its path.","With it\u2019s coming.","Calamity Strikes."]},{who:"closeUp_Mary",text:["We, your children, beseech","thee. Guide us towards a","resolution that might save","our people."]},{who:"closeUp_Tiamat",text:["The Guardian ventures","within the holes created","in the earth. You must","discover the purpose of","these mushrooms that now","proliferate the land.","Collect them and deliver","them to me at the core of","the planet."]},{who:"closeUp_Tiamat",text:["Perhaps within these","mysterious objects lies a","solution to the terrors of","The Catalyst Comet."]}]})}},{key:"showSecondDialogs",value:function(){var e=this;this.levels={current:{pause:function(){return!1},resume:function(){e.tweens.add({targets:e.children.getByName("background_art"),alpha:0,duration:1e3}),e.tweens.add({targets:e.normalDayMusic,volume:0,duration:500,onComplete:function(){e.normalDayMusic.stop(),e.quakesMusic.play(),setTimeout((function(){e.showThirdDialogs()}),1e3)}})}}},this.events.emit("dialogue:show",{participants:["closeUp_Mary","closeUp_Marduk"],conversation:[{who:"closeUp_Marduk",text:["-Sigh-","It is a man's duty","I suppose."]},{who:"closeUp_Mary",text:["Then I shall","accompany you:","There is safety","in numbers."]},{who:"closeUp_Marduk",text:["Nonsense. How would a","frail priestess be of","any benefit? "]},{who:"closeUp_Mary",text:["I am not frail. I am","actually well versed in","digging. The maintenance","of the church keeps my","mind and body active,","I am frequently required","to lift heavy objects and","despite my size have","no problems doing so."]},{who:"closeUp_Marduk",text:["I am a man, to endanger a","woman's life by accepting","her aid in such a perilous","task would disgrace me."]},{who:"closeUp_Mary",text:["Why must you always be","like this Marduk? I","remember when we used to","play in the garden as","children. You haven\u2019t","always been this stubborn","and aggressive. I know the","current state of the world","has us all in a panic."]},{who:"closeUp_Mary",text:["But come to your senses.","Let me help you. There","are greater things at","stake than your pride."]},{who:"closeUp_Marduk",text:["I don't need your help."]}]})}},{key:"showThirdDialogs",value:function(){var e=this;this.levels={current:{pause:function(){return!1},resume:function(){e.tweens.add({targets:e.quakesMusic,volume:0,duration:500}),setTimeout((function(){e.scene.start("GameScene",{level:1})}),1e3)}}},this.events.emit("dialogue:show",{participants:[],conversation:[{who:"",text:["- A fissure opens up","beneath Marduk and he","falls into"]},{who:"",text:["- Mary rolls her eyes","and jumps in after"]}]})}},{key:"animateIntro",value:function(){var e=this;this.cameras.main.pan(this.renderer.width,this.renderer.height/2,2e3,"Sine.easeInOut"),this.cameras.main.once(h.a.Cameras.Scene2D.Events.PAN_COMPLETE,(function(){e.cameras.main.shake(2e3,.02),e.tweens.add({targets:e.children.getByName("dark"),y:.3*-e.renderer.height,duration:2e3}),e.tweens.add({targets:e.children.getByName("partner"),y:e.renderer.height,delay:2e3,duration:2e3,ease:"Sine.in"}),e.tweens.add({targets:e.children.getByName("player"),y:e.renderer.height,x:{value:e.children.getByName("player").x+150,duration:1e3,ease:"Cubic.easeOut"},delay:4e3,duration:2e3,ease:"Back.easeInOut",onComplete:function(){e.cameras.main.fade(1e3,0,0,0),e.cameras.main.once("camerafadeoutcomplete",(function(){e.scene.start("GameScene",{level:1})}))}})}))}}]),i}(h.a.Scene),U=i(6),E=i(5),P=function(){function e(t){var i=t.id,a=t.isRigid,s=t.isBreakable,n=t.isFlat,o=t.isPickable,r=t.isCrushable,l=t.level;Object(y.a)(this,e),this.id=i,this.isRigid=a,this.isBreakable=s,this.isFlat=n,this.isPickable=o,this.isCrushable=r,this.power=0,this.strength=0,this.force=0,this.weight=0,this.level=l,this.position=null,this.alien=null,this.isMoveable=!this.isRigid}return Object(g.a)(e,[{key:"setPosition",value:function(e){this.position=e}},{key:"canMove",value:function(){return this.isMoveable}},{key:"overrunBy",value:function(){}},{key:"runningOver",value:function(){}},{key:"canFallDown",value:function(){return!1}},{key:"canFallLeft",value:function(){return!1}},{key:"canFallRight",value:function(){return!1}}]),e}();P.className="GameObject";var D=function(e){Object(b.a)(i,e);var t=Object(T.a)(i);function i(e){var a;return Object(y.a)(this,i),(a=t.call(this,e)).inactive=!1,a}return Object(g.a)(i,[{key:"overrunBy",value:function(e){e.power>this.strength&&(this.level.onDestroyElement(this),this.inactive=!0)}}]),i}(P);D.className="Destroyable";var W=function(e){Object(b.a)(i,e);var t=Object(T.a)(i);function i(){return Object(y.a)(this,i),t.apply(this,arguments)}return Object(g.a)(i,[{key:"move",value:function(e){var t=e.x,a=e.y;Object(U.a)(Object(E.a)(i.prototype),"setPosition",this).call(this,{x:t,y:a})}}]),i}(D);W.className="Moveable";var L=function(e){Object(b.a)(i,e);var t=Object(T.a)(i);function i(e){var a;return Object(y.a)(this,i),(a=t.call(this,e)).isFalling=0,a}return Object(g.a)(i,[{key:"canFallDown",value:function(){var e={x:this.position.x,y:this.position.y+1},t=this.level.isDestinationInBounds(e.x,e.y)&&this.level.getObjectAt(e.x,e.y),i=this.level.isDestinationEmpty(e.x,e.y),a=t.isCrushable&&this.isFalling;return i||a}},{key:"canRollTo",value:function(e,t){var i={x:e,y:t},a=this.level.isDestinationInBounds(i.x,i.y),s=a&&this.level.getObjectAt(i.x,this.position.y),n=a&&this.level.objectIsEmpty(s),o=a&&this.level.getObjectAt(i.x,i.y),r=this.level.objectIsEmpty(o),l=a&&this.level.getObjectAt(this.position.x,this.position.y+1),c=!this.level.isDestinationEmpty(this.position.x,this.position.y+1)&&l.isFlat;return a&&r&&n&&!c&&l&&!l.isFalling}},{key:"canFallRight",value:function(){return!this.canFallDown()&&this.canRollTo(this.position.x+1,this.position.y+1)}},{key:"canFallLeft",value:function(){return!this.canFallDown()&&this.canRollTo(this.position.x-1,this.position.y+1)}}]),i}(W);L.className="Fallable";var F=function(e){Object(b.a)(i,e);var t=Object(T.a)(i);function i(e,a){var s;return Object(y.a)(this,i),(s=t.call(this,{id:e,isRigid:!1,isBreakable:!0,isFlat:!1,isPickable:!1,isCrushable:!1,level:a})).strength=5,s}return i}(L);F.className="Boulder";var R=i(9),G=function(e){Object(b.a)(i,e);var t=Object(T.a)(i);function i(e,a){var s;return Object(y.a)(this,i),(s=t.call(this,{id:e,isRigid:!1,isBreakable:!0,isFlat:!0,isPickable:!1,isCrushable:!0,level:a})).pushingDirection=null,s}return Object(g.a)(i,[{key:"canMove",value:function(e,t){var i=this.level.getObjectAt(e,t),a=this.level.objectIsEmpty(i),s=(null===i||void 0===i?void 0:i.isBreakable)&&this.power>=i.strength;return this.isBrakingGround=s,!!(a||s||i.isPickable)&&i}},{key:"canMoveUp",value:function(){return this.canMove(this.position.x,this.position.y-1)}},{key:"canMoveDown",value:function(){return this.canMove(this.position.x,this.position.y+1)}},{key:"animPushRight",value:function(){}},{key:"animPushLeft",value:function(){}},{key:"canMoveLeft",value:function(){var e=this.level.getObjectAt(this.position.x-1,this.position.y),t=this.level.isPositionClear(this.position.x-2,this.position.y),i=this.level.isPositionClear(this.position.x-1,this.position.y+1),a=(null===e||void 0===e?void 0:e.isMoveable)&&t&&!i,s=this.canMove(this.position.x-1,this.position.y);return!s&&a&&(this.pushingDirection===x.LEFT?(this.animPushLeft(),s=!0,this.level.moveObject(e,{x:this.position.x-2,y:this.position.y}),this.pushingDirection=null):(this.pushingDirection=x.LEFT,this.animPushLeft())),s}},{key:"canMoveRight",value:function(){var e=this.level.getObjectAt(this.position.x+1,this.position.y),t=this.level.isPositionClear(this.position.x+2,this.position.y),i=this.level.isPositionClear(this.position.x+1,this.position.y+1),a=(null===e||void 0===e?void 0:e.isMoveable)&&t&&!i,s=this.canMove(this.position.x+1,this.position.y);return!s&&a&&(this.pushingDirection===x.RIGHT?(this.animPushRight(),s=!0,this.level.moveObject(e,{x:this.position.x+2,y:this.position.y}),this.pushingDirection=null):(this.pushingDirection=x.RIGHT,this.animPushRight())),s}}]),i}(W);G.className="Character";var C=function(e){Object(b.a)(i,e);var t=Object(T.a)(i);function i(e,a){var s;return Object(y.a)(this,i),(s=t.call(this,e,a)).moveIntentDir=x.UP,s.anchorPosition=null,s}return Object(g.a)(i,[{key:"overrunBy",value:function(e){var t;e.constructor.className!==Y.className&&(null===(t=this.alien)||void 0===t||t.destroy(),this.level.onCharacterDie(this));e.constructor.className===F.className&&this.level.scene.events.emit("sounds:death_by_rock_hit")}}]),i}(G);C.className="Enemy";var B=function(e){Object(b.a)(i,e);var t=Object(T.a)(i);function i(e,a){var s;return Object(y.a)(this,i),(s=t.call(this,{id:e,isRigid:!0,isBreakable:!0,isFlat:!0,isPickable:!1,isCrushable:!1,level:a})).strength=1,s}return Object(g.a)(i,[{key:"overrunBy",value:function(e){Object(U.a)(Object(E.a)(i.prototype),"overrunBy",this).call(this,e),this.level.scene.children.getByName("layer_1").tilemap.putTileAt(j[A.EMPTY],this.position.x,this.position.y),this.level.scene.events.emit("sounds:clear_hit")}}]),i}(D);B.className="Ground";var Y=function(e){Object(b.a)(i,e);var t=Object(T.a)(i);function i(e,a){var s;Object(y.a)(this,i),(s=t.call(this,e,a)).power=.5,s.moveIntentDir="";var n=a.scene;return n.input.keyboard.removeListener("keydown",s.onKeyDown.bind(Object(R.a)(s))),n.input.keyboard.addListener("keydown",s.onKeyDown.bind(Object(R.a)(s))),n.input.keyboard.removeListener("keyup",s.onKeyUp.bind(Object(R.a)(s))),n.input.keyboard.addListener("keyup",s.onKeyUp.bind(Object(R.a)(s))),s}return Object(g.a)(i,[{key:"onKeyUp",value:function(e){this.moveIntentDir===e.key&&(this.moveIntentDir="",this.pushingDirection=null)}},{key:"onKeyDown",value:function(e){!e.repeat&&[x.UP,x.DOWN,x.LEFT,x.RIGHT].includes(e.key)&&(this.moveIntentDir=e.key,this.isMoving||this.level.playerLoop())}},{key:"destroy",value:function(){var e=this.level.scene;e.input.keyboard.off("keydown"),e.input.keyboard.off("keyup")}},{key:"animIdle",value:function(){var e=this.hasPickaxe?"brave_idle_pickaxe":"brave_idle";this.alien.play(e)}},{key:"animPushRight",value:function(){var e;null===(e=this.alien)||void 0===e||e.play("brave_push"),this.alien.setFlipX(!1),this.alien.setOrigin(0,.25)}},{key:"animPushLeft",value:function(){var e;null===(e=this.alien)||void 0===e||e.play("brave_push"),this.alien.setFlipX(!0),this.alien.setOrigin(.25,.25)}},{key:"animRun",value:function(){var e="";this.moveIntentDir===x.UP&&(e="_up"),this.moveIntentDir===x.DOWN&&(e="_down");var t=Math.random()>.5?"brave_break_pickaxe":"brave_break_pickaxe_alt",i=this.isBrakingGround?t:this.hasPickaxe?"brave_run_pickaxe":"brave_run".concat(e);this.alien.play(i)}},{key:"animRunRight",value:function(){this.alien.setFlipX(!0),this.alien.setOrigin(.25,.25)}},{key:"animRunLeft",value:function(){this.alien.setOrigin(0,.25),this.alien.setFlipX(!1)}},{key:"die",value:function(){this.inactive=!0,this.alien.alpha=0,this.destroy(),this.level.onCharacterDie(this)}},{key:"overrunBy",value:function(e){e.constructor.className===F.className&&this.level.scene.events.emit("sounds:death_by_rock_hit"),this.die()}},{key:"runningOver",value:function(e){e.constructor.className===C.className&&this.die()}}]),i}(G);Y.className="Player";var X=function(e){Object(b.a)(i,e);var t=Object(T.a)(i);function i(e,a){return Object(y.a)(this,i),t.call(this,{id:e,isRigid:!0,isBreakable:!1,isFlat:!0,isPickable:!1,isCrushable:!1,level:a})}return i}(P);X.className="Wall";var H=function(){function e(t,i){Object(y.a)(this,e),this.id=t,this.level=i,this.isEmpty=!0}return Object(g.a)(e,[{key:"setPosition",value:function(e){this.position=e}}]),e}();H.className="Empty";var V=function(e){Object(b.a)(i,e);var t=Object(T.a)(i);function i(){return Object(y.a)(this,i),t.apply(this,arguments)}return Object(g.a)(i,[{key:"overrunBy",value:function(e){e.constructor.className===Y.className&&this.level.onInteractWith(this)}}]),i}(H);V.className="Interactive";var q=function(e){Object(b.a)(i,e);var t=Object(T.a)(i);function i(e,a){return Object(y.a)(this,i),t.call(this,{id:e,isRigid:!1,isBreakable:!0,isFlat:!0,isPickable:!1,isCrushable:!0,level:a})}return Object(g.a)(i,[{key:"explode",value:function(){this.alien.destroy(),this.level.onExplode(this)}},{key:"overrunBy",value:function(e){this.explode()}}]),i}(L);q.className="Barrel";var z=function(e){Object(b.a)(i,e);var t=Object(T.a)(i);function i(e,a){var s;return Object(y.a)(this,i),(s=t.call(this,{id:e,isRigid:!1,isBreakable:!0,isFlat:!0,isPickable:!1,isCrushable:!0,level:a})).power=10,s}return Object(g.a)(i,[{key:"setPosition",value:function(e,t){var i=this;this.position={x:e,y:t};var a=this.level.scene.children.getByName("layer_1"),s=a.tilemap,n=this.level.scene.add.graphics({fillStyle:{color:16711680,alpha:1}});n.fillRect(0,0,s.tileWidth,s.tileHeight),n.setScale(a.scaleX),n.x=s.tileToWorldX(e),n.y=s.tileToWorldY(t),this.level.scene.tweens.add({targets:n,alpha:0,duration:w,onComplete:function(){n.destroy(),i.level.objects[t][e]=new H(A.EMPTY,i.level)}}),this.alien=n}}]),i}(P);z.className="Explosion";var J=function(e){Object(b.a)(i,e);var t=Object(T.a)(i);function i(e,a){var s;return Object(y.a)(this,i),(s=t.call(this,{id:e,isRigid:!1,isBreakable:!0,isFlat:!1,isPickable:!0,isCrushable:!1,level:a})).strength=4,s}return Object(g.a)(i,[{key:"overrunBy",value:function(e){e.constructor.className===Y.className?(this.alien.visible=!1,this.level.onJewelPick(this),this.level.scene.events.emit("sounds:gem_pick"),this.level.scene.events.emit("score:diamond_collected")):Object(U.a)(Object(E.a)(i.prototype),"overrunBy",this).call(this,e)}}]),i}(L);J.className="Jewel";var K=function(e){Object(b.a)(i,e);var t=Object(T.a)(i);function i(e,a){var s;return Object(y.a)(this,i),(s=t.call(this,{id:e,isRigid:!1,isBreakable:!0,isFlat:!1,isPickable:!0,isCrushable:!1,level:a})).strength=4,s}return Object(g.a)(i,[{key:"overrunBy",value:function(e){e.constructor.className===Y.className?(this.alien.visible=!1,this.level.onMushroomPick(this),this.level.scene.events.emit("sounds:shroom_pick"),this.level.scene.events.emit("score:mushroom_collected")):Object(U.a)(Object(E.a)(i.prototype),"overrunBy",this).call(this,e)}}]),i}(L);K.className="Mushroom";var Z=function(){function e(t){Object(y.a)(this,e),this.config=t,this.moveables=[],this.objects=[],this.scene=null,this.player=null,this.playerTimeoutId=0,this.isPaused=!1}return Object(g.a)(e,[{key:"connectToScene",value:function(e){var t=this;window.localStorage.setItem(this.id,"true"),this.scene=e;var i=this.scene.children.getByName("layer_1"),a=i.tilemap;this.objects.length&&(this.objects=[]);var s=0;this.objects=this.config.map((function(e,n){return e.map((function(e,o){var r;switch(e){case A.WALL:(r=new X(e,t)).setPosition({x:o,y:n});break;case A.GROUND:(r=new B(e,t)).setPosition({x:o,y:n});break;case A.BOULDER:var l=t.scene.add.sprite(48,16).setOrigin(0,.25).play("boulder_idle");l.setScale(i.scaleX),l.x=a.tileToWorldX(o),l.y=a.tileToWorldY(n),(r=new F(e,t)).alien=l;break;case A.JEWEL:var c=t.scene.add.sprite(48,16).setOrigin(0,.25).play("diamond_idle");c.setScale(i.scaleX),c.x=a.tileToWorldX(o),c.y=a.tileToWorldY(n),(r=new J(e,t)).alien=c;break;case A.MUSHROOM:var u=t.scene.add.sprite(48,16).setOrigin(0,.25).play("mushroom_idle");u.setScale(i.scaleX),u.x=a.tileToWorldX(o),u.y=a.tileToWorldY(n),(r=new K(e,t)).alien=u;break;case A.BARREL:var m=t.scene.add.graphics({fillStyle:{color:6697728,alpha:1}});m.setScale(i.scaleX),m.fillRect(0,0,a.tileWidth,a.tileHeight),m.x=a.tileToWorldX(o),m.y=a.tileToWorldY(n),(r=new q(e,t)).alien=m;break;case A.PLAYER:var d=t.scene.add.sprite(48,16).setOrigin(0,.25);d.setScale(i.scaleX),d.x=a.tileToWorldX(o),d.y=a.tileToWorldY(n),d.name="brave",d.on(h.a.Animations.Events.ANIMATION_COMPLETE,(function(){d.isMoving})),(r=new Y(e,t)).alien=d,r.animIdle(),t.player=r;break;case A.ENEMY:var p=t.scene.add.sprite(48,16).setOrigin(0,.25).play("bat_move");p.setScale(i.scaleX),p.x=a.tileToWorldX(o),p.y=a.tileToWorldY(n),(r=new C(e,t)).alien=p;break;case A.INTERACTION:(r=new V(e,t)).order=s++;break;default:r=new H(e,t)}return r.setPosition({x:o,y:n}),t.objectIsEmpty(r)||r.isRigid||t.moveables.push(r),t.onAddElement(r),r}))}))}},{key:"gravityLoop",value:function(){var e=this;this.isPaused||(this.moveables.sort((function(e,t){return e.position.y-t.position.y})).forEach((function(t){var i,a=t.canFallDown(),s=t.canFallLeft(),n=t.canFallRight();a&&(i={x:t.position.x,y:t.position.y+1}),!a&&s&&(i={x:t.position.x-1,y:t.position.y},t.isFalling&&i.y++),a||s||!n||(i={x:t.position.x+1,y:t.position.y},t.isFalling&&i.y++),i?(e.moveObject(t,i),t.isFalling&&(s||n)&&t.constructor.className===F.className&&null!==e.player.pushingDirection&&e.scene.events.emit("sounds:rock_hit"),t.isFalling&&(s||n)&&t.constructor.className===J.className&&e.scene.events.emit("sounds:gem_hit"),t.isFalling++):(t.isFalling&&t.constructor.className===F.className&&e.scene.events.emit("sounds:rock_hit"),t.isFalling&&t.constructor.className===J.className&&e.scene.events.emit("sounds:gem_hit"),t.isFalling&&t.constructor.className===q.className&&t.explode(),t.isFalling=0)})),this.enemiesLoop())}},{key:"enemiesLoop",value:function(){var e=this;if(!this.isPaused){var t,i,a,s,n,o,r,l=function(t,n,o,r,l){var c;if(i=e.getObjectAt(n.x,n.y),(a=e.objectIsEmpty(i)||(null===(c=i)||void 0===c?void 0:c.constructor.className)===Y.className)||t.anchorPosition||(t.anchorPosition=i.position,t.moveIntentDir=o),a&&i.constructor.className===Y.className&&e.moveObject(t,n),a){if(!t.anchorPosition)return void(t.moveIntentDir=o);var u;if(t.position.x===t.anchorPosition.x||t.position.y===t.anchorPosition.y)s=e.getObjectAt(l.x,l.y),e.objectIsEmpty(s)||(null===(u=s)||void 0===u?void 0:u.constructor.className)===Y.className?t.moveIntentDir=r:t.anchorPosition=s.position;e.moveObject(t,n)}else t.anchorPosition=i.position,t.moveIntentDir=o};this.moveables.filter((function(e){return e.constructor.className===C.className})).forEach((function(e){switch(e.moveIntentDir){case x.UP:t={x:e.position.x,y:e.position.y-1},n=x.LEFT,o=x.RIGHT,r={x:t.x+1,y:t.y},l(e,t,n,o,r);break;case x.RIGHT:t={x:e.position.x+1,y:e.position.y},n=x.UP,o=x.DOWN,r={x:t.x,y:t.y+1},l(e,t,n,o,r);break;case x.DOWN:t={x:e.position.x,y:e.position.y+1},n=x.RIGHT,o=x.LEFT,r={x:t.x-1,y:t.y},l(e,t,n,o,r);break;case x.LEFT:t={x:e.position.x-1,y:e.position.y},n=x.DOWN,o=x.UP,r={x:t.x,y:t.y-1},l(e,t,n,o,r)}}))}}},{key:"playerLoop",value:function(){var e=this;if(!this.isPaused&&!this.player.inactive){clearTimeout(this.playerTimeoutId);var t=this.player,i={x:t.position.x,y:t.position.y};switch(t.moveIntentDir){case x.UP:t.canMoveUp()&&(i.y-=1);break;case x.DOWN:t.canMoveDown()&&(i.y+=1);break;case x.LEFT:t.canMoveLeft()&&(i.x-=1);break;case x.RIGHT:t.canMoveRight()&&(i.x+=1)}t.position.x===i.x&&t.position.y===i.y||t.isMoving||(t.isMoving=!0,t.position.x<i.x&&t.animRunLeft(),t.position.x>i.x&&t.animRunRight(),t.alien.emit("player_moves",i),this.moveObject(t,i)),this.playerTimeoutId=setTimeout((function(){if(!t.alien)return!1;t.isMoving=!1;try{t.animIdle()}catch(i){}""!==t.moveIntentDir&&t.alien&&e.playerLoop()}),225)}}},{key:"moveObject",value:function(e,t){var i=this.scene.children.getByName("layer_1");if(!i)return!1;var a=i.tilemap,s={x:e.position.x,y:e.position.y},n=this.getObjectAt(t.x,t.y);this.objectIsEmpty(n)&&n.constructor.className!==V.className||(n.overrunBy(e),e.runningOver(n)),e.inactive||(this.setObjectAt(s.x,s.y,new H(A.EMPTY,this)),this.setObjectAt(t.x,t.y,e),e.move(t),e.constructor.className===Y.className&&e.alien&&(this.scene.tweens.add({targets:e.alien,x:{value:a.tileToWorldX(t.x),duration:225},y:{value:a.tileToWorldY(t.y),duration:225}}),e.animRun()),e.constructor.className===C.className&&this.scene.tweens.add({targets:e.alien,x:{value:a.tileToWorldX(t.x),duration:w},y:{value:a.tileToWorldY(t.y),duration:w}}),e.constructor.className!==J.className&&e.constructor.className!==K.className||this.scene.tweens.add({targets:e.alien,x:{value:a.tileToWorldX(t.x),duration:125},y:{value:a.tileToWorldY(t.y),delay:t.x!==s.x?125:0,duration:t.x!==s.x?125:w}}),e.constructor.className===q.className&&this.scene.tweens.add({targets:e.alien,x:{value:a.tileToWorldX(t.x),duration:125},y:{value:a.tileToWorldY(t.y),delay:t.x!==s.x?125:0,duration:t.x!==s.x?125:w}}),e.constructor.className===F.className&&(this.scene.tweens.add({targets:e.alien,x:{value:a.tileToWorldX(t.x),duration:125},y:{value:a.tileToWorldY(t.y),delay:t.x!==s.x?125:0,duration:t.x!==s.x?125:w}}),t.x!==s.x&&e.alien.play(t.x>s.x?"boulder_roll_right":"boulder_roll_left")))}},{key:"pause",value:function(){this.isPaused=!0}},{key:"resume",value:function(){this.isPaused=!1}},{key:"destroy",value:function(){}},{key:"onCharacterDie",value:function(e){this.setObjectAt(e.position.x,e.position.y,new H(A.EMPTY,this)),this.moveables=this.moveables.filter((function(t){return t!==e})),e.constructor.className===Y.className&&(e.moveIntentDir="",this.scene.levels.restart())}},{key:"onJewelPick",value:function(e){this.setObjectAt(e.position.x,e.position.y,new H(A.EMPTY,this)),this.moveables=this.moveables.filter((function(t){return t!==e}))}},{key:"onMushroomPick",value:function(e){this.setObjectAt(e.position.x,e.position.y,new H(A.EMPTY,this)),this.moveables=this.moveables.filter((function(t){return t!==e}))}},{key:"onDestroyElement",value:function(e){e.constructor.className,F.className,this.setObjectAt(e.position.x,e.position.y,new H(A.EMPTY,this)),this.moveables=this.moveables.filter((function(t){return t!==e}))}},{key:"onExplode",value:function(e){this.setObjectAt(e.position.x,e.position.y,new H(A.EMPTY,this)),this.moveables=this.moveables.filter((function(t){return t!==e}));for(var t=e.position.x-2;t<=e.position.x+2;t++)for(var i=e.position.y-2;i<e.position.y+2;i++){var a=this.getObjectAt(t,i),s=new z(A.EXPLOSION,this);(a.isBreakable||this.objectIsEmpty(a))&&(s.setPosition(t,i),this.objects[i][t]=s),a&&!this.objectIsEmpty(a)&&a.overrunBy(s)}}},{key:"onComplete",value:function(){this.objects.forEach((function(e){return e.forEach((function(e){e.alien&&(e.alien.destroy(),e.alien=null)}))})),this.pause(),this.scene.events.emit("levelcompleted",this)}},{key:"onInteractWith",value:function(e){console.warn("implement interaction for ".concat(this.id))}},{key:"onAddElement",value:function(e){console.warn("implement element added ".concat(this.id))}},{key:"getPlayerPos",value:function(){return this.player.position}},{key:"getConfigAt",value:function(e,t){return this.isDestinationInBounds(e,t)&&this.config[t][e]}},{key:"getCoords",value:function(e){for(var t=[],i=0;i<this.config.length;i++)for(var a=0;a<this.config[i].length;a++)this.config[i][a]===e&&t.push({x:a,y:i});return t}},{key:"getObjectAt",value:function(e,t){return this.isDestinationInBounds(e,t)&&this.objects[t][e]}},{key:"setObjectAt",value:function(e,t,i){this.objects[t][e]=i}},{key:"isPositionClear",value:function(e,t){return this.getObjectAt(e,t).isEmpty}},{key:"isDestinationInBounds",value:function(e,t){var i=e<this.config[0].length&&e>=0,a=t<this.config.length&&t>=0;return i&&a}},{key:"objectIsEmpty",value:function(e){return e.isEmpty}},{key:"isDestinationEmpty",value:function(e,t){return this.getObjectAt(e,t).isEmpty}}]),e}(),Q=["",function(e){Object(b.a)(i,e);var t=Object(T.a)(i);function i(){var e;return Object(y.a)(this,i),(e=t.call(this)).id="level_1",e.name="The beginning",e}return Object(g.a)(i,[{key:"connectToScene",value:function(e){Object(U.a)(Object(E.a)(i.prototype),"connectToScene",this).call(this,e),e.events.once("levelstart",(function(){e.events.emit("dialogue:show",{participants:["closeUp_Mary","closeUp_Dwarf"],conversation:[{who:"closeUp_Dwarf",text:["Well look who decided to","jump into the hole. Let","me guess. You're here to","take all of these precious","mushrooms. But","what about me!","Don't I deserve a few","shrooms?","I'll tell ya what."]},{who:"closeUp_Dwarf",text:["Give me some of your","mushrooms at the end of","this level. Maybe i'll","tell you how to beat the","game. For Now\u2026 Why don't","you try moving those","boulders?"]},{who:"closeUp_Mary",text:["I guess I should find","Marduk."]},{who:"closeUp_Dwarf",text:["You can also reset the","level by pressing escape.","Although i'm not sure","why you'd bother."]}]})}))}},{key:"onInteractWith",value:function(e){0===e.order&&this.onComplete()}}]),i}(Z),"cinematic_1",function(e){Object(b.a)(i,e);var t=Object(T.a)(i);function i(){var e;return Object(y.a)(this,i),(e=t.call(this)).id="level_2",e.name="The finding",e}return Object(g.a)(i,[{key:"onInteractWith",value:function(e){if(1===e.order){e.alien.destroy();var t=this.scene.children.getByName("layer_1").tilemap;this.player.moveIntentDir="",this.scene.events.emit("dialogue:show",{participants:["closeUp_Mary","closeUp_Dwarf"],conversation:[{who:"closeUp_Mary",text:["This thing is incredible,","I cut through earth like","butter."]},{who:"closeUp_Dwarf",text:["The power of the pickaxe","is within you:","Now you can walk through","the ground."]},{who:"closeUp_Mary",text:["How are you communicating","with me? Telepathy?"]},{who:"closeUp_Dwarf",text:["I've felt new powers","awaken within me since","the comet's arrival.","There are many things","about me you have yet","to understand."]}]}),this.player.power=1,t.putTileAt(j[A.EMPTY],e.position.x,e.position.y)}0===e.order&&this.onComplete()}},{key:"onAddElement",value:function(e){if(e.constructor.className===V.className&&1===e.order){var t=this.scene.children.getByName("layer_1"),i=t.tilemap,a=this.scene.add.sprite(48,16).setOrigin(0,.25).play("pickaxe_idle");a.setScale(t.scaleX),a.x=i.tileToWorldX(e.position.x),a.y=i.tileToWorldY(e.position.y),e.alien=a}}}]),i}(Z),function(e){Object(b.a)(i,e);var t=Object(T.a)(i);function i(){var e;return Object(y.a)(this,i),(e=t.call(this)).id="level_3",e.name="The blocking",e}return Object(g.a)(i,[{key:"onInteractWith",value:function(e){0===e.order&&this.onComplete()}},{key:"onAddElement",value:function(e){e.constructor.name===Y.name&&(e.power=1,e.hasPickaxe=!0)}}]),i}(Z),function(e){Object(b.a)(i,e);var t=Object(T.a)(i);function i(){var e;return Object(y.a)(this,i),(e=t.call(this)).id="level_4",e.name="The encounter",e}return Object(g.a)(i,[{key:"onInteractWith",value:function(e){0===e.order&&this.onComplete()}},{key:"onAddElement",value:function(e){e.constructor.name===Y.name&&(e.power=1,e.hasPickaxe=!0)}}]),i}(Z),function(e){Object(b.a)(i,e);var t=Object(T.a)(i);function i(){var e;return Object(y.a)(this,i),(e=t.call(this)).id="level_5",e.name="Hard Work",e}return Object(g.a)(i,[{key:"connectToScene",value:function(e){Object(U.a)(Object(E.a)(i.prototype),"connectToScene",this).call(this,e),e.events.on("update",this.updateLight.bind(this))}},{key:"destroy",value:function(){this.scene.events.off("update",this.updateLight.bind(this))}},{key:"updateLight",value:function(){var e=this.scene.children.getByName("layer_1");if(!e)return!0;var t=e.tilemap,i=this.player.position;this.moveables.forEach((function(e){var t,a=h.a.Math.Distance.Snake(i.x,i.y,e.position.x,e.position.y);null===(t=e.alien)||void 0===t||t.setAlpha(1-.1*a)})),t.forEachTile((function(e){var t=h.a.Math.Distance.Snake(i.x,i.y,e.x,e.y);e.setAlpha(1-.1*t)}))}},{key:"onInteractWith",value:function(e){0===e.order&&this.onComplete()}},{key:"onAddElement",value:function(e){e.constructor.name===Y.name&&(e.power=1,e.hasPickaxe=!0)}}]),i}(Z),"cinematic_escape",function(e){Object(b.a)(i,e);var t=Object(T.a)(i);function i(){var e;return Object(y.a)(this,i),(e=t.call(this)).id="level_6",e.name="The escape",e.winningLoopRef=e.winningLoop.bind(Object(R.a)(e)),e}return Object(g.a)(i,[{key:"connectToScene",value:function(e){Object(U.a)(Object(E.a)(i.prototype),"connectToScene",this).call(this,e),this.voidLevel=e.children.getByName("layer_1").tilemap.height-1,this.fx=this.scene.sound.add("earthquake"),e.events.on("update",this.winningLoopRef),this.startVoid(e)}},{key:"startVoid",value:function(e){var t=this,i=e.cameras.main;setTimeout((function(){i.shake(2e3,.005),t.fx.play()}),1500)}},{key:"playerLoop",value:function(){Object(U.a)(Object(E.a)(i.prototype),"playerLoop",this).call(this),this.voidLoop()}},{key:"resetAutoVoidTimer",value:function(){clearTimeout(this.autoDestroyTID),this.autoDestroyTID=setTimeout(this.destroyMap.bind(this),5e3)}},{key:"destroyMap",value:function(){var e=this;this.resetAutoVoidTimer();var t=this.scene.children.getByName("layer_1");if(!t)return!1;var i=t.tilemap,a=this.scene.cameras.main,s=this.voidLevel;t.fill(100,0,s,i.width,1),this.objects[s].forEach((function(t,i){t.constructor.name!==X.name&&t.constructor.name!==B.name||(e.objects[s][i]=new H(A.EMPTY,e))})),this.moveables=this.moveables.filter((function(t){var i;return!(t.position.y>e.voidLevel)||(null===(i=t.alien)||void 0===i||i.destroy(),!1)})),a.shake(1e3,.001),this.fx.play(),this.voidLevel--,this.player.position.y>this.voidLevel&&(this.player.die(),this.onCharacterDie(this.player))}},{key:"voidLoop",value:function(){this.player.isMoving&&this.player.moveIntentDir===x.UP?(this.resetAutoVoidTimer(),this.voidLevel-this.player.position.y>8&&this.destroyMap()):this.player.isMoving&&""!==this.player.moveIntentDir&&this.destroyMap()}},{key:"destroy",value:function(){this.scene.events.off("update",this.winningLoopRef),this.fx.stop(),clearTimeout(this.autoDestroyTID)}},{key:"winningLoop",value:function(){this.player.position.y<5&&(clearTimeout(this.autoDestroyTID),this.scene.events.off("update",this.winningLoopRef),this.onComplete())}},{key:"onAddElement",value:function(e){e.constructor.name===Y.name&&(e.power=1,e.hasPickaxe=!0)}}]),i}(Z),"cinematic_last"],$=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(y.a)(this,e),this.currentIndex=i,this.scene=t,this.start()}return Object(g.a)(e,[{key:"start",value:function(){var e=this;this.current=new Q[this.currentIndex],this.current.config=this.generateConfig(),this.map=this.createMap(),this.current.connectToScene(this.scene),this.current.pause(),this.scene.cameras.main.once("camerafadeincomplete",(function(){e.current.resume(),e.scene.events.emit("levelstart")}))}},{key:"restart",value:function(){var e=this;this.scene.cameras.main.fade(500,0,0,0),this.scene.cameras.main.once("camerafadeoutcomplete",(function(){e.current.destroy(),e.scene.children.list.forEach((function(e){e.destroy()})),e.scene.rules.destroy(),e.scene.ui.destroy(),e.scene.scene.restart({level:e.currentIndex})}))}},{key:"next",value:function(){this.currentIndex+=1,"string"===typeof Q[this.currentIndex]&&Q[this.currentIndex].includes("cinematic")?this.scene.scene.start("ConnectorScene",{id:this.currentIndex,name:Q[this.currentIndex]}):Q[this.currentIndex]?this.start():this.scene.scene.start("MenuScene")}},{key:"generateConfig",value:function(){for(var e=this.scene,t=this.current.id,i=e.textures.get(t).getSourceImage(),a=Array(i.height).fill("000000").map((function(e){return Array(i.width).fill("000000")})),s=0;s<i.width;s++)for(var n=0;n<i.height;n++){var o=e.textures.getPixel(s,n,t),r="".concat(h.a.Display.Color.ComponentToHex(o.r)).concat(h.a.Display.Color.ComponentToHex(o.g)).concat(h.a.Display.Color.ComponentToHex(o.b));a[n][s]=r}return a}},{key:"createMap",value:function(){var e=this.scene,t=this.current,i=e.data.get("custom_scale"),a=this.scene.cameras.main,s=this.map;s&&s.scene&&s.destroy();var n=(s=e.make.tilemap({tileWidth:20,tileHeight:20,width:t.config[0].length,height:t.config.length})).addTilesetImage("tiles","main-tiles",20,20,1,2),o=s.createBlankLayer("layer_1",n);return o.name="layer_1",o.depth=0,o.setScale(i),t.config.forEach((function(e,i){e.forEach((function(e,a){var n=t.config[i][a];if([A.EMPTY,A.PLAYER,A.BOULDER,A.JEWEL,A.INTERACTION,A.MUSHROOM,A.ENEMY].includes(n))s.putTileAt(j[A.EMPTY],a,i);else if(n===A.WALL){var o=j.calculateWallTileWithNeighbours(i,a,t.config);s.putTileAt(o,a,i)}else s.putTileAt(j[n],a,i)}))})),a.setBounds(0,0,o.width*o.scaleX,o.height*o.scaleY),a.zoom=1,s}}]),e}(),ee=function(){function e(t){var i=this;Object(y.a)(this,e),this.scene=t,this.timer=0,this.worldTickFreq=w,t.events.on(h.a.Scenes.Events.UPDATE,this.onSceneUpdate.bind(this)),this.setUpPuseResumeGame(),this.setUpCameraFollowPlayer(),t.events.off("levelcompleted"),t.events.on("levelcompleted",(function(){t.events.emit("sounds:level_complete"),t.tweens.add({targets:i.music,volume:1,ease:"Linear",duration:500,onComplete:function(){i.music.stop()}}),t.cameras.main.fade(3e3,0,0),t.cameras.main.once("camerafadeoutcomplete",(function(){t.levels.next(),t.cameras.main.fadeIn(1e3,0,0)}))})),t.events.removeListener("levelstart",this.onLevelStart.bind(this)),t.events.addListener("levelstart",this.onLevelStart.bind(this))}return Object(g.a)(e,[{key:"destroy",value:function(){var e;null===(e=this.music)||void 0===e||e.stop(),this.scene.events.off(h.a.Scenes.Events.UPDATE),this.scene.events.off("levelstart")}},{key:"onLevelStart",value:function(){"level_6"===this.scene.levels.current.id?this.music=this.scene.sound.add("escape_music",{loop:!0,valume:0}):this.scene.levels.current.id.includes("level_")&&(this.music=this.scene.sound.add("levels_surface",{loop:!0,valume:0})),this.music.play(),this.scene.tweens.add({targets:this.music,volume:1,ease:"Linear",duration:500,onComplete:function(){}})}},{key:"setUpCameraFollowPlayer",value:function(){var e=this;this.scene.events.addListener(h.a.Scenes.Events.UPDATE,(function(){var t=e.scene.cameras.main,i=e.scene.children.getByName("layer_1");if(!i)return!1;var a=i.tilemap,s=e.scene.levels.current.getPlayerPos(),n=s.x,o=s.y;if(t&&a){var r=.9;t.scrollX=r*t.scrollX+(1-r)*(a.tileToWorldX(n)-.5*t.width),t.scrollY=r*t.scrollY+(1-r)*(a.tileToWorldY(o)-.5*t.height)}}))}},{key:"setUpPuseResumeGame",value:function(){this.scene.input.keyboard.removeListener("keydown",this.onKeyDown.bind(this)),this.scene.input.keyboard.addListener("keydown",this.onKeyDown.bind(this))}},{key:"onKeyDown",value:function(e){var t=this;"Escape"===e.key&&(this.scene.levels.current.isPaused?function(){t.scene.levels.current.resume(),t.scene.events.emit("game_resumed")}:function(){t.scene.levels.current.pause(),t.scene.events.emit("game_paused")})()}},{key:"onSceneUpdate",value:function(e,t){if(this.timer+=t,this.timer>=this.worldTickFreq){for(;this.timer>this.worldTickFreq;)this.timer-=this.worldTickFreq;this.scene.levels.current.gravityLoop()}}}]),e}(),te=function(e){Object(b.a)(i,e);var t=Object(T.a)(i);function i(){return Object(y.a)(this,i),t.call(this,"GameScene")}return Object(g.a)(i,[{key:"create",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.cameras.main.setPostPipeline(O),this.data.set("custom_scale",_),this.game.scale.scaleMode=h.a.Scale.RESIZE,this.handleScales(),this.createAnimations(),this.levels=new $(this,t.level),this.cameras.main.fadeIn(1e3,0,0,0),this.rules=new ee(this),this.ui=new N(this),this.events.on(h.a.Scenes.Events.SHUTDOWN,(function(){e.rules.destroy(),e.ui.destroy()}))}},{key:"handleScales",value:function(){var e=this,t=this.data.get("custom_scale"),i=new Map;this.clearScalables=function(){i.clear()},this.removeFromScalables=function(e){return i.delete(e)},this.addToScalables=function(e,a){e.setScale(t),i.set(e,a)},this.updateScale=function(e){i.forEach((function(t,i){return null===i||void 0===i?void 0:i.setScale(e)}))},window.addEventListener("resize",(function(){var t=Math.round(window.innerWidth/20*100/20/100*100)/100,i=e.children.getByName("layer_1");if(!i)return!1;var a=i.tilemap;i.setScale(t),e.levels.current.objects.forEach((function(e,i){e.forEach((function(e,s){e.alien&&(e.alien.setScale(t),e.alien.x=a.tileToWorldX(s),e.alien.y=a.tileToWorldY(i))}))})),e.cameras.main.setBounds(0,0,i.width*i.scaleX,i.height*i.scaleY)}))}},{key:"createAnimations",value:function(){this.anims.create({key:"boulder_roll_right",frames:this.anims.generateFrameNumbers("boulder",{frames:[0,1,2,0]}),frameRate:12,repeat:0}),this.anims.create({key:"boulder_roll_left",frames:this.anims.generateFrameNumbers("boulder",{frames:[0,2,1,0]}),frameRate:12,repeat:0}),this.anims.create({key:"boulder_idle",frames:this.anims.generateFrameNumbers("boulder",{frames:[0]}),frameRate:1,repeat:0}),this.anims.create({key:"diamond_idle",frames:this.anims.generateFrameNumbers("pickables",{frames:[0]}),frameRate:1,repeat:0}),this.anims.create({key:"mushroom_idle",frames:this.anims.generateFrameNumbers("pickables",{frames:[3]}),frameRate:1,repeat:0}),this.anims.create({key:"pickaxe_idle",frames:this.anims.generateFrameNumbers("pickables",{frames:[6]}),frameRate:1,repeat:0}),this.anims.create({key:"brave_idle",frames:this.anims.generateFrameNumbers("brave",{frames:[0,0,0,0,0,0,0,0,0,0,1,1,1,0,2,2,2,2,2,2,2,0]}),frameRate:4,repeat:-1}),this.anims.create({key:"brave_idle_pickaxe",frames:this.anims.generateFrameNumbers("brave",{frames:[24,24,24,24,24,24,24,24,24,24,25,25,25,24,26,26,26,26,26,26,26,24]}),frameRate:4,repeat:-1}),this.anims.create({key:"brave_run",frames:this.anims.generateFrameNumbers("brave",{frames:[6,7,8,9]}),frameRate:16,repeat:0}),this.anims.create({key:"brave_run_up",frames:this.anims.generateFrameNumbers("brave",{frames:[42,43,44,45]}),frameRate:16,repeat:0}),this.anims.create({key:"brave_run_down",frames:this.anims.generateFrameNumbers("brave",{frames:[48,49,49,50]}),frameRate:16,repeat:0}),this.anims.create({key:"brave_run_pickaxe",frames:this.anims.generateFrameNumbers("brave",{frames:[12,13,14,15]}),frameRate:16,repeat:0}),this.anims.create({key:"brave_break_pickaxe",frames:this.anims.generateFrameNumbers("brave",{frames:[30,31,31,32,33]}),frameRate:16,repeat:0}),this.anims.create({key:"brave_break_pickaxe_alt",frames:this.anims.generateFrameNumbers("brave",{frames:[36,37,37,38,39]}),frameRate:16,repeat:0}),this.anims.create({key:"brave_push",frames:this.anims.generateFrameNumbers("brave",{frames:[18,18,18,18,19,20,21]}),frameRate:16,repeat:0}),this.anims.create({key:"bat_move",frames:this.anims.generateFrameNumbers("bat",{frames:[0,0,1,1,2,2,2,2,1,1]}),frameRate:20,repeat:-1}),this.anims.create({key:"closeUp_Mary",frames:this.anims.generateFrameNumbers("closeUp",{frames:[0]}),repeat:0}),this.anims.create({key:"closeUp_Marduk",frames:this.anims.generateFrameNumbers("closeUp",{frames:[1]}),repeat:0}),this.anims.create({key:"closeUp_Dwarf",frames:this.anims.generateFrameNumbers("closeUp",{frames:[2]}),repeat:0}),this.anims.create({key:"closeUp_Tiamat",frames:this.anims.generateFrameNumbers("closeUp",{frames:[3]}),repeat:0}),this.anims.create({key:"closeUp_Pickaxe",frames:this.anims.generateFrameNumbers("closeUp",{frames:[4]}),repeat:0}),this.anims.create({key:"closeUp_Mushroom",frames:this.anims.generateFrameNumbers("closeUp",{frames:[5]}),repeat:0}),this.anims.create({key:"closeUp_Diamond",frames:this.anims.generateFrameNumbers("closeUp",{frames:[6]}),repeat:0})}}]),i}(h.a.Scene),ie=function(e){Object(b.a)(i,e);var t=Object(T.a)(i);function i(){return Object(y.a)(this,i),t.call(this,"ConnectorScene")}return Object(g.a)(i,[{key:"preload",value:function(){}},{key:"createAnimations",value:function(){this.anims.create({key:"closeUp_Mary",frames:this.anims.generateFrameNumbers("closeUp",{frames:[0]}),repeat:0}),this.anims.create({key:"closeUp_Marduk",frames:this.anims.generateFrameNumbers("closeUp",{frames:[1]}),repeat:0}),this.anims.create({key:"closeUp_Dwarf",frames:this.anims.generateFrameNumbers("closeUp",{frames:[2]}),repeat:0}),this.anims.create({key:"closeUp_Tiamat",frames:this.anims.generateFrameNumbers("closeUp",{frames:[3]}),repeat:0})}},{key:"getMusicFromName",value:function(e){switch(e){case"cinematic_1":return"swarf_chat_music";default:return"generic_chat_music"}}},{key:"getImageByName",value:function(e){var t,i,a,s;switch(e){default:case"cinematic_1":t=this.add.image(this.cameras.main.width/2,this.cameras.main.height/1.5,"Tiamat"),i=this.cameras.main.width/t.width,a=this.cameras.main.height/t.height,s=Math.max(i,a),t.setScale(4*s).setScrollFactor(0);break;case"cinematic_last":t=this.add.image(this.cameras.main.width/2,this.cameras.main.height/2,"Tiamat"),i=this.cameras.main.width/t.width,a=this.cameras.main.height/t.height,s=Math.max(i,a),t.setScale(s).setScrollFactor(0);break;case"cinematic_last_2":t=this.add.image(this.cameras.main.width/2,this.cameras.main.height/2,"thechild"),i=this.cameras.main.width/t.width,a=this.cameras.main.height/t.height,s=Math.max(i,a),t.setScale(s).setScrollFactor(0)}return t}},{key:"create",value:function(e){var t=e.id,i=e.name;this.currentLevel=t,this.createAnimations();var a=this.getMusicFromName(i);this.environmentMusic=this.sound.add(a,{loop:!0}),this.environmentMusic.play(),new N(this,!0),this.cameras.main.setPostPipeline(O),this.getImageByName(i).name="background_art",this["showDialogLevel_".concat(i)]()}},{key:"showDialogLevel_cinematic_escape",value:function(){var e=this;this.levels={current:{pause:function(){return!1},resume:function(){setTimeout((function(){e.environmentMusic.stop(),e.cameras.main.fade(1e3,0,0,0),e.cameras.main.once("camerafadeoutcomplete",(function(){e.scene.start("GameScene",{level:e.currentLevel+1})}))}),1e3)}}},this.events.emit("dialogue:show",{participants:["closeUp_Marduk","closeUp_Mary"],conversation:[{who:"closeUp_Marduk",text:["Do you feel it Mary?","Do you feel her presence","below?"]},{who:"closeUp_Mary",text:["I do... But what","does it mean?"]},{who:"closeUp_Marduk",text:["That I do not know... But","it does not portend well.","I have learned so much in","so little time. Mary...I","can\u2019t recognize the man","I once was. I felt","bound by obligation,","I was trapped, Mary."]},{who:"closeUp_Mary",text:["It is time, Marduk","we have to escape","from here before","Tiamat stops us"," ","go!!!"]}]})}},{key:"showDialogLevel_cinematic_last_2",value:function(){var e=this;this.levels={current:{pause:function(){e.tweens.add({targets:e.children.getByName("background_art"),alpha:0,duration:500,onComplete:function(){var t=e.getImageByName("cinematic_last_2");t.alpha=0,e.tweens.add({targets:t,alpha:1,duration:500})}})},resume:function(){setTimeout((function(){e.tweens.add({targets:e.environmentMusic,valume:0,duration:500}),e.cameras.main.fade(1e3,0,0,0),e.cameras.main.once("camerafadeoutcomplete",(function(){e.scene.start("CreditsScene")}))}),1e3)}}},this.events.emit("dialogue:show",{participants:["closeUp_Marduk","closeUp_Dwarf"],conversation:[{who:"closeUp_Dwarf",text:["That's not how things work","where I come from. Marduk,","You have been preparing","for this moment since","your life began. Do you","have the courage to","forge your own destiny?"]}]})}},{key:"showDialogLevel_cinematic_last",value:function(){var e=this;this.levels={current:{pause:function(){return!1},resume:function(){setTimeout((function(){e.showDialogLevel_cinematic_last_2()}),1e3)}}},this.events.emit("dialogue:show",{participants:["closeUp_Marduk","closeUp_Tiamat"],conversation:[{who:"closeUp_Marduk",text:["How could you do this? We","are your creations. This","is your land. How could","you lie to us!?","Why have you forsaken us?"]},{who:"closeUp_Tiamat",text:["Life is a cycle. The","catalyst comet is a part","of this cycle: I did not","lie when I said the Comet","was the source of the","earthquakes."]},{who:"closeUp_Tiamat",text:["However: I am a force of","this world. It is through","my actions that things","occur. I am bound to the","will of the comet: for","truly we are one. I am","nature: and this...is","within my nature."]},{who:"closeUp_Tiamat",text:["I may have created","everything, yet still:","there was a natural order","to life that preceded me."]},{who:"closeUp_Tiamat",text:["You are finite in your","perspective Marduk.","Death signifies new","beginnings."," ","This is Destiny."]},{who:"closeUp_Marduk",text:["Who would accept a fate","such as this? We have done","no wrong. We worship and","revere you. We are your","children! Would you","really destroy us?"]},{who:"closeUp_Tiamat",text:["The end was written","in the beginning.","Fate cannot be rewritten."]}]})}},{key:"showDialogLevel_cinematic_1",value:function(){var e=this;this.levels={current:{pause:function(){return!1},resume:function(){setTimeout((function(){e.tweens.add({targets:e.environmentMusic,volume:0,duration:500}),e.cameras.main.fade(1e3,0,0,0),e.cameras.main.once("camerafadeoutcomplete",(function(){e.scene.start("GameScene",{level:e.currentLevel+1})}))}),1e3)}}},this.events.emit("dialogue:show",{participants:["closeUp_Mary","closeUp_Marduk","closeUp_Dwarf"],conversation:[{who:"closeUp_Mary",text:["There you are! I was","worried about you!","Are you okay?"]},{who:"closeUp_Marduk",text:["- marduk has been crying -","Thank Tiamat You\u2019re here!","I made a mistake. I ate","one of the mushrooms. I","don\u2019t feel well\u2026I think I","broke my leg falling from","the surface."]},{who:"closeUp_Mary",text:["Are you going to","throw up!?","Can you stand?"]},{who:"closeUp_Marduk",text:["No\u2026.I don\u2019t think so."]},{who:"closeUp_Mary",text:["What are we going to do","with you."]},{who:"closeUp_Dwarf",text:["You know\u2026..there's","nothing wrong with being","sad or afraid. It\u2019s","nature's way of guiding","us towards a brighter","future."]},{who:"closeUp_Marduk",text:["WHAT ON EARTH IS THAT!?","Don\u2019t patronize me foul","beast."]},{who:"closeUp_Mary",text:["You really need to learn","when to shut your mouth.","Marduk. You have become","rude & foul tempered."]},{who:"closeUp_Dwarf",text:["I mean he\u2019s right.","I am a monster.","I'm... different."]},{who:"closeUp_Mary",text:["You don\u2019t seem like","a monster to me."]},{who:"closeUp_Dwarf",text:["That\u2019s because we're","going to make a deal"]},{who:"closeUp_Marduk",text:["I don\u2019t make deals with...","your kind..."]},{who:"closeUp_Dwarf",text:["But You Will...in time...","things change. People grow.","Even you Marduk. I think","we could be great friends.","In Fact. It Is Prophecy"]}]})}}]),i}(h.a.Scene),ae=function(e){Object(b.a)(i,e);var t=Object(T.a)(i);function i(){return Object(y.a)(this,i),t.call(this,"CreditsScene")}return Object(g.a)(i,[{key:"create",value:function(){this.normalDayMusic=this.sound.add("opening_peace",{loop:!0}),this.normalDayMusic.play(),this.cameras.main.setPostPipeline(O);var e=this.add.image(this.cameras.main.width/2,this.cameras.main.height/2,"theworld"),t=this.cameras.main.width/e.width,i=this.cameras.main.height/e.height,a=Math.max(t,i);e.setScale(a).setScrollFactor(0),e.name="background_art",e.alpha=0,this.tweens.add({targets:e,alpha:1,duration:5e3}),this.add.text(80,10,"THE END",{fontFamily:"GameGirl",fontSize:"10px",fill:"#ffffff"}).setScale(2*t).setPosition(2*t,this.cameras.main.height-80*i).displayHeight=10*i,this.add.text(80,10,"Thanks for playing",{fontFamily:"GameGirl",fontSize:"10px",fill:"#ffffff"}).setScale(.9*t).setPosition(2*t,this.cameras.main.height-30*i).displayHeight=10*i}}]),i}(h.a.Scene),se={width:"100%",height:"100%",type:h.a.AUTO,backgroundColor:"#000000",disableContextMenu:!0,pixelArt:!0,roundPixels:!1,scene:[S,I,te,ie,ae],pipeline:{CRTFilter:O}};var ne=function(){return Object(d.jsx)(f,{args:se})},oe=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,23)).then((function(t){var i=t.getCLS,a=t.getFID,s=t.getFCP,n=t.getLCP,o=t.getTTFB;i(e),a(e),s(e),n(e),o(e)}))},re=i(14);c.a.render(Object(d.jsxs)(r.a.StrictMode,{children:[Object(d.jsx)(ne,{}),Object(d.jsxs)("div",{style:{position:"absolute",bottom:0,right:0,fontSize:10,color:"gray"},children:["v",re.version]})]}),document.getElementById("root")),oe()}},[[22,1,2]]]);
//# sourceMappingURL=main.bc9ffae2.chunk.js.map